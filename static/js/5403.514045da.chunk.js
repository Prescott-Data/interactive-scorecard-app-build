"use strict";(self.webpackChunk_dhis2_app_shell=self.webpackChunk_dhis2_app_shell||[]).push([[5403],{25403:function(e,n,l){l.r(n),l.d(n,{default:function(){return z}});var t=l(21758),r=l(66190),i=l(74968),o=l(65298),a=l(21373),d=l(80629),c=l(83590),s=l(51654),u=l.n(s);function m({selectedItems:e,onClick:n,icon:l,label:i}){const o=l;return t.createElement(d.m,{content:t.createElement("div",null,null===e||void 0===e?void 0:e.map(({displayName:e,name:n,id:l})=>t.createElement("p",{style:{margin:4},key:`cell-analysis-selector-${l}`},null!==n&&void 0!==n?n:e)))},t.createElement("div",{className:"row align-items-center",style:{padding:8,maxWidth:"100%",overflowX:"auto",background:c.T.grey300,borderRadius:4},onClick:()=>{n(!0)}},t.createElement(o,{style:{color:c.T.grey700,margin:"0 4px"}}),t.createElement("p",{style:{fontSize:14,color:c.T.grey900,margin:0}},i,null!==e&&":"),null!==e&&t.createElement("p",{style:{fontSize:14,color:c.T.grey700,margin:0,paddingLeft:4}},r.A.t("{{number}} Selected",{number:null===e||void 0===e?void 0:e.length}))))}m.propTypes={icon:u().any.isRequired,label:u().string.isRequired,selectedItems:u().array.isRequired,onClick:u().func.isRequired};var p=l(72714),v=l(2235),y=l(34207),E=l(24563),g=l(34174),f=l(77337),h=l(42412),b=l(59541),R=l(39435),w=l(65859);function C(){return C=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var l=arguments[n];for(var t in l)({}).hasOwnProperty.call(l,t)&&(e[t]=l[t])}return e},C.apply(null,arguments)}function k({children:e,type:n,index:l}){return t.createElement(R.sx,{draggableId:n,index:l},n=>{var l;return t.createElement("div",C({ref:n.innerRef},n.draggableProps,n.dragHandleProps,{style:{...null===n||void 0===n||null===(l=n.draggableProps)||void 0===l?void 0:l.style,cursor:"move"}}),e)})}function x(){return x=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var l=arguments[n];for(var t in l)({}).hasOwnProperty.call(l,t)&&(e[t]=l[t])}return e},x.apply(null,arguments)}function A({children:e,type:n}){return t.createElement(R.gL,{droppableId:n},(n,l)=>{var r;return t.createElement("div",x({},n.droppableProps,{ref:n.innerRef,style:{...null===n||void 0===n||null===(r=n.droppableProps)||void 0===r?void 0:r.style,height:"100%",width:"100%",minHeight:100,border:l.isDragging&&`2px dashed ${c.T.grey700}`}}),e,n.placeholder)})}k.propTypes={children:u().node.isRequired,index:u().number.isRequired,type:u().oneOf([w.Kg.OU_LAYOUT,w.Kg.DX_LAYOUT,w.Kg.PE_LAYOUT]).isRequired},A.propTypes={children:u().node.isRequired,type:u().oneOf(["column","row","filter","series","category"]).isRequired};var I=l(31594);function S({layout:e,onLayoutChange:n}){var l,i;const{column:o,row:a,series:d,category:c,filter:s}=null!==e&&void 0!==e?e:{},u=({source:e,destination:l})=>{try{(0,b.isEmpty)(e)||(0,b.isEmpty)(l)||((null===e||void 0===e?void 0:e.droppableId)===(null===l||void 0===l?void 0:l.droppableId)?n(n=>{const t=(0,I.cq)(n[e.droppableId],null===e||void 0===e?void 0:e.index,null===l||void 0===l?void 0:l.index);return{...n,[e.droppableId]:t}}):n(n=>{const t=n[e.droppableId],r=n[l.droppableId],{destinationList:i,sourceList:o}=(0,I.pk)({sourceList:t,destinationList:r},{sourceIndex:null===e||void 0===e?void 0:e.index,destinationIndex:null===l||void 0===l?void 0:l.index});return{...n,[e.droppableId]:o,[l.droppableId]:i}}))}catch(t){console.error(t)}};return t.createElement("div",null,t.createElement(R.JY,{onDragEnd:u},t.createElement("div",{className:"grid-2"},t.createElement("div",{className:"column bordered p-8"},t.createElement("p",null,o?r.A.t("Column"):r.A.t("Series")),t.createElement(A,{onDrop:u,type:o?"column":"series"},null===(l=null!==o&&void 0!==o?o:d)||void 0===l?void 0:l.map((e,n)=>{var l,r;return t.createElement(k,{index:n,key:`${e}`,type:e},t.createElement(h.v,{icon:null===w.my||void 0===w.my||null===(l=w.my[e])||void 0===l?void 0:l.icon,className:"w-100"},null===w.my||void 0===w.my||null===(r=w.my[e])||void 0===r?void 0:r.displayName))}))),t.createElement("div",{className:"column bordered p-8"},t.createElement("p",null,a?r.A.t("Row"):r.A.t("Category")),t.createElement(A,{onDrop:u,type:a?"row":"category"},null===(i=null!==a&&void 0!==a?a:c)||void 0===i?void 0:i.map((e,n)=>{var l,r;return t.createElement(k,{index:n,key:`${e}`,type:e},t.createElement(h.v,{icon:null===w.my||void 0===w.my||null===(l=w.my[e])||void 0===l?void 0:l.icon,className:"w-100"},null===w.my||void 0===w.my||null===(r=w.my[e])||void 0===r?void 0:r.displayName))}))),t.createElement("div",{className:"column bordered p-8"},t.createElement("p",null,r.A.t("Filter")),t.createElement(A,{onDrop:u,type:"filter"},null===s||void 0===s?void 0:s.map((e,n)=>{var l,r;return t.createElement(k,{index:n,key:`${e}`,type:e},t.createElement(h.v,{icon:null===w.my||void 0===w.my||null===(l=w.my[e])||void 0===l?void 0:l.icon,className:"w-100"},null===w.my||void 0===w.my||null===(r=w.my[e])||void 0===r?void 0:r.displayName))}))))))}function q({onClose:e,onSelect:n,initialValue:l}){const[r,i]=(0,t.useState)(l);return t.createElement(p.a,{large:!0,onClose:e},t.createElement(v.w,null,"Select Layout(s)"),t.createElement(y.$,null,t.createElement(S,{onLayoutChange:i,layout:r})),t.createElement(E.N,null,t.createElement(g.v,null,t.createElement(f.$,{onClick:e},"Cancel"),t.createElement(f.$,{primary:!0,onClick:()=>{n(r),e()}},"Update"))))}function N(){const[e,n]=(0,o.useRecoilState)(a.W),[l,d]=(0,t.useState)(!1);return t.createElement("div",{style:{width:"30%"}},t.createElement(m,{icon:i.A,onClick:d,selectedItems:null,label:r.A.t("Layout")}),l&&t.createElement(q,{initialValue:e,onClose:()=>d(!1),onSelect:n}))}S.propTypes={layout:u().object.isRequired,onLayoutChange:u().func.isRequired},q.propTypes={initialValue:u().object.isRequired,onClose:u().func.isRequired,onSelect:u().func.isRequired};var L=l(10103),T=l(76483),O=l(73459),P=l(84161);function U(){const[e,n]=(0,o.useRecoilState)(O.AJ),l=(0,o.useRecoilValue)(P.cT),i=(0,o.useRecoilValue)(P.X),[a,d]=(0,t.useState)(!1),c=(0,t.useMemo)(()=>(0,I.Sx)(e,{orgUnitGroups:i,orgUnitLevels:l}),[i,l,e]);return t.createElement("div",{className:"pr-16",style:{width:"30%"}},t.createElement(m,{label:r.A.t("Organisation Unit(s)"),icon:T.A,onClick:d,selectedItems:c}),a&&t.createElement(L.ng,{showGroups:!0,showLevels:!0,showUserOptions:!0,onClose:()=>d(!1),value:e,hide:!a,onUpdate:e=>{d(!1),n(e)}}))}var V=l(85237),_=l(24838),$=l(1685);function j(){var e;const[n,l]=(0,o.useRecoilState)(_.fz),{periods:i}=null!==n&&void 0!==n?n:{},[a,d]=(0,t.useState)(!1),{calendar:c}=null!==(e=(0,o.useRecoilValue)(P.SN))&&void 0!==e?e:{};return t.createElement("div",{className:"pr-16",style:{width:"30%"}},t.createElement(m,{label:r.A.t("Period(s)"),icon:V.A,onClick:d,selectedItems:i}),a&&t.createElement(L.o0,{enablePeriodSelector:!0,selectedPeriods:i.map(({id:e})=>e),calendar:c,hide:!a,onClose:()=>d(!1),excludedPeriodTypes:w.qR,onUpdate:e=>{l({periods:e.map(e=>$.qk.getPeriodById(e))}),d(!1)}}))}function z(){return t.createElement("div",{className:"row space-between"},t.createElement(U,null),t.createElement(j,null),t.createElement(N,null))}},74968:function(e,n,l){var t=l(77771),r=l(93346);n.A=void 0;var i=r(l(21758)),o=(0,t(l(34425)).default)(i.createElement("path",{d:"M6 5H3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm14 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm-7 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1z"}),"ViewWeek");n.A=o}}]);
//# sourceMappingURL=5403.514045da.chunk.js.map