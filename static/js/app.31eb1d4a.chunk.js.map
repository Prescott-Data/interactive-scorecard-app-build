{"version":3,"file":"static/js/app.31eb1d4a.chunk.js","mappings":"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","sources":["../../../../shared/build/es/components/Errors/FullPageError.js","../../../../shared/build/es/hooks/useOrganisationUnits.js","../../../../shared/build/es/hooks/useMediaQuery.js","../../../../shared/build/es/hooks/datastore/useScorecardsSummary.js","../../../../shared/build/es/hooks/datastore/useScorecard.js","../../../../shared/build/es/hooks/datastore/useAllScorecards.js","../../../../shared/build/es/hooks/useInitApp.js","../../../../shared/build/es/hooks/useForceUpdate.js","../../../../shared/build/es/hooks/useSetDataEngine.js","../../../../shared/build/es/utils/dataSource.js","../../../../shared/build/es/utils/dnd.js","../../../../shared/build/es/utils/utils.js","../../../../shared/build/es/utils/migrate.js","../../../../shared/build/es/utils/orgUnit.js","../../../../shared/build/es/utils/scorecard.js","../../../../shared/build/es/utils/customFunctions.js","../../../../shared/build/es/utils/table.js","../../../../shared/build/es/utils/validator.js","../../../../shared/build/es/models/base.js","../../../../shared/build/es/models/dataSelection.js","../../../../shared/build/es/models/orgUnitSelection.js","../../../../shared/build/es/models/selectionItem.js","../../../../shared/build/es/models/periodSelection.js","../../../../shared/build/es/models/scorecardAccess.js","../../../../shared/build/es/models/scorecardOptions.js","../../../../shared/build/es/models/scorecard.js","../../../../shared/build/es/models/scorecardData.js","../../../../shared/build/es/models/scorecardIndicator.js","../../../../shared/build/es/models/scorecardIndicatorHolder.js","../../../../shared/build/es/models/scorecardLegend.js","../../../../shared/build/es/models/scorecardIndicatorGroup.js","../../../../shared/build/es/services/getCustomFunctions.js","../../../../shared/build/es/services/getScorecardCellData.js","../../../../shared/build/es/services/getScorecardData.js","../../../../shared/build/es/services/orgUnit.js","../../../../shared/build/es/services/getSystemSettings.js","../../../../shared/build/es/services/getScorecard.js","../../../../shared/build/es/services/getScorecardSummary.js","../../../../shared/build/es/components/ScorecardCell/Components/Arrows.js","../../../../shared/build/es/components/ScorecardView/components/SpecificTargetsLibrary/components/SpecificTargetView/index.js","webpack://@dhis2/app-shell/../../../shared/build/es/components/ScorecardView/components/SpecificTargetsLibrary/SpecificTargetsLibrary.module.css?35e6","../../../../shared/build/es/components/ScorecardView/components/SpecificTargetsLibrary/index.js","../../../../shared/build/es/constants/config.js","../../../../shared/build/es/constants/alma.js","../../../../shared/build/es/constants/calendar.js","../../../../shared/build/es/constants/chart-types.constant.js","../../../../shared/build/es/constants/download.js","../../../../shared/build/es/constants/draggables.js","../../../../shared/build/es/constants/form.js","../../../../shared/build/es/constants/layout.js","../../../../shared/build/es/constants/migration.js","../../../../shared/build/es/constants/orientation.js","../../../../shared/build/es/constants/period.js","../../../../shared/build/es/constants/scorecardAccessType.js","../../../../shared/build/es/constants/selection.js","../../../../shared/build/es/constants/table.js","../../../../shared/build/es/constants/tableSort.js","../../../../shared/build/es/constants/averageDisplayType.js","../../../../shared/build/es/constants/help/options.js","../../../../shared/build/es/constants/help/scorecardList.js","../../../../shared/build/es/constants/help/scorecardManagement.js","../../../../shared/build/es/constants/help/scorecardView.js","../../../../shared/build/es/constants/tooltips/scorecardManagement.js","../../../../shared/build/es/components/Loaders/FullPageLoader.js","../../../../shared/build/es/components/Errors/AccessDeniedPage.js","../../../../shared/build/es/components/ScorecardView/components/EmptyOrgUnitsOrPeriod.js","../../../../shared/build/es/components/ScorecardView/components/HighlightedIndicatorsView/Components/HighlightedIndicator.js","../../../../shared/build/es/components/ScorecardView/components/HighlightedIndicatorsView/index.js","../../../../shared/build/es/components/ScorecardView/components/Download/Components/DownloadMenu.js","../../../../shared/build/es/components/ScorecardView/components/ScorecardViewHeader/services/download.js","../../../../shared/build/es/components/ScorecardView/components/ScorecardViewHeader/hooks/useDownload.js","../../../../shared/build/es/components/Help/index.js","../../../../shared/build/es/components/ScorecardOptionsForm/index.js","../../../../shared/build/es/components/modals/ScorecardOptionsModal/index.js","../../../../shared/build/es/components/ScorecardView/components/ScorecardActions.js","../../../../shared/build/es/components/ScorecardView/components/ScorecardHeader/index.js","../../../../shared/build/es/components/SelectionWrapper/index.js","../../../../shared/build/es/components/ScorecardView/components/ScorecardViewHeader/index.js","../../../../shared/build/es/components/ScorecardView/index.js","../../../../shared/build/es/components/Loaders/ContainerLoader.js","../../../../shared/build/es/components/ScorecardCell/Components/SingleCellSvg.js","../../../../shared/build/es/components/ScorecardCell/Components/LinkedCellSvg.js","../../../../shared/build/es/components/CustomForm/models/formField.model.js","../../../../shared/build/es/components/icons/ErrorIcon.js","../../../../shared/build/es/components/Loaders/ModalLoader.js","../../../../shared/build/es/state/engine.js","../../../../shared/build/es/state/system.js","../../../../shared/build/es/state/user.js","../../../../shared/build/es/state/window.js","../../../../shared/build/es/state/scorecard.js","../../../../shared/build/es/state/period.js","../../../../shared/build/es/state/orgUnit.js","../../../../shared/build/es/state/validators.js","../../../../shared/build/es/state/router.js","../../../../shared/build/es/state/help.js","../../../../shared/build/es/state/customFunctions.js","../../../../shared/build/es/state/highlightedIndicators.js","D2App/cacheBuster.js","D2App/modules/Router/index.js","D2App/locales/index.js","D2App/App.js","webpack://@dhis2/app-shell/./src/D2App/App.module.css?85cb","D2App/Main.js"],"sourcesContent":["import i18n from \"@dhis2/d2-i18n\";\nimport { Button, ButtonStrip, CenteredContent, colors, Modal, ModalActions, ModalContent, ModalTitle } from \"@dhis2/ui\";\nimport ErrorIcon from \"@material-ui/icons/Error\";\nimport PropTypes from \"prop-types\";\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nfunction ErrorDialog({\n  error,\n  onClose\n}) {\n  const {\n    details\n  } = error !== null && error !== void 0 ? error : {};\n  return /*#__PURE__*/React.createElement(Modal, {\n    position: \"middle\",\n    onClose: onClose\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t(\"Error Details\")), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      background: colors.grey050,\n      padding: 24,\n      border: `1px solid ${colors.grey300}`\n    }\n  }, /*#__PURE__*/React.createElement(\"code\", {\n    style: {\n      fontSize: 14\n    }\n  }, JSON.stringify(details)))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(Button, {\n    onClick: onClose\n  }, i18n.t(\"Close\"))));\n}\nErrorDialog.propTypes = {\n  error: PropTypes.object.isRequired,\n  onClose: PropTypes.func.isRequired\n};\nexport default function FullPageError({\n  error,\n  resetErrorBoundary\n}) {\n  var _error$title, _error$details;\n  const [errorDialogShow, setErrorDialogShow] = useState(false);\n  const history = useHistory();\n  const onRefresh = () => {\n    if (resetErrorBoundary) {\n      resetErrorBoundary();\n    } else {\n      window.location.reload();\n    }\n  };\n  const onGoToHome = () => {\n    if (history) {\n      history === null || history === void 0 ? void 0 : history.replace(\"/\");\n    } else {\n      onRefresh();\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column center \",\n    style: {\n      height: \"100%\",\n      textAlign: \"center\"\n    }\n  }, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column align-items-center\"\n  }, /*#__PURE__*/React.createElement(ErrorIcon, {\n    style: {\n      color: colors.grey700,\n      fontSize: 64\n    },\n    fontSize: \"large\"\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    style: {\n      color: colors.grey700,\n      margin: 8\n    }\n  }, (_error$title = error === null || error === void 0 ? void 0 : error.title) !== null && _error$title !== void 0 ? _error$title : i18n.t(\"Something Went Wrong\")), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: colors.grey700\n    }\n  }, typeof error === \"string\" ? error : error === null || error === void 0 ? void 0 : error.message), /*#__PURE__*/React.createElement(ButtonStrip, {\n    center: true\n  }, (error === null || error === void 0 ? void 0 : (_error$details = error.details) === null || _error$details === void 0 ? void 0 : _error$details.httpStatusCode) === 404 ? /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: onGoToHome\n  }, i18n.t(\"Back to scorecard list\")) : /*#__PURE__*/React.createElement(Button, {\n    onClick: onRefresh\n  }, i18n.t(\"Refresh\")), (error === null || error === void 0 ? void 0 : error.details) && /*#__PURE__*/React.createElement(Button, {\n    onClick: () => setErrorDialogShow(true)\n  }, i18n.t(\"View error logs\")))), errorDialogShow && /*#__PURE__*/React.createElement(ErrorDialog, {\n    error: error,\n    onClose: () => setErrorDialogShow(false)\n  })));\n}\nFullPageError.propTypes = {\n  error: PropTypes.any,\n  resetErrorBoundary: PropTypes.func\n};","import { useDataQuery } from \"@dhis2/app-runtime\";\nimport { debounce, isEmpty } from \"lodash\";\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useRecoilValueLoadable } from \"recoil\";\nimport { OrgUnitChildren } from \"../state\";\nexport function useOrganisationUnitChildren(orgUnitId = \"\") {\n  const [id, setId] = useState(orgUnitId);\n  const {\n    state,\n    contents\n  } = useRecoilValueLoadable(OrgUnitChildren(id));\n  return {\n    loading: state === \"loading\",\n    orgUnits: state === \"hasValue\" ? contents : [],\n    error: state === \"hasError\" ? contents : undefined,\n    setId\n  };\n}\nconst orgUnitSearchQuery = {\n  nameQuery: {\n    resource: \"organisationUnits\",\n    params: ({\n      keyword\n    }) => ({\n      filter: [`displayName:ilike:${keyword}`],\n      fields: [\"id\", \"displayName\", \"path\", \"level\"]\n    })\n  },\n  idQuery: {\n    resource: \"organisationUnits\",\n    params: ({\n      keyword\n    }) => ({\n      filter: [`id:ilike:${keyword}`],\n      fields: [\"id\", \"displayName\", \"path\", \"level\"]\n    })\n  }\n};\nfunction formatSearchedOrgUnits(orgUnits) {\n  return orgUnits.map(orgUnit => {\n    return {\n      ...orgUnit,\n      hierarchy: orgUnit.displayName\n    };\n  });\n}\nexport async function searchOrganisationUnit(keyword, engine) {\n  if (!isEmpty(keyword)) {\n    const data = await engine.query(orgUnitSearchQuery, {\n      variables: {\n        keyword\n      }\n    });\n    if (!isEmpty(data)) {\n      var _data$idQuery$organis, _data$idQuery, _data$nameQuery$organ, _data$nameQuery;\n      const idResponse = (_data$idQuery$organis = data === null || data === void 0 ? void 0 : (_data$idQuery = data.idQuery) === null || _data$idQuery === void 0 ? void 0 : _data$idQuery.organisationUnits) !== null && _data$idQuery$organis !== void 0 ? _data$idQuery$organis : [];\n      const nameResponse = (_data$nameQuery$organ = data === null || data === void 0 ? void 0 : (_data$nameQuery = data.nameQuery) === null || _data$nameQuery === void 0 ? void 0 : _data$nameQuery.organisationUnits) !== null && _data$nameQuery$organ !== void 0 ? _data$nameQuery$organ : [];\n      return formatSearchedOrgUnits([...idResponse, ...nameResponse]);\n    }\n  }\n  return [];\n}\nexport function useSearchOrganisationUnit() {\n  const [keyword, setKeyword] = useState();\n  const {\n    data,\n    error,\n    loading,\n    refetch\n  } = useDataQuery(orgUnitSearchQuery, {\n    lazy: true\n  });\n  const updateKeyword = useRef(debounce(setKeyword, 1000, {\n    trailing: true,\n    leading: false\n  }));\n  const orgUnits = useMemo(() => {\n    if (!isEmpty(data)) {\n      var _data$idQuery$organis2, _data$idQuery2, _data$nameQuery$organ2, _data$nameQuery2;\n      const idResponse = (_data$idQuery$organis2 = data === null || data === void 0 ? void 0 : (_data$idQuery2 = data.idQuery) === null || _data$idQuery2 === void 0 ? void 0 : _data$idQuery2.organisationUnits) !== null && _data$idQuery$organis2 !== void 0 ? _data$idQuery$organis2 : [];\n      const nameResponse = (_data$nameQuery$organ2 = data === null || data === void 0 ? void 0 : (_data$nameQuery2 = data.nameQuery) === null || _data$nameQuery2 === void 0 ? void 0 : _data$nameQuery2.organisationUnits) !== null && _data$nameQuery$organ2 !== void 0 ? _data$nameQuery$organ2 : [];\n      return [...idResponse, ...nameResponse];\n    }\n    return [];\n  }, [data]);\n  useEffect(() => {\n    if (!isEmpty(keyword)) {\n      refetch({\n        keyword\n      });\n    }\n  }, [keyword]);\n  return {\n    orgUnits,\n    error,\n    loading,\n    updateKeyword: updateKeyword.current\n  };\n}","import { useLayoutEffect, useState } from \"react\";\nfunction getWindowDimensions() {\n  const {\n    innerWidth: width,\n    innerHeight: height\n  } = window;\n  return {\n    width: width > 1366 ? width : 1366,\n    height: (height > 763 ? height : 763) - 48 //considering the appbar\n  };\n}\nexport default function useMediaQuery() {\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\n  useLayoutEffect(() => {\n    function handleResize() {\n      setWindowDimensions(getWindowDimensions());\n    }\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n  return windowDimensions;\n}","import { useDataMutation } from \"@dhis2/app-runtime\";\nimport produce from \"immer\";\nimport { cloneDeep, findIndex } from \"lodash\";\nimport { useCallback, useState } from \"react\";\nimport { useRecoilCallback, useRecoilState } from \"recoil\";\nimport { DATASTORE_ENDPOINT, DATASTORE_SCORECARD_SUMMARY_KEY } from \"../../constants\";\nimport { ScorecardSummaryState } from \"../../state\";\nconst updateMutation = {\n  type: \"update\",\n  resource: DATASTORE_ENDPOINT,\n  id: DATASTORE_SCORECARD_SUMMARY_KEY,\n  data: ({\n    data\n  }) => data\n};\nexport default function useScorecardsSummary() {\n  const [executionError, setExecutionError] = useState();\n  const [summary, setSummary] = useRecoilState(ScorecardSummaryState);\n  const [update, {\n    error: updateError,\n    loading: updateLoading\n  }] = useDataMutation(updateMutation);\n  const addSingleScorecardSummary = useRecoilCallback(({\n    set\n  }) => async updatedSummary => {\n    try {\n      var _cloneDeep;\n      const updatedList = (_cloneDeep = cloneDeep(summary)) !== null && _cloneDeep !== void 0 ? _cloneDeep : [];\n      updatedList.push(updatedSummary);\n      await update({\n        data: updatedList\n      });\n      set(ScorecardSummaryState, () => updatedList);\n    } catch (e) {\n      // setExecutionError(e);\n      console.error(e);\n    }\n  }, [summary, update]);\n  const updateSingleScorecardSummary = useCallback(async (id, updatedSummary) => {\n    try {\n      var _cloneDeep2;\n      const updatedList = (_cloneDeep2 = cloneDeep(summary)) !== null && _cloneDeep2 !== void 0 ? _cloneDeep2 : [];\n      updatedList.splice(findIndex(updatedList, [\"id\", id]), 1, updatedSummary);\n      await update({\n        data: updatedList\n      });\n      setSummary(updatedList);\n    } catch (e) {\n      setExecutionError(e);\n    }\n  }, [setSummary, summary, update]);\n  const removeSingleScorecardSummary = useCallback(async id => {\n    try {\n      const updatedList = produce(summary, draft => {\n        draft.splice(findIndex(draft, [\"id\", id]), 1);\n      });\n      await update({\n        data: updatedList\n      });\n      setSummary(updatedList);\n    } catch (e) {\n      console.error(e);\n      setExecutionError(e);\n    }\n  }, [setSummary, summary, update]);\n  return {\n    summary,\n    error: executionError !== null && executionError !== void 0 ? executionError : updateError,\n    loading: updateLoading,\n    updateSingleScorecardSummary,\n    removeSingleScorecardSummary,\n    addSingleScorecardSummary\n  };\n}","import { useDataEngine, useDataMutation, useDataQuery } from \"@dhis2/app-runtime\";\nimport { useEffect, useState } from \"react\";\nimport { useSetRecoilState } from \"recoil\";\nimport useScorecardsSummary from \"./useScorecardsSummary\";\nimport { DATASTORE_ENDPOINT } from \"../../constants\";\nimport { ScorecardConfState, ScorecardRequestId } from \"../../state\";\nimport { generateCreateMutation, generateScorecardSummary } from \"../../utils\";\nconst query = {\n  scorecard: {\n    resource: DATASTORE_ENDPOINT,\n    id: ({\n      id\n    }) => id\n  }\n};\nconst updateMutation = {\n  type: \"update\",\n  resource: DATASTORE_ENDPOINT,\n  id: ({\n    id\n  }) => id,\n  data: ({\n    data\n  }) => data\n};\nconst deleteMutation = {\n  type: \"delete\",\n  resource: DATASTORE_ENDPOINT,\n  id: ({\n    id\n  }) => id\n};\nexport function useDeleteScorecard(id) {\n  var _ref;\n  const [executionError, setExecutionError] = useState();\n  const [removeMutate, {\n    loading,\n    error: removeError\n  }] = useDataMutation(deleteMutation, {\n    variables: {\n      id\n    }\n  });\n  const {\n    removeSingleScorecardSummary,\n    error\n  } = useScorecardsSummary();\n  const remove = async () => {\n    try {\n      await removeMutate({\n        id\n      });\n      await removeSingleScorecardSummary(id);\n    } catch (e) {\n      console.error(e);\n      setExecutionError(e);\n    }\n  };\n  return {\n    remove,\n    error: (_ref = removeError !== null && removeError !== void 0 ? removeError : executionError) !== null && _ref !== void 0 ? _ref : error,\n    loading\n  };\n}\nexport function useUpdateScorecard(id) {\n  const setScorecardRequestId = useSetRecoilState(ScorecardRequestId(id));\n  const [updateMutate, {\n    loading\n  }] = useDataMutation(updateMutation, {\n    variables: {\n      id\n    }\n  });\n  const {\n    updateSingleScorecardSummary\n  } = useScorecardsSummary();\n  const update = async data => {\n    const scorecardSummary = generateScorecardSummary(data);\n    await updateSingleScorecardSummary(id, scorecardSummary);\n    await updateMutate({\n      id,\n      data\n    });\n    setScorecardRequestId(prevState => prevState + 1);\n  };\n  return {\n    update,\n    loading\n  };\n}\nexport function useAddScorecard() {\n  const engine = useDataEngine();\n  const {\n    addSingleScorecardSummary\n  } = useScorecardsSummary();\n  const add = async data => {\n    const scorecardSummary = generateScorecardSummary(data);\n    await engine.mutate(generateCreateMutation(data === null || data === void 0 ? void 0 : data.id), {\n      variables: {\n        data\n      }\n    });\n    await addSingleScorecardSummary(scorecardSummary);\n  };\n  return {\n    add\n  };\n}\nexport default function useScorecard(scorecardId) {\n  const setScorecardState = useSetRecoilState(ScorecardConfState(scorecardId));\n  const {\n    loading,\n    data,\n    error,\n    refetch\n  } = useDataQuery(query, {\n    lazy: true\n  });\n  const set = async id => {\n    await refetch({\n      id\n    });\n  };\n  useEffect(() => {\n    function setState() {\n      if (data !== null && data !== void 0 && data.scorecard) {\n        setScorecardState(() => data === null || data === void 0 ? void 0 : data.scorecard);\n      }\n    }\n    setState();\n  }, [data]);\n  return {\n    loading,\n    error,\n    set\n  };\n}","import { useDeleteScorecard } from \"./useScorecard\";\nimport useScorecardsSummary from \"./useScorecardsSummary\";\nexport default function useAllScorecards() {\n  const {\n    removeSingleScorecardSummary,\n    error,\n    loading,\n    summary,\n    updateLoading\n  } = useScorecardsSummary();\n  const {\n    remove,\n    loading: removeLoading,\n    error: removeError\n  } = useDeleteScorecard(\"\", {\n    lazy: true\n  });\n  const deleteScorecard = async id => {\n    await remove({\n      id\n    });\n    await removeSingleScorecardSummary(id);\n  };\n  return {\n    scorecards: summary,\n    error: error !== null && error !== void 0 ? error : removeError,\n    loading,\n    removeLoading: removeLoading || updateLoading,\n    remove: deleteScorecard\n  };\n}","import { useConfig, useDataEngine } from \"@dhis2/app-runtime\";\nimport { Fn } from \"@iapps/function-analytics\";\nimport { useWebVitals } from \"react-web-vitals\";\nimport { EngineState, ScreenDimensionState } from \"../state\";\nimport { getWindowDimensions } from \"../utils\";\nexport default function useInitApp() {\n  useWebVitals();\n  const {\n    baseUrl,\n    apiVersion\n  } = useConfig();\n  Fn.init({\n    baseUrl: `${baseUrl}/api/${apiVersion}/`\n  });\n  const engine = useDataEngine();\n  function initializeState({\n    set\n  }) {\n    set(ScreenDimensionState, getWindowDimensions());\n    set(EngineState, engine);\n  }\n  return {\n    initializeState\n  };\n}","import { useSetRecoilState } from \"recoil\";\nimport { ScorecardForceUpdateState } from \"../state\";\nexport default function useForceUpdate(scorecardId) {\n  const setForceUpdateState = useSetRecoilState(ScorecardForceUpdateState(scorecardId));\n  const forceUpdate = () => {\n    setForceUpdateState(prevState => prevState + 1);\n  };\n  return {\n    forceUpdate\n  };\n}","import { useDataEngine } from \"@dhis2/app-runtime\";\nimport { useEffect } from \"react\";\nimport { useSetRecoilState } from \"recoil\";\nimport { EngineState } from \"../state\";\nexport default function useSetDataEngine() {\n  const setEngine = useSetRecoilState(EngineState);\n  const engine = useDataEngine();\n  useEffect(() => {\n    setEngine(engine);\n  }, []);\n}","const identifiableObjectsQuery = {\n  object: {\n    resource: \"identifiableObjects\",\n    id: ({\n      id\n    }) => id\n  }\n};\nfunction getResourceFromHref(href) {\n  const resource = href.split(\"/\");\n  return resource[resource.length - 2];\n}\nfunction getTypeFromResource(resource) {\n  switch (resource) {\n    case \"indicators\":\n      return \"indicator\";\n    case \"dataElements\":\n      return \"dataElement\";\n    case \"dataSets\":\n      return \"dataSet\";\n    case \"programIndicators\":\n      return \"programIndicator\";\n    case \"eventDataItems\":\n      return \"dataElement\";\n    default:\n      return resource;\n  }\n}\nexport async function getDataSourceDetails(engine, dataSourceId) {\n  try {\n    var _await$engine$query;\n    const {\n      object\n    } = (_await$engine$query = await engine.query(identifiableObjectsQuery, {\n      variables: {\n        id: dataSourceId\n      }\n    })) !== null && _await$engine$query !== void 0 ? _await$engine$query : {};\n    if (object.href) {\n      var _object$displayName;\n      const resource = getResourceFromHref(object.href);\n      return {\n        type: getTypeFromResource(resource),\n        name: (_object$displayName = object.displayName) !== null && _object$displayName !== void 0 ? _object$displayName : object.name\n      };\n    }\n    return null;\n  } catch (e) {\n    return null;\n  }\n}","export function updateListFromDragAndDrop(groups, sourceIndex, destinationIndex) {\n  if (!isNaN(destinationIndex) && !isNaN(sourceIndex)) {\n    const value = groups[sourceIndex];\n    const newGroupList = [...groups];\n    newGroupList.splice(sourceIndex, 1);\n    newGroupList.splice(destinationIndex, 0, value);\n    return newGroupList;\n  }\n  return groups;\n}\nexport function updateListsFromDragAndDrop({\n  sourceList,\n  destinationList\n}, {\n  sourceIndex,\n  destinationIndex\n}) {\n  if (!isNaN(destinationIndex) && !isNaN(sourceIndex)) {\n    const value = sourceList[sourceIndex];\n    const newSourceList = [...sourceList];\n    const newDestinationList = [...destinationList];\n    newSourceList.splice(sourceIndex, 1);\n    newDestinationList.splice(destinationIndex, 0, value);\n    return {\n      destinationList: newDestinationList,\n      sourceList: newSourceList\n    };\n  }\n}","import { capitalize, compact, find, flattenDeep, head, intersectionBy, isEmpty, last, reduce, snakeCase, sortBy, truncate, uniqBy } from \"lodash\";\nimport { ScorecardLegend } from \"../models\";\nimport { DefaultAuthority, TableSort } from \"../constants\";\nexport function getWindowDimensions() {\n  const {\n    innerWidth: width,\n    innerHeight: height\n  } = window;\n  return {\n    width: width > 1366 ? width : 1366,\n    height: (height > 763 ? height : 763) - 48 //considering the appbar\n  };\n}\nexport function getDataSourceShortName(name = \"\") {\n  return snakeCase(name).split(\"_\").map(s => capitalize(s)[0]).join(\"\");\n}\nexport function uid() {\n  const letters = \"abcdefghijklmnopqrstuvwxyz\" + \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n  const allowedChars = \"0123456789\" + letters;\n  const NUMBER_OF_CODEPOINTS = allowedChars.length;\n  const CODESIZE = 11;\n  let uid;\n  uid = letters.charAt(Math.random() * letters.length);\n  for (let i = 1; i < CODESIZE; ++i) {\n    uid += allowedChars.charAt(Math.random() * NUMBER_OF_CODEPOINTS);\n  }\n  return uid;\n}\nexport function generateRandomValues(max) {\n  const maxNo = max || 100;\n  return Math.floor(Math.random() * maxNo);\n}\nexport function generateLegendDefaults(legendDefinitions = [], weight, highIsGood = true) {\n  let definitions = legendDefinitions;\n  if (!highIsGood) {\n    definitions = definitions.reverse();\n  }\n  if (!isEmpty(definitions)) {\n    var _definitions;\n    const actualWeight = weight !== null && weight !== void 0 ? weight : 100; //sets 100 as the default weight\n    const range = actualWeight / ((_definitions = definitions) === null || _definitions === void 0 ? void 0 : _definitions.length);\n    const values = [];\n    let legendDefinitionIterator = definitions.length - 1;\n    for (let i = 0; i < actualWeight; i += range) {\n      const {\n        id\n      } = definitions[legendDefinitionIterator];\n      values.push(new ScorecardLegend({\n        startValue: Math.floor(i),\n        endValue: Math.floor(i + range),\n        legendDefinitionId: id\n      }));\n      legendDefinitionIterator--;\n    }\n    return values;\n  }\n  return [];\n}\nexport function reverseLegends(legends) {}\nexport function specificTargetsSet(dataSources) {\n  return reduce(dataSources, (isSet, dataSource) => {\n    return isSet || dataSource.specificTargetsSet;\n  }, false);\n}\nexport function getHoldersFromGroups(dataGroups = []) {\n  var _dataGroups$map;\n  return flattenDeep((_dataGroups$map = dataGroups === null || dataGroups === void 0 ? void 0 : dataGroups.map(({\n    dataHolders\n  }) => dataHolders)) !== null && _dataGroups$map !== void 0 ? _dataGroups$map : []);\n}\nexport function getDataSourcesFromGroups(dataGroups) {\n  const dataHolders = compact(getHoldersFromGroups(dataGroups));\n  return flattenDeep(dataHolders === null || dataHolders === void 0 ? void 0 : dataHolders.map(({\n    dataSources\n  }) => dataSources));\n}\nexport function getDataSourcesDisplayName(dataSources) {\n  var _head, _last, _head2;\n  return (dataSources === null || dataSources === void 0 ? void 0 : dataSources.length) > 1 ? `${(_head = head(dataSources)) === null || _head === void 0 ? void 0 : _head.label} / ${(_last = last(dataSources)) === null || _last === void 0 ? void 0 : _last.label}` : `${(_head2 = head(dataSources)) === null || _head2 === void 0 ? void 0 : _head2.label}`;\n}\nexport function updatePager(pager, itemListLength) {\n  const {\n    page,\n    pageSize\n  } = pager;\n  return {\n    page,\n    pageSize,\n    pageCount: Math.ceil(itemListLength / pageSize),\n    total: itemListLength\n  };\n}\nexport function truncateDescription(description = \"\", maxLength = 100) {\n  return truncate(description, {\n    length: maxLength\n  });\n}\nfunction getOrgUnitLevelId(orgUnitLevels, dataOrgUnitLevel) {\n  var _find;\n  return (_find = find(orgUnitLevels, [\"level\", dataOrgUnitLevel])) === null || _find === void 0 ? void 0 : _find.id;\n}\nfunction findLegend(legends, value, {\n  max,\n  legendDefinitions\n}) {\n  var _find2;\n  value = +value;\n  if (value > max) {\n    return find(legendDefinitions, {\n      id: \"N/A\"\n    });\n  }\n  if (isNaN(value)) {\n    return find(legendDefinitions, {\n      id: \"No Data\"\n    });\n  }\n  const {\n    legendDefinitionId\n  } = (_find2 = find(legends, legend => {\n    if (legend) {\n      const {\n        startValue,\n        endValue\n      } = legend;\n      if (+endValue === max) {\n        return +startValue <= value && +endValue >= value;\n      }\n      return +startValue <= value && +endValue > value;\n    }\n    return false;\n  })) !== null && _find2 !== void 0 ? _find2 : {};\n  return find(legendDefinitions, [\"id\", legendDefinitionId]);\n}\nfunction getPeriodSpecificLegends(specificTarget, period) {\n  if (specificTarget.items.includes(period)) {\n    return specificTarget.legends;\n  }\n}\nfunction getOrgUnitSpecificLegends(specificTarget, orgUnit) {\n  if (specificTarget.items.includes(orgUnit)) {\n    return specificTarget.legends;\n  }\n}\nexport function getLegend(value, legends, {\n  max = 100,\n  orgUnitLevels = [],\n  dataOrgUnitLevel,\n  legendDefinitions,\n  specificTargets,\n  period,\n  orgUnit\n}) {\n  if (!isEmpty(specificTargets)) {\n    const specificTarget = head(specificTargets);\n    if (specificTarget) {\n      if (specificTarget.type === \"period\") {\n        var _getPeriodSpecificLeg;\n        const specificLegends = (_getPeriodSpecificLeg = getPeriodSpecificLegends(specificTarget, period)) !== null && _getPeriodSpecificLeg !== void 0 ? _getPeriodSpecificLeg : legends;\n        return findLegend(specificLegends, value, {\n          max,\n          legendDefinitions\n        });\n      }\n      if (specificTarget.type === \"orgUnit\") {\n        var _getOrgUnitSpecificLe;\n        const specificLegends = (_getOrgUnitSpecificLe = getOrgUnitSpecificLegends(specificTarget, orgUnit)) !== null && _getOrgUnitSpecificLe !== void 0 ? _getOrgUnitSpecificLe : legends;\n        return findLegend(specificLegends, value, {\n          max,\n          legendDefinitions\n        });\n      }\n    }\n  }\n  if (Array.isArray(legends)) {\n    const allLegends = [...legends];\n    return findLegend(allLegends, value, {\n      max,\n      legendDefinitions\n    });\n  }\n  if (typeof legends === \"object\") {\n    const orgUnitLevelId = getOrgUnitLevelId(orgUnitLevels, dataOrgUnitLevel);\n    if (orgUnitLevelId) {\n      const orgUnitLegends = legends[orgUnitLevelId];\n      return findLegend(orgUnitLegends, value, {\n        max,\n        legendDefinitions\n      });\n    }\n  }\n}\nexport function sortOrgUnitsBasedOnData({\n  orgUnitSort,\n  filteredOrgUnits,\n  childrenOrgUnits\n}) {\n  const parentTemp = [];\n  const childrenTemp = [];\n  for (const ou of orgUnitSort) {\n    parentTemp.push(find(filteredOrgUnits, [\"id\", ou]));\n    childrenTemp.push(find(childrenOrgUnits, [\"id\", ou]));\n  }\n  return {\n    parentOrgUnits: uniqBy(compact([...parentTemp, ...filteredOrgUnits]), \"id\"),\n    childOrgUnits: uniqBy(compact([...childrenTemp, ...childrenOrgUnits]), \"id\")\n  };\n}\nexport function sortOrgUnitsBasedOnNames({\n  sort,\n  filteredOrgUnits,\n  childrenOrgUnits\n}) {\n  let childOrgUnits = childrenOrgUnits;\n  let parentOrgUnits = filteredOrgUnits;\n  if (sort === TableSort.ASC) {\n    childOrgUnits = sortBy(childrenOrgUnits, \"displayName\");\n  }\n  if (sort === TableSort.DESC) {\n    childOrgUnits = sortBy(childrenOrgUnits, \"displayName\").reverse();\n  }\n  if (sort === TableSort.ASC) {\n    parentOrgUnits = sortBy(filteredOrgUnits, \"displayName\");\n  }\n  if (sort === TableSort.DESC) {\n    parentOrgUnits = sortBy(filteredOrgUnits, \"displayName\").reverse();\n  }\n  return {\n    childOrgUnits,\n    parentOrgUnits\n  };\n}\nexport function sortDataSourcesBasedOnData({\n  dataSort,\n  dataSources\n}) {\n  const temp = [];\n  for (const dx of dataSort) {\n    temp.push(find(dataSources, ({\n      dataSources\n    }) => !!find(dataSources, [\"id\", dx])));\n  }\n  return uniqBy(temp, \"id\");\n}\nexport function sortDataSourcesBasedOnNames({\n  sort,\n  dataSources\n}) {\n  let filteredDataSources = dataSources;\n  if (sort === TableSort.ASC) {\n    filteredDataSources = sortBy(dataSources, \"displayName\");\n  }\n  if (sort === TableSort.DESC) {\n    filteredDataSources = sortBy(dataSources, \"displayName\").reverse();\n  }\n  return filteredDataSources;\n}\nfunction translateAccess(access = \"\") {\n  const translatedAccess = {\n    read: false,\n    write: false\n  };\n  if (access.includes(\"r\")) {\n    translatedAccess.read = true;\n  }\n  if (access.includes(\"w\")) {\n    translatedAccess.write = true;\n  }\n  return translatedAccess;\n}\nexport function getUserAuthority(user, scorecardSummary) {\n  const {\n    user: userId,\n    userAccesses,\n    userGroupAccesses,\n    publicAccess\n  } = scorecardSummary !== null && scorecardSummary !== void 0 ? scorecardSummary : {};\n  if ((user === null || user === void 0 ? void 0 : user.id) === userId) {\n    return {\n      ...translateAccess(\"rw-----\"),\n      delete: true\n    };\n  }\n  if (!isEmpty(userAccesses)) {\n    const userAccess = find(userAccesses, [\"id\", user === null || user === void 0 ? void 0 : user.id]);\n    if (userAccess) {\n      return translateAccess(userAccess === null || userAccess === void 0 ? void 0 : userAccess.access);\n    }\n  }\n  if (!isEmpty(userGroupAccesses)) {\n    const userGroups = intersectionBy([...userGroupAccesses], [...user.userGroups], \"id\");\n    if (!isEmpty(userGroups)) {\n      const accesses = userGroups.map(({\n        access\n      }) => access);\n      const translatedAccesses = accesses.map(translateAccess);\n      return {\n        read: reduce(translatedAccesses, (acc, value) => acc || value.read, false),\n        write: reduce(translatedAccesses, (acc, value) => acc || value.write, false)\n      };\n    }\n  }\n  if (publicAccess) {\n    return translateAccess(publicAccess === null || publicAccess === void 0 ? void 0 : publicAccess.access);\n  }\n  return DefaultAuthority;\n}\nexport function constructAppUrl(baseUrl, config, serverVersion) {\n  let appUrl = baseUrl;\n  const isModernServer = serverVersion.major >= 2 && serverVersion.minor >= 35;\n  // From core version 2.35, short_name is used instead of the human-readable title to generate the url slug\n  const urlSafeAppSlug = (isModernServer ? config.name : config.title).replace(/[^A-Za-z0-9\\s-]/g, \"\").replace(/\\s+/g, \"-\");\n\n  // From core version 2.35, core apps are hosted at the server root under the /dhis-web-* namespace\n  if (config.coreApp && isModernServer) {\n    appUrl += `/dhis-web-${urlSafeAppSlug}/`;\n  } else {\n    appUrl += `/api/apps/${urlSafeAppSlug}/`;\n  }\n\n  // Prior to core version 2.35, installed applications did not properly serve \"pretty\" urls (`/` vs `/index.html`)\n  if (!isModernServer) {\n    appUrl += \"index.html\";\n  }\n  // Clean up any double slashes\n  const scheme = appUrl.substr(0, appUrl.indexOf(\"://\") + 3);\n  appUrl = scheme + appUrl.substr(scheme.length).replace(/\\/+/g, \"/\");\n  return appUrl;\n}","import { map } from \"async\";\nimport { compact, find, has } from \"lodash\";\nimport { getDataSourceDetails } from \"./dataSource\";\nimport { uid } from \"./utils\";\nexport async function migrateScorecard(oldScorecard, engine) {\n  try {\n    if (oldScorecard) {\n      var _oldScorecard$header, _oldScorecard$header2, _oldScorecard$header3, _oldScorecard$header4, _oldScorecard$user, _oldScorecard$header5, _oldScorecard$header6, _oldScorecard$header7, _oldScorecard$average, _oldScorecard$highlig, _oldScorecard$highlig2;\n      return {\n        id: oldScorecard === null || oldScorecard === void 0 ? void 0 : oldScorecard.id,\n        name: oldScorecard === null || oldScorecard === void 0 ? void 0 : (_oldScorecard$header = oldScorecard.header) === null || _oldScorecard$header === void 0 ? void 0 : _oldScorecard$header.title,\n        title: oldScorecard === null || oldScorecard === void 0 ? void 0 : (_oldScorecard$header2 = oldScorecard.header) === null || _oldScorecard$header2 === void 0 ? void 0 : _oldScorecard$header2.title,\n        subtitle: oldScorecard === null || oldScorecard === void 0 ? void 0 : (_oldScorecard$header3 = oldScorecard.header) === null || _oldScorecard$header3 === void 0 ? void 0 : _oldScorecard$header3.sub_title,\n        description: oldScorecard === null || oldScorecard === void 0 ? void 0 : (_oldScorecard$header4 = oldScorecard.header) === null || _oldScorecard$header4 === void 0 ? void 0 : _oldScorecard$header4.description,\n        user: {\n          id: oldScorecard === null || oldScorecard === void 0 ? void 0 : (_oldScorecard$user = oldScorecard.user) === null || _oldScorecard$user === void 0 ? void 0 : _oldScorecard$user.id\n        },\n        periodType: oldScorecard === null || oldScorecard === void 0 ? void 0 : oldScorecard.periodType,\n        customHeader: oldScorecard === null || oldScorecard === void 0 ? void 0 : (_oldScorecard$header5 = oldScorecard.header) === null || _oldScorecard$header5 === void 0 ? void 0 : (_oldScorecard$header6 = _oldScorecard$header5.template) === null || _oldScorecard$header6 === void 0 ? void 0 : _oldScorecard$header6.content,\n        publicAccess: getScorecardPublicAccess(oldScorecard === null || oldScorecard === void 0 ? void 0 : oldScorecard.user_groups),\n        userAccesses: [],\n        userGroupAccesses: getScorecardUserGroupAccesses(oldScorecard === null || oldScorecard === void 0 ? void 0 : oldScorecard.user_groups),\n        targetOnLevels: false,\n        periodSelection: getScorecardPeriodSelection(oldScorecard.selected_periods, oldScorecard.periodType),\n        orgUnitSelection: getScorecardOrgUnitSelection(oldScorecard.orgunit_settings),\n        dataSelection: await getScorecardDataSelection(oldScorecard.data_settings, engine),\n        additionalLabels: oldScorecard.additional_labels,\n        legendDefinitions: getScorecardLegendDefinitions(oldScorecard === null || oldScorecard === void 0 ? void 0 : oldScorecard.legendset_definitions),\n        options: {\n          title: true,\n          legend: oldScorecard === null || oldScorecard === void 0 ? void 0 : (_oldScorecard$header7 = oldScorecard.header) === null || _oldScorecard$header7 === void 0 ? void 0 : _oldScorecard$header7.show_legend_definition,\n          emptyRows: oldScorecard === null || oldScorecard === void 0 ? void 0 : oldScorecard.empty_rows,\n          averageRow: oldScorecard === null || oldScorecard === void 0 ? void 0 : oldScorecard.show_average_in_row,\n          itemNumber: true,\n          averageColumn: oldScorecard === null || oldScorecard === void 0 ? void 0 : oldScorecard.show_average_in_column,\n          showHierarchy: oldScorecard === null || oldScorecard === void 0 ? void 0 : oldScorecard.show_hierarchy,\n          averageDisplayType: oldScorecard === null || oldScorecard === void 0 ? void 0 : (_oldScorecard$average = oldScorecard.average_selection) === null || _oldScorecard$average === void 0 ? void 0 : _oldScorecard$average.toUpperCase(),\n          highlightedIndicators: oldScorecard === null || oldScorecard === void 0 ? void 0 : (_oldScorecard$highlig = oldScorecard.highlighted_indicators) === null || _oldScorecard$highlig === void 0 ? void 0 : _oldScorecard$highlig.display\n        },\n        highlightedIndicators: await map((oldScorecard === null || oldScorecard === void 0 ? void 0 : (_oldScorecard$highlig2 = oldScorecard.highlighted_indicators) === null || _oldScorecard$highlig2 === void 0 ? void 0 : _oldScorecard$highlig2.definitions) || [], async indicator => await getScorecardDataSource(indicator, engine))\n      };\n    }\n  } catch (e) {\n    console.error(e);\n  }\n}\nfunction getScorecardLegendDefinitions(oldScorecardLegendDefinitions) {\n  return (oldScorecardLegendDefinitions || []).map(legendDefinition => {\n    const hasDefaultProps = has(legendDefinition, \"default\");\n    return hasDefaultProps ? {\n      id: legendDefinition.definition,\n      color: legendDefinition.color,\n      name: legendDefinition.definition,\n      isDefault: legendDefinition.default\n    } : {\n      id: legendDefinition.color,\n      color: legendDefinition.color,\n      name: legendDefinition.definition\n    };\n  });\n}\nfunction getScorecardPeriodSelection(oldScorecardPeriodSelections, periodType) {\n  return {\n    periods: oldScorecardPeriodSelections.map(period => ({\n      id: period.id,\n      name: period.name\n    })),\n    type: periodType\n  };\n}\nasync function getScorecardDataSelection(oldScorecardDataSelections, engine) {\n  return {\n    dataGroups: await map((oldScorecardDataSelections === null || oldScorecardDataSelections === void 0 ? void 0 : oldScorecardDataSelections.indicator_holder_groups) || [], async dataGroup => {\n      return {\n        id: dataGroup === null || dataGroup === void 0 ? void 0 : dataGroup.id,\n        style: {\n          color: \"#000000\",\n          backgroundColor: dataGroup.background_color\n        },\n        title: dataGroup === null || dataGroup === void 0 ? void 0 : dataGroup.name,\n        dataHolders: compact(await map(dataGroup === null || dataGroup === void 0 ? void 0 : dataGroup.indicator_holder_ids, async holderId => {\n          return await getScorecardDataHolder(oldScorecardDataSelections.indicator_holders, holderId, engine);\n        }))\n      };\n    })\n  };\n}\nasync function getScorecardDataHolder(dataHolders, holderId, engine) {\n  var _dataHolder$indicator;\n  const dataHolder = find(dataHolders, [\"holder_id\", holderId]);\n  return dataHolder ? {\n    id: dataHolder.holder_id,\n    dataSources: await map((_dataHolder$indicator = dataHolder.indicators) !== null && _dataHolder$indicator !== void 0 ? _dataHolder$indicator : [], async indicator => {\n      return await getScorecardDataSource(indicator, engine);\n    })\n  } : undefined;\n}\nasync function getScorecardDataSource(indicator, engine) {\n  var _await$getDataSourceD, _indicator$title, _indicator$arrow_sett, _indicator$arrow_sett2;\n  const {\n    name,\n    type\n  } = (_await$getDataSourceD = await getDataSourceDetails(engine, indicator.id)) !== null && _await$getDataSourceD !== void 0 ? _await$getDataSourceD : {};\n  return {\n    id: indicator.id,\n    name: (_indicator$title = indicator.title) !== null && _indicator$title !== void 0 ? _indicator$title : name,\n    type: type !== null && type !== void 0 ? type : \"customFunction\",\n    label: indicator.title,\n    weight: indicator.weight,\n    legends: indicator.legendset.map(legendSet => {\n      return {\n        id: uid(),\n        legendDefinitionId: legendSet === null || legendSet === void 0 ? void 0 : legendSet.color,\n        endValue: typeof (legendSet === null || legendSet === void 0 ? void 0 : legendSet.max) === \"string\" ? parseFloat(legendSet === null || legendSet === void 0 ? void 0 : legendSet.max) : legendSet === null || legendSet === void 0 ? void 0 : legendSet.max,\n        startValue: typeof (legendSet === null || legendSet === void 0 ? void 0 : legendSet.min) === \"string\" ? parseFloat(legendSet === null || legendSet === void 0 ? void 0 : legendSet.min) : legendSet.min\n      };\n    }),\n    highIsGood: indicator === null || indicator === void 0 ? void 0 : indicator.high_is_good,\n    showColors: indicator === null || indicator === void 0 ? void 0 : indicator.legend_display,\n    effectiveGap: (indicator === null || indicator === void 0 ? void 0 : (_indicator$arrow_sett = indicator.arrow_settings) === null || _indicator$arrow_sett === void 0 ? void 0 : _indicator$arrow_sett.effective_gap) || 5,\n    displayArrows: indicator === null || indicator === void 0 ? void 0 : (_indicator$arrow_sett2 = indicator.arrow_settings) === null || _indicator$arrow_sett2 === void 0 ? void 0 : _indicator$arrow_sett2.display\n  };\n}\nfunction getScorecardOrgUnitSelection(oldScorecardOrgUnitSelections) {\n  var _oldScorecardOrgUnitS, _oldScorecardOrgUnitS2, _oldScorecardOrgUnitS3;\n  return {\n    groups: (oldScorecardOrgUnitSelections === null || oldScorecardOrgUnitSelections === void 0 ? void 0 : (_oldScorecardOrgUnitS = oldScorecardOrgUnitSelections.selected_groups) === null || _oldScorecardOrgUnitS === void 0 ? void 0 : _oldScorecardOrgUnitS.map(group => group === null || group === void 0 ? void 0 : group.id)) || [],\n    levels: (oldScorecardOrgUnitSelections === null || oldScorecardOrgUnitSelections === void 0 ? void 0 : (_oldScorecardOrgUnitS2 = oldScorecardOrgUnitSelections.selected_levels) === null || _oldScorecardOrgUnitS2 === void 0 ? void 0 : _oldScorecardOrgUnitS2.map(level => level === null || level === void 0 ? void 0 : level.id)) || [],\n    orgUnits: oldScorecardOrgUnitSelections === null || oldScorecardOrgUnitSelections === void 0 ? void 0 : (_oldScorecardOrgUnitS3 = oldScorecardOrgUnitSelections.selected_orgunits) === null || _oldScorecardOrgUnitS3 === void 0 ? void 0 : _oldScorecardOrgUnitS3.map(selectedOrgUnit => ({\n      id: selectedOrgUnit.id\n    })),\n    userOrgUnit: Boolean(find(oldScorecardOrgUnitSelections === null || oldScorecardOrgUnitSelections === void 0 ? void 0 : oldScorecardOrgUnitSelections.selected_user_orgunit, [\"id\", \"USER_ORGUNIT\"])),\n    userSubUnit: Boolean(find(oldScorecardOrgUnitSelections === null || oldScorecardOrgUnitSelections === void 0 ? void 0 : oldScorecardOrgUnitSelections.selected_user_orgunit, [\"id\", \"USER_ORGUNIT_CHILDREN\"])),\n    userSubX2Unit: Boolean(find(oldScorecardOrgUnitSelections === null || oldScorecardOrgUnitSelections === void 0 ? void 0 : oldScorecardOrgUnitSelections.selected_user_orgunit, [\"id\", \"USER_ORGUNIT_GRANDCHILDREN\"]))\n  };\n}\nfunction getScorecardPublicAccess(oldScorecardUserGroups) {\n  const publicAccess = find(oldScorecardUserGroups, [\"id\", \"all\"]);\n  return {\n    id: \"public\",\n    type: \"public\",\n    access: getScorecardAccess(publicAccess),\n    displayName: \"Public\"\n  };\n}\nfunction getScorecardUserGroupAccesses(oldScorecardUserGroups) {\n  const userGroupsOnly = oldScorecardUserGroups === null || oldScorecardUserGroups === void 0 ? void 0 : oldScorecardUserGroups.filter(userGroup => userGroup.id !== \"all\");\n  return userGroupsOnly === null || userGroupsOnly === void 0 ? void 0 : userGroupsOnly.map(userGroup => {\n    return {\n      id: userGroup === null || userGroup === void 0 ? void 0 : userGroup.id,\n      type: \"userGroup\",\n      access: getScorecardAccess(userGroup),\n      displayName: userGroup === null || userGroup === void 0 ? void 0 : userGroup.name\n    };\n  });\n}\nfunction getScorecardAccess(oldScrocardUserGroup) {\n  if (oldScrocardUserGroup !== null && oldScrocardUserGroup !== void 0 && oldScrocardUserGroup.see) {\n    return \"r-----\";\n  }\n  return \"------\";\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { find, isEmpty } from \"lodash\";\nexport default function getSelectedOrgUnitSelectionDisplay(orgUnitSelection, {\n  orgUnitLevels,\n  orgUnitGroups\n}) {\n  const {\n    orgUnits,\n    levels,\n    groups,\n    userOrgUnit,\n    userSubUnit,\n    userSubX2Unit\n  } = orgUnitSelection;\n  const display = [...orgUnits];\n  if (userOrgUnit) {\n    display.push({\n      name: i18n.t(\"User Organisation Unit\")\n    });\n  }\n  if (userSubUnit) {\n    display.push({\n      name: i18n.t(\"User Sub-units\")\n    });\n  }\n  if (userSubX2Unit) {\n    display.push({\n      name: i18n.t(\"User Sub-x2-units\")\n    });\n  }\n  if (!isEmpty(levels)) {\n    display.push({\n      name: `Levels: ${levels === null || levels === void 0 ? void 0 : levels.map(level => {\n        var _find;\n        const levelObject = (_find = find(orgUnitLevels, [\"id\", level])) !== null && _find !== void 0 ? _find : {};\n        return levelObject.displayName;\n      })}`\n    });\n  }\n  if (!isEmpty(groups)) {\n    display.push({\n      name: `Groups: ${groups === null || groups === void 0 ? void 0 : groups.map(group => find(orgUnitGroups, [\"id\", group]).displayName)}`\n    });\n  }\n  return display;\n}","import { get } from \"lodash\";\nimport { DATASTORE_ENDPOINT, DATASTORE_SCORECARD_SUMMARY_INCLUDE_KEYS } from \"../constants\";\nexport function generateScorecardSummary(data) {\n  const summary = {};\n  for (const detail of DATASTORE_SCORECARD_SUMMARY_INCLUDE_KEYS) {\n    summary[detail.key] = get(data, detail.path);\n  }\n  return summary;\n}\nexport const generateCreateMutation = id => ({\n  type: \"create\",\n  resource: `${DATASTORE_ENDPOINT}/${id}`,\n  data: ({\n    data\n  }) => data\n});","import { compact, find, findIndex, forIn, isEmpty, mergeWith, reduce, set } from \"lodash\";\nconst customFunctionQuery = {\n  function: {\n    resource: \"dataStore/functions\",\n    id: ({\n      id\n    }) => id\n  }\n};\nexport async function getCustomFunction(engine, id) {\n  return await engine.query(customFunctionQuery, {\n    variables: {\n      id\n    }\n  });\n}\nexport async function runCustomFunction({\n  orgUnits,\n  periods,\n  rule,\n  code,\n  progress\n}) {\n  const parameters = {\n    ou: orgUnits.join(\";\"),\n    pe: periods.join(\";\"),\n    rule,\n    layout: {\n      rows: [\"dx\"],\n      column: [\"ou\"],\n      filter: [\"pe\"]\n    },\n    progress\n  };\n  return await new Promise((resolve, reject) => {\n    try {\n      const customFunction = Function(\"parameters\", `${code}`);\n      customFunction({\n        ...parameters,\n        success: resolve,\n        error: error => {\n          if (error) {\n            reject(error);\n          } else {\n            reject(\"Unknown error\");\n          }\n        }\n      });\n    } catch (e) {\n      reject(e);\n    }\n    setTimeout(() => {\n      reject(\"Function timed out\");\n    }, 60000);\n  });\n}\nfunction formatData(data, {\n  customFunction,\n  rule\n}) {\n  var _updatedData, _updatedData$metaData, _updatedData$rows;\n  const updatedData = {\n    ...data\n  };\n  const updatedId = `${customFunction.id}.${rule.id}`;\n  const dxIndex = findIndex(updatedData === null || updatedData === void 0 ? void 0 : updatedData.headers, {\n    name: \"dx\"\n  });\n  set(updatedData, \"metaData.dimensions.dx\", [updatedId]);\n  updatedData[`metaData`]['items'][updatedId] = {\n    name: `${customFunction.name} - ${rule.name}`\n  };\n  updatedData[\"metaData\"][\"names\"] = {};\n  forIn(updatedData === null || updatedData === void 0 ? void 0 : (_updatedData = updatedData[`metaData`]) === null || _updatedData === void 0 ? void 0 : _updatedData['items'], (value, key) => {\n    updatedData[`metaData`]['names'][key] = value === null || value === void 0 ? void 0 : value.name;\n  });\n  forIn((_updatedData$metaData = updatedData['metaData']) === null || _updatedData$metaData === void 0 ? void 0 : _updatedData$metaData['dimensions'], (value, key) => {\n    updatedData[\"metaData\"][key] = value;\n  });\n  set(updatedData, \"rows\", updatedData === null || updatedData === void 0 ? void 0 : (_updatedData$rows = updatedData.rows) === null || _updatedData$rows === void 0 ? void 0 : _updatedData$rows.map(row => {\n    const updatedRow = [...row];\n    set(updatedRow, dxIndex, updatedId);\n    return updatedRow;\n  }));\n  return updatedData;\n}\nexport async function evaluateCustomFunction({\n  customFunction,\n  ruleId,\n  orgUnits,\n  periods\n}) {\n  try {\n    if (customFunction) {\n      const rule = find(customFunction === null || customFunction === void 0 ? void 0 : customFunction.rules, {\n        id: ruleId\n      });\n      if (rule) {\n        var _customFunction$funct;\n        const data = await runCustomFunction({\n          orgUnits,\n          periods,\n          rule: {\n            ...rule,\n            json: typeof rule.json === \"string\" ? JSON.parse(rule.json) : rule.json\n          },\n          code: (_customFunction$funct = customFunction === null || customFunction === void 0 ? void 0 : customFunction.function) !== null && _customFunction$funct !== void 0 ? _customFunction$funct : \"\",\n          progress: () => {}\n        });\n\n        //This is under the assumption a custom function returns analytics object with only one dx value\n        if (data) {\n          return formatData(data, {\n            customFunction,\n            rule\n          });\n        }\n      }\n    }\n  } catch (error) {\n    console.error(error);\n    return null;\n  }\n  return null;\n}\nasync function getCustomFunctionData(item, engine, {\n  periods,\n  orgUnits\n}) {\n  try {\n    if (item) {\n      var _item$split, _await$getCustomFunct;\n      const [functionId, ruleId] = (_item$split = item === null || item === void 0 ? void 0 : item.split(\".\")) !== null && _item$split !== void 0 ? _item$split : [];\n      const {\n        function: customFunction\n      } = (_await$getCustomFunct = await getCustomFunction(engine, functionId)) !== null && _await$getCustomFunct !== void 0 ? _await$getCustomFunct : {};\n      return await evaluateCustomFunction({\n        customFunction,\n        ruleId,\n        periods,\n        orgUnits\n      });\n    }\n  } catch (e) {\n    console.error(e);\n  }\n}\nexport async function getCustomFunctionAnalytics(engine, {\n  functions,\n  periods,\n  orgUnits\n}) {\n  try {\n    if (functions && !isEmpty(functions)) {\n      const responses = compact(await Promise.all(functions.map(customFunction => getCustomFunctionData(customFunction, engine, {\n        periods,\n        orgUnits\n      }))));\n      return reduce(responses, (acc, response) => {\n        return mergeWith(acc, response, (objValue, srcValue) => {\n          if (Array.isArray(objValue)) {\n            return objValue.concat(srcValue);\n          }\n        });\n      }, {});\n    }\n  } catch (e) {\n    console.error(e);\n  }\n}","import { ScorecardTableConstants } from \"../constants\";\nexport function getTableWidthWithDataGroups(periods = [], dataGroups = [], averageColumn) {\n  return getColSpanDataGroups(periods, dataGroups, averageColumn) * 105 + 200; //350 accounts for the static orgUnit and expand icon. 2px is for the border\n}\nexport function getColSpanDataGroups(periods = [], dataGroups = [], averageColumn) {\n  const noOfPeriods = (periods === null || periods === void 0 ? void 0 : periods.length) || 1;\n  const noOfDataSources = dataGroups.reduce((prevValue, currentValue) => {\n    var _currentValue$dataHol;\n    return prevValue + ((_currentValue$dataHol = currentValue.dataHolders) === null || _currentValue$dataHol === void 0 ? void 0 : _currentValue$dataHol.length);\n  }, 0);\n  return noOfDataSources * noOfPeriods + (averageColumn ? 1 : 0); //350 accounts for the static orgUnit and expand icon. 2px is for the border\n}\nexport function getTableWidthWithOrgUnit(periods, orgUnits, averageColumn) {\n  return getColSpanWithOrgUnit(periods, orgUnits, averageColumn) * 105 + 200;\n}\nexport function getColSpanWithOrgUnit(periods, orgUnits, averageColumn) {\n  const noOfPeriods = (periods === null || periods === void 0 ? void 0 : periods.length) || 1;\n  const noOfOrgUnits = orgUnits.length || 1;\n  return noOfOrgUnits * noOfPeriods + (averageColumn ? 1 : 0);\n}\nfunction getDataCellsWidth(screenWidth, colSpan) {\n  return ScorecardTableConstants.CELL_WIDTH * colSpan;\n}\nexport function getNameCellWidth(screenWidth, colSpan) {\n  const dataCellsWidth = getDataCellsWidth(screenWidth, colSpan);\n  const width = 100 - dataCellsWidth / screenWidth * 100;\n  if (width > 30) {\n    return `30%`;\n  }\n  if (width > 10) {\n    return `${Math.abs(width)}%`;\n  }\n  return `${200}px`;\n}\nexport function getIncreasingStatus(current, previous, effectiveGap) {\n  const parsedCurrentValue = parseFloat(current);\n  const parsedPreviousValue = parseFloat(previous);\n  if (Math.abs(parsedCurrentValue - parsedPreviousValue) >= parseInt(effectiveGap)) {\n    if (parsedCurrentValue > parsedPreviousValue) {\n      return \"increasing\";\n    }\n    if (parsedCurrentValue < parsedPreviousValue) {\n      return \"decreasing\";\n    }\n  }\n  return null;\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { forIn, get, isEmpty } from \"lodash\";\nimport { accessPageFields, dataConfigurationPageFields, generalPageFields, highlightedIndicatorPageFields, optionsPageFields, REQUIRED_FIELDS } from \"../constants\";\nfunction validateRequiredFields(scorecard, requiredFieldsPath = []) {\n  const errors = {};\n  forIn(scorecard, (value, key) => {\n    if (requiredFieldsPath.includes(key) && isEmpty(get(scorecard, key))) {\n      errors[`${key}`] = i18n.t(\"This field is required\");\n    }\n  });\n  return errors;\n}\nexport function validateGroups(dataGroups = []) {\n  const errors = {};\n  for (const group of dataGroups) {\n    if (isEmpty(group.dataHolders)) {\n      errors[group.id] = i18n.t(\"This group does not have any configured data sources\");\n    }\n  }\n  return errors;\n}\nexport default function validateScorecard(scorecard) {\n  var _validateRequiredFiel, _scorecard$dataSelect;\n  return (_validateRequiredFiel = {\n    ...validateRequiredFields(scorecard, REQUIRED_FIELDS),\n    ...validateGroups(scorecard === null || scorecard === void 0 ? void 0 : (_scorecard$dataSelect = scorecard.dataSelection) === null || _scorecard$dataSelect === void 0 ? void 0 : _scorecard$dataSelect.dataGroups)\n  }) !== null && _validateRequiredFiel !== void 0 ? _validateRequiredFiel : {};\n}\nexport function getValidationPageFields(form, activePage) {\n  switch (activePage.id) {\n    case \"general\":\n      return generalPageFields;\n    case \"dataConfiguration\":\n      return dataConfigurationPageFields;\n    case \"highlightedIndicator\":\n      return highlightedIndicatorPageFields;\n    case \"access\":\n      return accessPageFields;\n    case \"options\":\n      return optionsPageFields;\n    default:\n      return [];\n  }\n}","import produce from \"immer\";\nimport { cloneDeep, defaultsDeep } from \"lodash\";\nexport default class DataModel {\n  constructor(attributes = {}) {\n    defaultsDeep(this, attributes, this.defaults);\n  }\n  get defaults() {\n    return {};\n  }\n  static set(object, key, value) {\n    if (key) {\n      const updatedObject = cloneDeep(object);\n      updatedObject[key] = value;\n      return updatedObject;\n    }\n    return this;\n  }\n  static setObject(object, values = {}) {\n    const updatedObject = cloneDeep(object);\n    for (const key of Object.keys(values)) {\n      updatedObject[key] = values[key];\n    }\n    return updatedObject;\n  }\n}\nexport class SavableDataModel extends DataModel {\n  static async save(object, addFunction, user) {\n    const newObject = produce(JSON.parse(JSON.stringify(object)), draft => {\n      draft.user = {\n        id: user === null || user === void 0 ? void 0 : user.id\n      };\n    });\n    return await addFunction(newObject);\n  }\n  static async update(object, updateFunction) {\n    return await updateFunction(JSON.parse(JSON.stringify(object)));\n  }\n}","import DataModel from \"./base\";\nexport default class DataSelection extends DataModel {\n  get defaults() {\n    return {\n      dataGroups: []\n    };\n  }\n}","import DataModel from \"./base\";\nexport default class OrgUnitSelection extends DataModel {\n  get defaults() {\n    return {\n      levels: [],\n      groups: [],\n      orgUnits: [],\n      userSubX2Unit: false,\n      userSubUnit: false,\n      userOrgUnit: false\n    };\n  }\n}","export default class SelectionItem {\n  constructor(selectionItem) {\n    this.selectionItem = selectionItem;\n  }\n  get id() {\n    return this.selectionItem ? this.selectionItem.id : undefined;\n  }\n  get name() {\n    return this.selectionItem ? this.selectionItem.name : undefined;\n  }\n  get type() {\n    return this.selectionItem ? this.selectionItem.type : undefined;\n  }\n}","import SelectionItem from \"./selectionItem\";\nexport default class PeriodSelection {\n  constructor(periodSelection) {\n    this.periodSelection = periodSelection;\n  }\n  get items() {\n    return (this.periodSelection ? this.periodSelection.items : []).map(item => new SelectionItem(item));\n  }\n}","import DataModel from \"./base\";\nimport { ScorecardAccessType } from \"../constants\";\nexport default class ScorecardAccess extends DataModel {\n  get defaults() {\n    return {\n      id: undefined,\n      type: \"userGroup\",\n      access: ScorecardAccessType.NO_ACCESS,\n      displayName: \"\"\n    };\n  }\n}","import DataModel from \"./base\";\nimport { AverageDisplayType } from \"../constants\";\nexport default class ScorecardOption extends DataModel {\n  get defaults() {\n    return {\n      averageDisplayType: AverageDisplayType.ALL,\n      legend: true,\n      title: true,\n      itemNumber: true,\n      emptyRows: true,\n      showHierarchy: false,\n      averageColumn: false,\n      averageRow: false,\n      highlightedIndicators: false\n    };\n  }\n}","import { SavableDataModel } from \"./base\";\nimport DataSelection from \"./dataSelection\";\nimport OrgUnitSelection from \"./orgUnitSelection\";\nimport PeriodSelection from \"./periodSelection\";\nimport ScorecardAccess from \"./scorecardAccess\";\nimport ScorecardOption from \"./scorecardOptions\";\nimport { uid } from \"../utils\";\nexport default class Scorecard extends SavableDataModel {\n  get defaults() {\n    return {\n      id: uid(),\n      name: \"\",\n      title: \"\",\n      subtitle: \"\",\n      description: \"\",\n      customHeader: \"\",\n      periodType: \"\",\n      legendDefinitions: [],\n      dataSelection: new DataSelection(),\n      orgUnitSelection: new OrgUnitSelection(),\n      periodSelection: new PeriodSelection(),\n      options: new ScorecardOption(),\n      highlightedIndicators: [],\n      publicAccess: new ScorecardAccess(),\n      userGroupAccesses: [],\n      userAccesses: [],\n      user: {},\n      targetOnLevels: false,\n      additionalLabels: []\n    };\n  }\n}","function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport { Fn } from \"@iapps/function-analytics\";\nimport { Period } from \"@iapps/period-utilities\";\nimport mapLimit from \"async/mapLimit\";\nimport { chunk, compact, differenceBy, find, flatten, forIn, fromPairs, groupBy, head, isEmpty, last, pickBy, reduce, sortBy, toPairs, uniq, uniqBy } from \"lodash\";\nimport { BehaviorSubject, of } from \"rxjs\";\nimport { map, take } from \"rxjs/operators\";\nimport $ from \"jquery\";\nimport { TableSort } from \"../constants\";\nexport default class ScorecardDataEngine {\n  constructor() {\n    _defineProperty(this, \"engine\", void 0);\n    _defineProperty(this, \"_cancelled\", false);\n    _defineProperty(this, \"_totalRequests\", 0);\n    _defineProperty(this, \"_progress\", 0);\n    _defineProperty(this, \"_progress$\", new BehaviorSubject());\n    _defineProperty(this, \"_dataEntities\", {});\n    _defineProperty(this, \"_dataEntities$\", new BehaviorSubject(this._dataEntities));\n    _defineProperty(this, \"dataEntities$\", this._dataEntities$.asObservable());\n    _defineProperty(this, \"_previousPeriods\", []);\n    _defineProperty(this, \"_calendar\", void 0);\n    _defineProperty(this, \"_loading$\", new BehaviorSubject());\n    this._cancelled = false;\n  }\n  get loading$() {\n    return this._loading$.asObservable();\n  }\n  get _canLoadData() {\n    var _this$_selectedOrgUni, _this$_selectedPeriod, _this$_selectedData$n, _this$_selectedData$c;\n    return ((_this$_selectedOrgUni = this._selectedOrgUnits) === null || _this$_selectedOrgUni === void 0 ? void 0 : _this$_selectedOrgUni.length) > 0 && ((_this$_selectedPeriod = this._selectedPeriods) === null || _this$_selectedPeriod === void 0 ? void 0 : _this$_selectedPeriod.length) > 0 && (((_this$_selectedData$n = this._selectedData.normalDataItems) === null || _this$_selectedData$n === void 0 ? void 0 : _this$_selectedData$n.length) > 0 || ((_this$_selectedData$c = this._selectedData.customDataItems) === null || _this$_selectedData$c === void 0 ? void 0 : _this$_selectedData$c.length) > 0);\n  }\n  setDataQueryEngine(engine) {\n    this.engine = engine;\n    return this;\n  }\n  setPeriodType(periodType) {\n    this._periodType = periodType;\n    this._selectedPeriods = this._getSelectedPeriods(this._selectedPeriods, periodType);\n    return this;\n  }\n  refresh() {\n    this.reset(false);\n    this.load();\n    return this;\n  }\n  setPeriods(periods) {\n    var _compact, _differenceBy;\n    let previousPeriods = [];\n    this._selectedPeriods = uniqBy((periods || []).map(period => {\n      const currentPeriod = new Period().setPreferences({\n        allowFuturePeriods: true\n      }).setCalendar(this._calendar).getById(period === null || period === void 0 ? void 0 : period.id);\n      previousPeriods = [...previousPeriods, currentPeriod === null || currentPeriod === void 0 ? void 0 : currentPeriod.lastPeriod];\n      return currentPeriod || period;\n    }), \"id\");\n    previousPeriods.forEach(previousPeriod => {\n      const currentPeriod = find(this._selectedPeriods, [\"id\", previousPeriod === null || previousPeriod === void 0 ? void 0 : previousPeriod.id]);\n      if (!currentPeriod) {\n        this._selectedPeriods = compact([...this._selectedPeriods, previousPeriod]);\n      }\n    });\n    this._previousPeriods = (_compact = compact((_differenceBy = differenceBy(previousPeriods, periods, \"id\")) === null || _differenceBy === void 0 ? void 0 : _differenceBy.map(period => {\n      return period === null || period === void 0 ? void 0 : period.id;\n    }))) !== null && _compact !== void 0 ? _compact : [];\n    return this;\n  }\n  setCalendar(calendar) {\n    this._calendar = calendar;\n    return this;\n  }\n  setDataGroups(dataGroups) {\n    this._selectedData = this._getSelectedData(dataGroups);\n    return this;\n  }\n  setOrgUnits(orgUnits) {\n    this._selectedOrgUnits = orgUnits;\n    return this;\n  }\n  _updateDataEntities(rows) {\n    (rows || []).forEach(row => {\n      var _row$dx, _row$ou, _row$pe, _find, _row$pe2;\n      const dataEntityId = `${row === null || row === void 0 ? void 0 : (_row$dx = row.dx) === null || _row$dx === void 0 ? void 0 : _row$dx.id}_${row === null || row === void 0 ? void 0 : (_row$ou = row.ou) === null || _row$ou === void 0 ? void 0 : _row$ou.id}_${row === null || row === void 0 ? void 0 : (_row$pe = row.pe) === null || _row$pe === void 0 ? void 0 : _row$pe.id}`;\n      const previousPeriod = (_find = find(this._selectedPeriods, [\"id\", row === null || row === void 0 ? void 0 : (_row$pe2 = row.pe) === null || _row$pe2 === void 0 ? void 0 : _row$pe2.id])) === null || _find === void 0 ? void 0 : _find.lastPeriod;\n      const previousPeriodRow = rows.find(previousRow => {\n        var _previousRow$dx, _row$dx2, _previousRow$ou, _row$ou2, _previousRow$pe;\n        return (previousRow === null || previousRow === void 0 ? void 0 : (_previousRow$dx = previousRow.dx) === null || _previousRow$dx === void 0 ? void 0 : _previousRow$dx.id) === (row === null || row === void 0 ? void 0 : (_row$dx2 = row.dx) === null || _row$dx2 === void 0 ? void 0 : _row$dx2.id) && (previousRow === null || previousRow === void 0 ? void 0 : (_previousRow$ou = previousRow.ou) === null || _previousRow$ou === void 0 ? void 0 : _previousRow$ou.id) === (row === null || row === void 0 ? void 0 : (_row$ou2 = row.ou) === null || _row$ou2 === void 0 ? void 0 : _row$ou2.id) && (previousRow === null || previousRow === void 0 ? void 0 : (_previousRow$pe = previousRow.pe) === null || _previousRow$pe === void 0 ? void 0 : _previousRow$pe.id) === (previousPeriod === null || previousPeriod === void 0 ? void 0 : previousPeriod.id);\n      });\n      this._dataEntities = {\n        ...(this._dataEntities || {}),\n        [dataEntityId]: {\n          current: row.value,\n          previous: previousPeriodRow === null || previousPeriodRow === void 0 ? void 0 : previousPeriodRow.value\n        }\n      };\n      this._dataEntities$.next(this._dataEntities);\n    });\n  }\n  load() {\n    if (this._canLoadData) {\n      this._loading$.next(true);\n      this._cancelled = false;\n      this._progress = 0;\n      this._progress$.next(this._progress);\n      this._getScorecardData({\n        selectedOrgUnits: this._selectedOrgUnits.map(orgUnit => orgUnit === null || orgUnit === void 0 ? void 0 : orgUnit.id),\n        selectedPeriods: this._selectedPeriods.map(period => period === null || period === void 0 ? void 0 : period.id),\n        selectedData: this._selectedData\n      });\n    }\n  }\n  getProgress() {\n    return this._progress$.pipe(map(progress => {\n      return Math.floor(progress / this._totalRequests * 100);\n    }));\n  }\n  isRowEmpty(orgUnitId = \"\") {\n    return this.dataEntities$.pipe(map(dataEntities => {\n      const orgUnitsData = pickBy(dataEntities, (val, key) => key.match(RegExp(orgUnitId)));\n      return isEmpty(orgUnitsData);\n    }));\n  }\n  isDataSourcesRowEmpty(dataSources = []) {\n    return this.dataEntities$.pipe(map(dataEntities => {\n      const orgUnitsData = pickBy(dataEntities, (_, key) => key.match(RegExp(head(dataSources))) || key.match(RegExp(last(dataSources))));\n      return isEmpty(orgUnitsData);\n    }));\n  }\n  sortOrgUnitsByDataAndPeriod({\n    dataSource,\n    period,\n    sortType\n  }) {\n    return this.dataEntities$.pipe(take(1), map(dataEntities => {\n      if (sortType === TableSort.DEFAULT) {\n        return [];\n      }\n      const requiredDataEntities = pickBy(dataEntities, (value, key) => {\n        const [dx,, pe] = key.split(\"_\");\n        return dx === dataSource && pe === period;\n      });\n      const sortedOrgUnits = sortBy(toPairs(requiredDataEntities), [value => {\n        var _last;\n        return +((_last = last(value)) === null || _last === void 0 ? void 0 : _last.current);\n      }]);\n      if (sortType === TableSort.DESC) {\n        return sortedOrgUnits.reverse().map(([key]) => key === null || key === void 0 ? void 0 : key.split(\"_\")[1]);\n      }\n      return sortedOrgUnits.map(([key]) => key === null || key === void 0 ? void 0 : key.split(\"_\")[1]);\n    }));\n  }\n  sortOrgUnitsByData({\n    dataSource,\n    periods = [],\n    sortType\n  }) {\n    return this.dataEntities$.pipe(take(1), map(dataEntities => {\n      if (sortType === TableSort.DEFAULT) {\n        return [];\n      }\n      const requiredDataEntities = pickBy(dataEntities, (value, key) => {\n        const [dx,, pe] = key.split(\"_\");\n        return dx === dataSource && periods.includes(pe);\n      });\n      const groupedValues = groupBy(toPairs(requiredDataEntities), value => {\n        var _head;\n        return ((_head = head(value)) === null || _head === void 0 ? void 0 : _head.split(\"_\"))[1];\n      });\n      const averageValues = {};\n      forIn(groupedValues, (value, key) => {\n        averageValues[key] = reduce(value, (acc, arr) => {\n          var _last2;\n          return acc + ((_last2 = last(arr)) === null || _last2 === void 0 ? void 0 : _last2.current) / (periods === null || periods === void 0 ? void 0 : periods.length);\n        }, 0);\n      });\n      const sortedValues = sortBy(toPairs(averageValues), [value => last(value)]);\n      if (sortType === TableSort.DESC) {\n        var _sortedValues$map;\n        return sortedValues === null || sortedValues === void 0 ? void 0 : (_sortedValues$map = sortedValues.map(([ou]) => ou)) === null || _sortedValues$map === void 0 ? void 0 : _sortedValues$map.reverse();\n      }\n      return sortedValues === null || sortedValues === void 0 ? void 0 : sortedValues.map(([ou]) => ou);\n    }));\n  }\n  sortDataSourceByOrgUnitAndPeriod({\n    orgUnit,\n    period,\n    sortType\n  }) {\n    return this.dataEntities$.pipe(take(1), map(dataEntities => {\n      if (sortType === TableSort.DEFAULT) {\n        return [];\n      }\n      const requiredDataEntities = pickBy(dataEntities, (value, key) => {\n        const [, ou, pe] = key.split(\"_\");\n        return ou === orgUnit && pe === period;\n      });\n      const sortedOrgUnits = sortBy(toPairs(requiredDataEntities), [value => {\n        var _last3;\n        return parseInt((_last3 = last(value)) === null || _last3 === void 0 ? void 0 : _last3.current);\n      }]);\n      if (sortType === TableSort.DESC) {\n        return sortedOrgUnits.reverse().map(([key]) => key === null || key === void 0 ? void 0 : key.split(\"_\")[0]);\n      }\n      return sortedOrgUnits.map(([key]) => key === null || key === void 0 ? void 0 : key.split(\"_\")[0]);\n    }));\n  }\n  sortDataSourceByOrgUnit({\n    periods,\n    orgUnit,\n    sortType\n  }) {\n    return this.dataEntities$.pipe(take(1), map(dataEntities => {\n      if (sortType === TableSort.DEFAULT) {\n        return [];\n      }\n      const requiredDataEntities = pickBy(dataEntities, (value, key) => {\n        const [, ou, pe] = key.split(\"_\");\n        return ou === orgUnit && periods.includes(pe);\n      });\n      const groupedValues = groupBy(toPairs(requiredDataEntities), value => {\n        var _head2;\n        return ((_head2 = head(value)) === null || _head2 === void 0 ? void 0 : _head2.split(\"_\"))[0];\n      });\n      const averageValues = {};\n      forIn(groupedValues, (value, key) => {\n        averageValues[key] = reduce(value, (acc, arr) => {\n          var _last4;\n          return acc + ((_last4 = last(arr)) === null || _last4 === void 0 ? void 0 : _last4.current) / (periods === null || periods === void 0 ? void 0 : periods.length);\n        }, 0);\n      });\n      const sortedValues = sortBy(toPairs(averageValues), [value => last(value)]);\n      if (sortType === TableSort.DESC) {\n        var _sortedValues$map2;\n        return sortedValues === null || sortedValues === void 0 ? void 0 : (_sortedValues$map2 = sortedValues.map(([ou]) => ou)) === null || _sortedValues$map2 === void 0 ? void 0 : _sortedValues$map2.reverse();\n      }\n      return sortedValues === null || sortedValues === void 0 ? void 0 : sortedValues.map(([ou]) => ou);\n    }));\n  }\n  getOrgUnitAverage(orgUnitId = \"\") {\n    return this.dataEntities$.pipe(map(dataEntities => {\n      var _compact2;\n      const orgUnitsData = pickBy(dataEntities, (val, key) => {\n        const [, ou, pe] = key.split(\"_\");\n        return ou === orgUnitId && !this._previousPeriods.includes(pe) && !!find(this._selectedPeriods, period => (period === null || period === void 0 ? void 0 : period.id) === pe);\n      });\n      const noOfOrgUnits = Object.keys(orgUnitsData).length;\n      if (((_compact2 = compact(Object.values(orgUnitsData).map(({\n        current\n      }) => current))) === null || _compact2 === void 0 ? void 0 : _compact2.length) === 0) {\n        return undefined;\n      }\n      return reduce(orgUnitsData, (result, value) => {\n        return (result !== null && result !== void 0 ? result : 0) + value.current / noOfOrgUnits;\n      }, 0);\n    }));\n  }\n  getDataSourceAverage(dataSources = []) {\n    return this.dataEntities$.pipe(map(dataEntities => {\n      const data = {};\n      for (const dataSource of dataSources) {\n        var _compact3;\n        const dataSourcesData = pickBy(dataEntities, (_, key) => {\n          var _this$_selectedOrgUni2;\n          const [dx, ou, pe] = key.split(\"_\");\n          return dataSource === dx && !this._previousPeriods.includes(pe) && !!find(this._selectedPeriods, period => (period === null || period === void 0 ? void 0 : period.id) === pe) && ((_this$_selectedOrgUni2 = this._selectedOrgUnits) === null || _this$_selectedOrgUni2 === void 0 ? void 0 : _this$_selectedOrgUni2.map(orgUnit => orgUnit === null || orgUnit === void 0 ? void 0 : orgUnit.id).includes(ou));\n        });\n        const noOfDataSources = Object.keys(dataSourcesData).length;\n        if (((_compact3 = compact(Object.values(dataSourcesData).map(({\n          current\n        }) => current))) === null || _compact3 === void 0 ? void 0 : _compact3.length) === 0) {\n          data[dataSource] = undefined;\n        } else {\n          data[dataSource] = reduce(dataSourcesData, (result, value) => {\n            return (result !== null && result !== void 0 ? result : 0) + value.current / noOfDataSources;\n          }, 0);\n        }\n      }\n      return data;\n    }));\n  }\n  getOrgUnitColumnAverage({\n    period,\n    orgUnit\n  }) {\n    return this.dataEntities$.pipe(map(dataEntities => {\n      var _compact4;\n      const orgUnitsData = pickBy(dataEntities, (val, key) => {\n        const [, ou, pe] = key.split(\"_\");\n        return ou === orgUnit && pe === period;\n      });\n      const noOfOrgUnits = Object.keys(orgUnitsData).length;\n      if (((_compact4 = compact(Object.values(orgUnitsData).map(({\n        current\n      }) => current))) === null || _compact4 === void 0 ? void 0 : _compact4.length) === 0) {\n        return undefined;\n      }\n      return reduce(orgUnitsData, (result, value) => {\n        return (result !== null && result !== void 0 ? result : 0) + value.current / noOfOrgUnits;\n      }, 0);\n    }));\n  }\n  getDataSourceColumnAverage({\n    period,\n    dataSources,\n    orgUnits\n  }) {\n    return this.dataEntities$.pipe(map(dataEntities => {\n      const data = {};\n      for (const dataSource of dataSources) {\n        var _compact5;\n        const dataSourcesData = pickBy(dataEntities, (val, key) => {\n          const [dx, ou, pe] = key.split(\"_\");\n          return dataSource === dx && pe === period && (orgUnits === null || orgUnits === void 0 ? void 0 : orgUnits.includes(ou));\n        });\n        const noOfDataSources = Object.keys(dataSourcesData).length;\n        if (((_compact5 = compact(Object.values(dataSourcesData).map(({\n          current\n        }) => current))) === null || _compact5 === void 0 ? void 0 : _compact5.length) === 0) {\n          data[dataSource] = undefined;\n        } else {\n          data[dataSource] = reduce(dataSourcesData, (result, value) => {\n            return (result !== null && result !== void 0 ? result : 0) + value.current / noOfDataSources;\n          }, 0);\n        }\n      }\n      return data;\n    }));\n  }\n  getOverallAverage(orgUnits) {\n    return this.dataEntities$.pipe(map(dataEntities => {\n      if (!isEmpty(dataEntities)) {\n        var _compact6;\n        const selectedDataEntities = pickBy(dataEntities, (value, key) => {\n          const [, ou, pe] = key.split(\"_\");\n          return (orgUnits === null || orgUnits === void 0 ? void 0 : orgUnits.includes(ou)) && !this._previousPeriods.includes(pe) && !!find(this._selectedPeriods, period => (period === null || period === void 0 ? void 0 : period.id) === pe);\n        });\n        const noOfDataEntities = Object.keys(selectedDataEntities).length;\n        if (((_compact6 = compact(Object.values(selectedDataEntities).map(({\n          current\n        }) => current))) === null || _compact6 === void 0 ? void 0 : _compact6.length) === 0) {\n          return undefined;\n        }\n        return reduce(selectedDataEntities, (result, value) => {\n          return (result !== null && result !== void 0 ? result : 0) + value.current / noOfDataEntities;\n        }, 0);\n      }\n    }));\n  }\n  getAllOrgUnitData(orgUnits) {\n    return this.dataEntities$.pipe(map(dataEntities => {\n      return pickBy(dataEntities, (value, key) => {\n        const [, ou] = key.split(\"_\");\n        return orgUnits === null || orgUnits === void 0 ? void 0 : orgUnits.includes(ou);\n      });\n    }));\n  }\n  get(id) {\n    return this.dataEntities$.pipe(map(dataEntities => dataEntities ? dataEntities[id] : null));\n  }\n  reset(cancel = false) {\n    this._totalRequests = 0;\n    this._progress = 0;\n    this._progress$ = new BehaviorSubject();\n    this._loading$ = new BehaviorSubject();\n    this._dataEntities = {};\n    this._dataEntities$ = new BehaviorSubject(this._dataEntities);\n    this.dataEntities$ = this._dataEntities$.asObservable();\n    this._previousPeriods = [];\n    this._dataEntities = {};\n    this._cancelled = cancel;\n  }\n  _getScorecardData(selections) {\n    const {\n      selectedOrgUnits,\n      selectedPeriods,\n      selectedData\n    } = selections;\n    const {\n      normalDataItems,\n      customDataItems\n    } = selectedData;\n    this._getNormalScorecardData({\n      selectedOrgUnits,\n      selectedPeriods,\n      selectedDataItems: normalDataItems\n    });\n    this._getCustomScorecardData({\n      selectedOrgUnits,\n      selectedPeriods,\n      selectedDataItems: customDataItems\n    });\n  }\n  _getAnalyticsData(selections) {\n    if (!this._cancelled) {\n      var _dx, _ou, _pe, _ou2, _pe2;\n      let dx = [];\n      let ou = [];\n      let pe = [];\n      (selections || []).forEach(selection => {\n        const availableData = this._dataEntities[`${selection.dx}_${selection.ou}_${selection.pe}`];\n        if (!availableData) {\n          dx = [...dx, selection.dx];\n          ou = [...ou, selection.ou];\n          pe = [...pe, selection.pe];\n        }\n      });\n      dx = uniq(dx);\n      ou = uniq(ou);\n      pe = uniq(pe);\n      if (((_dx = dx) === null || _dx === void 0 ? void 0 : _dx.length) === 0 && ((_ou = ou) === null || _ou === void 0 ? void 0 : _ou.length) === 0 && ((_pe = pe) === null || _pe === void 0 ? void 0 : _pe.length) === 0) {\n        return of(null).toPromise();\n      }\n      return new Fn.Analytics().setOrgUnit((_ou2 = ou) === null || _ou2 === void 0 ? void 0 : _ou2.join(\";\")).setPeriod((_pe2 = pe) === null || _pe2 === void 0 ? void 0 : _pe2.join(\";\")).setData(dx.join(\";\")).postProcess(analytics => {\n        this._updateDataEntities(analytics === null || analytics === void 0 ? void 0 : analytics.rows);\n      }).get();\n    }\n    return of(null).toPromise();\n  }\n  _getCustomAnalyticsData(selections) {\n    if (!this._cancelled) {\n      var _dx2, _ou3, _pe3;\n      let dx = [];\n      let ou = [];\n      let pe = [];\n      (selections || []).forEach(selection => {\n        const availableData = this._dataEntities[`${selection.dx}_${selection.ou}_${selection.pe}`];\n        if (!availableData) {\n          dx = [...dx, selection.dx];\n          ou = [...ou, selection.ou];\n          pe = [...pe, selection.pe];\n        }\n      });\n      dx = uniq(dx);\n      ou = uniq(ou);\n      pe = uniq(pe);\n      if (((_dx2 = dx) === null || _dx2 === void 0 ? void 0 : _dx2.length) === 0 && ((_ou3 = ou) === null || _ou3 === void 0 ? void 0 : _ou3.length) === 0 && ((_pe3 = pe) === null || _pe3 === void 0 ? void 0 : _pe3.length) === 0) {\n        return of(null).toPromise();\n      }\n      return getCustomFunctionAnalytics(this.engine, {\n        functions: dx,\n        orgUnits: ou,\n        periods: pe\n      });\n    }\n    return of(null).toPromise();\n  }\n  _getNormalScorecardData(selections) {\n    var _selectionList;\n    const {\n      selectedOrgUnits,\n      selectedPeriods,\n      selectedDataItems\n    } = selections !== null && selections !== void 0 ? selections : {};\n    let selectionList = [];\n    selectedOrgUnits.forEach(orgUnit => {\n      const dataItemList = chunk(selectedDataItems.map(dataItem => {\n        return selectedPeriods.map(period => {\n          return {\n            dx: dataItem.id,\n            ou: orgUnit,\n            pe: period\n          };\n        });\n      }), 2);\n      dataItemList.forEach(selectedDataList => {\n        selectionList = [...selectionList, flatten(selectedDataList)];\n      });\n    });\n    this._totalRequests = (_selectionList = selectionList) === null || _selectionList === void 0 ? void 0 : _selectionList.length;\n    mapLimit(selectionList, 10, (selection, callback) => {\n      this._getAnalyticsData(selection).then(result => {\n        this._progress = this._progress + 1;\n        this._progress$.next(this._progress);\n        callback(null, result);\n      }).catch(error => {\n        callback(error, null);\n      });\n    }, (totalErr, totalRes) => {\n      this._loading$.next(false);\n    });\n  }\n  _getCustomScorecardData(selections) {\n    window.$ = $;\n    const {\n      selectedOrgUnits,\n      selectedPeriods,\n      selectedDataItems\n    } = selections !== null && selections !== void 0 ? selections : {};\n    if ((selectedDataItems === null || selectedDataItems === void 0 ? void 0 : selectedDataItems.length) === 0) {\n      return new Promise(resolve => resolve(null));\n    }\n    let selectionList = [];\n    selectedOrgUnits.forEach(orgUnit => {\n      const dataItemList = chunk(selectedDataItems.map(dataItem => {\n        return selectedPeriods.map(period => {\n          return {\n            dx: dataItem.id,\n            ou: orgUnit,\n            pe: period\n          };\n        });\n      }), 2);\n      dataItemList.forEach(selectedDataList => {\n        selectionList = [...selectionList, flatten(selectedDataList)];\n      });\n    });\n    mapLimit(selectionList, 10, (selection, callback) => {\n      this._getCustomAnalyticsData(selection).then(result => {\n        var _result$rows$map, _result$rows;\n        this._updateDataEntities((_result$rows$map = result === null || result === void 0 ? void 0 : (_result$rows = result.rows) === null || _result$rows === void 0 ? void 0 : _result$rows.map(([dx, pe, ou, value]) => fromPairs([[\"dx\", {\n          id: dx\n        }], [\"pe\", {\n          id: pe\n        }], [\"ou\", {\n          id: ou\n        }], [\"value\", `${value}`]]))) !== null && _result$rows$map !== void 0 ? _result$rows$map : []);\n        this._progress = this._progress + 1;\n        this._progress$.next(this._progress);\n        callback(null, result);\n      }).catch(error => {\n        callback(error, null);\n      });\n    });\n  }\n  _getSelectedPeriods(periods, periodType) {\n    if ((periods === null || periods === void 0 ? void 0 : periods.length) > 0) {\n      return periods;\n    }\n    try {\n      var _Period, _Period$setPreference, _Period$setPreference2;\n      const periods = (_Period = new Period()) === null || _Period === void 0 ? void 0 : (_Period$setPreference = _Period.setPreferences({\n        allowFuturePeriods: true\n      }).setType(periodType)) === null || _Period$setPreference === void 0 ? void 0 : (_Period$setPreference2 = _Period$setPreference.get()) === null || _Period$setPreference2 === void 0 ? void 0 : _Period$setPreference2.list();\n      const currentPeriod = periods ? periods[0] : null;\n      return [currentPeriod, ...(currentPeriod !== null && currentPeriod !== void 0 && currentPeriod.lastPeriod ? [currentPeriod === null || currentPeriod === void 0 ? void 0 : currentPeriod.lastPeriod] : [])];\n    } catch (e) {\n      console.warn(e);\n      return null;\n    }\n  }\n  _getSelectedData(dataGroups) {\n    const selectedItems = flatten((dataGroups || []).map(dataGroup => flatten(((dataGroup === null || dataGroup === void 0 ? void 0 : dataGroup.dataHolders) || []).map(dataHolder => dataHolder.dataSources))));\n    return {\n      normalDataItems: selectedItems.filter(selectedItem => selectedItem.type !== \"customFunction\"),\n      customDataItems: selectedItems.filter(selectedItem => selectedItem.type === \"customFunction\")\n    };\n  }\n}","import DataModel from \"./base\";\nimport { uid } from \"../utils\";\nexport default class ScorecardIndicator extends DataModel {\n  get defaults() {\n    return {\n      id: uid(),\n      type: \"\",\n      label: \"\",\n      name: \"\",\n      weight: 100,\n      effectiveGap: 5,\n      displayArrows: true,\n      highIsGood: true,\n      showColors: true,\n      legends: [],\n      specificTargets: [],\n      specificTargetsSet: false\n    };\n  }\n}","import DataModel from \"./base\";\nimport ScorecardIndicator from \"./scorecardIndicator\";\nimport { uid } from \"../utils\";\nexport default class ScorecardIndicatorHolder extends DataModel {\n  constructor(attributes) {\n    super(attributes);\n  }\n  get defaults() {\n    return {\n      id: uid(),\n      dataSources: []\n    };\n  }\n  static linkDataSource(holder = new ScorecardIndicatorHolder(), scorecardIndicator = new ScorecardIndicator()) {\n    return ScorecardIndicatorHolder.set(holder, \"dataSources\", [...holder.dataSources, scorecardIndicator]);\n  }\n}","import DataModel from \"./base\";\nimport { uid } from \"../utils\";\nexport default class ScorecardLegend extends DataModel {\n  get defaults() {\n    return {\n      id: uid(),\n      legendDefinitionId: \"\",\n      startValue: null,\n      endValue: null\n    };\n  }\n}","import DataModel from \"./base\";\nimport { uid } from \"../utils\";\nexport default class ScorecardIndicatorGroup extends DataModel {\n  constructor(attributes) {\n    super(attributes);\n  }\n  get defaults() {\n    return {\n      id: uid(),\n      title: \"\",\n      dataHolders: [],\n      style: {\n        backgroundColor: \"#FFFFFF\",\n        color: \"#000000\"\n      }\n    };\n  }\n}","const generateCustomFunctionQuery = (keys = []) => {\n  const query = {};\n  for (const key of keys) {\n    query[key] = {\n      resource: `dataStore/functions/${key}`\n    };\n  }\n  return query;\n};\nexport default async function getCustomFunctions(keys = [], engine) {\n  const query = generateCustomFunctionQuery(keys);\n  return await engine.query(query);\n}","import { Fn } from \"@iapps/function-analytics\";\nimport { Period } from \"@iapps/period-utilities\";\nimport { uniq } from \"lodash\";\nexport default async function getScorecardCellData({\n  orgUnit,\n  periods,\n  dataSources\n}) {\n  try {\n    const previousPeriods = periods === null || periods === void 0 ? void 0 : periods.map(id => {\n      var _period$lastPeriod;\n      const period = new Period().setPreferences({\n        allowFuturePeriods: true\n      }).getById(id);\n      return period === null || period === void 0 ? void 0 : (_period$lastPeriod = period.lastPeriod) === null || _period$lastPeriod === void 0 ? void 0 : _period$lastPeriod.id;\n    });\n    const allPeriods = uniq([...periods, ...previousPeriods]);\n    return await new Fn.Analytics().setOrgUnit(orgUnit).setPeriod(allPeriods === null || allPeriods === void 0 ? void 0 : allPeriods.join(\";\")).setData(dataSources.join(\";\")).get();\n  } catch (e) {\n    console.error(e);\n  }\n}\nexport async function getHighlightedIndicatorsData({\n  orgUnits,\n  periods,\n  highlightedIndicators\n}) {\n  try {\n    return await new Fn.Analytics().setOrgUnit(orgUnits === null || orgUnits === void 0 ? void 0 : orgUnits.join(\";\")).setPeriod(periods === null || periods === void 0 ? void 0 : periods.join(\";\")).setData(highlightedIndicators === null || highlightedIndicators === void 0 ? void 0 : highlightedIndicators.join(\";\")).get();\n  } catch (e) {\n    console.error(e);\n  }\n}","import { Fn } from \"@iapps/function-analytics\";\nimport { Period } from \"@iapps/period-utilities\";\nimport { flatten } from \"lodash\";\nexport default async function getScorecardData(scorecard) {\n  const selectedOrgUnits = _getSelectedOrgUnits(scorecard.orgUnitSelection);\n  const {\n    currentPeriods,\n    previousPeriods\n  } = _getSelectedPeriods(scorecard.periodSelection, scorecard.periodType);\n  const selectedData = _getSelectedData(scorecard.dataSelection);\n  return Promise.all([_getScorecardData({\n    selectedOrgUnits,\n    selectedPeriods: currentPeriods,\n    selectedData\n  }), _getScorecardData({\n    selectedOrgUnits,\n    selectedPeriods: previousPeriods,\n    selectedData\n  })]);\n}\nfunction _getScorecardData(selections) {\n  const {\n    selectedOrgUnits,\n    selectedPeriods,\n    selectedData\n  } = selections;\n  const {\n    normalDataItems,\n    customDataItems\n  } = selectedData;\n  return new Promise((resolve, reject) => {\n    Promise.all([_getNormalScorecardData({\n      selectedOrgUnits,\n      selectedPeriods,\n      selectedDataItems: normalDataItems\n    }), _getCustomScorecardData({\n      selectedOrgUnits,\n      selectedPeriods,\n      selectedDataItems: customDataItems\n    })]).then(res => {\n      resolve(res);\n    }).catch(error => {\n      reject(error);\n    });\n  });\n}\nfunction _getNormalScorecardData(selections) {\n  const {\n    selectedOrgUnits,\n    selectedPeriods,\n    selectedDataItems\n  } = selections;\n  return new Fn.Analytics().setOrgUnit(selectedOrgUnits === null || selectedOrgUnits === void 0 ? void 0 : selectedOrgUnits.join(\";\")).setPeriod(selectedPeriods === null || selectedPeriods === void 0 ? void 0 : selectedPeriods.join(\";\")).setData(selectedDataItems.map(dataItem => dataItem.id).join(\";\")).get();\n}\nfunction _getCustomScorecardData(selections) {\n  const {\n    selectedOrgUnits,\n    selectedPeriods,\n    selectedDataItems\n  } = selections;\n  if ((selectedDataItems === null || selectedDataItems === void 0 ? void 0 : selectedDataItems.length) === 0) {\n    return new Promise(resolve => resolve(null));\n  }\n\n  // TODO Add implementation when there is custom indicator\n  new Promise(resolve => resolve(null));\n}\n\n// TODO Derive selected period from period selection if supplied\nfunction _getSelectedPeriods(periodSelection, periodType) {\n  try {\n    var _Period$setPreference, _Period$setPreference2, _Period$setPreference3, _currentPeriod$lastPe;\n    const periods = (_Period$setPreference = new Period().setPreferences({\n      allowFuturePeriods: true\n    })) === null || _Period$setPreference === void 0 ? void 0 : (_Period$setPreference2 = _Period$setPreference.setType(periodType)) === null || _Period$setPreference2 === void 0 ? void 0 : (_Period$setPreference3 = _Period$setPreference2.get()) === null || _Period$setPreference3 === void 0 ? void 0 : _Period$setPreference3.list();\n    const currentPeriod = periods ? periods[0] : null;\n    return {\n      currentPeriods: currentPeriod ? [currentPeriod.id] : [],\n      previousPeriods: currentPeriod !== null && currentPeriod !== void 0 && currentPeriod.lastPeriod ? [(_currentPeriod$lastPe = currentPeriod.lastPeriod) === null || _currentPeriod$lastPe === void 0 ? void 0 : _currentPeriod$lastPe.id] : []\n    };\n  } catch (e) {\n    console.warn(e);\n    return null;\n  }\n}\nfunction _getSelectedOrgUnits(orgUnitSelection) {\n  var _orgUnitSelection$org;\n  let orgUnitString = [];\n  if (orgUnitSelection.userOrgUnit) {\n    orgUnitString = [\"USER_ORGUNIT\"];\n  }\n  if (orgUnitSelection.userSubUnit) {\n    orgUnitString = [...orgUnitString, \"USER_ORGUNIT_CHILDREN\"];\n  }\n  if (orgUnitSelection.userSubX2Unit) {\n    orgUnitString = [...orgUnitString, \"USER_ORGUNIT_GRANDCHILDREN\"];\n  }\n  if ((orgUnitSelection === null || orgUnitSelection === void 0 ? void 0 : (_orgUnitSelection$org = orgUnitSelection.orgUnitIds) === null || _orgUnitSelection$org === void 0 ? void 0 : _orgUnitSelection$org.length) > 0) {\n    orgUnitString = orgUnitSelection === null || orgUnitSelection === void 0 ? void 0 : orgUnitSelection.orgUnitIds;\n  }\n  return orgUnitString;\n}\nfunction _getSelectedData(dataSelection) {\n  const selectedItems = flatten(dataSelection === null || dataSelection === void 0 ? void 0 : dataSelection.dataGroups.map(dataGroup => flatten(((dataGroup === null || dataGroup === void 0 ? void 0 : dataGroup.dataHolders) || []).map(dataHolder => dataHolder.dataSources))));\n  return {\n    normalDataItems: selectedItems.filter(selectedItem => selectedItem.type !== \"functionRule\"),\n    customDataItems: selectedItems.filter(selectedItem => selectedItem.type === \"functionRule\")\n  };\n}","import { omitBy } from \"lodash\";\nexport function getOrgUnitsFromAnalytics(analytics) {\n  var _dimensions$ou;\n  const {\n    metaData\n  } = analytics !== null && analytics !== void 0 ? analytics : {};\n  const {\n    ouHierarchy,\n    items,\n    ouNameHierarchy,\n    dimensions\n  } = metaData !== null && metaData !== void 0 ? metaData : {};\n  const cleanedOuHierarchy = omitBy(ouHierarchy, ou => !ou);\n  return dimensions === null || dimensions === void 0 ? void 0 : (_dimensions$ou = dimensions.ou) === null || _dimensions$ou === void 0 ? void 0 : _dimensions$ou.map(ou => {\n    var _cleanedOuHierarchy$o, _items$ou, _cleanedOuHierarchy$o2, _cleanedOuHierarchy$o3, _cleanedOuHierarchy$o4, _ouNameHierarchy$ou;\n    const path = `${(_cleanedOuHierarchy$o = cleanedOuHierarchy === null || cleanedOuHierarchy === void 0 ? void 0 : cleanedOuHierarchy[ou]) !== null && _cleanedOuHierarchy$o !== void 0 ? _cleanedOuHierarchy$o : \"\"}/${ou}`;\n    return {\n      id: ou,\n      displayName: items === null || items === void 0 ? void 0 : (_items$ou = items[ou]) === null || _items$ou === void 0 ? void 0 : _items$ou.name,\n      path: path.startsWith(\"/\") ? path : `/${path}`,\n      level: ((_cleanedOuHierarchy$o2 = cleanedOuHierarchy === null || cleanedOuHierarchy === void 0 ? void 0 : (_cleanedOuHierarchy$o3 = cleanedOuHierarchy[ou]) === null || _cleanedOuHierarchy$o3 === void 0 ? void 0 : (_cleanedOuHierarchy$o4 = _cleanedOuHierarchy$o3.split(\"/\")) === null || _cleanedOuHierarchy$o4 === void 0 ? void 0 : _cleanedOuHierarchy$o4.length) !== null && _cleanedOuHierarchy$o2 !== void 0 ? _cleanedOuHierarchy$o2 : 0) + 1,\n      hierarchy: ouNameHierarchy === null || ouNameHierarchy === void 0 ? void 0 : (_ouNameHierarchy$ou = ouNameHierarchy[ou]) === null || _ouNameHierarchy$ou === void 0 ? void 0 : _ouNameHierarchy$ou.replace(\"/\", \"\")\n    };\n  });\n}\nexport function isOrgUnitId(id) {\n  return !id.match(/(LEVEL-)|(USER_)|(OU_GROUP-)\\w+/);\n}","const systemSettingsKeys = [\"keyCalendar\"];\nconst systemSettingsQuery = {\n  system: {\n    resource: \"systemSettings\",\n    params: ({\n      keys\n    }) => ({\n      keys: keys === null || keys === void 0 ? void 0 : keys.map(key => `key=${key}`)\n    })\n  }\n};\nexport default async function getSystemSettings(engine) {\n  const {\n    system\n  } = await engine.query(systemSettingsQuery, {\n    variables: {\n      keys: systemSettingsKeys\n    }\n  });\n  const {\n    keyCalendar\n  } = system !== null && system !== void 0 ? system : {};\n  return {\n    calendar: keyCalendar\n  };\n}","import { compact } from \"lodash\";\nimport { DATASTORE_ENDPOINT } from \"../constants\";\nimport { OrgUnitSelection } from \"../models\";\nconst query = {\n  scorecard: {\n    resource: DATASTORE_ENDPOINT,\n    id: ({\n      id\n    }) => id\n  }\n};\nexport default async function getScorecard(id = \"\", engine) {\n  if (id) {\n    try {\n      const response = await engine.query(query, {\n        variables: {\n          id\n        }\n      });\n      const sanitizedScorecard = sanitizeDataSelection(response === null || response === void 0 ? void 0 : response.scorecard);\n      return {\n        scorecard: sanitizedScorecard\n      };\n    } catch (e) {\n      return {\n        error: e\n      };\n    }\n  }\n  return {\n    error: \"not found\"\n  };\n}\nfunction sanitizeDataSelection(scorecard) {\n  var _scorecard$dataSelect;\n  const {\n    dataGroups\n  } = (_scorecard$dataSelect = scorecard['dataSelection']) !== null && _scorecard$dataSelect !== void 0 ? _scorecard$dataSelect : {};\n  const sanitizedGroups = dataGroups.map(group => ({\n    ...group,\n    dataHolders: compact(group === null || group === void 0 ? void 0 : group.dataHolders)\n  }));\n  return {\n    ...scorecard,\n    dataSelection: {\n      dataGroups: sanitizedGroups\n    }\n  };\n}\nconst orgUnitQuery = {\n  orgUnits: {\n    resource: \"organisationUnits\",\n    params: ({\n      orgUnits\n    }) => ({\n      filter: [`id:in:[${orgUnits === null || orgUnits === void 0 ? void 0 : orgUnits.join(\",\")}]`],\n      fields: [\"path\", \"displayName\", \"level\", \"id\"]\n    })\n  }\n};\nexport async function getOrgUnitSelection({\n  orgUnitSelection\n}, engine) {\n  var _orgUnitsIds$map;\n  const {\n    orgUnits: orgUnitsIds\n  } = orgUnitSelection !== null && orgUnitSelection !== void 0 ? orgUnitSelection : {};\n  const {\n    orgUnits: resolvedOrgUnits\n  } = await engine.query(orgUnitQuery, {\n    variables: {\n      orgUnits: (_orgUnitsIds$map = orgUnitsIds === null || orgUnitsIds === void 0 ? void 0 : orgUnitsIds.map(({\n        id\n      }) => id)) !== null && _orgUnitsIds$map !== void 0 ? _orgUnitsIds$map : []\n    }\n  });\n  return new OrgUnitSelection({\n    ...orgUnitSelection,\n    orgUnits: resolvedOrgUnits === null || resolvedOrgUnits === void 0 ? void 0 : resolvedOrgUnits.organisationUnits\n  });\n}","import { compact, filter, isEmpty } from \"lodash\";\nimport { DATASTORE_ENDPOINT, DATASTORE_SCORECARD_SUMMARY_KEY } from \"../constants\";\nimport { generateScorecardSummary } from \"../utils\";\nconst query = {\n  summary: {\n    resource: DATASTORE_ENDPOINT,\n    id: DATASTORE_SCORECARD_SUMMARY_KEY\n  }\n};\nconst addMutation = {\n  type: \"create\",\n  resource: `${DATASTORE_ENDPOINT}/${DATASTORE_SCORECARD_SUMMARY_KEY}`,\n  data: ({\n    data\n  }) => data\n};\nasync function initializeKey(engine) {\n  return await engine.mutate(addMutation, {\n    variables: {\n      data: []\n    }\n  });\n}\nexport default async function getScorecardSummary(engine) {\n  try {\n    const response = await engine.query(query);\n    return {\n      summary: response === null || response === void 0 ? void 0 : response.summary\n    };\n  } catch (e) {\n    var _e$details;\n    if ((e === null || e === void 0 ? void 0 : (_e$details = e.details) === null || _e$details === void 0 ? void 0 : _e$details.httpStatusCode) === 404) {\n      await initializeKey(engine);\n      return getScorecardSummary(engine);\n    }\n    return {\n      error: e\n    };\n  }\n}\nconst restoreQuery = {\n  scorecards: {\n    resource: DATASTORE_ENDPOINT\n  }\n};\nconst restoreMutation = {\n  type: \"update\",\n  resource: DATASTORE_ENDPOINT,\n  id: DATASTORE_SCORECARD_SUMMARY_KEY,\n  data: ({\n    data\n  }) => data\n};\nconst singleScorecardQuery = {\n  scorecard: {\n    resource: DATASTORE_ENDPOINT,\n    id: ({\n      id\n    }) => id\n  }\n};\nexport const restoreScorecardSummary = async engine => {\n  const {\n    summary,\n    error\n  } = await getScorecardSummary(engine);\n  if (!error) {\n    const {\n      scorecards: allKeys\n    } = await engine.query(restoreQuery);\n    const scorecards = filter(allKeys, key => key !== \"settings\" && key !== \"savedObjects\");\n    if (!isEmpty(scorecards)) {\n      const scorecardsToRestore = filter(scorecards, key => {\n        var _summary$map;\n        return !(summary !== null && summary !== void 0 && (_summary$map = summary.map(({\n          id\n        }) => id)) !== null && _summary$map !== void 0 && _summary$map.includes(key));\n      });\n      if (!isEmpty(scorecardsToRestore)) {\n        const updatedSummary = [...summary];\n        for (const scorecardId of scorecardsToRestore) {\n          const {\n            scorecard\n          } = await engine.query(singleScorecardQuery, {\n            variables: {\n              id: scorecardId\n            }\n          });\n          const scorecardSummary = generateScorecardSummary(scorecard);\n          updatedSummary.push(scorecardSummary);\n        }\n        await engine.mutate(restoreMutation, {\n          variables: {\n            data: updatedSummary.filter(summary => !isEmpty(compact(Object.values(summary))))\n          }\n        });\n      }\n    }\n  }\n};","import PropTypes from \"prop-types\";\nimport React from \"react\";\nexport const IncreasingArrows = ({\n  x,\n  y,\n  decreasing,\n  fontSize\n}) => /*#__PURE__*/React.createElement(\"path\", {\n  d: `M ${x} ${y} L ${x - fontSize / 2} ${y + fontSize} L ${x + fontSize / 2} ${y + fontSize} Z`,\n  fill: \"black\",\n  transform: decreasing && \"rotate(90)\"\n});\nIncreasingArrows.propTypes = {\n  fontSize: PropTypes.number.isRequired,\n  x: PropTypes.number.isRequired,\n  y: PropTypes.number.isRequired,\n  decreasing: PropTypes.bool\n};\nexport const DecreasingArrows = ({\n  x,\n  y,\n  fontSize\n}) => /*#__PURE__*/React.createElement(\"path\", {\n  d: `M ${x} ${y} L ${x - fontSize / 2} ${y - fontSize} L ${x + fontSize / 2} ${y - fontSize} Z`,\n  fill: \"black\"\n});\nDecreasingArrows.propTypes = {\n  fontSize: PropTypes.number.isRequired,\n  x: PropTypes.number.isRequired,\n  y: PropTypes.number.isRequired\n};","import i18n from '@dhis2/d2-i18n';\nimport { colors } from '@dhis2/ui';\nimport { Period } from \"@iapps/period-utilities\";\nimport { find } from \"lodash\";\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useRecoilValue } from \"recoil\";\nimport { OrgUnitLevels, ScorecardViewState, SelectedOrgUnits } from \"../../../../../../state\";\nfunction LegendsView({\n  legends\n}) {\n  const legendDefinitions = useRecoilValue(ScorecardViewState(\"legendDefinitions\"));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column gap-8\"\n  }, /*#__PURE__*/React.createElement(\"table\", null, /*#__PURE__*/React.createElement(\"col\", {\n    width: \"60%\"\n  }), /*#__PURE__*/React.createElement(\"col\", {\n    width: \"20%\"\n  }), /*#__PURE__*/React.createElement(\"col\", {\n    width: \"20%\"\n  }), /*#__PURE__*/React.createElement(\"thead\", null, /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", {\n    align: \"left\"\n  }, i18n.t(\"Legend\")), /*#__PURE__*/React.createElement(\"th\", null, i18n.t(\"Min\")), /*#__PURE__*/React.createElement(\"th\", null, i18n.t(\"Max\")))), /*#__PURE__*/React.createElement(\"tbody\", null, legends === null || legends === void 0 ? void 0 : legends.map(legend => {\n    const legendDefinition = find(legendDefinitions, {\n      id: legend.legendDefinitionId\n    });\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: `${legend.id}-view`\n    }, /*#__PURE__*/React.createElement(\"td\", null, /*#__PURE__*/React.createElement(\"table\", null, /*#__PURE__*/React.createElement(\"col\", {\n      width: \"20%\"\n    }), /*#__PURE__*/React.createElement(\"col\", {\n      width: \"80%\"\n    }), /*#__PURE__*/React.createElement(\"tbody\", null, /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"td\", null, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        height: 24,\n        width: 32,\n        background: legendDefinition.color\n      }\n    })), /*#__PURE__*/React.createElement(\"td\", null, legendDefinition.name))))), /*#__PURE__*/React.createElement(\"td\", {\n      align: \"center\"\n    }, legend === null || legend === void 0 ? void 0 : legend.startValue), /*#__PURE__*/React.createElement(\"td\", {\n      align: \"center\"\n    }, legend === null || legend === void 0 ? void 0 : legend.endValue));\n  }))));\n}\nLegendsView.propTypes = {\n  legends: PropTypes.array\n};\nexport function OrgUnitSpecificTargetView({\n  dataSourceLabel,\n  specificTarget\n}) {\n  var _orgUnits$map;\n  const {\n    items,\n    legends\n  } = specificTarget !== null && specificTarget !== void 0 ? specificTarget : {};\n  const orgUnits = useRecoilValue(SelectedOrgUnits(items));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      maxWidth: 350,\n      border: `1px solid ${colors.grey600}`,\n      borderRadius: 4\n    },\n    className: \"column gap-16 p-16\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column gap-16\"\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Organisation Unit(s)\"), \": \"), \" \", orgUnits === null || orgUnits === void 0 ? void 0 : (_orgUnits$map = orgUnits.map(ou => ou.displayName)) === null || _orgUnits$map === void 0 ? void 0 : _orgUnits$map.join(\", \")), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Data Source\"), \": \"), dataSourceLabel)), /*#__PURE__*/React.createElement(LegendsView, {\n    legends: legends\n  }));\n}\nexport function PeriodSpecificTargetView({\n  dataSourceLabel,\n  specificTarget\n}) {\n  var _items$map;\n  const {\n    items,\n    legends\n  } = specificTarget !== null && specificTarget !== void 0 ? specificTarget : {};\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      maxWidth: 350,\n      border: `1px solid ${colors.grey600}`,\n      borderRadius: 4\n    },\n    className: \"column gap-16 p-16\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column gap-16\"\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Period\"), \": \"), \" \", items === null || items === void 0 ? void 0 : (_items$map = items.map(pe => {\n    var _Period$setPreference;\n    return (_Period$setPreference = new Period().setPreferences({\n      allowFuturePeriods: true\n    }).getById(pe)) === null || _Period$setPreference === void 0 ? void 0 : _Period$setPreference.name;\n  })) === null || _items$map === void 0 ? void 0 : _items$map.join(\", \")), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Data Source\"), \": \"), dataSourceLabel)), /*#__PURE__*/React.createElement(LegendsView, {\n    legends: legends\n  }));\n}\nexport function OrgUnitLevelSpecificTargetView({\n  dataSourceLabel,\n  legends\n}) {\n  const levels = useRecoilValue(OrgUnitLevels);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row gap-16 page-break-avoid\"\n  }, levels === null || levels === void 0 ? void 0 : levels.map(level => {\n    var _level$displayName;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      key: `${level.id}- specific-level-view`,\n      style: {\n        maxWidth: 350,\n        border: `1px solid ${colors.grey600}`,\n        borderRadius: 4\n      },\n      className: \"column gap-16 p-16\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column gap-16\"\n    }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Organisation Unit Level\"), \": \"), \" \", (_level$displayName = level.displayName) !== null && _level$displayName !== void 0 ? _level$displayName : level.name), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Data Source\"), \": \"), dataSourceLabel)), /*#__PURE__*/React.createElement(LegendsView, {\n      legends: legends[level.id]\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"page-break\"\n    }));\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page-break\"\n  }));\n}\nOrgUnitLevelSpecificTargetView.propTypes = {\n  dataSourceLabel: PropTypes.string,\n  legends: PropTypes.object\n};\nOrgUnitSpecificTargetView.propTypes = {\n  dataSourceLabel: PropTypes.string,\n  specificTarget: PropTypes.object\n};\nPeriodSpecificTargetView.propTypes = {\n  dataSourceLabel: PropTypes.string,\n  specificTarget: PropTypes.object\n};","// extracted by mini-css-extract-plugin\nexport default {\"specific-targets-lib\":\"SpecificTargetsLibrary_specific-targets-lib__Fce6Y\"};","import i18n from '@dhis2/d2-i18n';\nimport { Button, CircularLoader, Modal, ModalActions, ModalContent, ModalTitle } from '@dhis2/ui';\nimport { filter, groupBy, head, isEmpty } from \"lodash\";\nimport PropTypes from 'prop-types';\nimport React, { Suspense, useMemo } from \"react\";\nimport { useRecoilValue } from \"recoil\";\nimport { OrgUnitLevelSpecificTargetView, OrgUnitSpecificTargetView, PeriodSpecificTargetView } from \"./components/SpecificTargetView\";\nimport classes from \"./SpecificTargetsLibrary.module.css\";\nimport { ScorecardViewState } from \"../../../../state\";\nimport { getDataSourcesFromGroups } from \"../../../../utils\";\nexport function SpecificTargetsLibrary() {\n  var _specificTargetsDataS, _specificTargetsDataS2, _specificTargetsDataS3;\n  const {\n    dataGroups\n  } = useRecoilValue(ScorecardViewState(\"dataSelection\"));\n  const dataSources = useMemo(() => getDataSourcesFromGroups(dataGroups), [dataGroups]);\n  const specificTargetsDataSourcesByType = useMemo(() => {\n    const dataSourcesWithSpecificTargets = filter(dataSources, ds => ds.specificTargetsSet);\n    const data = groupBy(filter(dataSourcesWithSpecificTargets, ds => !isEmpty(ds.specificTargets)), ds => {\n      var _head;\n      return (_head = head(ds.specificTargets)) === null || _head === void 0 ? void 0 : _head.type;\n    });\n    data[\"orgUnitLevel\"] = dataSourcesWithSpecificTargets.filter(ds => isEmpty(ds.specificTargets));\n    return data;\n  }, [dataSources]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column gap-16\"\n  }, !isEmpty(specificTargetsDataSourcesByType === null || specificTargetsDataSourcesByType === void 0 ? void 0 : specificTargetsDataSourcesByType.orgUnit) && /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Organisation Units Specific targets\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row gap-16\"\n  }, specificTargetsDataSourcesByType === null || specificTargetsDataSourcesByType === void 0 ? void 0 : (_specificTargetsDataS = specificTargetsDataSourcesByType.orgUnit) === null || _specificTargetsDataS === void 0 ? void 0 : _specificTargetsDataS.map(dataSource => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(OrgUnitSpecificTargetView, {\n    key: `${dataSource.id}-orgUnit-specific-target`,\n    specificTarget: head(dataSource.specificTargets),\n    dataSourceLabel: dataSource.label\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page-break\"\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page-break\"\n  })), !isEmpty(specificTargetsDataSourcesByType === null || specificTargetsDataSourcesByType === void 0 ? void 0 : specificTargetsDataSourcesByType.period) && /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Period Specific targets\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row gap-16\"\n  }, specificTargetsDataSourcesByType === null || specificTargetsDataSourcesByType === void 0 ? void 0 : (_specificTargetsDataS2 = specificTargetsDataSourcesByType.period) === null || _specificTargetsDataS2 === void 0 ? void 0 : _specificTargetsDataS2.map(dataSource => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PeriodSpecificTargetView, {\n    key: `${dataSource.id}-orgUnit-specific-target`,\n    specificTarget: head(dataSource.specificTargets),\n    dataSourceLabel: dataSource.label\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page-break\"\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page-break\"\n  })), !isEmpty(specificTargetsDataSourcesByType === null || specificTargetsDataSourcesByType === void 0 ? void 0 : specificTargetsDataSourcesByType.orgUnitLevell) && /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Organisation unit level targets\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column gap-16\"\n  }, specificTargetsDataSourcesByType === null || specificTargetsDataSourcesByType === void 0 ? void 0 : (_specificTargetsDataS3 = specificTargetsDataSourcesByType.orgUnitLevel) === null || _specificTargetsDataS3 === void 0 ? void 0 : _specificTargetsDataS3.map(dataSource => /*#__PURE__*/React.createElement(OrgUnitLevelSpecificTargetView, {\n    key: `${dataSource.id}-orgUnit-specific-target`,\n    legends: dataSource.legends,\n    dataSourceLabel: dataSource.label\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page-break\"\n  }))));\n}\nexport default function SpecificTargetsLibraryModal({\n  open,\n  onClose\n}) {\n  return /*#__PURE__*/React.createElement(Modal, {\n    onClose: onClose,\n    className: classes[\"specific-targets-lib\"],\n    large: true,\n    position: \"middle\",\n    hide: !open\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, \"Specific Targets Library\"), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column align-items-center justify-content-center\",\n      style: {\n        height: \"60vh\",\n        width: \"100%\"\n      }\n    }, /*#__PURE__*/React.createElement(CircularLoader, {\n      small: true\n    }))\n  }, /*#__PURE__*/React.createElement(SpecificTargetsLibrary, null))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(Button, {\n    onClick: onClose\n  }, i18n.t(\"Cancel\"))));\n}\nSpecificTargetsLibraryModal.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired\n};","export const APP_NAME = \"hisptz-scorecard\";\nexport const APP_TITLE = \"Interactive Scorecard\";\nexport const DATASTORE_NAMESPACE = \"hisptz-scorecard\";\nexport const DATASTORE_ENDPOINT = \"dataStore/hisptz-scorecard\";\nexport const DATASTORE_SCORECARD_SUMMARY_KEY = \"scorecard-summary\";\nexport const DATASTORE_SCORECARD_SUMMARY_INCLUDE_KEYS = [{\n  key: \"title\",\n  path: [\"title\"]\n}, {\n  key: \"description\",\n  path: [\"description\"]\n}, {\n  key: \"id\",\n  path: [\"id\"]\n}, {\n  key: \"user\",\n  path: [\"user\", \"id\"]\n}, {\n  key: \"userAccesses\",\n  path: [\"userAccesses\"]\n}, {\n  key: \"userGroupAccesses\",\n  path: [\"userGroupAccesses\"]\n}, {\n  key: \"publicAccess\",\n  path: [\"publicAccess\"]\n}, {\n  key: \"additionalLabels\",\n  path: [\"additionalLabels\"]\n}];\nexport const DATASTORE_OLD_SCORECARD_ENDPOINT = \"dataStore/scorecards\";\nexport const DATASTORE_FUNCTIONS_ENDPOINT = \"dataStore/functions\";\nexport const SCORECARD_DOCUMENTATION_URL = \"https://docs.dhis2.org/en/use/optional-apps/interactive-scorecard-app/app-version-01/scorecard-and-demo.html\";","export const ALMA_HEADERS = [{\n  name: \"dx\",\n  column: \"Data\",\n  valueType: \"TEXT\",\n  type: \"java.lang.String\",\n  hidden: false,\n  meta: true\n}, {\n  name: \"pe\",\n  column: \"Period\",\n  valueType: \"TEXT\",\n  type: \"java.lang.String\",\n  hidden: false,\n  meta: true\n}, {\n  name: \"ou\",\n  column: \"Organisation unit\",\n  valueType: \"TEXT\",\n  type: \"java.lang.String\",\n  hidden: false,\n  meta: true\n}, {\n  name: \"value\",\n  column: \"Value\",\n  valueType: \"NUMBER\",\n  type: \"java.lang.Double\",\n  hidden: false,\n  meta: false\n}];","export const CalendarTypes = {\n  ETHIOPIAN: \"ethiopian\",\n  GREGORIAN: \"gregorian\"\n};","import i18n from '@dhis2/d2-i18n';\nimport { Area, Bar, Column, Dotted, Pie } from \"../resources\";\nexport const CHART_TYPES = [{\n  type: \"column\",\n  description: i18n.t(\"Column chart\"),\n  icon: Column\n}, {\n  type: \"line\",\n  description: i18n.t(\"Line chart\"),\n  icon: Dotted\n}, {\n  type: \"bar\",\n  description: i18n.t(\"Bar chart\"),\n  icon: Bar\n}, {\n  type: \"area\",\n  description: i18n.t(\"Area chart\"),\n  icon: Area\n}, {\n  type: \"pie\",\n  description: i18n.t(\"Pie chart\"),\n  icon: Pie\n}];","export const DownloadTypes = {\n  EXCEL: \"Excel\",\n  PDF: \"PDF\",\n  CSV: \"CSV\"\n};","export const DraggableItems = {\n  DATA_COLUMN: \"dataColumn\",\n  ORG_UNIT_COLUMN: \"orgUnitColumn\",\n  DATA_ROW: \"dataRow\",\n  ORG_UNIT_ROW: \"orgUnitRow\",\n  OU_LAYOUT: \"ou\",\n  DX_LAYOUT: \"dx\",\n  PE_LAYOUT: \"pe\"\n};","export const REQUIRED_FIELDS = [\"title\", \"description\", \"periodType\"];\nexport const DHIS2ValueTypes = {\n  INTEGER: {\n    name: \"INTEGER\",\n    formName: \"number\"\n  },\n  TRUE_ONLY: {\n    name: \"TRUE_ONLY\",\n    formName: \"checkbox\"\n  },\n  TEXT: {\n    name: \"TEXT\",\n    formName: \"text\"\n  },\n  NUMBER: {\n    name: \"NUMBER\",\n    formName: \"number\"\n  },\n  DATE: {\n    name: \"DATE\",\n    formName: \"date\"\n  },\n  LONG_TEXT: {\n    name: \"LONG_TEXT\",\n    formName: \"textarea\"\n  },\n  LEGEND_DEFINITION: {\n    name: \"LEGEND_DEFINITION\",\n    formName: \"legendDefinition\"\n  },\n  RICH_TEXT: {\n    name: \"RICH_TEXT\",\n    formName: \"richText\"\n  },\n  LEGEND_MIN_MAX: {\n    name: \"LEGEND_MIN_MAX\",\n    formName: \"legendMinMax\"\n  },\n  NORMAL_LEGEND_MIN_MAX: {\n    name: \"NORMAL_LEGEND_MIN_MAX\",\n    formName: \"normalLegendMinMax\"\n  },\n  LEVEL_LEGEND_MIN_MAX: {\n    name: \"LEVEL_LEGEND_MIN_MAX\",\n    formName: \"levelLegendMinMax\"\n  },\n  MULTIPLE_FIELDS: {\n    name: \"MULTIPLE_FIELDS\",\n    formName: \"multipleFields\"\n  }\n};\nexport const generalPageFields = [\"title\", \"subtitle\", \"description\", \"periodType\", \"periodSelection\", \"legendDefinitions\", \"additionalLabels\"];\nexport const dataConfigurationPageFields = [\"dataSelection\", \"dataSelection.dataGroups\"];\nexport const highlightedIndicatorPageFields = [];\nexport const accessPageFields = [];\nexport const optionsPageFields = [];","import i18n from \"@dhis2/d2-i18n\";\nimport { colors } from \"@dhis2/ui\";\nimport PeriodIcon from \"@material-ui/icons/AccessTime\";\nimport OrgUnitIcon from \"@material-ui/icons/AccountTree\";\nimport DataIcon from \"@material-ui/icons/Storage\";\nimport React from \"react\";\nexport const LAYOUTS = {\n  dx: {\n    name: \"data\",\n    displayName: i18n.t(\"Data\"),\n    icon: /*#__PURE__*/React.createElement(DataIcon, {\n      style: {\n        color: colors.grey700\n      }\n    })\n  },\n  ou: {\n    name: \"orgUnit\",\n    displayName: i18n.t(\"Organisation Unit\"),\n    icon: /*#__PURE__*/React.createElement(OrgUnitIcon, {\n      style: {\n        color: colors.grey700\n      }\n    })\n  },\n  pe: {\n    name: \"period\",\n    displayName: i18n.t(\"Period\"),\n    icon: /*#__PURE__*/React.createElement(PeriodIcon, {\n      style: {\n        color: colors.grey700\n      }\n    })\n  }\n};\nexport const DEFAULT_LAYOUT = {\n  column: [\"dx\"],\n  row: [\"pe\"],\n  filter: [\"ou\"]\n};","export const DATA_MIGRATION_CHECK = \"skipMigration\";","export const Orientation = {\n  ORG_UNIT_VS_DATA: \"orgUnitsVsData\",\n  DATA_VS_ORG_UNIT: \"dataVsOrgUnits\"\n};","import i18n from \"@dhis2/d2-i18n\";\nexport const PeriodCategories = {\n  RELATIVE: {\n    name: i18n.t(\"Relative Periods\"),\n    key: \"relative\"\n  },\n  FIXED: {\n    name: i18n.t(\"Fixed Periods\"),\n    key: \"fixed\"\n  }\n};\nexport const UNSUPPORTED_PERIOD_TYPES = [\"RelativeWeek\", \"RelativeFinancialYear\"];","function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nexport default class ScorecardAccessType {}\n_defineProperty(ScorecardAccessType, \"READ_WRITE\", \"rw----\");\n_defineProperty(ScorecardAccessType, \"READ_ONLY\", \"r-----\");\n_defineProperty(ScorecardAccessType, \"NO_ACCESS\", \"------\");\nexport const DefaultAuthority = {\n  read: false,\n  write: false,\n  delete: false\n};\nexport const AccessTypes = {\n  USER: \"user\",\n  USER_GROUP: \"userGroup\"\n};\nexport const ACCESS_TYPES = [ScorecardAccessType.NO_ACCESS, ScorecardAccessType.READ_ONLY, ScorecardAccessType.READ_WRITE];","export const FilterComponentTypes = {\n  ORG_UNIT: \"ORG_UNIT\",\n  PERIOD: \"PERIOD\"\n};","export const ScorecardTableConstants = {\n  CELL_WIDTH: 102\n};","export const TableSort = {\n  ASC: \"asc\",\n  DESC: \"desc\",\n  DEFAULT: \"default\"\n};","function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nexport default class AverageDisplayType {}\n_defineProperty(AverageDisplayType, \"ALL\", \"ALL\");\n_defineProperty(AverageDisplayType, \"BELOW_AVERAGE\", \"BELOW_AVERAGE\");\n_defineProperty(AverageDisplayType, \"ABOVE_AVERAGE\", \"ABOVE_AVERAGE\");","import i18n from \"@dhis2/d2-i18n\";\nexport const STEP_OPTIONS = {\n  nextLabel: i18n.t(\"Next\"),\n  prevLabel: i18n.t(\"Previous\"),\n  skipLabel: i18n.t(\"Skip\"),\n  doneLabel: i18n.t(\"Done\"),\n  hideNext: false,\n  hidePrev: true,\n  showProgress: false,\n  disableInteraction: false,\n  tooltipClass: \"custom-tooltip\"\n};","import i18n from \"@dhis2/d2-i18n\";\nimport React from \"react\";\nexport const SCORECARD_LIST_HELP_STEPS = [{\n  intro: /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h1\", null, i18n.t(\"Welcome to the most interactive scorecard ever!\")))\n}, {\n  element: \".search-input\",\n  intro: i18n.t(\"Search here for scorecards by name, id, or description\")\n}, {\n  element: \".change-view-button\",\n  intro: i18n.t(\"Click here to change the scorecards view to either list or grid\")\n}, {\n  element: \".add-scorecard-button\",\n  intro: i18n.t(\"Click here to add a new scorecard\")\n}, {\n  element: \".scorecard-list\",\n  intro: i18n.t(\"Click on View or anywhere on the scorecard to view, click on Edit to edit configurations and click on Delete to delete the scorecard\")\n}];","import i18n from \"@dhis2/d2-i18n\";\nimport React from \"react\";\nexport const GENERAL_HELP_STEPS = [{\n  intro: /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: 200\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Scorecard Management\")), i18n.t(\"Here you can modify your scorecard configuration\"))\n}, {\n  element: \".general-settings\",\n  intro: i18n.t(\"Set your title and subtitle here\")\n}, {\n  element: \".description-settings\",\n  intro: i18n.t(\"Describe your scorecard\")\n}, {\n  element: \".period-type-settings\",\n  intro: i18n.t(\"Set the default period type here. This will determine which periods will be selected as defaults\")\n}, {\n  element: \".custom-header-settings\",\n  intro: i18n.t(\"Modify the scorecard header here. You can add different styling, icons, images,and much more\")\n}, {\n  element: \".legend-definitions-settings\",\n  intro: i18n.t(\"Define legends here. Set the title and color\")\n}, {\n  element: \".additional-labels-settings\",\n  intro: i18n.t(\"Set additional labels here\")\n}, {\n  element: \".settings-next-button\",\n  intro: i18n.t(\"Click on next to move to data configuration page\")\n}];\nexport const INTRODUCTION_HELP_STEPS = [{\n  intro: /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Data Configuration\")), i18n.t(\"On this page, you can configure different data sources (indicators, dataElements, e.t.c) for the scorecard. You can also preview the scorecard table.\"))\n}];\nexport const PREVIEW_TABLE_HELP_STEPS = [{\n  element: \".preview-table-area\",\n  intro: i18n.t(\"This is the preview area. It shows how your scorecard will look like.\")\n}];\nexport const NO_GROUPS_HELP_STEPS = [{\n  element: \".groups-configuration-area\",\n  intro: /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"p\", null, i18n.t(\"You can configure different data sources on this area.\")), /*#__PURE__*/React.createElement(\"p\", null, i18n.t(\"Indicators are configured and displayed in groups\")))\n}, {\n  element: \".scorecard-add-group-button\",\n  intro: i18n.t(\"Click Here to add a group\")\n}];\nexport const GROUPS_CONFIG_HELP_STEPS = [{\n  element: \".groups-configuration-area\",\n  intro: /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"p\", null, i18n.t(\"You can configure different data sources on this area.\")), /*#__PURE__*/React.createElement(\"p\", null, i18n.t(\"Indicators are configured and displayed in groups\")))\n}, {\n  element: \".group-name-area\",\n  intro: i18n.t(\"Double click or click on the edit button to edit the group name\")\n}, {\n  element: \".expand-group-icon\",\n  intro: i18n.t(\"Click here to expand or collapse the group area\")\n}, {\n  element: \".delete-group-icon\",\n  intro: i18n.t(\"Click here to delete the group\")\n}, {\n  element: \".scorecard-add-group-button\",\n  intro: i18n.t(\"Click Here to add more groups\")\n}];\nexport const NO_INDICATORS_HELP_STEPS = [{\n  element: \".scorecard-indicator-add\",\n  intro: i18n.t(\"Click here to add an indicator\")\n}];\nexport const INDICATOR_SETUP_HELP_STEPS = [{\n  element: \".data-holders-area\",\n  intro: i18n.t(\"Selected indicators appear here\")\n}, {\n  element: \".data-holder\",\n  intro: i18n.t(\"Click here to configure this indicator. You can also drag this to rearrange the indicators within a group\")\n}, {\n  element: \".link-button\",\n  intro: i18n.t(\"Click here to link two adjacent indicators or to unlink linked indicators\")\n}, {\n  element: \".data-source.close-icon\",\n  intro: i18n.t(\"Click here to delete this indicator\")\n}, {\n  element: \".scorecard-indicator-add\",\n  intro: i18n.t(\"Click here to add more indicators\")\n}];\nexport const DATA_CONFIGURATION_WITH_DATA_HELP_STEPS = [{\n  element: \".groups-configuration-area\",\n  intro: i18n.t(\"You can configure different data sources on this area\")\n}, {\n  element: \".target-on-level-selector\",\n  intro: i18n.t(\"Check this box to set legend configuration according to organisation unit levels\")\n}, {\n  element: \".scorecard-add-group-button\",\n  intro: i18n.t(\"Click Here to add a group\")\n}, ...GROUPS_CONFIG_HELP_STEPS, ...INDICATOR_SETUP_HELP_STEPS];\nexport const INDICATOR_CONFIGURATION_STEPS = [{\n  element: \".data-source-form-container\",\n  intro: i18n.t(\"You can edit indicator configuration here\")\n}, {\n  element: 'input[name=\"label\"]',\n  intro: i18n.t(\"Edit indicator label here. This label will displayed on the scorecard table header\")\n}, {\n  element: 'input[name=\"weight\"]',\n  intro: i18n.t(\"You can set the indicator weight here. This is the indicator's maximum value\")\n}, {\n  element: \".effective-gap-settings\",\n  intro: i18n.t(\"You can set the effective gap here.\")\n}, {\n  element: \".indicator-options-settings-area\",\n  intro: /*#__PURE__*/React.createElement(\"div\", null, i18n.t(\"Here you can set different options for the indicator\"), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Display Arrows\"), \":\"), i18n.t(\"Check this to display increasing/decreasing arrows on this indicator's value\")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"High is Good\"), \":\"), i18n.t(\"Check this to indicate that higher values are good for this indicator  \")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Show Colors\"), \":\"), i18n.t(\"Check this to enable legend color on an indicator value \")))\n}, {\n  element: \".legend-settings-area\",\n  intro: i18n.t(\"Here you can configure the maximum and minimum values for each legend\")\n}];\nexport const DATA_CONFIGURATION_HELP_STEPS = [];\nexport const DATA_CONFIGURATION_STEPS_MAP = {\n  introduction: {\n    start: 0,\n    end: INTRODUCTION_HELP_STEPS.length - 1\n  },\n  emptyGroups: {\n    start: 1,\n    end: NO_GROUPS_HELP_STEPS.length - 1\n  },\n  groupConfig: {\n    start: NO_GROUPS_HELP_STEPS.length,\n    end: GROUPS_CONFIG_HELP_STEPS.length - 1\n  },\n  emptyIndicators: {\n    start: GROUPS_CONFIG_HELP_STEPS.length,\n    end: NO_INDICATORS_HELP_STEPS.length - 1\n  },\n  indicatorSetup: {\n    start: NO_INDICATORS_HELP_STEPS.length,\n    end: INDICATOR_SETUP_HELP_STEPS.length - 1\n  },\n  indicatorConfiguration: {\n    start: INDICATOR_SETUP_HELP_STEPS.length,\n    end: INDICATOR_CONFIGURATION_STEPS.length - 1\n  }\n};\nexport const HIGHLIGHTED_INDICATOR_HELP_STEPS = [{\n  intro: /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Highlighted Indicators\")), /*#__PURE__*/React.createElement(\"p\", null, i18n.t(\"In this page you can add and configure highlighted indicators. These indicators appear on top of the scorecard table\")))\n}, {\n  element: \".add-highlighted-indicator-button\",\n  intro: i18n.t(\"To add a highlighted indicator click here\")\n}];\nexport const HIGHLIGHTED_TABLE_HELP_STEPS = [{\n  element: \".highlighted-indicator-table\",\n  intro: i18n.t(\"Selected indicators will appear here\")\n}, {\n  element: \".highlighted-indicator-row\",\n  intro: i18n.t(\"Click on the row to configure the indicator\")\n}, {\n  element: \".highlighted-indicator-delete\",\n  intro: i18n.t(\"Click on the remove button to delete the indicator from the list\")\n}, {\n  element: \".add-highlighted-indicator-button\",\n  intro: i18n.t(\"To add more highlighted indicators click here\")\n}];\nexport const ACCESS_HELP_STEPS = [{\n  intro: /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Access Settings\")), /*#__PURE__*/React.createElement(\"p\", null, i18n.t(\"In this page you can configure the default organisation unit and sharing access\")))\n}, {\n  element: \".access-org-unit-filter\",\n  intro: i18n.t(\"Choose the default organisation unit from this selector\")\n}, {\n  element: \".add-sharing-access\",\n  intro: i18n.t(\"You can add a new user or user group to share the scorecard with here\")\n}, {\n  element: \".user-selector\",\n  intro: i18n.t(\"Search and select a user or user group here\")\n}, {\n  element: \".access-selector\",\n  intro: i18n.t(\"Select the appropriate access here\")\n}, {\n  element: \".add-access-button\",\n  intro: i18n.t(\"Click here to add the access settings\")\n}, {\n  element: \".sharing-list\",\n  intro: i18n.t(\"List of shared users and user groups will appear here\")\n}, {\n  element: \".edit-delete-access\",\n  intro: i18n.t(\"You can edit or delete access here\")\n}];\nexport const OPTIONS_HELP_STEPS = [{\n  intro: /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Default Options Settings\")), /*#__PURE__*/React.createElement(\"p\", null, i18n.t(\"In this page you can set default options for the scorecard view\")))\n}, {\n  element: \".visibility-options\",\n  intro: /*#__PURE__*/React.createElement(\"div\", null, i18n.t(\"These options affect the scorecard view\"), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Legend\"), \":\"), i18n.t(\"Allows the legends on the scorecard header to be displayed when checked\")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Title\"), \":\"), i18n.t(\"Allows the title on the scorecard header to be displayed when checked\")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Item Number\"), \":\"), i18n.t(\"Allows row numbers on the scorecard to be displayed when checked\")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Empty Rows\"), \":\"), i18n.t(\"Allows the empty rows on the scorecard to be displayed when checked\")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Show Hierarchy\"), \":\"), i18n.t(\"Allows the organisation units hierarchy to be displayed when checked\")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Average Column\"), \":\"), i18n.t(\"Allows the average column to be displayed when checked\")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Average Row\"), \":\"), i18n.t(\"Allows the average row to be displayed when checked\")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Highlighted Indicators\"), \":\"), i18n.t(\"Allows the highlighted indicators to be displayed when checked\")))\n}, {\n  element: \".average-options\",\n  intro: /*#__PURE__*/React.createElement(\"div\", null, i18n.t(\"These options allow to view data based on the average\"), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"All\"), \":\"), i18n.t(\"Allows all data to be displayed\")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Below Average\"), \":\"), i18n.t(\"Allows data that is below the overall average to be displayed\")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Above Average\"), \":\"), i18n.t(\"Allows data that is above the overall average to be displayed\")))\n}, {\n  element: \".other-options\",\n  intro: /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Arrows\"), \":\"), i18n.t(\"Allows increasing or decreasing indicators on data cells to be displayed\")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Show Data in Rows\"), \":\"), i18n.t(\"Changes the table layout, the indicators are shown in rows and orgaunisation units in columns\")))\n}];","import i18n from \"@dhis2/d2-i18n\";\nimport React from \"react\";\nexport const SCORECARD_VIEW_HELP_STEPS = [{\n  intro: /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Scorecard View\")), /*#__PURE__*/React.createElement(\"p\", null, i18n.t(\"This is the default view for your scorecard\")))\n}, {\n  element: \"#org-unit-selector\",\n  intro: i18n.t(\"Click here to select different organisation units\")\n}, {\n  element: \"#period-selector\",\n  intro: i18n.t(\"Click here to select different periods\")\n}, {\n  element: \".home-button\",\n  intro: i18n.t(\"Click here to return to scorecard list\")\n}, {\n  element: \".refresh-button\",\n  intro: i18n.t(\"Click here to refresh the scorecard page. This will reset organisation units, periods, and options to default values\")\n}, {\n  element: \".option-button\",\n  intro: i18n.t(\"Click here to customize the scorecard look. Add numbering, enable average rows and columns, hide or show arrows and many more\")\n}, {\n  element: \".scorecard-view-edit-button\",\n  intro: i18n.t(\"Click here to edit scorecard configuration\")\n}, {\n  element: \".download-button\",\n  intro: i18n.t(\"Click here to download the scorecard in Excel, PDF, CSV, and JSON formats\")\n}, {\n  element: \".scorecard-table\",\n  intro: /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Here is the scorecard!\")), `${i18n.t(\"Here you can\")}: `, /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, i18n.t(\"Sort table based on organisation unit names or values\")), /*#__PURE__*/React.createElement(\"li\", null, i18n.t(\"Search organisation units\")), /*#__PURE__*/React.createElement(\"li\", null, i18n.t(\"Change the table layout\")), /*#__PURE__*/React.createElement(\"li\", null, i18n.t(\"Further analyse data in the cells\"))))\n}, {\n  element: \".org-unit-search\",\n  intro: i18n.t(\"Search here for a specific organisation unit\")\n}, {\n  element: \"[data-test=\\\"dhis2-uicore-tableheadercellaction\\\"]\",\n  intro: i18n.t(\"Click on the arrows to sort the table based on the name or values\")\n}, {\n  element: \"th.parent-org-unit-cell\",\n  intro: i18n.t(\"To change the table layout, click, hold, and drag this cell to the table headers\")\n}, {\n  element: \".data-cell\",\n  intro: /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      margin: 2\n    }\n  }, i18n.t(\"Click on a data cell to see further analysis\")), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      margin: 2\n    }\n  }, i18n.t(\"You can also right click to view the cell data in different options\")))\n}, {\n  element: \"[data-test=\\\"orgUnit-children-table-column-cell\\\"] > td:nth-child(1)\",\n  intro: i18n.t(\"Click on the arrow to drill down to the scorecard of this organisation unit's lower level\")\n}];","import i18n from \"@dhis2/d2-i18n\";\nexport const scorecardManagementTooltips = [{\n  id: \"general\",\n  content: i18n.t(\"Here you can set your scorecard general information \\n\" + \" You can set name, period type, legends and additional labels of your scorecard.\")\n}, {\n  id: \"dataConfiguration\",\n  content: i18n.t(\"On this page, you can configure different data sources (indicators, dataElements, e.t.c) for the scorecard. You can also preview the scorecard table.\")\n}, {\n  id: \"highlightedIndicators\",\n  content: i18n.t(\"In this page you can add and configure highlighted indicators. These indicators appear on top of the scorecard table\")\n}, {\n  id: \"access\",\n  content: i18n.t(\"In this page you can configure the default organisation unit and sharing access for the scorecard.\")\n}, {\n  id: \"option\",\n  content: i18n.t(\"In this page you can set default options for the scorecard view. These options affect the scorecard view\")\n}];","import { CenteredContent, CircularLoader, colors } from \"@dhis2/ui\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nexport default function FullPageLoader({\n  text,\n  small\n}) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column center\",\n    style: {\n      height: \"100%\",\n      width: '100%'\n    }\n  }, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(CircularLoader, {\n    small: small\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: colors.default\n    }\n  }, text))));\n}\nFullPageLoader.propTypes = {\n  small: PropTypes.bool,\n  text: PropTypes.string\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { Button, CenteredContent, colors } from \"@dhis2/ui\";\nimport ErrorIcon from \"@material-ui/icons/Warning\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nexport default function AccessDeniedPage({\n  accessType\n}) {\n  const history = useHistory();\n  const onHomeClick = () => {\n    history.replace(\"/\");\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column center align-items-center w-100 h-100\"\n  }, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column align-items-center\"\n  }, /*#__PURE__*/React.createElement(ErrorIcon, {\n    style: {\n      color: colors.grey700,\n      fontSize: 64\n    },\n    fontSize: \"large\"\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: colors.grey700,\n      fontWeight: \"bold\",\n      fontSize: \"1vw\"\n    }\n  }, i18n.t(\"You do not have access to {{accessType}} this Scorecard\", {\n    accessType\n  })), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: onHomeClick\n  }, i18n.t(\"Back to scorecard list\")))));\n}\nAccessDeniedPage.propTypes = {\n  accessType: PropTypes.oneOf([\"edit\", \"view\"]).isRequired\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { colors } from \"@dhis2/ui\";\nimport React from \"react\";\nexport default function EmptyOrgUnitsOrPeriod() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-1 column center align-items-center\"\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    style: {\n      color: colors.grey700\n    }\n  }, i18n.t(\"Select Organisation Units and Period to start\")));\n}","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { useRecoilValue } from \"recoil\";\nimport { OrgUnitLevels, ScorecardLegendDefinitionSelector, ScorecardViewState, SingleHighlightedIndicatorState } from \"../../../../../state\";\nimport { getLegend } from \"../../../../../utils\";\nexport default function HighlightedIndicator({\n  highlightedIndicator\n}) {\n  var _getLegend;\n  const orgUnitLevels = useRecoilValue(OrgUnitLevels);\n  const legendDefinitions = useRecoilValue(ScorecardViewState(\"legendDefinitions\"));\n  const defaultLegendDefinitions = useRecoilValue(ScorecardLegendDefinitionSelector(true));\n  const {\n    displayName,\n    legends,\n    id,\n    weight\n  } = highlightedIndicator !== null && highlightedIndicator !== void 0 ? highlightedIndicator : {};\n  const value = useRecoilValue(SingleHighlightedIndicatorState(id));\n  const {\n    color\n  } = (_getLegend = getLegend(value, legends, {\n    max: weight,\n    defaultLegends: defaultLegendDefinitions,\n    orgUnitLevels,\n    dataOrgUnitLevel: 1,\n    //TODO:Fix this,\n    legendDefinitions\n  })) !== null && _getLegend !== void 0 ? _getLegend : {};\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      background: \"white\",\n      border: \"1px solid rgb(232, 237, 242)\",\n      margin: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"test-highlighted-indicator\",\n    className: \"row flex-1 space-between align-items-center\"\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      margin: 0,\n      padding: \"0 8px\",\n      fontSize: 14\n    }\n  }, displayName), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: 60,\n      minHeight: \"100%\",\n      background: color,\n      padding: 16,\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      fontSize: 14,\n      margin: 0\n    }\n  }, value))));\n}\nHighlightedIndicator.propTypes = {\n  highlightedIndicator: PropTypes.object.isRequired\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { CircularLoader } from \"@dhis2/ui\";\nimport { isEmpty } from \"lodash\";\nimport React from \"react\";\nimport { useRecoilValue, useRecoilValueLoadable } from \"recoil\";\nimport HighlightedIndicator from \"./Components/HighlightedIndicator\";\nimport { HighlightedIndicatorsState, ScorecardViewState } from \"../../../../state\";\nexport default function HighlightedIndicatorsView() {\n  var _useRecoilValue, _ref, _ref2, _contents$message;\n  const highlightedIndicators = useRecoilValue(ScorecardViewState(\"highlightedIndicators\"));\n  const {\n    highlightedIndicators: showHighlightedIndicators\n  } = (_useRecoilValue = useRecoilValue(ScorecardViewState(\"options\"))) !== null && _useRecoilValue !== void 0 ? _useRecoilValue : {};\n  const {\n    state,\n    contents\n  } = useRecoilValueLoadable(HighlightedIndicatorsState);\n  return showHighlightedIndicators && !isEmpty(highlightedIndicators) ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\"\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Highlighted Indicators\"))), state === \"loading\" && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row center align-items-center p-16\"\n  }, /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  })), state === \"hasError\" && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row center align-items-center\"\n  }, /*#__PURE__*/React.createElement(ErrorIcon, {\n    size: 24\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      paddingLeft: 16\n    }\n  }, (_ref = (_ref2 = (_contents$message = contents === null || contents === void 0 ? void 0 : contents.message) !== null && _contents$message !== void 0 ? _contents$message : contents === null || contents === void 0 ? void 0 : contents.details) !== null && _ref2 !== void 0 ? _ref2 : contents.toString()) !== null && _ref !== void 0 ? _ref : \"Error\")), state === \"hasValue\" && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"grid highlighted-indicators-container\"\n  }, highlightedIndicators === null || highlightedIndicators === void 0 ? void 0 : highlightedIndicators.map(highlightedIndicator => /*#__PURE__*/React.createElement(HighlightedIndicator, {\n    key: highlightedIndicator === null || highlightedIndicator === void 0 ? void 0 : highlightedIndicator.id,\n    highlightedIndicator: highlightedIndicator\n  })))) : null;\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { FlyoutMenu, MenuItem } from \"@dhis2/ui\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { DownloadTypes } from \"../../../../../constants\";\nexport default function DownloadMenu({\n  onClose,\n  onDownload\n}) {\n  var _Object$values;\n  return /*#__PURE__*/React.createElement(FlyoutMenu, {\n    dataTest: \"download-menu\"\n  }, (_Object$values = Object.values(DownloadTypes)) === null || _Object$values === void 0 ? void 0 : _Object$values.map(type => /*#__PURE__*/React.createElement(MenuItem, {\n    dataTest: `${type}-download-menu`,\n    onClick: () => {\n      onDownload(type);\n      onClose();\n    },\n    key: `${type}-download-menu`,\n    label: type\n  })), /*#__PURE__*/React.createElement(MenuItem, {\n    dataTest: \"ALMA-download-menu\",\n    label: \"ALMA\"\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    dataTest: \"test-alma-data-json\",\n    label: `${i18n.t(\"Data\")}(JSON)`,\n    onClick: () => {\n      onDownload(\"ALMAData\");\n      onClose();\n    }\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    dataTest: \"test-alma-meta-data\",\n    label: i18n.t(\"Metadata\"),\n    onClick: () => {\n      onDownload(\"ALMAMeta\");\n      onClose();\n    }\n  })));\n}\nDownloadMenu.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  onDownload: PropTypes.func.isRequired\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { saveAs } from \"file-saver\";\nimport { find, flatten, forIn, set } from \"lodash\";\nimport { utils as xlsx, writeFile } from \"xlsx\";\nimport { ALMA_HEADERS } from \"../../../../../constants\";\nfunction generateExcelJSON({\n  periods = [],\n  data = {},\n  orgUnits = [],\n  dataSources = []\n}) {\n  return orgUnits === null || orgUnits === void 0 ? void 0 : orgUnits.map(({\n    displayName: orgUnitName,\n    id: orgUnitId\n  }) => {\n    const object = {\n      \"Organisation Unit\": orgUnitName\n    };\n    for (const dataSource of dataSources) {\n      const {\n        id: dataSourceId,\n        displayName: dataSourceName,\n        label: dataSourceLabel\n      } = dataSource !== null && dataSource !== void 0 ? dataSource : {};\n      for (const period of periods) {\n        var _data;\n        const {\n          id: periodId,\n          name: periodName\n        } = period !== null && period !== void 0 ? period : {};\n        object[`${dataSourceName !== null && dataSourceName !== void 0 ? dataSourceName : dataSourceLabel}-${periodName}`] = (_data = data[`${dataSourceId}_${orgUnitId}_${periodId}`]) === null || _data === void 0 ? void 0 : _data.current;\n      }\n    }\n    return object;\n  });\n}\nfunction downloadExcelFileTypes({\n  periods,\n  data,\n  orgUnits,\n  dataHolders,\n  title,\n  type\n}) {\n  try {\n    const json = generateExcelJSON({\n      periods,\n      data,\n      orgUnits,\n      dataSources: flatten(dataHolders === null || dataHolders === void 0 ? void 0 : dataHolders.map(({\n        dataSources\n      }) => dataSources))\n    });\n    const sheet = xlsx.json_to_sheet(json);\n    const workbook = xlsx.book_new();\n    xlsx.book_append_sheet(workbook, sheet, `${title}`);\n    writeFile(workbook, `${title}.${type}`);\n  } catch (e) {\n    return e;\n  }\n}\nexport function downloadExcel({\n  periods,\n  data,\n  orgUnits,\n  dataHolders,\n  title\n}) {\n  return downloadExcelFileTypes({\n    periods,\n    data,\n    orgUnits,\n    dataHolders,\n    title,\n    type: \"xlsx\"\n  });\n}\nexport function getALMAMetadata({\n  orgUnits,\n  dataSources,\n  periods,\n  legendDefinitions\n}) {\n  function getMetadataDimensions(orgUnits, dataSources, periods) {\n    return {\n      ou: orgUnits === null || orgUnits === void 0 ? void 0 : orgUnits.map(({\n        id\n      }) => id),\n      pe: periods === null || periods === void 0 ? void 0 : periods.map(({\n        id\n      }) => id),\n      dx: dataSources === null || dataSources === void 0 ? void 0 : dataSources.map(({\n        id\n      }) => id),\n      co: []\n    };\n  }\n  function getAllLegends(legends) {\n    if (Array.isArray(legends)) {\n      return legends === null || legends === void 0 ? void 0 : legends.map(({\n        startValue,\n        endValue,\n        legendDefinitionId\n      }) => {\n        var _find;\n        return {\n          min: startValue,\n          max: endValue,\n          color: (_find = find(legendDefinitions, [\"id\", legendDefinitionId])) === null || _find === void 0 ? void 0 : _find.color\n        };\n      });\n    } else {\n      const modifiedLegends = {};\n      forIn(legends, (value, key) => {\n        modifiedLegends[key] = value === null || value === void 0 ? void 0 : value.map(({\n          startValue,\n          endValue,\n          legendDefinitionId\n        }) => {\n          var _find2;\n          return {\n            min: startValue,\n            max: endValue,\n            color: (_find2 = find(legendDefinitions, [\"id\", legendDefinitionId])) === null || _find2 === void 0 ? void 0 : _find2.color\n          };\n        });\n      });\n      return modifiedLegends;\n    }\n  }\n  function getMetadataItems(orgUnits, dataSources) {\n    const items = {};\n    for (const dataSource of dataSources) {\n      const {\n        displayName,\n        id,\n        legends\n      } = dataSource !== null && dataSource !== void 0 ? dataSource : {};\n      set(items, [id], {\n        name: displayName,\n        legendSet: getAllLegends(legends)\n      });\n    }\n    for (const orgUnit of orgUnits) {\n      const {\n        id,\n        displayName\n      } = orgUnit !== null && orgUnit !== void 0 ? orgUnit : {};\n      set(items, [id], {\n        name: displayName\n      });\n    }\n    set(items, \"dx\", {\n      name: i18n.t(\"Data\")\n    });\n    set(items, \"pe\", {\n      name: i18n.t(\"Period\")\n    });\n    set(items, \"ou\", {\n      name: i18n.t(\"Organisation Unit\")\n    });\n    return items;\n  }\n  return {\n    dimensions: getMetadataDimensions(orgUnits, dataSources, periods),\n    items: getMetadataItems(orgUnits, dataSources)\n  };\n}\nfunction getALMAData(data) {\n  const rows = [];\n  forIn(data, (value, key) => {\n    const [dx, ou, pe] = key === null || key === void 0 ? void 0 : key.split(\"_\");\n    rows.push([dx, pe, ou, value === null || value === void 0 ? void 0 : value.current]);\n  });\n  return rows;\n}\nexport function downloadALMAData({\n  periods,\n  data,\n  orgUnits,\n  dataHolders,\n  title,\n  legendDefinitions\n}) {\n  try {\n    const json = JSON.stringify({\n      dataValues: [{\n        headers: ALMA_HEADERS,\n        metaData: getALMAMetadata({\n          orgUnits,\n          dataSources: flatten(dataHolders === null || dataHolders === void 0 ? void 0 : dataHolders.map(({\n            dataSources\n          }) => dataSources)),\n          periods,\n          legendDefinitions\n        }),\n        rows: getALMAData(data)\n      }]\n    });\n    const blob = new Blob([json], {\n      type: \"application/json\"\n    });\n    saveAs(blob, `${title}.json`);\n  } catch (e) {\n    return e;\n  }\n}\nexport function downloadALMAMeta({\n  orgUnits,\n  dataHolders,\n  title\n}) {\n  try {\n    const json = JSON.stringify({\n      organisationUnits: orgUnits === null || orgUnits === void 0 ? void 0 : orgUnits.map(({\n        id,\n        level,\n        displayName,\n        path\n      }) => {\n        var _pathArray, _path$split;\n        const pathArray = path.split(\"/\");\n        const parent = pathArray.length >= 2 ? (_pathArray = pathArray === null || pathArray === void 0 ? void 0 : pathArray[pathArray.length - 2]) !== null && _pathArray !== void 0 ? _pathArray : \"\" : \"\";\n        return {\n          id,\n          name: displayName,\n          level: level !== null && level !== void 0 ? level : (path === null || path === void 0 ? void 0 : (_path$split = path.split(\"/\")) === null || _path$split === void 0 ? void 0 : _path$split.length) - 1,\n          parent: pathArray.length <= 2 ? {\n            id: parent\n          } : undefined\n        };\n      }),\n      indicators: flatten(dataHolders === null || dataHolders === void 0 ? void 0 : dataHolders.map(({\n        dataSources\n      }) => dataSources === null || dataSources === void 0 ? void 0 : dataSources.map(({\n        id,\n        displayName\n      }) => ({\n        id,\n        name: displayName\n      }))))\n    });\n    const blob = new Blob([json], {\n      type: \"application/json\"\n    });\n    saveAs(blob, `${title}-metadata.json`);\n  } catch (e) {\n    return e;\n  }\n}\nexport function downloadCSV({\n  periods,\n  data,\n  orgUnits,\n  dataHolders,\n  title\n}) {\n  return downloadExcelFileTypes({\n    periods,\n    data,\n    orgUnits,\n    dataHolders,\n    title,\n    type: \"csv\"\n  });\n}\nexport function downloadPDF() {}","import { useAlert } from \"@dhis2/app-runtime\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useReactToPrint } from \"react-to-print\";\nimport { useRecoilValue, useRecoilValueLoadable } from \"recoil\";\nimport { downloadALMAData, downloadALMAMeta, downloadCSV, downloadExcel } from \"../services/download\";\nimport { InitialOrgUnits, PeriodResolverState, ScorecardDataLoadingState, ScorecardDataSourceState, ScorecardOrgUnitState, ScorecardViewState } from \"../../../../../state\";\nimport { DownloadTypes } from \"../../../../../constants\";\nexport default function useDownload(downloadRef, dataEngine) {\n  const title = useRecoilValue(ScorecardViewState(\"title\"));\n  const legendDefinitions = useRecoilValue(ScorecardViewState(\"legendDefinitions\"));\n  const orgUnitState = useRecoilValueLoadable(InitialOrgUnits);\n  const orgUnits = useMemo(() => {\n    if (orgUnitState.state === \"hasValue\") {\n      var _orgUnitState$content;\n      return (_orgUnitState$content = orgUnitState.contents) === null || _orgUnitState$content === void 0 ? void 0 : _orgUnitState$content.orgUnits;\n    }\n    return [];\n  }, [orgUnitState]);\n  const orgUnitsIds = useMemo(() => orgUnits === null || orgUnits === void 0 ? void 0 : orgUnits.map(({\n    id\n  }) => id), [orgUnits]);\n  const {\n    filteredOrgUnits,\n    childrenOrgUnits\n  } = useRecoilValue(ScorecardOrgUnitState(orgUnitsIds));\n  const dataHolders = useRecoilValue(ScorecardDataSourceState);\n  const allOrgUnits = useMemo(() => [...filteredOrgUnits, ...childrenOrgUnits], [filteredOrgUnits, childrenOrgUnits]);\n  const periods = useRecoilValue(PeriodResolverState);\n  const loading = useRecoilValue(ScorecardDataLoadingState(orgUnitsIds));\n  const [data, setData] = useState();\n  const {\n    show\n  } = useAlert(({\n    message\n  }) => message, ({\n    type\n  }) => ({\n    ...type,\n    duration: 3000\n  }));\n  const handlePDFDownload = useReactToPrint({\n    content: () => downloadRef === null || downloadRef === void 0 ? void 0 : downloadRef.current,\n    documentTitle: `${title}`\n  });\n  function subscribe() {\n    if (loading !== undefined && !loading && orgUnitState.state === \"hasValue\") {\n      const subscription = dataEngine.getAllOrgUnitData(allOrgUnits === null || allOrgUnits === void 0 ? void 0 : allOrgUnits.map(({\n        id\n      }) => id)).subscribe(setData);\n      return () => subscription.unsubscribe();\n    }\n  }\n  useEffect(subscribe, [loading, allOrgUnits, dataEngine]);\n  const downloadFunction = type => {\n    if (loading !== undefined && !loading && orgUnitState.state === \"hasValue\") {\n      switch (type) {\n        case DownloadTypes.EXCEL:\n          return downloadExcel({\n            periods,\n            data,\n            orgUnits: allOrgUnits,\n            dataHolders,\n            title\n          });\n        case DownloadTypes.CSV:\n          return downloadCSV({\n            periods,\n            data,\n            orgUnits: allOrgUnits,\n            dataHolders,\n            title\n          });\n        case DownloadTypes.PDF:\n          return handlePDFDownload();\n        case \"ALMAData\":\n          return downloadALMAData({\n            periods,\n            data,\n            orgUnits,\n            dataHolders,\n            title,\n            legendDefinitions\n          });\n        case \"ALMAMeta\":\n          return downloadALMAMeta({\n            orgUnits: allOrgUnits,\n            dataHolders,\n            title\n          });\n        default:\n          return;\n      }\n    }\n  };\n  const download = type => {\n    const error = downloadFunction(type);\n    if (error) {\n      var _ref, _error$message;\n      show({\n        message: (_ref = (_error$message = error === null || error === void 0 ? void 0 : error.message) !== null && _error$message !== void 0 ? _error$message : error.details) !== null && _ref !== void 0 ? _ref : error === null || error === void 0 ? void 0 : error.toString()\n      });\n    }\n  };\n  return {\n    download\n  };\n}","import { isEqual, pullAllWith } from \"lodash\";\nimport PropTypes from \"prop-types\";\nimport { useEffect } from \"react\";\nimport { useSetRecoilState } from \"recoil\";\nimport { HelpSteps } from \"../../state\";\nexport default function Help({\n  helpSteps\n}) {\n  const setHelpSteps = useSetRecoilState(HelpSteps);\n  useEffect(() => {\n    setHelpSteps(prevSteps => [...prevSteps, ...helpSteps]);\n    return () => {\n      setHelpSteps(prevSteps => {\n        const newSteps = [...prevSteps];\n        pullAllWith(newSteps, helpSteps, isEqual);\n        return newSteps;\n      });\n    };\n  }, [helpSteps]);\n  return null;\n}\nHelp.propTypes = {\n  helpSteps: PropTypes.arrayOf(PropTypes.object).isRequired\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { CheckboxField, Radio } from \"@dhis2/ui\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport Help from \"../Help\";\nimport { AverageDisplayType, OPTIONS_HELP_STEPS } from \"../../constants\";\nexport default function ScorecardOptionsForm({\n  options,\n  onChange\n}) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container p-16\"\n  }, /*#__PURE__*/React.createElement(Help, {\n    helpSteps: OPTIONS_HELP_STEPS\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column \"\n  }, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Visibility\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column visibility-options\"\n  }, /*#__PURE__*/React.createElement(CheckboxField, {\n    checked: options === null || options === void 0 ? void 0 : options.legend,\n    onChange: onChange(\"legend\"),\n    value: \"legend\",\n    label: i18n.t(\"Legend\")\n  }), /*#__PURE__*/React.createElement(CheckboxField, {\n    checked: options === null || options === void 0 ? void 0 : options.title,\n    onChange: onChange(\"title\"),\n    value: \"title\",\n    label: i18n.t(\"Title\")\n  }), /*#__PURE__*/React.createElement(CheckboxField, {\n    checked: options === null || options === void 0 ? void 0 : options.itemNumber,\n    onChange: onChange(\"itemNumber\"),\n    value: \"itemNumber\",\n    label: i18n.t(\"Item Number\")\n  }), /*#__PURE__*/React.createElement(CheckboxField, {\n    checked: options === null || options === void 0 ? void 0 : options.emptyRows,\n    onChange: onChange(\"emptyRows\"),\n    value: \"emptyRows\",\n    label: i18n.t(\"Empty Rows\")\n  }), /*#__PURE__*/React.createElement(CheckboxField, {\n    checked: options === null || options === void 0 ? void 0 : options.showHierarchy,\n    onChange: onChange(\"showHierarchy\"),\n    value: \"showHierarchy\",\n    label: i18n.t(\"Show Hierarchy\")\n  }), /*#__PURE__*/React.createElement(CheckboxField, {\n    checked: options === null || options === void 0 ? void 0 : options.averageColumn,\n    onChange: onChange(\"averageColumn\"),\n    value: \"averageColumn\",\n    label: i18n.t(\"Average Column\")\n  }), /*#__PURE__*/React.createElement(CheckboxField, {\n    checked: options === null || options === void 0 ? void 0 : options.averageRow,\n    onChange: onChange(\"averageRow\"),\n    value: \"averageRow\",\n    label: i18n.t(\"Average Row\")\n  }), /*#__PURE__*/React.createElement(CheckboxField, {\n    checked: options === null || options === void 0 ? void 0 : options.highlightedIndicators,\n    onChange: onChange(\"highlightedIndicators\"),\n    value: \"highlightedIndicators\",\n    label: i18n.t(\"Highlighted Indicators\")\n  })), /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Average\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column average-options\"\n  }, /*#__PURE__*/React.createElement(Radio, {\n    onChange: () => onChange(\"averageDisplayType\")(AverageDisplayType.ALL),\n    checked: (options === null || options === void 0 ? void 0 : options.averageDisplayType) === AverageDisplayType.ALL,\n    value: AverageDisplayType.ALL,\n    label: i18n.t(\"All\")\n  }), /*#__PURE__*/React.createElement(Radio, {\n    onChange: () => onChange(\"averageDisplayType\")(AverageDisplayType.BELOW_AVERAGE),\n    checked: (options === null || options === void 0 ? void 0 : options.averageDisplayType) === AverageDisplayType.BELOW_AVERAGE,\n    value: AverageDisplayType.BELOW_AVERAGE,\n    label: i18n.t(\"Below Average\")\n  }), /*#__PURE__*/React.createElement(Radio, {\n    onChange: () => onChange(\"averageDisplayType\")(AverageDisplayType.ABOVE_AVERAGE),\n    checked: (options === null || options === void 0 ? void 0 : options.averageDisplayType) === AverageDisplayType.ABOVE_AVERAGE,\n    value: AverageDisplayType.ABOVE_AVERAGE,\n    label: i18n.t(\"Above Average\")\n  })), /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Options\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column other-options\"\n  }, /*#__PURE__*/React.createElement(CheckboxField, {\n    checked: options === null || options === void 0 ? void 0 : options.arrows,\n    onChange: onChange(\"arrows\"),\n    value: \"arrows\",\n    label: i18n.t(\"Arrows\")\n  }), /*#__PURE__*/React.createElement(CheckboxField, {\n    checked: options === null || options === void 0 ? void 0 : options.showDataInRows,\n    onChange: onChange(\"showDataInRows\"),\n    value: \"showDataInRows\",\n    label: i18n.t(\"Show Data in Rows\")\n  })))));\n}\nScorecardOptionsForm.propTypes = {\n  options: PropTypes.object.isRequired,\n  onChange: PropTypes.func.isRequired\n};","import { Button, ButtonStrip, Modal, ModalActions, ModalContent, ModalTitle } from \"@dhis2/ui\";\nimport PropTypes from \"prop-types\";\nimport React, { useState } from \"react\";\nimport ScorecardOptionsForm from \"../../ScorecardOptionsForm\";\nimport i18n from '@dhis2/d2-i18n';\nimport { ScorecardOptions } from \"../../../models\";\nexport default function ScorecardOptionsModal({\n  onSelect,\n  onClose,\n  initialValues\n}) {\n  const [values, setValues] = useState(initialValues);\n  const onChange = key => newValue => {\n    setValues(prevState => {\n      var _newValue$checked;\n      return ScorecardOptions.set(prevState, key, (_newValue$checked = newValue === null || newValue === void 0 ? void 0 : newValue.checked) !== null && _newValue$checked !== void 0 ? _newValue$checked : newValue);\n    });\n  };\n  const onUpdateClick = () => {\n    onSelect(values);\n    onClose();\n  };\n  return /*#__PURE__*/React.createElement(Modal, {\n    onClose: onClose,\n    large: true\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t(\"Options\")), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\"\n  }, /*#__PURE__*/React.createElement(ScorecardOptionsForm, {\n    options: values,\n    onChange: onChange\n  }))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(Button, {\n    onClick: onClose\n  }, i18n.t(\"Cancel\")), /*#__PURE__*/React.createElement(Button, {\n    dataTest: \"update-button-on-options\",\n    primary: true,\n    onClick: onUpdateClick\n  }, i18n.t(\"Update\")))));\n}\nScorecardOptionsModal.propTypes = {\n  initialValues: PropTypes.object.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onSelect: PropTypes.func.isRequired\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { Button, ButtonStrip, DropdownButton } from \"@dhis2/ui\";\nimport PropTypes from \"prop-types\";\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useRecoilCallback, useRecoilState, useRecoilValue, useSetRecoilState } from \"recoil\";\nimport DownloadMenu from \"./Download/Components/DownloadMenu\";\nimport useDownload from \"./ScorecardViewHeader/hooks/useDownload\";\nimport { ScorecardOptionsModal } from \"../../modals\";\nimport { useConfig } from \"@dhis2/app-runtime\";\nimport { APP_NAME, APP_TITLE } from \"../../../constants\";\nimport { RefreshScorecardState, RouterState, ScorecardIdState, ScorecardViewState, UserAuthorityOnScorecard } from \"../../../state\";\nimport { constructAppUrl } from \"../../../utils\";\nimport { ScorecardDataEngine } from \"../../../models\";\nexport default function ScorecardActions({\n  downloadAreaRef,\n  dataEngine,\n  widget\n}) {\n  const setRoute = useSetRecoilState(RouterState);\n  const [scorecardOptions, setScorecardOptions] = useRecoilState(ScorecardViewState(\"options\"));\n  const [optionsOpen, setOptionsOpen] = useState(false);\n  const {\n    baseUrl,\n    serverVersion\n  } = useConfig();\n  const {\n    download: onDownload\n  } = useDownload(downloadAreaRef, dataEngine);\n  const scorecardId = useRecoilValue(ScorecardIdState);\n  const userAuthority = useRecoilValue(UserAuthorityOnScorecard(scorecardId));\n  const writeAccess = userAuthority === null || userAuthority === void 0 ? void 0 : userAuthority.write;\n  const history = useHistory();\n  const onRefresh = useRecoilCallback(({\n    set,\n    reset\n  }) => () => {\n    reset(ScorecardViewState(\"orgUnitSelection\"));\n    reset(ScorecardViewState(\"periodSelection\"));\n    set(RefreshScorecardState, prevValue => prevValue + 1);\n  });\n  const onEdit = () => {\n    if (writeAccess) {\n      setRoute(prevRoute => ({\n        ...prevRoute,\n        previous: `/view/${scorecardId}`\n      }));\n      if (widget) {\n        const appUrl = constructAppUrl(baseUrl, {\n          name: APP_NAME,\n          title: APP_TITLE\n        }, serverVersion);\n        return window.parent.open(appUrl + \"#/edit/\" + scorecardId);\n      } else {\n        history.push(`/edit/${scorecardId}`);\n      }\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row end print-hide\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column align-items-end\"\n  }, !widget && /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(Button, {\n    className: \"option-button\",\n    dataTest: \"scorecard-option-button\",\n    onClick: () => setOptionsOpen(true)\n  }, i18n.t(\"Options\")), writeAccess && /*#__PURE__*/React.createElement(Button, {\n    dataTest: \"edit-scorecard-button\",\n    className: \"scorecard-view-edit-button\",\n    onClick: onEdit\n  }, i18n.t(\"Edit\")), /*#__PURE__*/React.createElement(DropdownButton, {\n    component: /*#__PURE__*/React.createElement(DownloadMenu, {\n      onClose: () => {},\n      onDownload: onDownload\n    }),\n    className: \"download-button\",\n    dataTest: \"download-button\"\n  }, i18n.t(\"Download\")), /*#__PURE__*/React.createElement(Button, {\n    className: \"refresh-button\",\n    onClick: onRefresh\n  }, i18n.t(\"Refresh\")))), widget && writeAccess ? /*#__PURE__*/React.createElement(Button, {\n    dataTest: \"edit-scorecard-button\",\n    className: \"scorecard-view-edit-button\",\n    onClick: onEdit\n  }, i18n.t(\"Edit\")) : null, optionsOpen && /*#__PURE__*/React.createElement(ScorecardOptionsModal, {\n    onClose: () => setOptionsOpen(false),\n    initialValues: scorecardOptions,\n    onSelect: setScorecardOptions\n  }));\n}\nScorecardActions.propTypes = {\n  dataEngine: PropTypes.instanceOf(ScorecardDataEngine).isRequired,\n  downloadAreaRef: PropTypes.any.isRequired\n};","import { colors } from \"@dhis2/ui\";\nimport React from \"react\";\nimport JsxParser from \"react-jsx-parser\";\nimport { useRecoilValue } from \"recoil\";\nimport { PeriodResolverState, ScorecardViewState } from \"../../../../state\";\nimport { head, isEmpty } from \"lodash\";\nexport default function ScorecardHeader() {\n  var _head;\n  const {\n    title: showTitle\n  } = useRecoilValue(ScorecardViewState(\"options\"));\n  const customHeader = useRecoilValue(ScorecardViewState(\"customHeader\"));\n  const periods = useRecoilValue(PeriodResolverState);\n  const title = useRecoilValue(ScorecardViewState(\"title\"));\n  const subtitle = useRecoilValue(ScorecardViewState(\"subtitle\"));\n  return showTitle && !isEmpty(periods) ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row space-between\",\n    id: \"scorecard-header\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\"\n  }, customHeader ? /*#__PURE__*/React.createElement(JsxParser, {\n    autoCloseVoidElements: true,\n    className: \"w-100\",\n    onError: console.error,\n    bindings: {\n      title,\n      subtitle,\n      period: periods.length === 1 ? (_head = head(periods)) === null || _head === void 0 ? void 0 : _head.name : \"\"\n    },\n    jsx: customHeader\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column center align-items-center\"\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    style: {\n      margin: 8\n    },\n    id: \"data-test-score-card-title\"\n  }, title, \" \", `${periods.length === 1 ? ` - ${periods[0].name}` : \"\"}`), /*#__PURE__*/React.createElement(\"h3\", {\n    style: {\n      color: colors.grey600,\n      margin: 0\n    }\n  }, subtitle)))) : null;\n}","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport i18n from \"@dhis2/d2-i18n\";\nimport { Box, Chip, Tooltip } from \"@dhis2/ui\";\nimport { chunk, head } from \"lodash\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { FilterComponentTypes } from \"../../constants\";\nconst ITEM_DISPLAY_NO = 1;\nexport default function SelectionWrapper({\n  type,\n  onClick,\n  selectedItems = [],\n  id,\n  ...props\n}) {\n  const selectText = type === FilterComponentTypes.PERIOD ? i18n.t(\"Selected period\") : i18n.t(\"Selected organisation unit\");\n  const itemsToDisplay = head(chunk(selectedItems, ITEM_DISPLAY_NO));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: id,\n    onClick: onClick\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    content: /*#__PURE__*/React.createElement(\"div\", null, selectedItems === null || selectedItems === void 0 ? void 0 : selectedItems.map(({\n      name,\n      displayName,\n      id\n    }) => /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        margin: 4\n      },\n      key: `${id}-tooltip`\n    }, name !== null && name !== void 0 ? name : displayName)))\n  }, /*#__PURE__*/React.createElement(Box, _extends({\n    className: \"selection-box\"\n  }, props), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"selection-box-header\"\n  }, selectText), /*#__PURE__*/React.createElement(Box, {\n    className: \"selection-text-box\",\n    width: \"90%\",\n    height: \"40%\"\n  }, itemsToDisplay === null || itemsToDisplay === void 0 ? void 0 : itemsToDisplay.map(({\n    name,\n    displayName,\n    id\n  }) => /*#__PURE__*/React.createElement(Chip, {\n    key: id\n  }, name !== null && name !== void 0 ? name : displayName)), (selectedItems === null || selectedItems === void 0 ? void 0 : selectedItems.length) > ITEM_DISPLAY_NO && /*#__PURE__*/React.createElement(Chip, null, i18n.t(`and {{number}} more`, {\n    number: selectedItems.length - ITEM_DISPLAY_NO\n  }))))));\n}\nSelectionWrapper.defaultProps = {\n  type: \"\",\n  name: \"\"\n};\nSelectionWrapper.propTypes = {\n  name: PropTypes.string.isRequired,\n  type: PropTypes.oneOf([FilterComponentTypes.PERIOD, FilterComponentTypes.ORG_UNIT]).isRequired,\n  onClick: PropTypes.func.isRequired,\n  id: PropTypes.string,\n  selectedItems: PropTypes.array\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { Button, ButtonStrip, Card } from \"@dhis2/ui\";\nimport { OrgUnitSelectorModal, PeriodSelectorModal } from \"@hisptz/dhis2-ui\";\nimport { PeriodUtility } from \"@hisptz/dhis2-utils\";\nimport { Steps } from \"intro.js-react\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useRecoilCallback, useRecoilState, useRecoilValue } from \"recoil\";\nimport SelectionWrapper from \"../../../SelectionWrapper\";\nimport { HelpState, OrgUnitGroups, OrgUnitLevels, ScorecardConfState, ScorecardIdState, ScorecardViewState, SystemSettingsState } from \"../../../../state\";\nimport { getSelectedOrgUnitSelectionDisplay } from \"../../../../utils\";\nimport { FilterComponentTypes, SCORECARD_VIEW_HELP_STEPS, STEP_OPTIONS, UNSUPPORTED_PERIOD_TYPES } from \"../../../../constants\";\nexport default function ScorecardViewHeader() {\n  var _useRecoilValue;\n  const [helpEnabled, setHelpEnabled] = useRecoilState(HelpState);\n  const {\n    calendar\n  } = (_useRecoilValue = useRecoilValue(SystemSettingsState)) !== null && _useRecoilValue !== void 0 ? _useRecoilValue : {};\n  const history = useHistory();\n  const scorecardId = useRecoilValue(ScorecardIdState);\n  const orgUnitLevels = useRecoilValue(OrgUnitLevels);\n  const orgUnitGroups = useRecoilValue(OrgUnitGroups);\n  const [orgUnitSelection, setOrgUnitSelection] = useRecoilState(ScorecardViewState(\"orgUnitSelection\"));\n  const [periodSelection, setPeriodSelection] = useRecoilState(ScorecardViewState(\"periodSelection\"));\n  const [orgUnitSelectionOpen, setOrgUnitSelectionOpen] = useState(false);\n  const [periodSelectionOpen, setPeriodSelectionOpen] = useState(false);\n  const reset = useRecoilCallback(({\n    reset\n  }) => () => {\n    reset(ScorecardIdState);\n    reset(ScorecardConfState(scorecardId));\n  }, [scorecardId]);\n  const onHome = () => {\n    history.replace(\"/\");\n  };\n  useEffect(() => {\n    return () => {\n      reset();\n    };\n  }, []);\n  const orgUnitSelectionDisplay = useMemo(() => getSelectedOrgUnitSelectionDisplay(orgUnitSelection, {\n    orgUnitGroups,\n    orgUnitLevels\n  }), [orgUnitGroups, orgUnitLevels, orgUnitSelection]);\n  const onHelpExit = () => {\n    setHelpEnabled(false);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"selection-card\"\n  }, /*#__PURE__*/React.createElement(Steps, {\n    options: STEP_OPTIONS,\n    steps: SCORECARD_VIEW_HELP_STEPS,\n    enabled: helpEnabled,\n    initialStep: 0,\n    onExit: onHelpExit\n  }), /*#__PURE__*/React.createElement(Card, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row space-between align-items-center pl-16 pr-16\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row align-items-center\"\n  }, /*#__PURE__*/React.createElement(SelectionWrapper, {\n    id: \"org-unit-selector\",\n    selectedItems: orgUnitSelectionDisplay,\n    name: \"Organisation Unit\",\n    dataTest: \"test-selected-organization-unit\",\n    onClick: () => {\n      setOrgUnitSelectionOpen(true);\n    },\n    type: FilterComponentTypes.ORG_UNIT\n  }), /*#__PURE__*/React.createElement(SelectionWrapper, {\n    id: \"period-selector\",\n    selectedItems: periodSelection === null || periodSelection === void 0 ? void 0 : periodSelection.periods,\n    dataTest: \"test-selected-period\",\n    name: \"Period\",\n    onClick: () => {\n      setPeriodSelectionOpen(true);\n    },\n    type: FilterComponentTypes.PERIOD\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column align-items-end\"\n  }, /*#__PURE__*/React.createElement(ButtonStrip, {\n    className: \"pb-8\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"home-button\",\n    onClick: onHome\n  }, i18n.t(\"Back to all scorecards\")), /*#__PURE__*/React.createElement(Button, {\n    onClick: () => setHelpEnabled(true)\n  }, i18n.t(\"Help\")))), orgUnitSelectionOpen && /*#__PURE__*/React.createElement(OrgUnitSelectorModal, {\n    value: orgUnitSelection,\n    showGroups: true,\n    showLevels: true,\n    showUserOptions: true,\n    hide: !orgUnitSelectionOpen,\n    onClose: () => setOrgUnitSelectionOpen(false),\n    onUpdate: selected => {\n      setOrgUnitSelection(selected);\n      setOrgUnitSelectionOpen(false);\n    }\n  }), periodSelectionOpen && /*#__PURE__*/React.createElement(PeriodSelectorModal, {\n    enablePeriodSelector: true,\n    excludedPeriodTypes: UNSUPPORTED_PERIOD_TYPES,\n    calendar: calendar,\n    selectedPeriods: periodSelection.periods.map(({\n      id\n    }) => id),\n    hide: !periodSelectionOpen,\n    onClose: () => setPeriodSelectionOpen(false),\n    onUpdate: selectedPeriods => {\n      setPeriodSelection({\n        periods: selectedPeriods.map(period => PeriodUtility.getPeriodById(period))\n      });\n      setPeriodSelectionOpen(false);\n    }\n  }))));\n}","import i18n from '@dhis2/d2-i18n';\nimport { isEmpty } from \"lodash\";\nimport React, { lazy, Suspense, useEffect, useMemo, useRef } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useRecoilCallback, useRecoilValue, useRecoilValueLoadable, useSetRecoilState } from \"recoil\";\nimport { FullPageLoader } from \"../Loaders\";\nimport AccessDeniedPage from \"../Errors/AccessDeniedPage\";\nimport EmptyOrgUnitsOrPeriod from \"./components/EmptyOrgUnitsOrPeriod\";\nimport HighlightedIndicatorsView from \"./components/HighlightedIndicatorsView\";\nimport ScorecardActions from \"./components/ScorecardActions\";\nimport ScorecardHeader from \"./components/ScorecardHeader\";\nimport ScorecardViewHeader from \"./components/ScorecardViewHeader\";\nimport { SpecificTargetsLibrary } from \"./components/SpecificTargetsLibrary\";\nimport { InitialOrgUnits, IsSpecificTargetsSet, PeriodResolverState, ScorecardDataSourceState, ScorecardIdState, ScorecardNameSort, ScorecardTableOrientationState, ScorecardViewState, UserAuthorityOnScorecard } from \"../../state\";\nimport { ScorecardDataEngine } from \"../../models\";\nconst ScorecardLegendsView = /*#__PURE__*/lazy(() => import(\"./components/ScorecardLegendsView\"));\nconst ScorecardTable = /*#__PURE__*/lazy(() => import(\"./components/ScorecardTable\"));\nexport default function ScorecardView({\n  widget\n}) {\n  var _orgUnitState$content4;\n  const {\n    id: scorecardId\n  } = useParams();\n  const setScorecardIdState = useSetRecoilState(ScorecardIdState);\n  const orgUnitState = useRecoilValueLoadable(InitialOrgUnits);\n  const orgUnitsIds = useMemo(() => {\n    if (orgUnitState.state === 'hasValue') {\n      var _orgUnitState$content, _orgUnitState$content2, _orgUnitState$content3;\n      return (_orgUnitState$content = (_orgUnitState$content2 = orgUnitState.contents) === null || _orgUnitState$content2 === void 0 ? void 0 : (_orgUnitState$content3 = _orgUnitState$content2.orgUnits) === null || _orgUnitState$content3 === void 0 ? void 0 : _orgUnitState$content3.map(orgUnit => orgUnit === null || orgUnit === void 0 ? void 0 : orgUnit.id)) !== null && _orgUnitState$content !== void 0 ? _orgUnitState$content : [];\n    }\n    return [];\n  }, [orgUnitState.state, orgUnitState.contents]);\n  const {\n    read: access\n  } = useRecoilValue(UserAuthorityOnScorecard(scorecardId));\n  const downloadRef = useRef();\n  const periods = useRecoilValue(PeriodResolverState);\n  const isSpecificTargetsSet = useRecoilValue(IsSpecificTargetsSet);\n  const initialDataEngine = useMemo(() => new ScorecardDataEngine(), []);\n  const reset = useRecoilCallback(({\n    reset\n  }) => () => {\n    reset(ScorecardViewState(\"periodSelection\"));\n    reset(ScorecardViewState(\"orgUnitSearchKeyword\"));\n    reset(ScorecardNameSort(orgUnitsIds));\n    reset(ScorecardViewState(\"options\"));\n    reset(ScorecardIdState);\n    reset(ScorecardTableOrientationState);\n    reset(ScorecardDataSourceState);\n  });\n  useEffect(() => {\n    setScorecardIdState(scorecardId);\n    return () => {\n      reset();\n    };\n  }, []);\n  if (!access) {\n    return /*#__PURE__*/React.createElement(AccessDeniedPage, {\n      accessType: \"view\"\n    });\n  }\n  return /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(FullPageLoader, null)\n  }, !widget && /*#__PURE__*/React.createElement(ScorecardViewHeader, null), /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(FullPageLoader, null)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: downloadRef,\n    className: \"column p-16  print-visible\",\n    style: {\n      height: \"100%\",\n      width: \"100%\",\n      overflow: \"visible\"\n    }\n  }, /*#__PURE__*/React.createElement(ScorecardActions, {\n    widget: widget,\n    dataEngine: initialDataEngine,\n    downloadAreaRef: downloadRef\n  }), /*#__PURE__*/React.createElement(ScorecardHeader, null), /*#__PURE__*/React.createElement(ScorecardLegendsView, null), /*#__PURE__*/React.createElement(HighlightedIndicatorsView, null), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column align-items-center pt-16 flex-1\"\n  }, !isEmpty(orgUnitState === null || orgUnitState === void 0 ? void 0 : (_orgUnitState$content4 = orgUnitState.contents) === null || _orgUnitState$content4 === void 0 ? void 0 : _orgUnitState$content4.orgUnits) && !isEmpty(periods) ? /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(FullPageLoader, {\n      small: true\n    })\n  }, /*#__PURE__*/React.createElement(ScorecardTable, {\n    initialDataEngine: initialDataEngine,\n    nested: false,\n    orgUnits: orgUnitsIds\n  })) : /*#__PURE__*/React.createElement(EmptyOrgUnitsOrPeriod, null), isSpecificTargetsSet && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"hide print-show always-page-break\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"always-page-break\"\n  }), /*#__PURE__*/React.createElement(\"h1\", null, i18n.t(\"Specific Targets Legends\")), /*#__PURE__*/React.createElement(SpecificTargetsLibrary, null))))));\n}","import { CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nexport default function ContainerLoader({\n  height\n}) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: height !== null && height !== void 0 ? height : '100%',\n      minHeight: height !== null && height !== void 0 ? height : '100%'\n    },\n    className: \"column center align-items-center\"\n  }, /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  }));\n}\nContainerLoader.propTypes = {\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { DecreasingArrows, IncreasingArrows } from \"./Arrows\";\nexport default function SingleCellSvg({\n  cellRef,\n  color,\n  value,\n  status,\n  bold\n}) {\n  const width = (cellRef === null || cellRef === void 0 ? void 0 : cellRef.offsetWidth) - 1 || 100; //1px for the border\n  const height = (cellRef === null || cellRef === void 0 ? void 0 : cellRef.offsetHeight) - 1 || 47; //1px for the border\n  const fontSize = 12;\n  const arrowFontSize = 10;\n  const decreasing = status === \"decreasing\";\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    width: width,\n    height: height,\n    style: {\n      display: \"block\"\n    }\n  }, /*#__PURE__*/React.createElement(\"polygon\", {\n    points: `0 0 0 ${height} ${width} ${height} ${width} 0`,\n    style: {\n      fill: color !== null && color !== void 0 ? color : \"#FFFFFF\"\n    }\n  }), status && (decreasing ? /*#__PURE__*/React.createElement(DecreasingArrows, {\n    x: width / 2 - fontSize * 2,\n    y: (height - arrowFontSize) / 2 + arrowFontSize,\n    fontSize: arrowFontSize\n  }) : /*#__PURE__*/React.createElement(IncreasingArrows, {\n    fontSize: arrowFontSize,\n    y: (height - arrowFontSize) / 2,\n    x: width / 2 - fontSize * 2\n  })), /*#__PURE__*/React.createElement(\"text\", {\n    id: \"test-average-column\",\n    style: {\n      fontWeight: bold && \"bold\"\n    },\n    lengthAdjust: \"spacingAndGlyphs\",\n    fontSize: fontSize,\n    x: width / 2 - fontSize,\n    y: (height - fontSize) / 2 + fontSize\n  }, value));\n}\nSingleCellSvg.propTypes = {\n  value: PropTypes.string.isRequired,\n  bold: PropTypes.bool,\n  color: PropTypes.string,\n  status: PropTypes.oneOf([\"increasing\", \"decreasing\"])\n};","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { DecreasingArrows, IncreasingArrows } from \"./Arrows\";\nexport default function LinkedCellSvg({\n  bold,\n  topValue,\n  bottomValue,\n  topColor,\n  bottomColor,\n  topStatus,\n  bottomStatus,\n  cellRef\n}) {\n  const width = (cellRef === null || cellRef === void 0 ? void 0 : cellRef.offsetWidth) - 1 || 100;\n  const height = (cellRef === null || cellRef === void 0 ? void 0 : cellRef.offsetHeight) - 1 || 47;\n  const fontSize = 12;\n  const topFontSize = 12;\n  const bottomFontSize = 12;\n  const padding = 6;\n  const arrowFontSize = 10;\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    width: width,\n    height: height,\n    viewBox: `0 0 ${width} ${height}`,\n    style: {\n      display: \"block\"\n    }\n  }, /*#__PURE__*/React.createElement(\"polygon\", {\n    points: `0,0 0,${height} ${width}, 0`,\n    style: {\n      fill: topColor !== null && topColor !== void 0 ? topColor : \"#FFFFFF\",\n      strokeWidth: 1,\n      stroke: \"rgb(232, 237, 242)\"\n    }\n  }), /*#__PURE__*/React.createElement(\"text\", {\n    style: {\n      fontWeight: bold && \"bold\"\n    },\n    id: \"test-cell-selector\",\n    lengthAdjust: \"spacingAndGlyphs\",\n    textLength: (topValue === null || topValue === void 0 ? void 0 : topValue.length) > 4 ? 28 : null,\n    fontSize: topFontSize,\n    x: padding + fontSize,\n    y: fontSize + padding\n  }, topValue), topStatus && (topStatus === \"increasing\" ? /*#__PURE__*/React.createElement(IncreasingArrows, {\n    fontSize: arrowFontSize,\n    y: padding,\n    x: padding + fontSize / 2\n  }) : /*#__PURE__*/React.createElement(DecreasingArrows, {\n    fontSize: arrowFontSize,\n    y: padding + fontSize,\n    x: padding + fontSize / 2\n  })), /*#__PURE__*/React.createElement(\"polygon\", {\n    points: `${width},0 ${width},${height} 0,${height}`,\n    style: {\n      fill: bottomColor !== null && bottomColor !== void 0 ? bottomColor : \"#FFFFFF\",\n      strokeWidth: 1,\n      stroke: \"rgb(232, 237, 242)\"\n    }\n  }), /*#__PURE__*/React.createElement(\"text\", {\n    style: {\n      fontWeight: bold && \"bold\"\n    },\n    id: \"test-cell-selector\",\n    lengthAdjust: \"spacingAndGlyphs\",\n    textLength: (bottomValue === null || bottomValue === void 0 ? void 0 : bottomValue.length) > 4 ? 28 : null,\n    fontSize: bottomFontSize,\n    x: width / 2 + padding,\n    y: height - padding\n  }, bottomValue), bottomStatus && (bottomStatus === \"increasing\" ? /*#__PURE__*/React.createElement(IncreasingArrows, {\n    fontSize: arrowFontSize,\n    y: height - (fontSize + padding),\n    x: width - (padding + fontSize / 2)\n  }) : /*#__PURE__*/React.createElement(DecreasingArrows, {\n    fontSize: arrowFontSize,\n    y: height - padding,\n    x: width - (padding + fontSize / 2)\n  })));\n}\nLinkedCellSvg.propTypes = {\n  bottomValue: PropTypes.any.isRequired,\n  topValue: PropTypes.any.isRequired,\n  bold: PropTypes.bool,\n  bottomColor: PropTypes.string,\n  bottomStatus: PropTypes.oneOf([\"increasing\", \"decreasing\"]),\n  topColor: PropTypes.string,\n  topStatus: PropTypes.oneOf([\"increasing\", \"decreasing\"])\n};","import { defaultsDeep } from \"lodash\";\nexport default class FormFieldModel {\n  constructor(attributes = {}) {\n    defaultsDeep(this, attributes, this.defaults);\n  }\n  get defaults() {\n    return {};\n  }\n}","import { colors } from \"@dhis2/ui\";\nimport MaterialErrorIcon from \"@material-ui/icons/Error\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nexport default function ErrorIcon({\n  size,\n  color\n}) {\n  return /*#__PURE__*/React.createElement(MaterialErrorIcon, {\n    style: {\n      color: color !== null && color !== void 0 ? color : colors.grey500,\n      fontSize: size !== null && size !== void 0 ? size : 24\n    }\n  });\n}\nErrorIcon.propTypes = {\n  size: PropTypes.number.isRequired,\n  color: PropTypes.string\n};","import { CenteredContent, CircularLoader } from \"@dhis2/ui\";\nimport React from \"react\";\nexport default function ModalLoader() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-100 h-100\"\n  }, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  })));\n}","import { atom } from \"recoil\";\nexport const EngineState = atom({\n  key: \"engineState\",\n  default: {}\n});","import { atom, selector } from \"recoil\";\nimport { EngineState } from \"./engine\";\nconst systemSettingsKeys = [\"keyCalendar\"];\nconst systemSettingsQuery = {\n  system: {\n    resource: \"systemSettings\",\n    params: ({\n      keys\n    }) => ({\n      keys: keys === null || keys === void 0 ? void 0 : keys.map(key => `key=${key}`)\n    })\n  }\n};\nexport const SystemSettingsState = atom({\n  key: \"system-settings-state\",\n  default: selector({\n    key: \"system-settings-selector\",\n    get: async ({\n      get\n    }) => {\n      const engine = get(EngineState);\n      const {\n        system\n      } = await engine.query(systemSettingsQuery, {\n        variables: {\n          keys: systemSettingsKeys\n        }\n      });\n      const {\n        keyCalendar\n      } = system !== null && system !== void 0 ? system : {};\n      return {\n        calendar: keyCalendar\n      };\n    }\n  })\n});","import { find } from \"lodash\";\nimport { atom, selector, selectorFamily } from \"recoil\";\nimport { EngineState } from \"./engine\";\nimport { ScorecardSummaryState } from \"./scorecard\";\nimport { DefaultAuthority } from \"../constants\";\nimport { getUserAuthority } from \"../utils\";\nconst userQuery = {\n  user: {\n    resource: \"me\",\n    params: {\n      fields: [\"id\", \"displayName\", \"userGroups\", \"authorities\", \"organisationUnits[id,level,displayName]\"]\n    }\n  }\n};\nexport const UserState = atom({\n  key: \"userState\",\n  default: selector({\n    key: \"userStateSelector\",\n    get: async ({\n      get\n    }) => {\n      try {\n        const engine = get(EngineState);\n        if (engine) {\n          const {\n            user\n          } = await engine.query(userQuery);\n          if (user) {\n            return user;\n          }\n          return null;\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    }\n  })\n});\nexport const UserAuthorityOnScorecard = selectorFamily({\n  key: \"user-scorecard-authority\",\n  get: scorecardId => ({\n    get\n  }) => {\n    var _getUserAuthority;\n    const scorecardSummary = find(get(ScorecardSummaryState), [\"id\", scorecardId]);\n    const user = get(UserState);\n    return (_getUserAuthority = getUserAuthority(user, scorecardSummary)) !== null && _getUserAuthority !== void 0 ? _getUserAuthority : DefaultAuthority;\n  }\n});","import { atom } from \"recoil\";\nimport { getWindowDimensions } from \"../utils\";\nconst ScreenDimensionState = atom({\n  key: \"screen-dimensions\",\n  default: {},\n  effects_UNSTABLE: [({\n    setSelf\n  }) => {\n    function handleResize() {\n      setSelf(getWindowDimensions());\n    }\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }]\n});\nexport { ScreenDimensionState };","import i18n from \"@dhis2/d2-i18n\";\nimport { Period } from \"@iapps/period-utilities\";\nimport { cloneDeep, filter, get as _get, head, isEmpty, set as _set, some } from \"lodash\";\nimport { atom, atomFamily, selector, selectorFamily } from \"recoil\";\nimport { OrgUnitChildren, SelectedOrgUnits } from \"./orgUnit\";\nimport { EngineState } from \"./engine\";\nimport { PeriodResolverState } from \"./period\";\nimport { SystemSettingsState } from \"./system\";\nimport { UserState } from \"./user\";\nimport { ScreenDimensionState } from \"./window\";\nimport { OrgUnitSelection, Scorecard, ScorecardAccess, ScorecardOptions } from \"../models\";\nimport { Orientation, ScorecardAccessType, TableSort } from \"../constants\";\nimport { getOrgUnitSelection, getScorecard, getScorecardSummary, isOrgUnitId, restoreScorecardSummary } from \"../services\";\nimport { getColSpanDataGroups, getColSpanWithOrgUnit, getDataSourcesFromGroups, getHoldersFromGroups, getNameCellWidth, getTableWidthWithDataGroups, getTableWidthWithOrgUnit, getUserAuthority, uid } from \"../utils\";\nconst defaultValue = {\n  legendDefinitions: [{\n    color: \"#D3D3D3\",\n    name: i18n.t(\"N/A\"),\n    isDefault: true,\n    id: \"N/A\"\n  }, {\n    color: \"#FFFFFF\",\n    name: i18n.t(\"No Data\"),\n    isDefault: true,\n    id: \"No Data\"\n  }, {\n    id: uid(),\n    color: \"#008000\",\n    name: i18n.t(\"Target Reached/ On Track\")\n  }, {\n    id: uid(),\n    color: \"#FFFF00\",\n    name: i18n.t(\"Progress, but more effort required\")\n  }, {\n    id: uid(),\n    color: \"#FF0000\",\n    name: i18n.t(\"Not on track\")\n  }],\n  options: new ScorecardOptions(),\n  publicAccess: new ScorecardAccess({\n    id: \"public\",\n    type: \"public\",\n    access: ScorecardAccessType.NO_ACCESS,\n    displayName: \"Public\"\n  }),\n  orgUnitSelection: new OrgUnitSelection(),\n  userGroupAccesses: [],\n  userAccesses: [],\n  highlightedIndicators: []\n};\nconst ScorecardIdState = atom({\n  key: \"scorecard-id\",\n  default: null\n});\nconst AllScorecardsSummaryState = selector({\n  key: \"all-scorecard-summary-state\",\n  get: async ({\n    get\n  }) => {\n    const engine = get(EngineState);\n    await restoreScorecardSummary(engine);\n    const {\n      summary,\n      error\n    } = await getScorecardSummary(engine);\n    if (error) {\n      throw error;\n    }\n    return summary;\n  }\n});\nconst ScorecardSummaryState = atom({\n  key: \"scorecard-summary\",\n  default: selector({\n    key: \"scorecard-summary-selector\",\n    get: async ({\n      get\n    }) => {\n      const summary = get(AllScorecardsSummaryState);\n      const user = get(UserState);\n      return filter(summary, scorecardSummary => {\n        var _getUserAuthority;\n        const {\n          read\n        } = (_getUserAuthority = getUserAuthority(user, scorecardSummary)) !== null && _getUserAuthority !== void 0 ? _getUserAuthority : {};\n        return read;\n      });\n    }\n  })\n});\n//This is to force a data re-fetch when a scorecard is updated\nconst ScorecardRequestId = atomFamily({\n  key: \"scorecardForceUpdateState\",\n  default: 0\n});\nconst IsNewScorecardState = atom({\n  key: \"isNewScorecard\",\n  default: undefined\n});\nconst ScorecardConfState = atomFamily({\n  key: \"scorecard-config\",\n  default: selectorFamily({\n    key: \"active-scorecard-config\",\n    get: scorecardId => async ({\n      get\n    }) => {\n      const engine = get(EngineState);\n      get(ScorecardRequestId(scorecardId));\n      if (scorecardId) {\n        const {\n          scorecard,\n          error\n        } = await getScorecard(scorecardId, engine);\n        if (error) {\n          var _error$details;\n          if ((error === null || error === void 0 ? void 0 : (_error$details = error.details) === null || _error$details === void 0 ? void 0 : _error$details.httpStatusCode) === 404) {\n            throw {\n              ...error,\n              title: i18n.t(\"Scorecard Not Found\"),\n              message: i18n.t(`Scorecard with id ${scorecardId} could not be found.`)\n            };\n          }\n          throw error;\n        }\n        const orgUnitSelection = await getOrgUnitSelection(scorecard, engine);\n        return {\n          ...scorecard,\n          orgUnitSelection\n        };\n      }\n      return new Scorecard(defaultValue);\n    }\n  })\n});\nconst ScorecardConfigDirtyState = atomFamily({\n  key: \"scorecard-config-edit-state\",\n  default: selectorFamily({\n    key: \"scorecard-state-default\",\n    get: path => async ({\n      get\n    }) => {\n      const scorecardId = get(ScorecardIdState);\n      if (!isEmpty(scorecardId)) {\n        return _get(get(ScorecardConfState(scorecardId)), path);\n      }\n      return _get(new Scorecard(defaultValue), path);\n    }\n  })\n});\nconst ScorecardConfigDirtySelector = selectorFamily({\n  key: \"scorecard-dirty-state-selector\",\n  get: ({\n    key,\n    path\n  }) => ({\n    get\n  }) => {\n    return _get(get(ScorecardConfigDirtyState(key)), path);\n  },\n  set: ({\n    key,\n    path\n  }) => ({\n    get,\n    set\n  }, newValue) => {\n    const object = get(ScorecardConfigDirtyState(key));\n    const newObject = _set(cloneDeep(object), path, newValue);\n    set(ScorecardConfigDirtyState(key), newObject);\n  }\n});\nconst ScorecardConfigErrorState = atom({\n  key: \"scorecard-config-error-state\",\n  default: {}\n});\nconst ScorecardConfigErrorSelector = selectorFamily({\n  key: \"scorecard-config-error-selector\",\n  get: path => ({\n    get\n  }) => {\n    return _get(get(ScorecardConfigErrorState), path);\n  },\n  set: path => ({\n    set\n  }, newValue) => {\n    set(ScorecardConfigErrorState, prevValue => _set(prevValue, path, newValue));\n  }\n});\nconst ScorecardConfigEditState = atom({\n  key: \"scorecard-edit-state\",\n  default: {}\n});\nconst RefreshScorecardState = atom({\n  key: \"refresh-scorecard\",\n  default: 0\n});\nconst ScorecardNameSort = atomFamily({\n  key: \"scorecard-name-sort\",\n  default: {\n    orgUnit: TableSort.DEFAULT,\n    data: TableSort.DEFAULT\n  }\n});\nconst ScorecardViewState = atomFamily({\n  key: \"scorecard-view-config\",\n  default: selectorFamily({\n    key: \"scorecardViewStateSelector\",\n    get: key => ({\n      get\n    }) => {\n      var _currentPeriod$get, _currentPeriod$get2;\n      const scorecardId = get(ScorecardIdState);\n      const {\n        calendar\n      } = get(SystemSettingsState);\n      const configState = get(ScorecardConfState(scorecardId));\n      if (key === \"periodSelection\") {\n        var _configState$periodSe;\n        if (isEmpty(configState === null || configState === void 0 ? void 0 : (_configState$periodSe = configState.periodSelection) === null || _configState$periodSe === void 0 ? void 0 : _configState$periodSe.periods)) {\n          const {\n            periodType\n          } = configState;\n          const currentPeriod = new Period().setCalendar(calendar).setPreferences({\n            allowFuturePeriods: true\n          });\n          if (periodType) {\n            currentPeriod.setType(periodType);\n            switch (periodType) {\n              case \"Yearly\":\n                return {\n                  periods: [currentPeriod === null || currentPeriod === void 0 ? void 0 : (_currentPeriod$get = currentPeriod.get()) === null || _currentPeriod$get === void 0 ? void 0 : _currentPeriod$get.list()[0]],\n                  periodType\n                };\n              default:\n                return {\n                  periods: currentPeriod === null || currentPeriod === void 0 ? void 0 : (_currentPeriod$get2 = currentPeriod.get()) === null || _currentPeriod$get2 === void 0 ? void 0 : _currentPeriod$get2.list(),\n                  periodType\n                };\n            }\n          }\n        }\n      }\n      return configState[key];\n    }\n  })\n});\nconst ScorecardLegendDefinitionSelector = selectorFamily({\n  get: isDefault => ({\n    get\n  }) => {\n    const legendDefinitions = get(ScorecardViewState(\"legendDefinitions\"));\n    if (isDefault) {\n      return filter(legendDefinitions, ({\n        isDefault\n      }) => isDefault);\n    }\n    return filter(legendDefinitions, ({\n      isDefault\n    }) => !isDefault);\n  }\n});\nconst ScorecardTableSortState = atomFamily({\n  key: \"scorecard-table-state\",\n  default: {\n    orgUnit: TableSort.DEFAULT,\n    data: TableSort.DEFAULT\n  }\n});\nconst ScorecardTableOrientationState = selector({\n  key: \"scorecard-table-orientation-default\",\n  get: ({\n    get\n  }) => {\n    var _get2;\n    const {\n      showDataInRows\n    } = (_get2 = get(ScorecardViewState(\"options\"))) !== null && _get2 !== void 0 ? _get2 : {};\n    if (showDataInRows) {\n      return Orientation.DATA_VS_ORG_UNIT;\n    }\n    return Orientation.ORG_UNIT_VS_DATA;\n  },\n  set: ({\n    set\n  }, newValue) => {\n    set(ScorecardViewState(\"options\"), prevValue => {\n      return _set(cloneDeep(prevValue), \"showDataInRows\", newValue === Orientation.DATA_VS_ORG_UNIT);\n    });\n  }\n});\nconst ScorecardTableConfigState = selectorFamily({\n  key: \"scorecard-table-details\",\n  get: orgUnits => ({\n    get\n  }) => {\n    const orientation = get(ScorecardTableOrientationState);\n    const periods = get(PeriodResolverState);\n    const {\n      dataGroups\n    } = get(ScorecardViewState(\"dataSelection\"));\n    const {\n      averageColumn\n    } = get(ScorecardViewState(\"options\"));\n    const {\n      filteredOrgUnits,\n      childrenOrgUnits\n    } = get(ScorecardOrgUnitState(orgUnits));\n    const {\n      width: screenWidth\n    } = get(ScreenDimensionState);\n    const dataColSpan = getColSpanDataGroups(periods, dataGroups, averageColumn);\n    const dataNameColumnWidth = getNameCellWidth(screenWidth, dataColSpan);\n    const orgUnitColSpan = getColSpanWithOrgUnit(periods, [...filteredOrgUnits, ...childrenOrgUnits], averageColumn);\n    const orgUnitNameColumnWidth = getNameCellWidth(screenWidth, orgUnitColSpan);\n    return orientation === \"orgUnitsVsData\" ? {\n      rows: \"orgUnits\",\n      columns: [\"groups\", \"data\", \"periods\"],\n      tableWidth: getTableWidthWithDataGroups(periods, dataGroups, averageColumn),\n      colSpan: dataColSpan + 2,\n      nameColumnWidth: dataNameColumnWidth\n    } : {\n      rows: \"data\",\n      columns: [\"orgUnits\", \"periods\"],\n      tableWidth: getTableWidthWithOrgUnit(periods, [...filteredOrgUnits, ...childrenOrgUnits], averageColumn),\n      colSpan: orgUnitColSpan + 2,\n      nameColumnWidth: orgUnitNameColumnWidth\n    };\n  }\n});\nconst ScorecardOrgUnitState = atomFamily({\n  key: \"selected-org-unit-state\",\n  default: selectorFamily({\n    key: \"selected-org-units-default\",\n    get: orgUnits => async ({\n      get\n    }) => {\n      var _childrenOrgUnits;\n      let childrenOrgUnits = [];\n      const filteredOrgUnits = get(SelectedOrgUnits(orgUnits));\n      if (orgUnits.length === 1) {\n        if (isOrgUnitId(head(orgUnits))) {\n          childrenOrgUnits = get(OrgUnitChildren(head(orgUnits)));\n        }\n      }\n      return {\n        childrenOrgUnits,\n        filteredOrgUnits,\n        orgUnitsCount: ((_childrenOrgUnits = childrenOrgUnits) === null || _childrenOrgUnits === void 0 ? void 0 : _childrenOrgUnits.length) + (filteredOrgUnits === null || filteredOrgUnits === void 0 ? void 0 : filteredOrgUnits.length)\n      };\n    }\n  })\n});\nconst ScorecardDataSourceState = atom({\n  key: \"data-source-state\",\n  default: selector({\n    key: \"scorecard-data-sources-default\",\n    get: ({\n      get\n    }) => {\n      var _get3;\n      const {\n        dataGroups\n      } = (_get3 = get(ScorecardViewState(\"dataSelection\"))) !== null && _get3 !== void 0 ? _get3 : {};\n      return getHoldersFromGroups(dataGroups);\n    }\n  })\n});\nconst ScorecardDataLoadingState = atomFamily({\n  key: \"data-loading-state\"\n});\nconst IsSpecificTargetsSet = selector({\n  key: \"is-specific-targets-set\",\n  get: ({\n    get\n  }) => {\n    const {\n      dataGroups\n    } = get(ScorecardViewState(\"dataSelection\"));\n    const dataSources = getDataSourcesFromGroups(dataGroups);\n    return some(dataSources, \"specificTargetsSet\");\n  }\n});\nconst ScorecardForceUpdateState = atomFamily({\n  key: \"scorecard-force-update-state\",\n  default: 0\n});\nconst ScorecardInSearchState = atomFamily({\n  key: \"scorecard-in-search-state\",\n  default: false\n});\nexport default ScorecardConfState;\nexport { ScorecardConfigEditState, ScorecardConfigDirtyState, ScorecardIdState, ScorecardSummaryState, ScorecardViewState, ScorecardRequestId, ScorecardConfigDirtySelector, ScorecardConfigErrorSelector, ScorecardConfigErrorState, ScorecardTableOrientationState, ScorecardTableConfigState, ScorecardOrgUnitState, ScorecardTableSortState, ScorecardDataSourceState, ScorecardDataLoadingState, ScorecardLegendDefinitionSelector, AllScorecardsSummaryState, IsNewScorecardState, IsSpecificTargetsSet, RefreshScorecardState, ScorecardNameSort, ScorecardForceUpdateState, ScorecardInSearchState };","import { Period } from \"@iapps/period-utilities\";\nimport { compact, differenceBy, filter, isArray, isEmpty, uniqBy } from \"lodash\";\nimport { selector } from \"recoil\";\nimport { ScorecardViewState } from \"./scorecard\";\nimport { SystemSettingsState } from \"./system\";\nconst PeriodResolverState = selector({\n  key: \"period-resolver\",\n  get: ({\n    get\n  }) => {\n    var _get, _get2;\n    const {\n      periods\n    } = (_get = get(ScorecardViewState(\"periodSelection\"))) !== null && _get !== void 0 ? _get : {};\n    const {\n      calendar\n    } = (_get2 = get(SystemSettingsState)) !== null && _get2 !== void 0 ? _get2 : {\n      calendar: \"gregorian\"\n    };\n    if (!isEmpty(periods)) {\n      const relativePeriods = filter(periods, ({\n        id\n      }) => {\n        var _period$type;\n        const period = new Period().setPreferences({\n          allowFuturePeriods: true\n        }).setCalendar(calendar).getById(id);\n        return period === null || period === void 0 ? void 0 : (_period$type = period.type) === null || _period$type === void 0 ? void 0 : _period$type.match(RegExp(\"Relative\"));\n      });\n      let allPeriods = [...differenceBy(periods, relativePeriods, \"id\")];\n      for (const period of relativePeriods) {\n        const periodInstance = new Period().setPreferences({\n          allowFuturePeriods: true\n        }).setCalendar(calendar).getById(period === null || period === void 0 ? void 0 : period.id);\n        const actualPeriods = isArray(periodInstance === null || periodInstance === void 0 ? void 0 : periodInstance.iso) ? periodInstance === null || periodInstance === void 0 ? void 0 : periodInstance.iso : [periodInstance === null || periodInstance === void 0 ? void 0 : periodInstance.iso];\n        allPeriods = allPeriods.concat(actualPeriods);\n      }\n      return uniqBy(compact(allPeriods), \"id\");\n    }\n    return [];\n  }\n});\nexport { PeriodResolverState };","import { chunk, compact, find, flatten, isEmpty, reduce, sortBy, uniqBy } from \"lodash\";\nimport { atom, selector, selectorFamily } from \"recoil\";\nimport { EngineState } from \"./engine\";\nimport { PeriodResolverState } from \"./period\";\nimport { ScorecardViewState } from \"./scorecard\";\nimport { UserState } from \"./user\";\nimport { getHoldersFromGroups } from \"../utils\";\nimport { getOrgUnitsFromAnalytics } from \"../services\";\nconst {\n  atomFamily\n} = require(\"recoil\");\nconst orgUnitQuery = {\n  orgUnit: {\n    resource: \"organisationUnits\",\n    id: ({\n      id\n    }) => id,\n    params: {\n      fields: [\"id\", \"displayName\", \"path\", \"level\"]\n    }\n  }\n};\nconst orgUnitChildrenQuery = {\n  analytics: {\n    resource: \"analytics\",\n    params: ({\n      id,\n      level\n    }) => ({\n      dimension: [`ou:${id};LEVEL-${level}`, `pe:${new Date().getFullYear()}`],\n      skipData: true,\n      hierarchyMeta: true,\n      showHierarchy: true\n    })\n  }\n};\nconst selectedOrgUnitsQuery = {\n  analytics: {\n    resource: \"analytics\",\n    params: ({\n      ou,\n      pe\n    }) => ({\n      dimension: [`ou:${ou.join(\";\")}`, `pe:${pe}`],\n      skipData: true,\n      hierarchyMeta: true,\n      showHierarchy: true\n    })\n  }\n};\nconst orgUnitLevelsQuery = {\n  levels: {\n    resource: \"organisationUnitLevels\",\n    params: {\n      fields: [\"id\", \"displayName\", \"level\"]\n    }\n  }\n};\nconst orgUnitGroupsQuery = {\n  groups: {\n    resource: \"organisationUnitGroups\",\n    params: {\n      fields: [\"id\", \"displayName\"]\n    }\n  }\n};\nexport const OrgUnitLevels = atom({\n  key: \"org-unit-levels\",\n  default: selector({\n    key: \"org-unit-levels-default\",\n    get: async ({\n      get\n    }) => {\n      const engine = get(EngineState);\n      const {\n        levels\n      } = await engine.query(orgUnitLevelsQuery);\n      return levels === null || levels === void 0 ? void 0 : levels.organisationUnitLevels;\n    }\n  })\n});\nexport const OrgUnitGroups = atom({\n  key: \"org-unit-group\",\n  default: selector({\n    key: \"org-unit-group-default\",\n    get: async ({\n      get\n    }) => {\n      const engine = get(EngineState);\n      const {\n        groups\n      } = await engine.query(orgUnitGroupsQuery);\n      return groups === null || groups === void 0 ? void 0 : groups.organisationUnitGroups;\n    }\n  })\n});\nexport const OrgUnit = selectorFamily({\n  key: \"orgUnitSelector\",\n  get: id => async ({\n    get\n  }) => {\n    try {\n      const engine = get(EngineState);\n      const {\n        orgUnit\n      } = await engine.query(orgUnitQuery, {\n        variables: {\n          id\n        }\n      });\n      return orgUnit;\n    } catch (e) {\n      return {};\n    }\n  }\n});\nexport const OrgUnitPathState = atomFamily({\n  key: \"orgUnitPath\",\n  default: selectorFamily({\n    key: \"orgUnitPathSelector\",\n    get: (path = \"\") => async ({\n      get\n    }) => {\n      var _sortBy;\n      const orgUnits = compact(path.split(\"/\"));\n      const orgUnitNames = (_sortBy = sortBy(get(SelectedOrgUnits(orgUnits)), \"level\")) === null || _sortBy === void 0 ? void 0 : _sortBy.map(({\n        displayName\n      }) => displayName);\n      return orgUnitNames.join(\"/\");\n    }\n  })\n});\nexport const OrgUnitChildren = selectorFamily({\n  key: \"org-unit-children\",\n  get: orgUnitId => async ({\n    get\n  }) => {\n    const engine = get(EngineState);\n    const parentOrgUnit = get(OrgUnit(orgUnitId));\n    if (parentOrgUnit) {\n      var _getOrgUnitsFromAnaly;\n      const {\n        analytics\n      } = await engine.query(orgUnitChildrenQuery, {\n        variables: {\n          id: orgUnitId,\n          level: parentOrgUnit.level + 1\n        }\n      });\n      return (_getOrgUnitsFromAnaly = getOrgUnitsFromAnalytics(analytics)) !== null && _getOrgUnitsFromAnaly !== void 0 ? _getOrgUnitsFromAnaly : [];\n    }\n  }\n});\nexport const LowestOrgUnitLevel = selector({\n  key: \"last-org-unit-level\",\n  get: ({\n    get\n  }) => {\n    const orgUnitLevels = get(OrgUnitLevels);\n    return reduce(orgUnitLevels, (acc, level) => level.level > acc.level ? level : acc);\n  }\n});\nexport const InitialOrgUnits = selector({\n  key: \"initial-org-units-resolver\",\n  get: async ({\n    get\n  }) => {\n    var _get, _get2, _get3, _getHoldersFromGroups;\n    const {\n      orgUnits,\n      levels,\n      groups,\n      userOrgUnit,\n      userSubUnit,\n      userSubX2Unit\n    } = (_get = get(ScorecardViewState(\"orgUnitSelection\"))) !== null && _get !== void 0 ? _get : {};\n    const periods = (_get2 = get(PeriodResolverState)) !== null && _get2 !== void 0 ? _get2 : [];\n    const orgUnitLevels = get(OrgUnitLevels);\n    const {\n      dataGroups\n    } = (_get3 = get(ScorecardViewState(\"dataSelection\"))) !== null && _get3 !== void 0 ? _get3 : {};\n    const dataHolders = (_getHoldersFromGroups = getHoldersFromGroups(dataGroups)) !== null && _getHoldersFromGroups !== void 0 ? _getHoldersFromGroups : [];\n    const {\n      organisationUnits\n    } = get(UserState);\n    let resolvedOrgUnits = orgUnits;\n    if (!isEmpty(dataHolders) && !isEmpty(periods)) {\n      if (userSubX2Unit) {\n        resolvedOrgUnits = [...resolvedOrgUnits, {\n          id: \"USER_ORGUNIT_GRANDCHILDREN\"\n        }];\n      }\n      if (userSubUnit) {\n        resolvedOrgUnits = [...resolvedOrgUnits, {\n          id: \"USER_ORGUNIT_CHILDREN\"\n        }];\n      }\n      if (userOrgUnit) {\n        resolvedOrgUnits = [...resolvedOrgUnits, ...organisationUnits];\n      }\n      if (!isEmpty(levels)) {\n        var _levels$map;\n        resolvedOrgUnits = [...resolvedOrgUnits, ...((_levels$map = levels === null || levels === void 0 ? void 0 : levels.map(level => {\n          var _find;\n          return {\n            id: `LEVEL-${(_find = find(orgUnitLevels, {\n              id: level\n            })) === null || _find === void 0 ? void 0 : _find.level}`\n          };\n        })) !== null && _levels$map !== void 0 ? _levels$map : [])];\n      }\n      if (!isEmpty(groups)) {\n        var _groups$map;\n        resolvedOrgUnits = [...resolvedOrgUnits, ...((_groups$map = groups === null || groups === void 0 ? void 0 : groups.map(group => ({\n          id: `OU_GROUP-${group}`\n        }))) !== null && _groups$map !== void 0 ? _groups$map : [])];\n      }\n    }\n    return {\n      orgUnits: uniqBy(resolvedOrgUnits, \"id\")\n    };\n  }\n});\nconst getOrgUnits = async (engine, orgUnitsIds) => {\n  const pe = new Date().getFullYear();\n  const {\n    analytics\n  } = await engine.query(selectedOrgUnitsQuery, {\n    variables: {\n      ou: orgUnitsIds !== null && orgUnitsIds !== void 0 ? orgUnitsIds : [],\n      pe\n    }\n  });\n  return getOrgUnitsFromAnalytics(analytics);\n};\nexport const SelectedOrgUnits = selectorFamily({\n  key: \"selected-org-units-resolver\",\n  get: orgUnitsIds => async ({\n    get\n  }) => {\n    try {\n      const engine = get(EngineState);\n      const orgUnitsChunks = chunk(orgUnitsIds, 5);\n      const orgUnits = await Promise.all(orgUnitsChunks.map(chunk => getOrgUnits(engine, chunk)));\n      return flatten(orgUnits);\n    } catch (e) {\n      console.error(e);\n      return [];\n    }\n  }\n});","//Validation Selectors\nimport i18n from \"@dhis2/d2-i18n\";\nimport { isEmpty } from \"lodash\";\nimport { atom, selector, selectorFamily, waitForAll } from \"recoil\";\nimport { ScorecardConfigDirtyState } from \"./scorecard\";\nimport { REQUIRED_FIELDS } from \"../constants\";\nimport { validateGroups } from \"../utils\";\nconst ShouldValidate = atom({\n  key: \"should-validate-state\",\n  default: false\n});\nconst FieldErrorState = selectorFamily({\n  key: \"text-fields-error-state\",\n  get: ({\n    id,\n    validations\n  }) => ({\n    get\n  }) => {\n    const shouldValidate = get(ShouldValidate);\n    if (shouldValidate) {\n      const value = get(ScorecardConfigDirtyState(id));\n      if (validations !== null && validations !== void 0 && validations.mandatory) {\n        if (isEmpty(value)) {\n          return i18n.t(\"This field is required\");\n        }\n      }\n    }\n  }\n});\nconst ErrorState = selector({\n  key: \"scorecard-error-state\",\n  get: ({\n    getCallback\n  }) => {\n    return getCallback(({\n      snapshot\n    }) => () => {\n      return snapshot.getLoadable(waitForAll([...(REQUIRED_FIELDS === null || REQUIRED_FIELDS === void 0 ? void 0 : REQUIRED_FIELDS.map(key => FieldErrorState({\n        id: key,\n        validations: {\n          mandatory: true\n        }\n      }))), DataGroupsErrorState])).contents;\n    });\n  }\n});\nconst DataGroupsErrorState = selector({\n  key: \"data-groups-error-state\",\n  get: ({\n    get\n  }) => {\n    const shouldValidate = get(ShouldValidate);\n    if (shouldValidate) {\n      var _get;\n      const dataGroups = (_get = get(ScorecardConfigDirtyState(\"dataSelection\"))) === null || _get === void 0 ? void 0 : _get.dataGroups;\n      return validateGroups(dataGroups) || null;\n    }\n  }\n});\nconst DataGroupErrorState = selectorFamily({\n  key: \"data-groups-validator\",\n  get: groupId => ({\n    get\n  }) => {\n    const error = get(DataGroupsErrorState);\n    return error === null || error === void 0 ? void 0 : error[groupId];\n  }\n});\nexport { DataGroupErrorState, ShouldValidate, FieldErrorState, ErrorState };","import { atom } from \"recoil\";\nconst RouterState = atom({\n  key: \"router-state\",\n  default: {\n    previous: \"/\"\n  }\n});\nexport default RouterState;","import { atom } from \"recoil\";\nconst HelpState = atom({\n  key: \"help-state\",\n  default: false\n});\nconst HelpSteps = atom({\n  key: \"intro-js-state\",\n  default: []\n});\nconst HelpIndex = atom({\n  key: \"current-step-index\",\n  default: 0\n});\nexport default HelpState;\nexport { HelpSteps, HelpIndex };","import { atom, selector } from \"recoil\";\nimport { EngineState } from \"./engine\";\nimport { getCustomFunctions } from \"../services\";\nconst customFunctionsKeysQuery = {\n  keys: {\n    resource: \"dataStore/functions\"\n  }\n};\nexport const CustomFunctionsKeysState = atom({\n  key: \"customFunctionsKeys\",\n  default: selector({\n    key: \"customFunctionKeysSelector\",\n    get: async ({\n      get\n    }) => {\n      try {\n        const engine = get(EngineState);\n        const {\n          keys\n        } = await engine.query(customFunctionsKeysQuery);\n        if (keys) {\n          return keys;\n        }\n        return [];\n      } catch (e) {\n        return [];\n      }\n    }\n  })\n});\nexport const CustomFunctionsState = atom({\n  key: \"customFunctions\",\n  default: selector({\n    key: \"customFunctionsSelector\",\n    get: async ({\n      get\n    }) => {\n      const engine = get(EngineState);\n      const customFunctionKeys = get(CustomFunctionsKeysState);\n      return await getCustomFunctions(customFunctionKeys, engine);\n    }\n  })\n});","import { findIndex, get as _get, isEmpty } from \"lodash\";\nimport { atom, selector, selectorFamily } from \"recoil\";\nimport { InitialOrgUnits } from \"./orgUnit\";\nimport { PeriodResolverState } from \"./period\";\nimport { ScorecardViewState } from \"./scorecard\";\nimport { getHighlightedIndicatorsData } from \"../services\";\nconst HighlightedIndicatorsState = atom({\n  key: \"highlighted-indicators-state\",\n  default: selector({\n    key: \"highlighted-indicators-selector\",\n    get: async ({\n      get\n    }) => {\n      const {\n        orgUnits\n      } = get(InitialOrgUnits);\n      const periods = get(PeriodResolverState);\n      const highlightedIndicators = get(ScorecardViewState(\"highlightedIndicators\"));\n      if (!isEmpty(orgUnits) && !isEmpty(periods) && !isEmpty(highlightedIndicators)) {\n        var _orgUnits$, _periods$;\n        const data = await getHighlightedIndicatorsData({\n          orgUnits: [(_orgUnits$ = orgUnits[0]) === null || _orgUnits$ === void 0 ? void 0 : _orgUnits$.id],\n          periods: [(_periods$ = periods[0]) === null || _periods$ === void 0 ? void 0 : _periods$.id],\n          highlightedIndicators: highlightedIndicators === null || highlightedIndicators === void 0 ? void 0 : highlightedIndicators.map(({\n            id\n          }) => id)\n        });\n        if (!isEmpty(data)) {\n          const {\n            rows,\n            headers\n          } = data._data;\n          const dxIndex = findIndex(headers, [\"name\", \"dx\"]);\n          const valueIndex = findIndex(headers, [\"name\", \"value\"]);\n          const formattedData = {};\n          for (const row of rows) {\n            formattedData[row[dxIndex]] = row[valueIndex];\n          }\n          return formattedData;\n        }\n        return [];\n      }\n    }\n  })\n});\nconst SingleHighlightedIndicatorState = selectorFamily({\n  key: \"highlighted-indicator-single-selector\",\n  get: key => ({\n    get\n  }) => {\n    return _get(get(HighlightedIndicatorsState), key);\n  }\n});\nexport { HighlightedIndicatorsState, SingleHighlightedIndicatorState };","// Optimized cache buster with version management\n\n// Cache version - increment this when you want to force a cache clear\nconst CACHE_VERSION = '4';\nconst VERSION_PARAM = 'cv'; // Using a different parameter name to avoid conflicts\n\nasync function clearCaches() {\n  if ('caches' in window) {\n    try {\n      const cacheNames = await caches.keys();\n      const cachePromises = cacheNames.filter(name => name.includes('hisptz-scorecard')).map(name => caches.delete(name));\n      await Promise.all(cachePromises);\n      console.log('Caches cleared');\n    } catch (error) {\n      console.warn('Error clearing caches:', error);\n    }\n  }\n}\nasync function unregisterServiceWorkers() {\n  if ('serviceWorker' in navigator) {\n    try {\n      const registrations = await navigator.serviceWorker.getRegistrations();\n      for (const registration of registrations) {\n        await registration.unregister();\n      }\n      console.log('Service workers unregistered');\n    } catch (error) {\n      console.warn('Error unregistering service workers:', error);\n    }\n  }\n}\nfunction clearStorages() {\n  try {\n    // Only clear storage items that might cause conflicts\n    const clearKeys = [];\n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i);\n      if (key && key.startsWith('hisptz-scorecard')) {\n        clearKeys.push(key);\n      }\n    }\n    clearKeys.forEach(key => localStorage.removeItem(key));\n\n    // Clear session storage\n    sessionStorage.clear();\n  } catch (error) {\n    console.warn('Error clearing storage:', error);\n  }\n}\n\n// Main initialization\nexport async function initialize() {\n  // Skip in development\n  if (process.env.NODE_ENV !== 'production') {\n    return;\n  }\n  const url = new URL(window.location.href);\n  const currentVersion = url.searchParams.get(VERSION_PARAM);\n\n  // If version in URL doesn't match current version, update it\n  if (currentVersion !== CACHE_VERSION) {\n    // Store the current scroll position\n    sessionStorage.setItem('scrollPosition', window.scrollY);\n\n    // Update the version in URL without reloading if it's the first time\n    if (!currentVersion) {\n      url.searchParams.set(VERSION_PARAM, CACHE_VERSION);\n      window.history.replaceState({}, '', url);\n    } else {\n      // If version exists but doesn't match, do a hard reload\n      url.searchParams.set(VERSION_PARAM, CACHE_VERSION);\n      window.location.replace(url.toString());\n      return;\n    }\n  }\n\n  // Clear caches in the background if needed\n  if (!sessionStorage.getItem(`cacheCleared_${CACHE_VERSION}`)) {\n    sessionStorage.setItem(`cacheCleared_${CACHE_VERSION}`, 'true');\n    Promise.all([clearCaches(), unregisterServiceWorkers(), new Promise(resolve => {\n      setTimeout(() => {\n        clearStorages();\n        resolve();\n      }, 1000);\n    })]).catch(console.error);\n  }\n\n  // If we get here, we're on the correct version\n  console.log('Cache buster: Running version', CACHE_VERSION);\n}\nexport default {\n  initialize\n};","import { FullPageError, FullPageLoader } from \"@scorecard/shared\";\nimport { SystemSettingsState } from \"@scorecard/shared\";\nimport React, { Suspense } from \"react\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { HashRouter, Redirect, Route, Switch } from \"react-router-dom\";\nimport { useRecoilValue } from \"recoil\";\nconst Main = /*#__PURE__*/React.lazy(() => import(\"../Main\"));\nconst ScorecardManagement = /*#__PURE__*/React.lazy(() => import(\"../Main/Components/ScoreCardManagement\"));\nconst ScorecardView = /*#__PURE__*/React.lazy(() => import(\"@scorecard/shared\").then(module => ({\n  default: module.ScorecardView\n})));\nconst ScorecardMigration = /*#__PURE__*/React.lazy(() => import(\"../Main/Components/ScorecardMigration\"));\nconst pages = [{\n  pathname: \"/migrate\",\n  component: ScorecardMigration\n}, {\n  pathname: \"/edit/:id\",\n  component: ScorecardManagement\n}, {\n  pathname: \"/add\",\n  component: ScorecardManagement\n}, {\n  pathname: \"/view/:id\",\n  component: ScorecardView\n}, {\n  pathname: \"/\",\n  component: Main\n}];\nexport default function Router() {\n  useRecoilValue(SystemSettingsState);\n  return /*#__PURE__*/React.createElement(HashRouter, null, /*#__PURE__*/React.createElement(ErrorBoundary, {\n    FallbackComponent: FullPageError\n  }, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(FullPageLoader, null)\n  }, /*#__PURE__*/React.createElement(Switch, null, pages.map(({\n    pathname,\n    component\n  }) => {\n    const Component = component;\n    return /*#__PURE__*/React.createElement(Route, {\n      key: pathname,\n      path: pathname\n    }, /*#__PURE__*/React.createElement(ErrorBoundary, {\n      FallbackComponent: FullPageError\n    }, /*#__PURE__*/React.createElement(Component, null)));\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/*\"\n  }, /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/\"\n  }))))));\n}","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport enTranslations from './en/translations.json';\nconst namespace = 'default';\ni18n.addResources('en', namespace, enTranslations);\nexport default i18n;","import { DataStoreProvider } from \"@dhis2/app-service-datastore\";\nimport { CssReset } from \"@dhis2/ui\";\nimport { ConfirmDialogProvider } from \"@hisptz/dhis2-ui\";\nimport { DATASTORE_NAMESPACE, FullPageError, FullPageLoader, useInitApp } from \"@scorecard/shared\";\nimport React, { Suspense } from \"react\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { RecoilRoot } from \"recoil\";\nimport \"./media-queries.css\";\nimport \"./App.css\";\nimport \"./print.css\";\nimport Router from \"./modules/Router\";\nimport \"./locales\";\nimport \"intro.js/introjs.css\";\nimport \"./intro-dhis2.css\";\nconst MyApp = () => {\n  const {\n    initializeState\n  } = useInitApp();\n  return /*#__PURE__*/React.createElement(DataStoreProvider, {\n    namespace: DATASTORE_NAMESPACE,\n    loadingComponent: /*#__PURE__*/React.createElement(FullPageLoader, null)\n  }, /*#__PURE__*/React.createElement(CssReset, null), /*#__PURE__*/React.createElement(RecoilRoot, {\n    initializeState: initializeState\n  }, /*#__PURE__*/React.createElement(ErrorBoundary, {\n    FallbackComponent: FullPageError\n  }, /*#__PURE__*/React.createElement(ConfirmDialogProvider, null, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(FullPageLoader, null)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"main-container\"\n  }, /*#__PURE__*/React.createElement(Router, null)))))));\n};\nexport default MyApp;","// extracted by mini-css-extract-plugin\nexport default {\"ant-layout\":\"App_ant-layout__+uunT\",\"ant-layout-content\":\"App_ant-layout-content__wrwoJ\",\"ant-layout-sider\":\"App_ant-layout-sider__G8hN1\",\"container\":\"App_container__KkHQY\",\"sidebar\":\"App_sidebar__EbNVl\",\"content\":\"App_content__MxC6Z\",\"corelytics_sidebar\":\"App_corelytics_sidebar__UQ+q2\",\"ant-menu-item\":\"App_ant-menu-item__XNXWL\",\"heading\":\"App_heading__21opY\",\"titBar\":\"App_titBar__B1vNp\",\"logo\":\"App_logo__h5EGN\",\"menu\":\"App_menu__Y4oQE\",\"cardGrid\":\"App_cardGrid__r9Q5A\",\"cardWrapper\":\"App_cardWrapper__NRGqF\",\"recharts-responsive-container\":\"App_recharts-responsive-container__m2xDT\"};","import { UserOutlined, SettingOutlined, LogoutOutlined, FormOutlined, DownloadOutlined, FileTextOutlined, AreaChartOutlined, MonitorOutlined, ImportOutlined, TeamOutlined, CheckCircleOutlined, BarsOutlined, MenuOutlined, EyeOutlined, ApartmentOutlined, HomeOutlined } from '@ant-design/icons';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport { Button, Layout, Menu, Dropdown, Avatar } from 'antd';\nimport React, { useState, useEffect } from 'react';\nimport cacheBuster from './cacheBuster';\nimport MyApp from './App.js';\nimport classes from './App.module.css';\nimport { Card } from \"@dhis2/ui\";\nimport { useHistory } from \"react-router-dom\";\nconst {\n  Sider,\n  Content\n} = Layout;\nconst ME_QUERY = {\n  me: {\n    resource: 'me',\n    params: {\n      fields: ['firstName', 'surname', 'email']\n    }\n  }\n};\nconst Main = () => {\n  useEffect(() => {\n    // Initialize cache buster when component mounts\n    cacheBuster.initialize();\n  }, []);\n  const [collapsed, setCollapsed] = useState(false);\n  const [openKeys, setOpenKeys] = useState(['3']);\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(ME_QUERY);\n  if (loading || error) return null;\n  const {\n    firstName,\n    surname,\n    email: userEmail\n  } = data.me;\n  const fullName = `${firstName} ${surname}`;\n  const initials = `${(firstName === null || firstName === void 0 ? void 0 : firstName[0]) || ''}${(surname === null || surname === void 0 ? void 0 : surname[0]) || ''}`;\n  const profileMenu = /*#__PURE__*/React.createElement(Menu, null, /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"profile-settings\",\n    icon: /*#__PURE__*/React.createElement(SettingOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-user-profile/#/profile\"\n  }, \"Settings\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"account\",\n    icon: /*#__PURE__*/React.createElement(UserOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-user-profile/#/account\"\n  }, \"Account\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"logout\",\n    icon: /*#__PURE__*/React.createElement(LogoutOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/dhis-web-commons-security/logout.action\"\n  }, \"Logout\")));\n  const dataCreationItems = [{\n    key: '2.1',\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null),\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-maintenance/#/list/organisationUnitSection/organisationUnit\"\n    }, \"Organisation Units\")\n  }, {\n    key: '2.2',\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null),\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-maintenance/#/list/programSection/program\"\n    }, \"Projects\")\n  }, {\n    key: '2.3',\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null),\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-maintenance/#/list/dataElementSection/dataElement\"\n    }, \"Data Elements\")\n  }, {\n    key: '2.4',\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null),\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-maintenance/#/list/dataSetSection/dataSet\"\n    }, \"Data Sets\")\n  }];\n  const adminCentreItems = [{\n    key: '5.1',\n    icon: /*#__PURE__*/React.createElement(MonitorOutlined, null),\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-usage-analytics/\"\n    }, \"Usage Analytics\")\n  }, {\n    key: '5.2',\n    icon: /*#__PURE__*/React.createElement(TeamOutlined, null),\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-user/\"\n    }, \"User Management\")\n  }, {\n    key: '5.3',\n    icon: /*#__PURE__*/React.createElement(SettingOutlined, null),\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-settings/\"\n    }, \"System Settings\")\n  }, {\n    key: '5.4',\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null),\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-maintenance/#/organisationUnitSection/hierarchy\"\n    }, \"Hierarchy Operations\")\n  }];\n  const dataCollectionItems = [{\n    key: '3.1',\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-capture/\"\n    }, \"Forms\"),\n    icon: /*#__PURE__*/React.createElement(FormOutlined, null)\n  }, {\n    key: '3.2',\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-aggregate-data-entry/\"\n    }, \"Spreadsheets\"),\n    icon: /*#__PURE__*/React.createElement(FileTextOutlined, null)\n  }, {\n    key: '3.3',\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-import-export/\"\n    }, \"Data Import & Export\"),\n    icon: /*#__PURE__*/React.createElement(DownloadOutlined, null)\n  }];\n  const onOpenChange = keys => {\n    const rootSubmenuKeys = ['2', '5'];\n    const latestOpenKey = keys.find(key => !openKeys.includes(key));\n    if (rootSubmenuKeys.includes(latestOpenKey)) {\n      setOpenKeys(latestOpenKey ? [latestOpenKey] : []);\n    } else {\n      setOpenKeys(keys);\n    }\n  };\n  return /*#__PURE__*/React.createElement(Layout, {\n    style: {\n      height: '100vh'\n    }\n  }, /*#__PURE__*/React.createElement(Sider, {\n    trigger: null,\n    collapsible: true,\n    width: \"20%\",\n    collapsedWidth: 80,\n    collapsed: collapsed,\n    onCollapse: collapsedState => setCollapsed(collapsedState),\n    breakpoint: \"lg\",\n    onBreakpoint: broken => setCollapsed(broken),\n    className: classes.sidebar,\n    style: {\n      padding: '10px 0',\n      transition: 'width 0.2s',\n      background: '#003D8F',\n      borderRight: '1px solid #d9d9d9',\n      overflow: 'hidden'\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      background: '#003D8F',\n      height: '100%'\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      gap: '10px',\n      flexShrink: 0\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.logo,\n    style: {\n      flexDirection: collapsed && 'column-reverse'\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"text\",\n    className: \"\",\n    icon: /*#__PURE__*/React.createElement(MenuOutlined, {\n      fontSize: \"medium\"\n    }),\n    onClick: () => setCollapsed(!collapsed),\n    style: {\n      width: '16px',\n      height: '16px',\n      color: '#fff'\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"img\", {\n    src: process.env.PUBLIC_URL + \"/sims-sidebar-logo.png\",\n    alt: \"SIMS\",\n    style: {\n      width: collapsed ? '30px' : '40px',\n      height: collapsed ? '30px' : '40px',\n      objectFit: 'cover',\n      transition: 'all 0.2s',\n      filter: \"brightness(0) invert(1)\"\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      overflowY: 'auto',\n      overflowX: 'hidden',\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%'\n    }\n  }, /*#__PURE__*/React.createElement(Menu, {\n    selectedKeys: ['1'],\n    openKeys: openKeys,\n    onOpenChange: onOpenChange,\n    style: {\n      height: '100%'\n    },\n    className: classes.menu,\n    defaultSelectedKeys: ['1'],\n    defaultOpenKeys: ['sub1'],\n    mode: \"inline\",\n    inlineCollapsed: collapsed\n  }, /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"1\",\n    icon: /*#__PURE__*/React.createElement(HomeOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-app/\"\n  }, \"Home\")), /*#__PURE__*/React.createElement(Menu.Divider, null), /*#__PURE__*/React.createElement(Menu.SubMenu, {\n    key: \"2\",\n    icon: /*#__PURE__*/React.createElement(CheckCircleOutlined, null),\n    title: \"Activation\"\n  }, /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"2.1\",\n    title: \"Thematic Areas\",\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-maintenance/#/list/organisationUnitSection/organisationUnit\"\n  }, \"Thematic Areas\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"2.2\",\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-maintenance/#/list/organisationUnitSection/programsHierarchy\"\n  }, \"Programs\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"2.3\",\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-maintenance/#/list/programSection/program\"\n  }, \"Projects\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"2.4\",\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-maintenance/#/list/dataElementSection/dataElement\"\n  }, \"Data Elements\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"2.5\",\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-maintenance/#/list/dataSetSection/dataSet\"\n  }, \"Data Sets\"))), /*#__PURE__*/React.createElement(Menu.Divider, null), /*#__PURE__*/React.createElement(Menu.SubMenu, {\n    key: '3',\n    icon: /*#__PURE__*/React.createElement(ImportOutlined, null),\n    title: \"Data Collection\"\n  }, dataCollectionItems.map(item => /*#__PURE__*/React.createElement(Menu.Item, {\n    key: item.key,\n    icon: item.icon\n  }, item.label))), /*#__PURE__*/React.createElement(Menu.Divider, null), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"4\",\n    icon: /*#__PURE__*/React.createElement(AreaChartOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-dashboard/\"\n  }, \"Visualization\")), /*#__PURE__*/React.createElement(Menu.Divider, null), /*#__PURE__*/React.createElement(Menu.SubMenu, {\n    key: '5',\n    icon: /*#__PURE__*/React.createElement(UserOutlined, null),\n    title: \"Admin Centre\",\n    style: {\n      marginTop: 'auto'\n    }\n  }, adminCentreItems.map(item => /*#__PURE__*/React.createElement(Menu.Item, {\n    key: item.key,\n    icon: item.icon\n  }, item.label))))), /*#__PURE__*/React.createElement(\"div\", null, profileMenu))), /*#__PURE__*/React.createElement(Layout, {\n    style: {\n      padding: '0 15px 15px 15px',\n      height: '100vh',\n      overflow: 'hidden'\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      backgroundColor: '#F9FAFB',\n      borderRadius: '8px',\n      padding: '10px 16px'\n    }\n  }), /*#__PURE__*/React.createElement(Content, {\n    style: {\n      margin: 0,\n      display: 'flex',\n      flexDirection: 'column',\n      padding: 0,\n      height: '100%',\n      overflow: 'auto'\n    }\n  }, /*#__PURE__*/React.createElement(MyApp, null))));\n};\nexport default Main;"],"names":["ErrorDialog","error","onClose","details","React","Modal","position","ModalTitle","i18n","t","ModalContent","style","background","colors","grey050","padding","border","grey300","fontSize","JSON","stringify","ModalActions","Button","onClick","FullPageError","resetErrorBoundary","_error$title","_error$details","errorDialogShow","setErrorDialogShow","useState","history","useHistory","onRefresh","window","location","reload","className","height","textAlign","CenteredContent","ErrorIcon","color","grey700","margin","title","message","ButtonStrip","center","httpStatusCode","primary","onGoToHome","replace","propTypes","PropTypes","isRequired","useOrganisationUnitChildren","orgUnitId","id","setId","state","contents","useRecoilValueLoadable","OrgUnitChildren","loading","orgUnits","undefined","orgUnitSearchQuery","nameQuery","resource","params","keyword","filter","fields","idQuery","async","searchOrganisationUnit","engine","isEmpty","data","query","variables","_data$idQuery$organis","_data$idQuery","_data$nameQuery$organ","_data$nameQuery","idResponse","organisationUnits","nameResponse","map","orgUnit","hierarchy","displayName","useSearchOrganisationUnit","setKeyword","refetch","useDataQuery","lazy","updateKeyword","useRef","debounce","trailing","leading","useMemo","_data$idQuery$organis2","_data$idQuery2","_data$nameQuery$organ2","_data$nameQuery2","useEffect","current","getWindowDimensions","innerWidth","width","innerHeight","useMediaQuery","windowDimensions","setWindowDimensions","useLayoutEffect","handleResize","addEventListener","removeEventListener","updateMutation","type","DATASTORE_ENDPOINT","DATASTORE_SCORECARD_SUMMARY_KEY","useScorecardsSummary","executionError","setExecutionError","summary","setSummary","useRecoilState","ScorecardSummaryState","update","updateError","updateLoading","useDataMutation","addSingleScorecardSummary","useRecoilCallback","set","_cloneDeep","updatedList","cloneDeep","push","updatedSummary","e","console","updateSingleScorecardSummary","useCallback","_cloneDeep2","splice","findIndex","removeSingleScorecardSummary","produce","draft","scorecard","deleteMutation","useDeleteScorecard","_ref","removeMutate","removeError","remove","useUpdateScorecard","setScorecardRequestId","useSetRecoilState","ScorecardRequestId","updateMutate","scorecardSummary","generateScorecardSummary","prevState","useAddScorecard","useDataEngine","add","mutate","generateCreateMutation","useScorecard","scorecardId","setScorecardState","ScorecardConfState","useAllScorecards","removeLoading","scorecards","useInitApp","useWebVitals","baseUrl","apiVersion","useConfig","Fn","init","initializeState","ScreenDimensionState","EngineState","useForceUpdate","setForceUpdateState","ScorecardForceUpdateState","forceUpdate","useSetDataEngine","setEngine","identifiableObjectsQuery","object","getTypeFromResource","getDataSourceDetails","dataSourceId","_await$engine$query","href","_object$displayName","split","length","getResourceFromHref","name","updateListFromDragAndDrop","groups","sourceIndex","destinationIndex","isNaN","value","newGroupList","updateListsFromDragAndDrop","sourceList","destinationList","newSourceList","newDestinationList","getDataSourceShortName","snakeCase","s","capitalize","join","uid","letters","allowedChars","NUMBER_OF_CODEPOINTS","charAt","Math","random","i","generateRandomValues","max","maxNo","floor","generateLegendDefaults","legendDefinitions","weight","highIsGood","definitions","reverse","_definitions","actualWeight","range","values","legendDefinitionIterator","ScorecardLegend","startValue","endValue","legendDefinitionId","reverseLegends","legends","specificTargetsSet","dataSources","reduce","isSet","dataSource","getHoldersFromGroups","dataGroups","_dataGroups$map","flattenDeep","dataHolders","getDataSourcesFromGroups","compact","getDataSourcesDisplayName","_head","_last","_head2","head","label","last","updatePager","pager","itemListLength","page","pageSize","pageCount","ceil","total","truncateDescription","description","maxLength","truncate","findLegend","_find2","find","legend","getLegend","orgUnitLevels","dataOrgUnitLevel","specificTargets","period","specificTarget","_getPeriodSpecificLeg","specificLegends","items","includes","getPeriodSpecificLegends","_getOrgUnitSpecificLe","getOrgUnitSpecificLegends","Array","isArray","orgUnitLevelId","_find","getOrgUnitLevelId","sortOrgUnitsBasedOnData","orgUnitSort","filteredOrgUnits","childrenOrgUnits","parentTemp","childrenTemp","ou","parentOrgUnits","uniqBy","childOrgUnits","sortOrgUnitsBasedOnNames","sort","TableSort","ASC","sortBy","DESC","sortDataSourcesBasedOnData","dataSort","temp","dx","sortDataSourcesBasedOnNames","filteredDataSources","translateAccess","access","translatedAccess","read","write","getUserAuthority","user","userId","userAccesses","userGroupAccesses","publicAccess","delete","userAccess","userGroups","intersectionBy","translatedAccesses","acc","DefaultAuthority","constructAppUrl","config","serverVersion","appUrl","isModernServer","major","minor","urlSafeAppSlug","coreApp","scheme","substr","indexOf","migrateScorecard","oldScorecard","_oldScorecard$header","_oldScorecard$header2","_oldScorecard$header3","_oldScorecard$header4","_oldScorecard$user","_oldScorecard$header5","_oldScorecard$header6","_oldScorecard$header7","_oldScorecard$average","_oldScorecard$highlig","_oldScorecard$highlig2","header","subtitle","sub_title","periodType","customHeader","template","content","getScorecardPublicAccess","user_groups","getScorecardUserGroupAccesses","targetOnLevels","periodSelection","oldScorecardPeriodSelections","selected_periods","periods","orgUnitSelection","getScorecardOrgUnitSelection","orgunit_settings","dataSelection","getScorecardDataSelection","data_settings","additionalLabels","additional_labels","oldScorecardLegendDefinitions","legendset_definitions","legendDefinition","hasDefaultProps","has","definition","isDefault","default","options","show_legend_definition","emptyRows","empty_rows","averageRow","show_average_in_row","itemNumber","averageColumn","show_average_in_column","showHierarchy","show_hierarchy","averageDisplayType","average_selection","toUpperCase","highlightedIndicators","highlighted_indicators","display","getScorecardDataSource","indicator","oldScorecardDataSelections","indicator_holder_groups","dataGroup","backgroundColor","background_color","indicator_holder_ids","holderId","_dataHolder$indicator","dataHolder","holder_id","indicators","getScorecardDataHolder","indicator_holders","_await$getDataSourceD","_indicator$title","_indicator$arrow_sett","_indicator$arrow_sett2","legendset","legendSet","parseFloat","min","high_is_good","showColors","legend_display","effectiveGap","arrow_settings","effective_gap","displayArrows","oldScorecardOrgUnitSelections","_oldScorecardOrgUnitS","_oldScorecardOrgUnitS2","_oldScorecardOrgUnitS3","selected_groups","group","levels","selected_levels","level","selected_orgunits","selectedOrgUnit","userOrgUnit","Boolean","selected_user_orgunit","userSubUnit","userSubX2Unit","oldScorecardUserGroups","getScorecardAccess","userGroupsOnly","userGroup","oldScrocardUserGroup","see","getSelectedOrgUnitSelectionDisplay","orgUnitGroups","detail","DATASTORE_SCORECARD_SUMMARY_INCLUDE_KEYS","key","get","path","customFunctionQuery","function","evaluateCustomFunction","customFunction","ruleId","rule","rules","_customFunction$funct","code","progress","parameters","pe","layout","rows","column","Promise","resolve","reject","Function","success","setTimeout","runCustomFunction","json","parse","_updatedData","_updatedData$metaData","_updatedData$rows","updatedData","updatedId","dxIndex","headers","forIn","row","updatedRow","formatData","getCustomFunctionData","item","_item$split","_await$getCustomFunct","functionId","getCustomFunction","getCustomFunctionAnalytics","functions","responses","all","response","mergeWith","objValue","srcValue","concat","getTableWidthWithDataGroups","getColSpanDataGroups","noOfPeriods","prevValue","currentValue","_currentValue$dataHol","getTableWidthWithOrgUnit","getColSpanWithOrgUnit","getNameCellWidth","screenWidth","colSpan","dataCellsWidth","ScorecardTableConstants","CELL_WIDTH","getDataCellsWidth","abs","getIncreasingStatus","previous","parsedCurrentValue","parsedPreviousValue","parseInt","validateRequiredFields","requiredFieldsPath","errors","validateGroups","validateScorecard","_validateRequiredFiel","_scorecard$dataSelect","REQUIRED_FIELDS","getValidationPageFields","form","activePage","generalPageFields","dataConfigurationPageFields","highlightedIndicatorPageFields","accessPageFields","optionsPageFields","DataModel","constructor","attributes","defaultsDeep","this","defaults","updatedObject","setObject","Object","keys","SavableDataModel","save","addFunction","newObject","updateFunction","DataSelection","OrgUnitSelection","SelectionItem","selectionItem","PeriodSelection","ScorecardAccess","ScorecardAccessType","NO_ACCESS","ScorecardOption","AverageDisplayType","ALL","Scorecard","_defineProperty","r","Symbol","toPrimitive","call","TypeError","String","Number","_toPrimitive","_toPropertyKey","defineProperty","enumerable","configurable","writable","ScorecardDataEngine","BehaviorSubject","_dataEntities","_dataEntities$","asObservable","_cancelled","loading$","_loading$","_canLoadData","_this$_selectedOrgUni","_this$_selectedPeriod","_this$_selectedData$n","_this$_selectedData$c","_selectedOrgUnits","_selectedPeriods","_selectedData","normalDataItems","customDataItems","setDataQueryEngine","setPeriodType","_periodType","_getSelectedPeriods","refresh","reset","load","setPeriods","_compact","_differenceBy","previousPeriods","currentPeriod","Period","setPreferences","allowFuturePeriods","setCalendar","_calendar","getById","lastPeriod","forEach","previousPeriod","_previousPeriods","differenceBy","calendar","setDataGroups","_getSelectedData","setOrgUnits","_updateDataEntities","_row$dx","_row$ou","_row$pe","_row$pe2","dataEntityId","previousPeriodRow","previousRow","_previousRow$dx","_row$dx2","_previousRow$ou","_row$ou2","_previousRow$pe","next","_progress","_progress$","_getScorecardData","selectedOrgUnits","selectedPeriods","selectedData","getProgress","pipe","_totalRequests","isRowEmpty","dataEntities$","dataEntities","orgUnitsData","pickBy","val","match","RegExp","isDataSourcesRowEmpty","_","sortOrgUnitsByDataAndPeriod","sortType","take","DEFAULT","requiredDataEntities","sortedOrgUnits","toPairs","sortOrgUnitsByData","groupedValues","groupBy","averageValues","arr","_last2","sortedValues","_sortedValues$map","sortDataSourceByOrgUnitAndPeriod","_last3","sortDataSourceByOrgUnit","_last4","_sortedValues$map2","getOrgUnitAverage","_compact2","noOfOrgUnits","result","getDataSourceAverage","_compact3","dataSourcesData","_this$_selectedOrgUni2","noOfDataSources","getOrgUnitColumnAverage","_compact4","getDataSourceColumnAverage","_compact5","getOverallAverage","_compact6","selectedDataEntities","noOfDataEntities","getAllOrgUnitData","cancel","selections","_getNormalScorecardData","selectedDataItems","_getCustomScorecardData","_getAnalyticsData","_dx","_ou","_pe","_ou2","_pe2","selection","uniq","of","toPromise","Analytics","setOrgUnit","setPeriod","setData","postProcess","analytics","_getCustomAnalyticsData","_dx2","_ou3","_pe3","_selectionList","selectionList","chunk","dataItem","selectedDataList","flatten","mapLimit","callback","then","catch","totalErr","totalRes","$","_result$rows$map","_result$rows","fromPairs","_Period","_Period$setPreference","_Period$setPreference2","setType","list","warn","selectedItems","selectedItem","ScorecardIndicator","ScorecardIndicatorHolder","super","linkDataSource","holder","scorecardIndicator","ScorecardIndicatorGroup","generateCustomFunctionQuery","getCustomFunctions","getScorecardCellData","_period$lastPeriod","allPeriods","getHighlightedIndicatorsData","getScorecardData","_orgUnitSelection$org","orgUnitString","orgUnitIds","_getSelectedOrgUnits","currentPeriods","_Period$setPreference3","_currentPeriod$lastPe","res","getOrgUnitsFromAnalytics","_dimensions$ou","metaData","ouHierarchy","ouNameHierarchy","dimensions","cleanedOuHierarchy","omitBy","_cleanedOuHierarchy$o","_items$ou","_cleanedOuHierarchy$o2","_cleanedOuHierarchy$o3","_cleanedOuHierarchy$o4","_ouNameHierarchy$ou","startsWith","isOrgUnitId","systemSettingsKeys","systemSettingsQuery","system","getSystemSettings","keyCalendar","getScorecard","sanitizedGroups","sanitizeDataSelection","orgUnitQuery","getOrgUnitSelection","_orgUnitsIds$map","orgUnitsIds","resolvedOrgUnits","addMutation","getScorecardSummary","_e$details","initializeKey","restoreQuery","restoreMutation","singleScorecardQuery","restoreScorecardSummary","allKeys","scorecardsToRestore","_summary$map","IncreasingArrows","x","y","decreasing","d","fill","transform","DecreasingArrows","LegendsView","useRecoilValue","ScorecardViewState","align","OrgUnitSpecificTargetView","dataSourceLabel","_orgUnits$map","SelectedOrgUnits","maxWidth","grey600","borderRadius","PeriodSpecificTargetView","_items$map","OrgUnitLevelSpecificTargetView","OrgUnitLevels","_level$displayName","SpecificTargetsLibrary","_specificTargetsDataS","_specificTargetsDataS2","_specificTargetsDataS3","specificTargetsDataSourcesByType","dataSourcesWithSpecificTargets","ds","orgUnitLevell","orgUnitLevel","SpecificTargetsLibraryModal","open","classes","large","hide","Suspense","fallback","CircularLoader","small","APP_NAME","APP_TITLE","DATASTORE_NAMESPACE","DATASTORE_OLD_SCORECARD_ENDPOINT","DATASTORE_FUNCTIONS_ENDPOINT","SCORECARD_DOCUMENTATION_URL","ALMA_HEADERS","valueType","hidden","meta","CalendarTypes","ETHIOPIAN","GREGORIAN","CHART_TYPES","icon","Column","Dotted","Bar","Area","Pie","DownloadTypes","EXCEL","PDF","CSV","DraggableItems","DATA_COLUMN","ORG_UNIT_COLUMN","DATA_ROW","ORG_UNIT_ROW","OU_LAYOUT","DX_LAYOUT","PE_LAYOUT","DHIS2ValueTypes","INTEGER","formName","TRUE_ONLY","TEXT","NUMBER","DATE","LONG_TEXT","LEGEND_DEFINITION","RICH_TEXT","LEGEND_MIN_MAX","NORMAL_LEGEND_MIN_MAX","LEVEL_LEGEND_MIN_MAX","MULTIPLE_FIELDS","LAYOUTS","DataIcon","OrgUnitIcon","PeriodIcon","DEFAULT_LAYOUT","DATA_MIGRATION_CHECK","Orientation","ORG_UNIT_VS_DATA","DATA_VS_ORG_UNIT","PeriodCategories","RELATIVE","FIXED","UNSUPPORTED_PERIOD_TYPES","AccessTypes","USER","USER_GROUP","ACCESS_TYPES","READ_ONLY","READ_WRITE","FilterComponentTypes","ORG_UNIT","PERIOD","STEP_OPTIONS","nextLabel","prevLabel","skipLabel","doneLabel","hideNext","hidePrev","showProgress","disableInteraction","tooltipClass","SCORECARD_LIST_HELP_STEPS","intro","element","GENERAL_HELP_STEPS","INTRODUCTION_HELP_STEPS","PREVIEW_TABLE_HELP_STEPS","NO_GROUPS_HELP_STEPS","GROUPS_CONFIG_HELP_STEPS","NO_INDICATORS_HELP_STEPS","INDICATOR_SETUP_HELP_STEPS","DATA_CONFIGURATION_WITH_DATA_HELP_STEPS","INDICATOR_CONFIGURATION_STEPS","DATA_CONFIGURATION_HELP_STEPS","DATA_CONFIGURATION_STEPS_MAP","introduction","start","end","emptyGroups","groupConfig","emptyIndicators","indicatorSetup","indicatorConfiguration","HIGHLIGHTED_INDICATOR_HELP_STEPS","HIGHLIGHTED_TABLE_HELP_STEPS","ACCESS_HELP_STEPS","OPTIONS_HELP_STEPS","SCORECARD_VIEW_HELP_STEPS","scorecardManagementTooltips","FullPageLoader","text","AccessDeniedPage","accessType","fontWeight","onHomeClick","EmptyOrgUnitsOrPeriod","HighlightedIndicator","highlightedIndicator","_getLegend","defaultLegendDefinitions","ScorecardLegendDefinitionSelector","SingleHighlightedIndicatorState","defaultLegends","minHeight","alignItems","justifyContent","HighlightedIndicatorsView","_useRecoilValue","_ref2","_contents$message","showHighlightedIndicators","HighlightedIndicatorsState","size","paddingLeft","toString","DownloadMenu","onDownload","_Object$values","FlyoutMenu","dataTest","MenuItem","downloadExcelFileTypes","orgUnitName","dataSourceName","_data","periodId","periodName","generateExcelJSON","sheet","xlsx","json_to_sheet","workbook","book_new","book_append_sheet","writeFile","getALMAMetadata","getAllLegends","modifiedLegends","co","getMetadataDimensions","getMetadataItems","getALMAData","useDownload","downloadRef","dataEngine","orgUnitState","InitialOrgUnits","_orgUnitState$content","ScorecardOrgUnitState","ScorecardDataSourceState","allOrgUnits","PeriodResolverState","ScorecardDataLoadingState","show","useAlert","duration","handlePDFDownload","useReactToPrint","documentTitle","subscription","subscribe","unsubscribe","downloadFunction","downloadExcel","downloadCSV","dataValues","blob","Blob","saveAs","downloadALMAData","_pathArray","_path$split","pathArray","parent","downloadALMAMeta","download","_error$message","Help","helpSteps","setHelpSteps","HelpSteps","prevSteps","newSteps","pullAllWith","isEqual","ScorecardOptionsForm","onChange","CheckboxField","checked","Radio","BELOW_AVERAGE","ABOVE_AVERAGE","arrows","showDataInRows","ScorecardOptionsModal","onSelect","initialValues","setValues","newValue","_newValue$checked","ScorecardOptions","onUpdateClick","ScorecardActions","downloadAreaRef","widget","setRoute","RouterState","scorecardOptions","setScorecardOptions","optionsOpen","setOptionsOpen","ScorecardIdState","userAuthority","UserAuthorityOnScorecard","writeAccess","RefreshScorecardState","onEdit","prevRoute","DropdownButton","component","ScorecardHeader","showTitle","JsxParser","autoCloseVoidElements","onError","bindings","jsx","_extends","assign","bind","n","arguments","hasOwnProperty","apply","ITEM_DISPLAY_NO","SelectionWrapper","props","selectText","itemsToDisplay","Tooltip","Box","Chip","number","ScorecardViewHeader","helpEnabled","setHelpEnabled","HelpState","SystemSettingsState","OrgUnitGroups","setOrgUnitSelection","setPeriodSelection","orgUnitSelectionOpen","setOrgUnitSelectionOpen","periodSelectionOpen","setPeriodSelectionOpen","orgUnitSelectionDisplay","Steps","steps","enabled","initialStep","onExit","onHelpExit","Card","onHome","OrgUnitSelectorModal","showGroups","showLevels","showUserOptions","onUpdate","selected","PeriodSelectorModal","enablePeriodSelector","excludedPeriodTypes","PeriodUtility","getPeriodById","defaultProps","ScorecardLegendsView","ScorecardTable","ScorecardView","_orgUnitState$content4","useParams","setScorecardIdState","_orgUnitState$content2","_orgUnitState$content3","isSpecificTargetsSet","IsSpecificTargetsSet","initialDataEngine","ScorecardNameSort","ScorecardTableOrientationState","ref","overflow","nested","ContainerLoader","SingleCellSvg","cellRef","status","bold","offsetWidth","offsetHeight","points","lengthAdjust","LinkedCellSvg","topValue","bottomValue","topColor","bottomColor","topStatus","bottomStatus","viewBox","strokeWidth","stroke","textLength","FormFieldModel","MaterialErrorIcon","grey500","ModalLoader","atom","selector","userQuery","UserState","selectorFamily","_getUserAuthority","effects_UNSTABLE","setSelf","defaultValue","AllScorecardsSummaryState","atomFamily","IsNewScorecardState","ScorecardConfigDirtyState","_get","ScorecardConfigDirtySelector","_set","ScorecardConfigErrorState","ScorecardConfigErrorSelector","ScorecardConfigEditState","_currentPeriod$get","_currentPeriod$get2","configState","_configState$periodSe","ScorecardTableSortState","_get2","ScorecardTableConfigState","orientation","dataColSpan","dataNameColumnWidth","orgUnitColSpan","orgUnitNameColumnWidth","columns","tableWidth","nameColumnWidth","_childrenOrgUnits","orgUnitsCount","_get3","some","relativePeriods","_period$type","periodInstance","actualPeriods","iso","require","orgUnitChildrenQuery","dimension","Date","getFullYear","skipData","hierarchyMeta","selectedOrgUnitsQuery","orgUnitLevelsQuery","orgUnitGroupsQuery","organisationUnitLevels","organisationUnitGroups","OrgUnit","OrgUnitPathState","_sortBy","parentOrgUnit","_getOrgUnitsFromAnaly","LowestOrgUnitLevel","_getHoldersFromGroups","_levels$map","_groups$map","orgUnitsChunks","getOrgUnits","ShouldValidate","FieldErrorState","validations","mandatory","ErrorState","getCallback","snapshot","getLoadable","waitForAll","DataGroupsErrorState","DataGroupErrorState","groupId","HelpIndex","customFunctionsKeysQuery","CustomFunctionsKeysState","CustomFunctionsState","customFunctionKeys","_orgUnits$","_periods$","valueIndex","formattedData","CACHE_VERSION","VERSION_PARAM","clearCaches","cachePromises","caches","log","unregisterServiceWorkers","navigator","registrations","serviceWorker","getRegistrations","registration","unregister","initialize","url","URL","currentVersion","searchParams","sessionStorage","setItem","scrollY","replaceState","getItem","clearKeys","localStorage","removeItem","clear","clearStorages","Main","ScorecardManagement","module","pages","pathname","Router","HashRouter","ErrorBoundary","FallbackComponent","Switch","Component","Route","Redirect","to","addResources","enTranslations","MyApp","DataStoreProvider","namespace","loadingComponent","CssReset","RecoilRoot","ConfirmDialogProvider","Sider","Content","Layout","ME_QUERY","me","cacheBuster","collapsed","setCollapsed","openKeys","setOpenKeys","firstName","surname","email","userEmail","profileMenu","Menu","Item","SettingOutlined","UserOutlined","LogoutOutlined","adminCentreItems","BarsOutlined","MonitorOutlined","TeamOutlined","dataCollectionItems","FormOutlined","FileTextOutlined","DownloadOutlined","trigger","collapsible","collapsedWidth","onCollapse","collapsedState","breakpoint","onBreakpoint","broken","transition","borderRight","flexDirection","gap","flexShrink","MenuOutlined","src","process","alt","objectFit","overflowY","overflowX","selectedKeys","onOpenChange","latestOpenKey","defaultSelectedKeys","defaultOpenKeys","mode","inlineCollapsed","HomeOutlined","Divider","SubMenu","CheckCircleOutlined","ImportOutlined","AreaChartOutlined","marginTop"],"sourceRoot":""}