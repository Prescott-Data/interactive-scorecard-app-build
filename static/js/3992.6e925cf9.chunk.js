"use strict";(self.webpackChunk_dhis2_app_shell=self.webpackChunk_dhis2_app_shell||[]).push([[3992],{93992:function(e,t,l){l.r(t),l.d(t,{default:function(){return _l}});var n=l(59541),i=l.n(n),a=l(21758),r=l(65298),o=l(22659),d=l(10805),u=l(97305),s=l(51654),c=l.n(s);function m({dataSources:e,onTabChange:t,selectedTab:l}){return a.createElement(d.V,null,null===e||void 0===e?void 0:e.map(e=>{var n;return a.createElement(u.o,{selected:(null===l||void 0===l?void 0:l.id)===(null===e||void 0===e?void 0:e.id),onClick:()=>t(e),key:`${null===e||void 0===e?void 0:e.id}-tab`},null!==(n=null===e||void 0===e?void 0:e.label)&&void 0!==n?n:null===e||void 0===e?void 0:e.displayName)}))}m.propTypes={dataSources:c().arrayOf(c().object).isRequired,selectedTab:c().object.isRequired,onTabChange:c().func.isRequired};var v=l(4147);const E=(0,r.atom)({key:"dataElementsStoreDictionary",default:[]}),p=(0,r.atom)({key:"programIndicatorStateDictionary",default:[]}),f=(0,r.atom)({key:"dataSetReportingRatesStateDictionary",default:[]}),g=((0,r.atom)({key:"dataSourceStateDictionary",default:{id:void 0,type:void 0}}),(0,r.atom)({key:"dataSetDataElementsCountState",default:0})),y=(0,r.atom)({key:"programDataElementCountState",default:0}),b=(0,r.atom)({key:"indicatorGroupDataSetCount",default:[]}),A=(0,r.atom)({key:"indicatorGroupProgramCount",default:[]}),h=(0,r.atom)({key:"programDataElements",default:[]}),T=(0,r.atom)({key:"indicatorGroupAggregateDataElements",default:[]}),N=(0,r.atom)({key:"indicatorGroupNumeratorDataElements",default:{}}),R=(0,r.atom)({key:"indicatorGroupDenominatorDataElements",default:{}}),S={DATA_ELEMENT:"dataElement",PROGRAM_INDICATOR:"programIndicator",PROGRAM_DATA_ELEMENT:"programDataElement",DATASET_REPORTING_RATES:"dataSet",ATTRIBUTES:"attribute",CONSTANTS:"constant",VARIABLE:"variable",ORG_UNIT_COUNT:"orgUnitCount",UNDEFINED:"undefined"},w={INDICATOR:"indicator",DATA_ELEMENT:"dataElement",PROGRAM_INDICATOR:"programIndicator",DATA_ELEMENT_GROUP:"dataElementGroup",INDICATOR_GROUP:"indicatorGroup",FUNCTION:"customFunction",DATASET:"dataSet",PROGRAM_DATA_ELEMENT:"dataElement"},I={TRACKER:"TRACKER",AGGREGATE:"AGGREGATE",UNDEFINED:"undefined"},D={EVENT:"EVENT",ENROLLMENT:"ENROLLMENT"},O={DATA_ELEMENT:"#{",PROGRAM_DATA_ELEMENT:"D{",PROGRAM_INDICATOR:"I{",DATASET_REPORTING_RATES:"R{",ATTRIBUTES:"A{",CONSTANTS:"C{",VARIABLE:"V{",ORG_UNIT_COUNT:"OUG{"};var B=l(66190),P=l(62062),k=l(5815),G=l(8890),_=l(98138),C=l(58789),q=l(65245);function x(e){return(null===e||void 0===e?void 0:e.search("w"))>=0?"read and write":(null===e||void 0===e?void 0:e.search("r"))>=0?"read only":"none"}function M(e){return new Date(e).toLocaleString("en-GB")}var U=l(96421),j=l(83590),L=l(30162);function F({error:e}){var t,l;return a.createElement("div",{className:"column center ",style:{height:"100%",textAlign:"center"}},a.createElement(U.o,null,a.createElement("div",null,a.createElement(L.A,{style:{color:j.T.grey500,fontSize:48},fontSize:"large"}),a.createElement("p",{style:{color:j.T.grey900}},"string"===typeof e?e:null!==(t=null!==(l=null===e||void 0===e?void 0:e.message)&&void 0!==l?l:null===e||void 0===e?void 0:e.details)&&void 0!==t?t:null===e||void 0===e?void 0:e.toString()))))}F.propTypes={error:c().any};var J=l(41887);function V({text:e}){return a.createElement("div",{className:"column center",style:{height:"100%"}},a.createElement(U.o,null,a.createElement("div",null,a.createElement(J.F,null),a.createElement("p",{style:{color:j.T.default}},e))))}V.propTypes={text:c().string};const $={sources:{resource:"",id:({id:e})=>e,params:{fields:["created","user[displayName]","lastUpdated","lastUpdatedBy[displayName]","userGroupAccesses[id,displayName,access]","userAccesses[id,displayName,access]"]}}};function z(e){return"dataElements"===e?" Data Element ":"indicators"===e?" Indicator ":"dataStore/functions"===e?" Function ":void 0}function W(e){var t,l,n,i;const r=e.id,o=e.resourceType;(0,a.useEffect)(()=>{!function(e){$.sources.resource=e}(o),c({id:r})},[r]);const{loading:d,error:u,data:s,refetch:c}=(0,v.iO)($,{variables:{id:r}}),m=null===s||void 0===s?void 0:s.sources;return d?a.createElement(V,{text:""}):u?a.createElement(F,{error:u}):a.createElement("div",null,a.createElement("h3",null,B.A.t("Accessibility & Sharing Settings")," "),a.createElement("p",null," ",B.A.t("This"),z(o)," ",B.A.t("was first created on")," ",a.createElement("i",null," ",M(null===m||void 0===m?void 0:m.created))," ",B.A.t("by")," ",a.createElement("b",null,null===m||void 0===m||null===(t=m.user)||void 0===t?void 0:t.displayName," ")," ",B.A.t("and last updated on")," ",a.createElement("i",null,M(null===m||void 0===m?void 0:m.lastUpdated))," ",B.A.t("by")," ",a.createElement("b",null,null===m||void 0===m||null===(l=m.lastUpdatedBy)||void 0===l?void 0:l.displayName)," ."),a.createElement("p",null,z(o)," ",B.A.t("will be visible for users with the following access:")),a.createElement(P.b,null,a.createElement(k.n,null,a.createElement(G.J,null,a.createElement(_.w,null),a.createElement(_.w,null,B.A.t("Details")))),a.createElement(C.B,null,a.createElement(G.J,null,a.createElement(q.B,{bordered:!0,tag:"th"},B.A.t("User Access")),a.createElement(q.B,{bordered:!0},B.A.t(0===(null===m||void 0===m||null===(n=m.userAccesses)||void 0===n?void 0:n.length)?"No access granted":""),a.createElement("ul",null,null===m||void 0===m?void 0:m.userAccesses.map(e=>a.createElement("li",{key:e.id},null===e||void 0===e?void 0:e.displayName," ",B.A.t("can")," ",a.createElement("i",null,x(e.access)," ")," "))))),a.createElement(G.J,null,a.createElement(q.B,{bordered:!0,tag:"th"},B.A.t("User Group Access")),a.createElement(q.B,{bordered:!0},B.A.t(0===(null===m||void 0===m||null===(i=m.userGroupAccesses)||void 0===i?void 0:i.length)?"No access granted":""),a.createElement("ul",null,null===m||void 0===m?void 0:m.userGroupAccesses.map(e=>a.createElement("li",{key:e.id},null===e||void 0===e?void 0:e.displayName," ",B.A.t("can")," ",a.createElement("i",null,x(e.access))," "))))))))}W.propTypes={id:c().string.isRequired,resourceType:c().string.isRequired};const K={identifiableObjects:{resource:"identifiableObjects",id:({id:e})=>e,params:{fields:["id","displayName","href"]}}},Z={identifiableObjects:{resource:"identifiableObjects",id:({id:e})=>e,params:{fields:["id","displayName","href"]}},identifiableObjects2:{resource:"identifiableObjects",id:({id2:e})=>e,params:{fields:["id","displayName","href"]}}},H={dataElementSource:{resource:"dataElements",id:({id:e})=>e,params:{fields:["id","displayName","dataSetElements[dataSet[id,displayName]]"]}}},Y={dataElementSource:{resource:"dataElements",id:({id:e})=>e,params:{fields:["id","displayName","dataSetElements[dataSet[id,displayName]]"]}},identifiableObjects:{resource:"identifiableObjects",id:({idCombo:e})=>e,params:{fields:["id","displayName"]}}},X={programIndicators:{resource:"programIndicators",id:({id:e})=>e,params:{fields:["id","displayName","program[id,displayName]"]}}},Q={identifiableObjectsProgram:{resource:"identifiableObjects",id:({idProgram:e})=>e,params:{fields:["id","displayName"]}},identifiableObjectsDtEle:{resource:"identifiableObjects",id:({idDataElement:e})=>e,params:{fields:["id","displayName"]}}};function ee(e,t){let l=function(e,t){let l=0,n=0;const i=[],a=null===t||void 0===t?void 0:t.length;for(;(null===(r=e)||void 0===r?void 0:r.search(t))>=0;){var r;l=e.indexOf(t)+a-2;const o=e.substr(l);n=null===o||void 0===o?void 0:o.indexOf("}"),n+=l;const d=e.substring(l+2,n);i.push(d),e=te(e,l,""),e=te(e,l-1,""),e=te(e,n-2,"")}return i}(e,t);if(t===O.DATASET_REPORTING_RATES){const e=[];l.filter(t=>{e.push(t.split(".")[0])}),l=e}return l}function te(e,t,l){return t>e.length-1?e:e.substring(0,t)+l+e.substring(t+1)}async function le(e,t){var l;const n=await e.query(K,{variables:{id:t}});return[null===n||void 0===n||null===(l=n.identifiableObjects)||void 0===l?void 0:l.displayName]}function ne(e,t){for(let o=0;o<(null===t||void 0===t?void 0:t.length);o++){var l,n,i,a,r;if((null===(l=e)||void 0===l?void 0:l.search(null===(n=t[o])||void 0===n?void 0:n.id))>=0)e=null===(i=e)||void 0===i?void 0:i.replace(null===(a=t[o])||void 0===a?void 0:a.id,null===(r=t[o])||void 0===r?void 0:r.val)}return e}function ie(e,t,l,n,i,a,r,o){var d,u,s,c,m,v,E,p,f,g;let y=ne(e,t);var b,A,h,T,N;(y=ne(y,l),y=ne(y,n),y=ne(y,i),y=ne(y,a),y=ne(y,o),y=ne(y,r),y=null===(d=y)||void 0===d?void 0:d.replace(/#{/g,"{"),y=null===(u=y)||void 0===u?void 0:u.replace(/I{/g,"{"),y=null===(s=y)||void 0===s?void 0:s.replace(/D{/g,"{"),y=null===(c=y)||void 0===c?void 0:c.replace(/V{/g,"{"),y=null===(m=y)||void 0===m?void 0:m.replace(/C{/g,"{"),y=null===(v=y)||void 0===v?void 0:v.replace(/A{/g,"{"),y=null===(E=y)||void 0===E?void 0:E.replace(/R{/g,"{"),y=null===(p=y)||void 0===p?void 0:p.replace(/OUG{/g,"{"),0!==(null===n||void 0===n?void 0:n.length))&&(y=null===(b=y)||void 0===b?void 0:b.replace(/ACTUAL_REPORTS/g,"Actual_Reports"),y=null===(A=y)||void 0===A?void 0:A.replace(/REPORTING_RATE_ON_TIME/g,"Reporting_on_Time"),y=null===(h=y)||void 0===h?void 0:h.replace(/EXPECTED_REPORTS/g,"Expected_Reports"),y=null===(T=y)||void 0===T?void 0:T.replace(/REPORTING_RATE/g,"Reporting_Rate"),y=null===(N=y)||void 0===N?void 0:N.replace(/ACTUAL_REPORTS_ON_TIME/g,"Actual_Reports_on_Time"));return y=null===(f=y)||void 0===f?void 0:f.replace(/_/g," "),y=null===(g=y)||void 0===g?void 0:g.replace(/\./g," "),function(e){if(typeof e!==S.UNDEFINED){let t=e.split("{");return t=t.join(""),t=t.split("}"),t=t.join(" "),t}return e}(y)}function ae(e){return null===e||void 0===e?void 0:e.replace(/\S*/g,function(e){return(null===e||void 0===e?void 0:e.charAt(0))+(null===e||void 0===e?void 0:e.slice(1).toLowerCase())})}function re(e,t){return ue(t)?new Promise((l,n)=>{l(le(e,t))}):new Promise((l,n)=>{const i=t.split(".");l(async function(e,t,l){var n;const i=await e.query(Z,{variables:{id:t,id2:l}});return[null===i||void 0===i||null===(n=i.identifiableObjects)||void 0===n?void 0:n.displayName,null===i||void 0===i?void 0:i.identifiableObjects2.displayName]}(e,i[0],i[1]))})}function oe(e,t,l){return l===S.DATA_ELEMENT?ue(t)?new Promise((l,n)=>{l(async function(e,t){const l=await e.query(H,{variables:{id:t}});return[null===l||void 0===l?void 0:l.dataElementSource]}(e,t))}):new Promise((l,n)=>{const i=t.split(".");l(async function(e,t,l){const n=await e.query(Y,{variables:{id:t,idCombo:l}});return[null===n||void 0===n?void 0:n.dataElementSource,null===n||void 0===n?void 0:n.identifiableObjects.displayName]}(e,i[0],i[1]))}):l===S.PROGRAM_DATA_ELEMENT||l===S.ATTRIBUTES?new Promise(l=>{const n=t.split(".");l(async function(e,t,l){var n,i;const a=await e.query(Q,{variables:{idProgram:t,idDataElement:l}});return[null===a||void 0===a||null===(n=a.identifiableObjectsProgram)||void 0===n?void 0:n.displayName,null===a||void 0===a||null===(i=a.identifiableObjectsDtEle)||void 0===i?void 0:i.displayName]}(e,n[0],n[1]))}):l===S.PROGRAM_INDICATOR?new Promise(l=>{l(async function(e,t){const l=await e.query(X,{variables:{id:t}});return[null===l||void 0===l?void 0:l.programIndicators]}(e,t))}):new Promise(l=>{l(le(e,t))})}async function de(e,t,l){if(t.length>0){const n=null===t||void 0===t?void 0:t.map(t=>re(e,null===t||void 0===t?void 0:t.replace(/ /g,"")));return await Promise.all(n).then(e=>e.map((e,n)=>2===e.length?{id:t[n],val:e[0]+" "+e[1],location:l}:1===e.length?{id:t[n],val:e[0],location:l}:void 0))}}function ue(e){return-1===(null===e||void 0===e?void 0:e.indexOf("."))}function se(e,t=2){if(0===e)return"0 Bytes";const l=t<0?0:t,n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,n)).toFixed(l))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}const ce={detail:{resource:"dataElements",id:({id:e})=>e,params:{fields:["id","displayName","domainType","aggregationType","zeroIsSignificant","categoryCombo[id,displayName,categories[id,displayName,categoryOptions[id,displayName]]]"]}}};function me({id:e}){var t,l,n,i,r,o,d,u;const{loading:s,error:c,data:m,refetch:E}=(0,v.iO)(ce,{variables:{id:e}});(0,a.useEffect)(()=>{E({id:e})},[e]);const p=null===m||void 0===m?void 0:m.detail;return s?a.createElement(V,{text:""}):c?a.createElement(F,{error:c}):a.createElement("div",null,a.createElement("h3",null,B.A.t("Analytics Details")," "),a.createElement("ul",null,a.createElement("li",null,B.A.t("Uses")," ",a.createElement("b",null,B.A.t("NONE"===(null===p||void 0===p?void 0:p.aggregationType)?"NO":null===(t=ae(null===p||void 0===p?void 0:p.aggregationType))||void 0===t?void 0:t.replace(/_/g," "))," ")," ",B.A.t("aggregation type through period and hierarchy")," "),a.createElement("li",null," ",null===p||void 0===p?void 0:p.domainType," ",B.A.t("data sources")),a.createElement("li",null,B.A.t(null!==p&&void 0!==p&&p.zeroIsSignificant?"It stores zero values":"It does not store zero values")),a.createElement("li",null,B.A.t("Category Combo is")," ",null===p||void 0===p||null===(l=p.categoryCombo)||void 0===l?void 0:l.displayName," ",B.A.t("which has cross-tabulation between ")," ",null===p||void 0===p||null===(n=p.categoryCombo)||void 0===n||null===(i=n.categories)||void 0===i?void 0:i.length," ",B.A.t(1===(null===p||void 0===p||null===(r=p.categoryCombo)||void 0===r||null===(o=r.categories)||void 0===o?void 0:o.length)?"category":"categories")," ",B.A.t("with following details"),a.createElement("ul",null,null===p||void 0===p||null===(d=p.categoryCombo)||void 0===d||null===(u=d.categories)||void 0===u?void 0:u.map(e=>{var t,l;return a.createElement("li",{key:null===e||void 0===e?void 0:e.id}," ",null===e||void 0===e?void 0:e.displayName,B.A.t((null===e||void 0===e||null===(t=e.categoryOptions)||void 0===t?void 0:t.length)>=0?"which also has the following options":""),a.createElement("ul",null,null===e||void 0===e||null===(l=e.categoryOptions)||void 0===l?void 0:l.map(t=>a.createElement("li",{key:t.id}," ",e.displayName))))})))))}me.propTypes={id:c().string.isRequired};const ve={sources:{resource:"dataElements",id:({id:e})=>e,params:{fields:["id","displayName","dataSetElements[dataSet[id,displayName,periodType,timelyDays]]"]}}};function Ee({id:e}){var t,l;const{loading:n,error:i,data:r,refetch:o}=(0,v.iO)(ve,{variables:{id:e}});return(0,a.useEffect)(()=>{o({id:e})},[e]),n?a.createElement(V,{text:""}):i?a.createElement(F,{error:i}):a.createElement("div",null,a.createElement("h3",null,B.A.t("Data sources")," "),a.createElement("p",null,B.A.t("Data element is captured from following sources")),a.createElement("h5",null,B.A.t("Datasets")," "),a.createElement("ul",null,null===r||void 0===r||null===(t=r.sources)||void 0===t||null===(l=t.dataSetElements)||void 0===l?void 0:l.map(e=>{var t,l,n,i;return a.createElement("li",{key:null===e||void 0===e||null===(t=e.dataSet)||void 0===t?void 0:t.id},a.createElement("b",null," ",null===e||void 0===e||null===(l=e.dataSet)||void 0===l?void 0:l.displayName)," ",B.A.t("submitting {{variables1}} after every {{variables2}} days ",{variables1:null===e||void 0===e||null===(n=e.dataSet)||void 0===n?void 0:n.periodType,variables2:null===e||void 0===e||null===(i=e.dataSet)||void 0===i?void 0:i.timelyDays})," ")})))}Ee.propTypes={id:c().string.isRequired};const pe={orgUnitLevels:{resource:"organisationUnitLevels",params:({levels:e})=>{var t;return{fields:["id","displayName"],filter:null!==(t=null===e||void 0===e?void 0:e.map(e=>`level:eq:${e}`))&&void 0!==t?t:[],rootJunction:"OR"}}}};function fe(e){var t,l,n,i,r,o,d,u,s,c,m,E;const{baseUrl:p}=(0,v.UK)(),f=null===e||void 0===e?void 0:e.other,g=null===f||void 0===f?void 0:f.aggregationLevels,{loading:y,error:b,data:A,refetch:h}=(0,v.iO)(pe,{variables:{levels:g}});return a.createElement(P.b,null,a.createElement(k.n,null,a.createElement(G.J,null,a.createElement(_.w,null),a.createElement(_.w,null,B.A.t("Color")),a.createElement(_.w,null,B.A.t(" Icon")),a.createElement(_.w,null,B.A.t("Option set")),a.createElement(_.w,null,B.A.t("Option set for Comments")),a.createElement(_.w,null,B.A.t("Legends")),a.createElement(_.w,null,B.A.t("Aggregation Levels")))),a.createElement(C.B,null,a.createElement(G.J,null,a.createElement(q.B,{bordered:!0,tag:"th"},B.A.t("Details")),a.createElement("td",{bordered:!0,style:{background:null===f||void 0===f||null===(t=f.style)||void 0===t?void 0:t.color,width:"inherit",height:50}},typeof(null===f||void 0===f||null===(l=f.style)||void 0===l?void 0:l.color)===S.UNDEFINED?B.A.t("no color"):""),a.createElement(q.B,{bordered:!0},typeof(null===f||void 0===f||null===(n=f.style)||void 0===n?void 0:n.icon)===S.UNDEFINED?B.A.t("no icon"):a.createElement("img",{src:`${p}/api/icons/${null===f||void 0===f||null===(i=f.style)||void 0===i?void 0:i.icon}/icon.svg`,alt:"icon"})),a.createElement(q.B,{bordered:!0},JSON.stringify(null===f||void 0===f?void 0:f.optionSetValue)),a.createElement(q.B,{bordered:!0},null!==(r=null===f||void 0===f||null===(o=f.commentOptionSet)||void 0===o?void 0:o.displayName)&&void 0!==r?r:"no comments"),a.createElement(q.B,{bordered:!0},0===(null===f||void 0===f||null===(d=f.legendSets)||void 0===d?void 0:d.length)?B.A.t("No legends assigned"):a.createElement("ol",null,null===f||void 0===f||null===(u=f.legendSets)||void 0===u?void 0:u.map(e=>a.createElement("li",{key:e.id},null===e||void 0===e?void 0:e.displayName)))),a.createElement(q.B,{bordered:!0},y?a.createElement(V,{text:""}):b?a.createElement(F,{error:b}):0===(null===A||void 0===A||null===(s=A.orgUnitLevels)||void 0===s||null===(c=s.organisationUnitLevels)||void 0===c?void 0:c.length)?B.A.t("No organization unit level assigned"):a.createElement("ol",null,null===A||void 0===A||null===(m=A.orgUnitLevels)||void 0===m||null===(E=m.organisationUnitLevels)||void 0===E?void 0:E.map(e=>a.createElement("li",{key:null===e||void 0===e?void 0:e.id},null===e||void 0===e?void 0:e.displayName)))))))}const ge={programs:{resource:"programStages",params:({dataElementId:e})=>({fields:["program[id,displayName]"],filter:[`programStageDataElements.dataElement.id:eq:${e}`]})}};function ye({id:e}){var t,l;const n=e,{loading:i,error:r,data:o,refetch:d}=(0,v.iO)(ge,{variables:{dataElementId:n}});return(0,a.useEffect)(()=>{d({id:e})},[e]),i?a.createElement(V,{text:""}):r?a.createElement(F,{error:r}):a.createElement("div",null,a.createElement("h3",null,B.A.t("Data sources")," "),a.createElement("p",null," ",B.A.t("Data element is captured from following sources")),a.createElement("h5",null,B.A.t("Programs")," "),a.createElement("ul",null,null===o||void 0===o||null===(t=o.programs)||void 0===t||null===(l=t.programStages)||void 0===l?void 0:l.map(e=>{var t,l;return a.createElement("li",{key:null===e||void 0===e||null===(t=e.program)||void 0===t?void 0:t.id},a.createElement("b",null,null===e||void 0===e||null===(l=e.program)||void 0===l?void 0:l.displayName)," ",B.A.t("submitting records on every event(case or individual)")," ")})))}ye.PropTypes={id:c().string.isRequired};const be={sources:{resource:"dataElements",id:({id:e})=>e,params:{fields:["domainType","style","optionSetValue","commentOptionSet[displayName]","legendSets[id,displayName]","aggregationLevels"]}}};function Ae({id:e}){var t;const{loading:l,error:n,data:i,refetch:r}=(0,v.iO)(be,{variables:{id:e}});return(0,a.useEffect)(()=>{r({id:e})},[e]),l?a.createElement(V,{text:""}):n?a.createElement(F,{error:n}):a.createElement(a.Fragment,null,(null===i||void 0===i||null===(t=i.sources)||void 0===t?void 0:t.domainType)===I.AGGREGATE&&i!==I.UNDEFINED?a.createElement(Ee,{id:e}):a.createElement(ye,{id:e}),a.createElement("div",null,a.createElement(fe,{other:null===i||void 0===i?void 0:i.sources})))}Ae.PropTypes={id:c().string.isRequired};const he={sources:{resource:"dataElements",id:({id:e})=>e,params:{fields:["valueType"]}},expressionMatch:{resource:"validationRules",params:({id:e})=>({fields:["id"],filter:[`leftSide.expression:like:${e}`,`rightSide.expression:like:${e}`],rootJunction:"OR"})},numeratorMatch:{resource:"indicators",params:({id:e})=>({fields:["id"],filter:[`numerator:like:${e}`]})},denominatorMatch:{resource:"indicators",params:({id:e})=>({fields:["id"],filter:[`denominator:like:${e}`]})}};function Te({id:e}){var t,l,n,i,r,o,d,u;const{loading:s,error:c,data:m,refetch:E}=(0,v.iO)(he,{variables:{id:e}});return(0,a.useEffect)(()=>{E({id:e})},[e]),s?a.createElement(V,{text:""}):c?a.createElement(F,{error:c}):a.createElement("div",null,a.createElement("h3",null," ",B.A.t("Data element Facts")," "),a.createElement("ul",null,a.createElement("li",null,B.A.t("Accepts only")," ",null===(t=ae(null===m||void 0===m||null===(l=m.sources)||void 0===l?void 0:l.valueType))||void 0===t?void 0:t.replace(/_/g," ")," ",B.A.t("to enforce validation")," "),a.createElement("li",null,B.A.t("Has")," ",null===m||void 0===m||null===(n=m.expressionMatch)||void 0===n||null===(i=n.validationRules)||void 0===i?void 0:i.length," ",B.A.t("related validation rules")),a.createElement("li",null,B.A.t("Part of numerators of")," ",null===m||void 0===m||null===(r=m.numeratorMatch)||void 0===r||null===(o=r.indicators)||void 0===o?void 0:o.length," ",B.A.t("indicators")),a.createElement("li",null,B.A.t("Part of denominators of")," ",null===m||void 0===m||null===(d=m.denominatorMatch)||void 0===d||null===(u=d.indicators)||void 0===u?void 0:u.length," ",B.A.t("indicators"))))}Te.propTypes={id:c().string.isRequired};const Ne={dataElements:{resource:"dataElements",id:({id:e})=>e,params:{fields:["id","displayName","description","shortName","code","displayFormName","href"]}}};function Re({id:e}){const{loading:t,error:l,data:n,refetch:i}=(0,v.iO)(Ne,{variables:{id:e}});if((0,a.useEffect)(()=>{i({id:e})},[e]),t)return a.createElement(V,null);if(l)return a.createElement(F,{error:l});const r=null===n||void 0===n?void 0:n.dataElements;return a.createElement("div",null,a.createElement("h2",null,null===r||void 0===r?void 0:r.displayName),a.createElement("h3",null," ",B.A.t("Introduction")," "),a.createElement("p",null,a.createElement("b",null,null===r||void 0===r?void 0:r.displayName)," ",B.A.t("can be described as {{variables}}.",{variables:null===r||void 0===r?void 0:r.description}),a.createElement("br",null),B.A.t("It\u2019s labelled in short as {{variables1}} and has a code of {{variables2}}. In data entry form, it\u2019s named \u201c{{variables3}}\u201d",{variables1:null===r||void 0===r?void 0:r.shortName,variables2:null===r||void 0===r?void 0:r.code,variables3:null===r||void 0===r?void 0:r.displayFormName}),a.createElement("br",null),B.A.t("Identified by:")," ",a.createElement("i",null," ",a.createElement("a",{style:{textDecoration:"none"},href:(null===r||void 0===r?void 0:r.href)+".json",target:"_blank",rel:"noreferrer"},null===r||void 0===r?void 0:r.id)," ")))}Re.prototype={id:c().string.isRequired};const Se={dataSets:{resource:"dataSets",params:({id:e})=>({fields:["id","displayName","periodType","timelyDays"],filter:[`dataSetElements.dataElement.id:eq:${e}`]})}},we={numeratorMatch:{resource:"indicators",params:({id:e})=>({fields:["id"],filter:[`numerator:like:${e}`]})},denominatorMatch:{resource:"indicators",params:({id:e})=>({fields:["id"],filter:[`denominator:like:${e}`]})}};async function Ie(e,t){const l=null===t||void 0===t?void 0:t.map(t=>new Promise((l,n)=>{l(async function(e,t){const l=await e.query(we,{variables:{id:t}});return l}(e,t))}));return await Promise.all(l).then(e=>e.map((e,t)=>e))}async function De(e,t){if((null===t||void 0===t?void 0:t.length)>0){const l=null===t||void 0===t?void 0:t.map(t=>new Promise((l,n)=>{l(async function(e,t){const l=await e.query(Se,{variables:{id:t}});return null===l||void 0===l?void 0:l.dataSets}(e,t))}));return await Promise.all(l).then(e=>e.map((e,t)=>null===e||void 0===e?void 0:e.dataSets))}}function Oe(e,t){const[l,n]=(0,a.useState)(!0),[i,r]=(0,a.useState)(!1),[o,d]=(0,a.useState)();return(0,a.useEffect)(()=>{let l;(async function(){l=await De(t,e)})().then(()=>{d({dataSets:l}),n(!1)}).catch(e=>{n(!1),r(e)})},[]),{loading:l,error:i,data:o}}function Be(e){const t=e.formula,l=e.location,n=e.storeResult,i=(0,r.useSetRecoilState)(E),o=(0,v.ow)(),{loading:d,error:u,data:s}=function(e,t,l){const[n,i]=(0,a.useState)(!0),[r,o]=(0,a.useState)(!1),[d,u]=(0,a.useState)();return(0,a.useEffect)(()=>{let n=ee(e,O.DATA_ELEMENT),a=ee(e,O.PROGRAM_INDICATOR),r=ee(e,O.DATASET_REPORTING_RATES),d=ee(e,O.ATTRIBUTES),s=ee(e,O.CONSTANTS);(async function(){n=await de(t,n,l),a=await de(t,a,l),r=await de(t,r,l),d=await de(t,d,l),s=await de(t,s,l)})().then(()=>{u({dataElements:n,programIndicators:a,dataSetReportingRates:r,attributes:d,constants:s}),i(!1)}).catch(e=>{i(!1),o(e)})},[]),{loading:n,error:r,data:d}}(t,o,l);return(0,a.useEffect)(()=>{n&&typeof(null===s||void 0===s?void 0:s.dataElements)!=S.UNDEFINED&&i(e=>null===e||void 0===e?void 0:e.concat(null===s||void 0===s?void 0:s.dataElements))},[s]),d?a.createElement(V,{text:""}):u?a.createElement(F,{error:u}):a.createElement("div",null,ie(t,null===s||void 0===s?void 0:s.dataElements,null===s||void 0===s?void 0:s.programIndicators,null===s||void 0===s?void 0:s.dataSetReportingRates,null===s||void 0===s?void 0:s.attributes,null===s||void 0===s?void 0:s.constants))}Be.PropTypes={formula:c().string.isRequired,location:c().string,storeResult:c().bool};const Pe={relatedInd:{resource:"indicators",params:({id:e})=>({fields:["id","displayName","indicatorType[id,displayName]","displayDescription","numerator","denominator"],filter:[`numerator:like:${e}`,`denominator:like:${e}`],rootJunction:"OR"})}};function ke(e){var t;const l=e.id,n=e.resourceType,{loading:i,error:r,data:o,refetch:d}=(0,v.iO)(Pe,{variables:{id:l}}),u=null===o||void 0===o||null===(t=o.relatedInd)||void 0===t?void 0:t.indicators;return(0,a.useEffect)(()=>{d({id:l})},[l]),0===(null===u||void 0===u?void 0:u.length)?a.createElement("div",null,a.createElement("p",null,B.A.t("This {{variables1}} is not related to any indicator",{variables1:n})," ")):i?a.createElement(V,{text:""}):r?a.createElement(F,{error:r}):a.createElement("div",null,a.createElement("p",null," ",B.A.t("Below are set of indicators using this {{variables}} as numerator or denominator in their calculations.",{variables:n})),a.createElement(P.b,null,a.createElement(k.n,null,a.createElement(G.J,null,a.createElement(_.w,null,B.A.t("Name")),a.createElement(_.w,null,B.A.t("Numerator")),a.createElement(_.w,null,B.A.t("Denominator")),a.createElement(_.w,null,B.A.t("Type")),a.createElement(_.w,null,B.A.t("Description")))),a.createElement(C.B,null,null===u||void 0===u?void 0:u.map((e,t)=>{var l,n;return a.createElement(G.J,{key:null===e||void 0===e?void 0:e.id},a.createElement(q.B,{bordered:!0},null===e||void 0===e?void 0:e.displayName),a.createElement(q.B,{bordered:!0},a.createElement("div",{style:{margin:5}},a.createElement(Be,{formula:null===e||void 0===e?void 0:e.numerator,location:"numerator",storeResult:!0}))),a.createElement(q.B,{bordered:!0,b:!0},a.createElement("div",{style:{margin:5}},a.createElement(Be,{formula:null===e||void 0===e?void 0:e.denominator,location:"denominator",storeResult:!0}))),a.createElement(q.B,{bordered:!0},null===e||void 0===e||null===(l=e.indicatorType)||void 0===l?void 0:l.displayName),a.createElement(q.B,{bordered:!0},a.createElement("div",{style:{margin:5}},null!==(n=null===e||void 0===e?void 0:e.displayDescription)&&void 0!==n?n:B.A.t("No description given"))))}))))}function Ge({id:e}){return a.createElement("div",null,a.createElement("h3",null,B.A.t("Related Indicators")," "),a.createElement(ke,{id:e}))}function _e(e){const t=e.id;return a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.createElement(Re,{id:t}),a.createElement(Ae,{id:t}),a.createElement(Te,{id:t}),a.createElement(me,{id:t}),a.createElement(Ge,{id:t,resourceType:"Data Element"}),a.createElement(W,{id:t,resourceType:"dataElements"}))}async function Ce(e,t,l,n){const i=null===t||void 0===t?void 0:t.map(t=>oe(e,t,l));return await Promise.all(i).then(e=>e.map((e,i)=>{if(l===S.DATA_ELEMENT){if(2===e.length)return{id:t[i],val:e[0].displayName+" "+e[1],location:n,sources:e[0].dataSetElements};if(1===e.length)return{id:t[i],val:e[0].displayName,location:n,sources:e[0].dataSetElements}}return l===S.ATTRIBUTES||l===S.PROGRAM_DATA_ELEMENT?{id:t[i],val:e[1],location:n,sources:e[0]}:l===S.PROGRAM_INDICATOR?{id:t[i],val:e[0].displayName,location:n,sources:e[0].program}:{id:t[i],val:e[0],location:n}}))}const qe={calculation:{resource:"indicators",id:({id:e})=>e,params:{fields:["numerator","denominator"]}}};function xe({id:e}){const{loading:t,error:l,data:n,refetch:i}=(0,v.iO)(qe,{variables:{id:e}});if((0,a.useEffect)(()=>{i({id:e})},[e]),t)return a.createElement(V,null);if(l)return a.createElement(F,{error:l});const r=n.calculation;return a.createElement("div",null,a.createElement("h3",null," ",B.A.t("Calculation details")),a.createElement("p",null," ",B.A.t("Below are expression computing numerator and denominator, and related sources")," "),a.createElement(P.b,null,a.createElement(k.n,null,a.createElement(G.J,null,a.createElement(_.w,{bordered:!0},B.A.t("Expression")),a.createElement(_.w,{bordered:!0},B.A.t("Formula")),a.createElement(_.w,{bordered:!0},B.A.t("Sources")))),a.createElement(C.B,null,a.createElement(G.J,null,a.createElement(q.B,{bordered:!0},B.A.t("Numerator")),a.createElement(Je,{dataTest:"test-numerator-metadata",formula:r.numerator,location:"numerator"})),a.createElement(G.J,null,a.createElement(q.B,{bordered:!0},B.A.t("Denominator")),a.createElement(Je,{formula:r.denominator,location:"denominator"})))))}xe.propTypes={id:c().string.isRequired};var Me={sources:"DataSourceCellStyle_sources__51+4P"};function Ue(e){e.title;const t=e.data;return a.createElement(a.Fragment,null,a.createElement("ul",null,t.map(e=>a.createElement("li",{key:e.id},e.val,a.createElement("ol",null,e.sources.map(e=>a.createElement("li",{key:e.dataSet.id},e.dataSet.displayName)))))))}function je({data:e}){return a.createElement(a.Fragment,null,a.createElement("ul",null,null===e||void 0===e?void 0:e.map(e=>a.createElement("li",{key:e.id}," ",null===e||void 0===e?void 0:e.val," "))))}function Le({title:e,data:t}){return a.createElement(a.Fragment,null,a.createElement("ul",null,t.map(e=>a.createElement("li",{key:e.id},a.createElement("b",null,null===e||void 0===e?void 0:e.val," ")," ",B.A.t("source:")," ",null===e||void 0===e?void 0:e.sources))))}function Fe(e){e.title;const t=e.data;return a.createElement(a.Fragment,null,a.createElement("ul",null,t.map(e=>{var t;return a.createElement("li",{key:e.id},a.createElement("b",null,null===e||void 0===e?void 0:e.val," ")," ",B.A.t("source:")," ",null===e||void 0===e||null===(t=e.sources)||void 0===t?void 0:t.displayName)})))}function Je({formula:e,location:t,...l}){var n,i,o,d,u;const s=(0,v.ow)(),c=(0,r.useSetRecoilState)(E),m=(0,r.useSetRecoilState)(p),g=(0,r.useSetRecoilState)(f),{loading:y,error:b,data:A}=function(e,t,l){const[n,i]=(0,a.useState)(!0),[r,o]=(0,a.useState)(!1),[d,u]=(0,a.useState)();return(0,a.useEffect)(()=>{let n=ee(e,O.DATA_ELEMENT),a=ee(e,O.PROGRAM_INDICATOR),r=ee(e,O.DATASET_REPORTING_RATES),d=ee(e,O.ATTRIBUTES),s=ee(e,O.CONSTANTS),c=ee(e,O.ORG_UNIT_COUNT),m=ee(e,O.PROGRAM_DATA_ELEMENT);(async function(){n=await Ce(t,n,S.DATA_ELEMENT,l),a=await Ce(t,a,S.PROGRAM_INDICATOR,l),r=await Ce(t,r,S.DATASET_REPORTING_RATES,l),d=await Ce(t,d,S.ATTRIBUTES,l),s=await Ce(t,s,S.CONSTANTS,l),c=await Ce(t,c,S.ORG_UNIT_COUNT,l),m=await Ce(t,m,S.PROGRAM_DATA_ELEMENT,l)})().then(()=>{u({dataElements:n,programIndicators:a,dataSetReportingRates:r,attributes:d,constants:s,orgUnitCount:c,programDtElement:m}),i(!1)}).catch(e=>{i(!1),o(e)})},[]),{loading:n,error:r,data:d}}(e,s,t);return y?a.createElement(V,{text:""}):b?a.createElement(F,{error:b}):(c(null===A||void 0===A?void 0:A.dataElements),m(null===A||void 0===A?void 0:A.programIndicators),g(null===A||void 0===A?void 0:A.dataSetReportingRates),a.createElement(a.Fragment,null,a.createElement(q.B,{bordered:!0,width:"50%"},ie(e,null===A||void 0===A?void 0:A.dataElements,null===A||void 0===A?void 0:A.programIndicators,null===A||void 0===A?void 0:A.dataSetReportingRates,null===A||void 0===A?void 0:A.attributes,null===A||void 0===A?void 0:A.constants,null===A||void 0===A?void 0:A.programDtElement,null===A||void 0===A?void 0:A.orgUnitCount)),a.createElement(q.B,{bordered:!0},a.createElement("div",{className:Me.sources},(null===A||void 0===A||null===(n=A.dataElements)||void 0===n?void 0:n.length)>0?a.createElement(Ue,{title:"Data Elements",data:null===A||void 0===A?void 0:A.dataElements}):"",(null===A||void 0===A||null===(i=A.dataSetReportingRates)||void 0===i?void 0:i.length)>0?a.createElement(je,{title:"Data Sets",data:null===A||void 0===A?void 0:A.dataSetReportingRates}):"",(null===A||void 0===A||null===(o=A.programIndicators)||void 0===o?void 0:o.length)>0?a.createElement(Fe,{title:"Program Indicators",data:null===A||void 0===A?void 0:A.programIndicators}):"",(null===A||void 0===A||null===(d=A.programDtElement)||void 0===d?void 0:d.length)>0?a.createElement(Le,{title:"Tracker Data Element",data:null===A||void 0===A?void 0:A.programDtElement}):"",(null===A||void 0===A||null===(u=A.attributes)||void 0===u?void 0:u.length)>0?a.createElement(Le,{title:"Tracker Data Element",data:null===A||void 0===A?void 0:A.attributes}):""))))}Ue.PropTypes={title:c().string.isRequired,data:c().arrayOf(c().object).isRequired},je.PropTypes={data:c().arrayOf(c().object).isRequired},Le.PropTypes={title:c().string.isRequired,data:c().arrayOf(c().object).isRequired},Fe.PropTypes={title:c().string.isRequired,data:c().arrayOf(c().object).isRequired},Je.propTypes={formula:c().string.isRequired,location:c().string.isRequired};const Ve={dataElementInIndicator:{resource:"dataElements",id:({id:e})=>e,params:{fields:["id","aggregationType","valueType","zeroIsSignificant","dataSetElements[dataSet[id,displayName]]","dataElementGroups[id,displayName]","categoryCombo[categories[id,displayName]]"]}}};function $e(e){const t=e.datEl;function l(e){const{loading:t,error:l,data:n}=(0,v.iO)(Ve,{variables:{id:e}});return t?a.createElement(J.F,null):l?a.createElement("p",null," ",l," "):n}return a.createElement(G.J,null,a.createElement(q.B,{bordered:!0},t.val),a.createElement(q.B,{bordered:!0},t.location),function(e){let t;if(-1==(null===(n=e.id)||void 0===n?void 0:n.indexOf(".")))t=l(e.id).dataElementInIndicator;else{t=l(e.id.split(".")[0]).dataElementInIndicator}var n;return a.createElement(a.Fragment,null,a.createElement(q.B,{bordered:!0},"undefined"!==typeof t?t.valueType:"some value"),a.createElement(q.B,{bordered:!0},"undefined"!==typeof t?JSON.stringify(t.zeroIsSignificant):null),a.createElement(q.B,{bordered:!0},a.createElement("ol",null,"undefined"!==typeof t?t.categoryCombo.categories.map(e=>a.createElement("li",{key:e.id},e.displayName)):null)),a.createElement(q.B,{bordered:!0},a.createElement("ol",null,"undefined"!==typeof t?t.dataSetElements.map(e=>a.createElement("li",{key:e.dataSet.id},e.dataSet.displayName)):null)),a.createElement(q.B,{bordered:!0},a.createElement("ol",null,"undefined"!==typeof t?t.dataElementGroups.map(e=>a.createElement("li",{key:e.id},e.displayName)):null)))}(t))}function ze({resourceType:e}){const t=(0,r.useRecoilValue)(E);return 0===(null===t||void 0===t?void 0:t.length)?a.createElement("div",null,a.createElement("h3",null," ",B.A.t("Data elements in {{variables}}",{variables:e})," "),a.createElement("p",null,B.A.t("There were no Data Elements in the {{variables}} Calculations",{resourceType:e})," ")):a.createElement("div",null,a.createElement("h3",null," ",B.A.t("Data elements in {{variables}}",{variables:e})," "),a.createElement("p",null," ",B.A.t("The following is the summary of the data elements used in calculations:")," "),a.createElement(P.b,null,a.createElement(k.n,null,a.createElement(G.J,null,a.createElement(_.w,{bordered:!0},B.A.t("Data Element")),a.createElement(_.w,{bordered:!0},B.A.t("Expression part (Numerator/ Denominator)")),a.createElement(_.w,null,B.A.t("Value Type")),a.createElement(_.w,null,B.A.t("Zero Significance")),a.createElement(_.w,null,B.A.t("Categories")),a.createElement(_.w,null,B.A.t("Datasets/ Programs")),a.createElement(_.w,null,B.A.t("Groups")))),a.createElement(C.B,null,null===t||void 0===t?void 0:t.map((e,t)=>a.createElement($e,{key:t,datEl:e,location:null===e||void 0===e?void 0:e.location})))))}function We({aggregate:e}){const t=(0,r.useSetRecoilState)(g),l=(0,v.ow)(),n=null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.id),{loading:i,error:o,data:d}=Oe(n,l),u=null===d||void 0===d?void 0:d.dataSets;return(0,a.useEffect)(()=>{let e=0;return null===u||void 0===u||u.map(t=>{e+=null===t||void 0===t?void 0:t.length}),t(e),()=>{}},[d]),i?a.createElement(V,{text:""}):o?a.createElement(F,{error:o}):a.createElement("div",null,a.createElement("ul",null,null===e||void 0===e?void 0:e.map((e,t)=>{var l,n;return a.createElement("li",{key:(null===e||void 0===e?void 0:e.id)+t},null===e||void 0===e?void 0:e.displayName,a.createElement("ul",null," ",(null===(l=u[t])||void 0===l?void 0:l.length)>1?B.A.t("sources"):"",null===(n=u[t])||void 0===n?void 0:n.map(e=>a.createElement("li",{key:null===e||void 0===e?void 0:e.id},null===e||void 0===e?void 0:e.displayName," ",B.A.t(" submitting ")," ",null===e||void 0===e?void 0:e.periodType," ",B.A.t(" after every ")," ",null===e||void 0===e?void 0:e.timelyDays," ",B.A.t("days")," "))))})))}ze.PropTypes={resourceType:c().string.isRequired},We.propTypes={aggregate:c().array.isRequired};const Ke={programs:{resource:"programStages",params:({dataElementId:e})=>({fields:["program[id,displayName]"],filter:[`programStageDataElements.dataElement.id:eq:${e}`]})}};function Ze({id:e,name:t}){var l,n;const i=e,o=(0,r.useSetRecoilState)(y),{loading:d,error:u,data:s,refetch:c}=(0,v.iO)(Ke,{variables:{dataElementId:i}});return(0,a.useEffect)(()=>{c({id:e})},[e]),(0,a.useEffect)(()=>{o(e=>{var t,l;return e+(null===s||void 0===s||null===(t=s.programs)||void 0===t||null===(l=t.programStages)||void 0===l?void 0:l.length)})},[s]),d?a.createElement(V,{text:""}):u?a.createElement(F,{error:u}):a.createElement("div",null,t,a.createElement("ul",null,null===s||void 0===s||null===(l=s.programs)||void 0===l||null===(n=l.programStages)||void 0===n?void 0:n.map(e=>{var t,l;return a.createElement("li",{key:null===e||void 0===e||null===(t=e.program)||void 0===t?void 0:t.id},a.createElement("b",null,null===e||void 0===e||null===(l=e.program)||void 0===l?void 0:l.displayName)," ",B.A.t("submitting records on every event(case or individual)"))})))}Ze.propTypes={id:c().string.isRequired,name:c().string.isRequired};const He={sources:{resource:"dataElementGroups",id:({id:e})=>e,params:{fields:["dataElements[id,displayName,domainType]"]}}};function Ye({id:e}){var t,l;const{loading:i,error:r,data:o,refetch:d}=(0,v.iO)(He,{variables:{id:e}});(0,a.useEffect)(()=>{d({id:e})},[e]);const u=(0,a.useMemo)(()=>{var e;return(0,n.filter)(null===o||void 0===o||null===(e=o.sources)||void 0===e?void 0:e.dataElements,e=>(null===e||void 0===e?void 0:e.domainType)===I.TRACKER)},[o]),s=(0,a.useMemo)(()=>{var e;return(0,n.filter)(null===o||void 0===o||null===(e=o.sources)||void 0===e?void 0:e.dataElements,e=>(null===e||void 0===e?void 0:e.domainType)===I.AGGREGATE)},[o]);return i?a.createElement(V,{text:""}):r?a.createElement(F,{error:r}):a.createElement("div",null,a.createElement("h3",null,B.A.t("Data sources (Datasets/Programs)")," "),a.createElement("p",null," ",B.A.t("Data elements in this group are captured from the following sources")," "),0===(null===o||void 0===o||null===(t=o.sources)||void 0===t||null===(l=t.dataElements)||void 0===l?void 0:l.length)?B.A.t("There are no Data Elements in this Data Element group"):"",(null===s||void 0===s?void 0:s.length)>0?a.createElement("h4",null,B.A.t("For Aggregate Data Elements:")," "):"",(null===s||void 0===s?void 0:s.length)>0?a.createElement(We,{aggregate:s}):"",(null===u||void 0===u?void 0:u.length)>0?a.createElement("h4",null,B.A.t("For Tracker Data Elements:")," "):"",(null===u||void 0===u?void 0:u.length)>0?u.map(e=>a.createElement(Ze,{id:null===e||void 0===e?void 0:e.id,name:null===e||void 0===e?void 0:e.displayName})):"")}function Xe({dataElementsArray:e}){var t;const l=(0,v.ow)(),i=null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.id),{loading:r,error:o,data:d}=function(e,t){const[l,n]=(0,a.useState)(!0),[i,r]=(0,a.useState)(!1),[o,d]=(0,a.useState)();return(0,a.useEffect)(()=>{let l;(async function(){l=await Ie(t,e)})().then(()=>{d({matches:l}),n(!1)}).catch(e=>{n(!1),r(e)})},[null===e||void 0===e?void 0:e.length]),{loading:l,error:i,data:o}}(i,l),u=(0,n.reduce)(null!==(t=null===d||void 0===d?void 0:d.matches)&&void 0!==t?t:[],function(e,t){var l,n,i,a,r,o;return null!==(l=null!==(n=e+(null===t||void 0===t||null===(i=t.numeratorMatch)||void 0===i||null===(a=i.indicators)||void 0===a?void 0:a.length))&&void 0!==n?n:0+(null===t||void 0===t||null===(r=t.denominatorMatch)||void 0===r||null===(o=r.indicators)||void 0===o?void 0:o.length))&&void 0!==l?l:0},0);return r?a.createElement(V,{text:""}):o?a.createElement(F,{error:o}):a.createElement(a.Fragment,null,B.A.t("It\u2019s data elements belongs to {{variables}} indicators using it as numerator/denominator",{variables:u}))}Ye.prototype={id:c().string.isRequired},Xe.propTypes={dataElementsArray:c().array.isRequired};const Qe={sources:{resource:"dataElementGroups",id:({id:e})=>e,params:{fields:["dataElements"]}}};function et({id:e}){var t,l,n;const{loading:i,error:o,data:d,refetch:u}=(0,v.iO)(Qe,{variables:{id:e}}),s=(0,r.useRecoilValue)(g),c=(0,r.useRecoilValue)(y);return(0,a.useEffect)(()=>{u({id:e})},[e]),i?a.createElement(V,{text:""}):o?a.createElement(F,{error:o}):a.createElement("div",null,a.createElement("h3",null,B.A.t(" Data element group Facts")),a.createElement("ul",null,a.createElement("li",null," ",B.A.t("It has {{variables}} data Elements",{variables:null===d||void 0===d||null===(t=d.sources)||void 0===t||null===(l=t.dataElements)||void 0===l?void 0:l.length})),a.createElement("li",null," ",B.A.t("It\u2019s data elements belongs to {{variables}} dataset and {{variables2}} program sources of data",{variables:s,variables2:c})),a.createElement("li",null,a.createElement(Xe,{dataElementsArray:null===d||void 0===d||null===(n=d.sources)||void 0===n?void 0:n.dataElements})," ")))}function tt({href:e,id:t}){return a.createElement("div",null,"Identified by:"," ",a.createElement("i",null," ",a.createElement("a",{style:{textDecoration:"none"},href:e+".json",target:"_blank",rel:"noreferrer"},t)," "))}tt.PropTypes={id:c().string.isRequired,href:c().string.isRequired};const lt={dataElementGroups:{resource:"dataElementGroups",id:({id:e})=>e,params:{fields:["id","displayName","displayDescription","displayShortName","code","href"]}}};function nt({id:e}){const{loading:t,error:l,data:n,refetch:i}=(0,v.iO)(lt,{variables:{id:e}});if((0,a.useEffect)(()=>{i({id:e})},[e]),t)return a.createElement(V,{text:""});if(l)return a.createElement(F,{error:l});const r=null===n||void 0===n?void 0:n.dataElementGroups;return a.createElement("div",null,a.createElement("h2",null,null===r||void 0===r?void 0:r.displayName),a.createElement("h3",null,B.A.t("Introduction")," "),a.createElement("p",null," ",B.A.t("{{variables1}}  can be described as {{variables2}}.\n            It\u2019s labelled in short as {{variables3}} and has a code of {{variables4}}.",{variables1:null===r||void 0===r?void 0:r.displayName,variables2:null===r||void 0===r?void 0:r.displayDescription,variables3:null===r||void 0===r?void 0:r.displayShortName,variables4:null===r||void 0===r?void 0:r.code})),a.createElement(tt,{href:null===r||void 0===r?void 0:r.href,id:null===r||void 0===r?void 0:r.id}))}const it={sources:{resource:"dataElementGroups",id:({id:e})=>e,params:{fields:["dataElements[id,displayName]"]}}};function at({id:e}){var t,l;const{loading:n,error:i,data:r,refetch:o}=(0,v.iO)(it,{variables:{id:e}});return(0,a.useEffect)(()=>{o({id:e})},[e]),n?a.createElement(V,{text:""}):i?a.createElement(F,{error:i}):a.createElement("div",null,a.createElement("h3",null,B.A.t("Related Indicators")," "),a.createElement("p",null,B.A.t("The following is the summary of indicators using the data elements in this group")),a.createElement("ul",null,null===r||void 0===r||null===(t=r.sources)||void 0===t||null===(l=t.dataElements)||void 0===l?void 0:l.map(e=>a.createElement("li",{key:null===e||void 0===e?void 0:e.id},a.createElement("div",null,a.createElement("b",null," ",null===e||void 0===e?void 0:e.displayName," "),a.createElement(ke,{id:null===e||void 0===e?void 0:e.id}))))))}function rt(e){const t=e.id;return a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.createElement(nt,{id:t}),a.createElement(Ye,{id:t}),a.createElement(et,{id:t}),a.createElement(at,{id:t}),a.createElement(ze,{resourceType:"Data Element Group"}),a.createElement(W,{id:t,resourceType:"dataElementGroups"}))}function ot(e){return(null===e||void 0===e?void 0:e.search("dataElements"))>=0?w.DATA_ELEMENT:(null===e||void 0===e?void 0:e.search("indicators"))>=0?w.INDICATOR:(null===e||void 0===e?void 0:e.search("programIndicators"))>=0?w.PROGRAM_INDICATOR:(null===e||void 0===e?void 0:e.search("dataElementGroups"))>=0?w.DATA_ELEMENT_GROUP:(null===e||void 0===e?void 0:e.search("indicatorGroups"))>=0?w.INDICATOR_GROUP:(null===e||void 0===e?void 0:e.search("dataStore/function"))>=0?w.FUNCTION:(null===e||void 0===e?void 0:e.search("dataSets"))>=0?w.DATASET:void 0}const dt={identifiableObjects:{resource:"identifiableObjects",id:({id:e})=>e,params:{fields:["id","displayName","href","description","code","lastUpdated"]}}},ut={functionDetails:{resource:"dataStore/functions",id:({id:e})=>e}};async function st(e,t){const l=null===t||void 0===t?void 0:t.map(t=>new Promise((l,n)=>{l(async function(e,t){const l=await e.query(ut,{variables:{id:t}});return null===l||void 0===l?void 0:l.functionDetails}(e,t))}));return await Promise.all(l).then(e=>e.map((e,t)=>e))}async function ct(e,t){const l=null===t||void 0===t?void 0:t.map(t=>new Promise((l,n)=>{l(async function(e,t){const l=await e.query(dt,{variables:{id:t}});return null===l||void 0===l?void 0:l.identifiableObjects}(e,t))}));return await Promise.all(l).then(e=>e.map((e,t)=>e))}function mt(e){return null===e||void 0===e?void 0:e.search(/[a-zA-Z]/g)}function vt(e){return e.search("^[A-Za-z0-9]+$")>=0}(0,r.atom)({key:"functionDictionarySourceSelector",default:0}),(0,r.atom)({key:"allFunctionsInStore",default:[]}),(0,r.atom)({key:"showFunctionsSearchResult",default:!0}),(0,r.atom)({key:"searchedResultRules",default:[]}),(0,r.atom)({key:"oneFunctionSelected",default:!1}),(0,r.atom)({key:"showAllFunctions",default:!0});function Et({result:e}){var t,l,n,i;return a.createElement("div",null,a.createElement("p",null,B.A.t("Function will be visible for users with the following access:")),a.createElement(P.b,null,a.createElement(k.n,null,a.createElement(G.J,null,a.createElement(_.w,null),a.createElement(_.w,null,B.A.t("Details")))),a.createElement(C.B,null,a.createElement(G.J,null,a.createElement(q.B,{bordered:!0,tag:"th"},B.A.t("User Access")),a.createElement(q.B,{bordered:!0},B.A.t(0===(null===e||void 0===e||null===(t=e.userAccesses)||void 0===t?void 0:t.length)?"No access granted":""),a.createElement("ul",null,null===e||void 0===e||null===(l=e.userAccesses)||void 0===l?void 0:l.map(e=>a.createElement("li",{key:e.id},null===e||void 0===e?void 0:e.displayName," ",B.A.t("can")," ",a.createElement("i",null,x(e.access)," ")," "))))),a.createElement(G.J,null,a.createElement(q.B,{bordered:!0,tag:"th"},B.A.t("User Group Access")),a.createElement(q.B,{bordered:!0},B.A.t(0===(null===e||void 0===e||null===(n=e.userGroupAccesses)||void 0===n?void 0:n.length)?"No access granted":""),a.createElement("ul",null,null===e||void 0===e||null===(i=e.userGroupAccesses)||void 0===i?void 0:i.map(e=>a.createElement("li",{key:e.id},null===e||void 0===e?void 0:e.displayName," ",B.A.t("can")," ",a.createElement("i",null,x(e.access))," "))))))))}const pt={sources:{resource:"dataStore/functions",id:({id:e})=>e+"/metaData"}};function ft({id:e}){var t,l,n,i,r,o;(0,a.useEffect)(()=>{c({id:e})},[e]);const{loading:d,error:u,data:s,refetch:c}=(0,v.iO)(pt,{variables:{id:e}}),m=null===s||void 0===s?void 0:s.sources;return d?a.createElement(V,{text:""}):u?a.createElement(F,{error:u}):a.createElement("div",null,a.createElement("h3",null,B.A.t("Accesibility & Sharing Settings")," "),a.createElement("p",null," ",B.A.t("This Function was first created on")," ",a.createElement("i",null," ",new Date(null===m||void 0===m?void 0:m.created).toLocaleString("en-GB"))," ",B.A.t(null!==m&&void 0!==m&&null!==(t=m.user)&&void 0!==t&&t.displayName?"by":"")," ",a.createElement("b",null,null===m||void 0===m||null===(l=m.user)||void 0===l?void 0:l.displayName," ")," ",B.A.t("and last updated on")," ",a.createElement("i",null,new Date(null===m||void 0===m?void 0:m.lastUpdated).toLocaleString("en-GB"))," ",B.A.t(null!==m&&void 0!==m&&null!==(n=m.lastUpdatedBy)&&void 0!==n&&n.displayName?"by":"")," ",a.createElement("b",null,null===m||void 0===m||null===(i=m.lastUpdatedBy)||void 0===i?void 0:i.displayName)," ."),(null===m||void 0===m||null===(r=m.userAccesses)||void 0===r?void 0:r.length)>0&&(null===m||void 0===m||null===(o=m.userGroupAccesses)||void 0===o?void 0:o.length)>0?a.createElement(Et,{result:m}):"")}function gt({json:e}){var t,l,n;const i=function(e){var t;const l=[];let n=e,i=mt(null===(t=n)||void 0===t?void 0:t.toString());for(;i>=0;){n=n.substring(i);const e=n.substring(0,11);if(vt(e))l.push(e),n=n.substring(11);else{const e=n.search(/[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/);n=n.substring(e)}i=mt(n)}return l}(null===(t=JSON.stringify(e))||void 0===t?void 0:t.replace(/\s/g,"")),r=(0,v.ow)(),{loading:o,error:d,data:u}=function(e,t){const[l,n]=(0,a.useState)(!0),[i,r]=(0,a.useState)(!1),[o,d]=(0,a.useState)();return(0,a.useEffect)(()=>{let l;(async function(){l=await ct(t,e)})().then(()=>{d({idDetails:l}),n(!1)}).catch(e=>{n(!1),r(e)})},[JSON.stringify(e)]),{loading:l,error:i,data:o}}(i,r);return o?a.createElement(V,{text:""}):d?a.createElement(F,{error:d}):0===(null===u||void 0===u||null===(l=u.idDetails)||void 0===l?void 0:l.length)?a.createElement(a.Fragment,null):a.createElement("div",null,a.createElement("h3",null,B.A.t("Data Sources")," "),a.createElement("p",null,B.A.t("Function have rules calculating from multiple data sources. Here are few data sources observed")),a.createElement(P.b,null,a.createElement(k.n,null,a.createElement(G.J,null,a.createElement(_.w,{bordered:!0},B.A.t("Id")),a.createElement(_.w,{bordered:!0},B.A.t("Name")),a.createElement(_.w,null,B.A.t("Description")),a.createElement(_.w,null,B.A.t("Code")),a.createElement(_.w,null,B.A.t("Type")),a.createElement(_.w,null,B.A.t("More details")),a.createElement(_.w,null,B.A.t("Last updated")))),a.createElement(C.B,null,null===u||void 0===u||null===(n=u.idDetails)||void 0===n?void 0:n.map(e=>{var t,l;return a.createElement(G.J,{key:e.id},a.createElement(q.B,{bordered:!0},null===e||void 0===e?void 0:e.id),a.createElement(q.B,{bordered:!0},null===e||void 0===e?void 0:e.displayName),a.createElement(q.B,{bordered:!0},null!==(t=null===e||void 0===e?void 0:e.description)&&void 0!==t?t:"No description"),a.createElement(q.B,{bordered:!0},null!==(l=null===e||void 0===e?void 0:e.code)&&void 0!==l?l:"no code"),a.createElement(q.B,{bordered:!0},function(e){switch(ot(e)){case w.DATA_ELEMENT:return"Data Element";case w.INDICATOR:return"Indicator";case w.PROGRAM_INDICATOR:return"Program Indicator";case w.DATA_ELEMENT_GROUP:return"Data Element Group";case w.INDICATOR_GROUP:return"Indicator Group";case w.FUNCTION:return"Function";case w.DATASET:return"Dataset";default:return"Other"}}(null===e||void 0===e?void 0:e.href)),a.createElement(q.B,{bordered:!0},a.createElement("i",null," ",a.createElement("a",{style:{textDecoration:"none"},href:(null===e||void 0===e?void 0:e.href)+".json",target:"_blank",rel:"noreferrer"},(null===e||void 0===e?void 0:e.href)+".json")," ")),a.createElement(q.B,{bordered:!0},M(null===e||void 0===e?void 0:e.lastUpdated)))}))))}ft.propTypes={id:c().string.isRequired};const{Buffer:yt}=l(37325);function bt({functionObj:e}){var t,l,n,i,r;const o=e;return a.createElement("div",null,a.createElement("h3",null,B.A.t("")," Function Facts"),a.createElement("ul",null,a.createElement("li",null,B.A.t("It is approximately {{variables}}  in size",{variables:se(yt.byteLength(null===o||void 0===o?void 0:o.function,"utf-8"),2)})),a.createElement("li",null,B.A.t("")," It has ",null===o||void 0===o||null===(t=o.rules)||void 0===t?void 0:t.length," associated rules"),(null===o||void 0===o||null===(l=o.function)||void 0===l?void 0:l.search("Fn"))>=0?a.createElement("li",null,B.A.t("It\u2019s using function analytics library")):"",(null===o||void 0===o||null===(n=o.function)||void 0===n?void 0:n.search("$."))>=0?a.createElement("li",null,B.A.t("It\u2019s using jquery api library ")):"",(null===o||void 0===o||null===(i=o.function)||void 0===i?void 0:i.search("$.ajax"))>=0?a.createElement("li",null,B.A.t("Performs ajax promises")):"",(null===o||void 0===o||null===(r=o.function)||void 0===r?void 0:r.search("../../../api/"))>=0?a.createElement("li",null,B.A.t("Fetches from DHIS2 API without function analytics")):""))}function At({ruleObj:e,functionObj:t}){return a.createElement("div",null,a.createElement("h3",null,B.A.t("Introduction")," "),a.createElement("p",null," ",a.createElement("b",null," ",null===e||void 0===e?void 0:e.name," ")," ",B.A.t(null!==e&&void 0!==e&&e.description?"can be best described as: {{variables}}":"",{variables:null===e||void 0===e?void 0:e.description})),a.createElement(tt,{id:null===e||void 0===e?void 0:e.id,href:null===t||void 0===t?void 0:t.href}))}function ht({ruleObj:e,functionObj:t}){var l;const n=i().filter(null!==(l=null===t||void 0===t?void 0:t.rules)&&void 0!==l?l:[],t=>(null===t||void 0===t?void 0:t.id)!==(null===e||void 0===e?void 0:e.id));return a.createElement("div",null,a.createElement("h3",null,B.A.t("Function Rules")," "),a.createElement("p",null," ",B.A.t("The following are available rules used for data analytics")," "),a.createElement(P.b,null,a.createElement(k.n,null,a.createElement(G.J,null,a.createElement(_.w,{bordered:!0},B.A.t("Id")),a.createElement(_.w,{bordered:!0},B.A.t("Name")),a.createElement(_.w,null,B.A.t("Description")),a.createElement(_.w,null,B.A.t("Default Rule")),a.createElement(_.w,null,B.A.t("JSON")))),a.createElement(C.B,null,null===n||void 0===n?void 0:n.map(e=>a.createElement(G.J,{key:null===e||void 0===e?void 0:e.id},a.createElement(q.B,{bordered:!0},null===e||void 0===e?void 0:e.id),a.createElement(q.B,{bordered:!0},null===e||void 0===e?void 0:e.name),a.createElement(q.B,{bordered:!0},null===e||void 0===e?void 0:e.description),a.createElement(q.B,{bordered:!0},(null===e||void 0===e?void 0:e.isDefault)?"Yes":"No"),a.createElement(q.B,{bordered:!0},JSON.stringify(null===e||void 0===e?void 0:e.json)))))))}function Tt({ruleObj:e,functionObj:t}){return a.createElement("div",null,a.createElement(At,{ruleObj:e,functionObj:t}),a.createElement(gt,{json:null===e||void 0===e?void 0:e.json}),a.createElement(ht,{ruleObj:e,functionObj:t}),a.createElement(bt,{functionObj:t}),a.createElement(ft,{id:null===t||void 0===t?void 0:t.id}))}function Nt({id:e}){var t,l;const n=(0,v.ow)(),r=e.split(".")[0],o=e.split(".")[1],{loading:d,error:u,data:s}=function(e,t){const[l,n]=(0,a.useState)(!0),[i,r]=(0,a.useState)(!1),[o,d]=(0,a.useState)();return(0,a.useEffect)(()=>{(async function(){return await st(e,t)})().then(e=>{d(e),n(!1)}).catch(e=>{n(!1),r(e)})},[]),{loading:l,error:i,data:o}}([r],n),c=i().filter(null!==(t=null===(l=s[0])||void 0===l?void 0:l.rules)&&void 0!==t?t:[],e=>(null===e||void 0===e?void 0:e.id)===o);return d?a.createElement(V,{text:""}):u?a.createElement(F,{error:u}):a.createElement(Tt,{ruleObj:c[0],functionObj:s[0]})}At.PropTypes={ruleObj:s.PropTypes.object.isRequired,functionObj:s.PropTypes.object.isRequired},Nt.propTypes={id:c().string.isRequired};const Rt={dataElementInIndicator:{resource:"dataElements",id:({id:e})=>e,params:{fields:["id","aggregationType","valueType","zeroIsSignificant","dataSetElements[dataSet[id,displayName]]","dataElementGroups[id,displayName]","categoryCombo[categories[id,displayName]]"]}}};function St(e){const t=e.datEl;function l(e){const{loading:t,error:l,data:n}=(0,v.iO)(Rt,{variables:{id:e}});return t?a.createElement(J.F,null):l?a.createElement("p",null," ",l," "):n}return a.createElement(G.J,null,a.createElement(q.B,{bordered:!0},t.val),a.createElement(q.B,{bordered:!0},t.location),function(e){let t;if(-1==(null===(n=e.id)||void 0===n?void 0:n.indexOf(".")))t=l(e.id).dataElementInIndicator;else{t=l(e.id.split(".")[0]).dataElementInIndicator}var n;return a.createElement(a.Fragment,null,a.createElement(q.B,{bordered:!0},"undefined"!==typeof t?t.valueType:"some value"),a.createElement(q.B,{bordered:!0},"undefined"!==typeof t?JSON.stringify(t.zeroIsSignificant):null),a.createElement(q.B,{bordered:!0},a.createElement("ol",null,"undefined"!==typeof t?t.categoryCombo.categories.map(e=>a.createElement("li",{key:e.id},e.displayName)):null)),a.createElement(q.B,{bordered:!0},a.createElement("ol",null,"undefined"!==typeof t?t.dataSetElements.map(e=>a.createElement("li",{key:e.dataSet.id},e.dataSet.displayName)):null)),a.createElement(q.B,{bordered:!0},a.createElement("ol",null,"undefined"!==typeof t?t.dataElementGroups.map(e=>a.createElement("li",{key:e.id},e.displayName)):null)))}(t))}function wt(){const e=(0,r.useRecoilValue)(E);if(0===(null===e||void 0===e?void 0:e.length))return a.createElement("div",null,a.createElement("h3",null," ",B.A.t("Data elements in indicator")," "),a.createElement("p",null,B.A.t("There were no Data Elements in the Indicator Calculations")," "));let t=0;return a.createElement("div",null,a.createElement("h3",null,B.A.t("Data elements in indicator")," "),a.createElement("p",null," ",B.A.t("The following is the summary of the data elements used in calculations:")," "),a.createElement(P.b,null,a.createElement(k.n,null,a.createElement(G.J,null,a.createElement(_.w,{bordered:!0},B.A.t("Data Element")),a.createElement(_.w,{bordered:!0},B.A.t("Expression part (Numerator/ Denominator)")),a.createElement(_.w,null,B.A.t("Value Type")),a.createElement(_.w,null,B.A.t("Zero Significance")),a.createElement(_.w,null,B.A.t("Categories")),a.createElement(_.w,null,B.A.t("Datasets/ Programs")),a.createElement(_.w,null,B.A.t("Groups")))),a.createElement(C.B,null,null===e||void 0===e?void 0:e.map(e=>(t++,a.createElement(St,{key:t,datEl:e}))))))}const It={dataSets:{resource:"dataSets",id:({id:e})=>e,params:{fields:["id","displayName","displayDescription","timelyDays","expiryDays","periodType","organisationUnits[id,displayName]","dataSetElements[dataElement[id,displayName]]","legendSets[id,displayName]"]}}};function Dt(e){const t=e.dataSet,l=t.id,{loading:n,error:i,data:r}=(0,v.iO)(It,{variables:{id:l}});return a.createElement(a.Fragment,null,a.createElement(G.J,null,a.createElement(q.B,{bordered:!0},null===t||void 0===t?void 0:t.val),a.createElement(q.B,{bordered:!0},null===t||void 0===t?void 0:t.location),function(e){return a.createElement(a.Fragment,null,a.createElement(q.B,{bordered:!0},null===e||void 0===e?void 0:e.timelyDays),a.createElement(q.B,{bordered:!0},null===e||void 0===e?void 0:e.expiryDays),a.createElement(q.B,{bordered:!0},null===e||void 0===e?void 0:e.periodType),a.createElement(q.B,{bordered:!0},a.createElement("div",{className:Me.sources},a.createElement("ol",null,null===e||void 0===e?void 0:e.organisationUnits.map(e=>a.createElement("li",{key:null===e||void 0===e?void 0:e.id},null===e||void 0===e?void 0:e.displayName))))),a.createElement(q.B,{bordered:!0},a.createElement("div",{className:Me.sources},a.createElement("ol",null,null===e||void 0===e?void 0:e.dataSetElements.map(e=>{var t,l;return a.createElement("li",{key:null===e||void 0===e||null===(t=e.dataElement)||void 0===t?void 0:t.id},null===e||void 0===e||null===(l=e.dataElement)||void 0===l?void 0:l.displayName)})))),a.createElement(q.B,{bordered:!0},a.createElement("div",{className:Me.sources},a.createElement("ol",null,null===e||void 0===e?void 0:e.legendSets.map(e=>a.createElement("li",{key:e.id},e.displayName))))))}(null===r||void 0===r?void 0:r.dataSets)))}function Ot(){const e=(0,r.useRecoilValue)(f);if(0===e.length)return a.createElement("div",null,a.createElement("h3",null," ",B.A.t("Datasets (Reporting rates) in indicator")," "),a.createElement("p",null,B.A.t("There were no Datasets (Reporting rates) in the Indicator Calculations")," "));let t=0;return a.createElement("div",null,a.createElement("h3",null,B.A.t("Datasets (Reporting rates) in indicator")," "),a.createElement("p",null,B.A.t("The following is the summary of the datasets (reporting rates) used in calculations:")," "),a.createElement(P.b,null,a.createElement(k.n,null,a.createElement(G.J,null,a.createElement(_.w,{bordered:!0},B.A.t("Dataset")),a.createElement(_.w,{bordered:!0},B.A.t("Description")),a.createElement(_.w,null,B.A.t("Timely Submission")),a.createElement(_.w,null,B.A.t("Expiry days")),a.createElement(_.w,null,B.A.t("Period type")),a.createElement(_.w,null,B.A.t("Assigned orgunits")),a.createElement(_.w,null,B.A.t("Data elements")),a.createElement(_.w,null,B.A.t("Legends")))),a.createElement(C.B,null,e.map(e=>(++t,a.createElement(Dt,{key:t,dataSet:e}))))))}const Bt={sources:{resource:"indicators",id:({id:e})=>e,params:{fields:["id","displayName","dataSets[id,displayName,timelyDays,periodType]"]}}};function Pt({id:e}){var t,l;const{loading:n,error:i,data:r,refetch:o}=(0,v.iO)(Bt,{variables:{id:e}});return(0,a.useEffect)(()=>{o({id:e})},[e]),n?a.createElement(V,null):i?a.createElement(F,{error:i}):0===(null===r||void 0===r||null===(t=r.sources)||void 0===t?void 0:t.dataSets.length)?a.createElement("div",null):a.createElement("div",null,a.createElement("h3",null,B.A.t("Data sources (Datasets/Programs)")),a.createElement("p",null,B.A.t("Indicator is captured from the following sources,")),a.createElement("h5",null,"Datasets"),a.createElement("ul",null,null===r||void 0===r||null===(l=r.sources)||void 0===l?void 0:l.dataSets.map(e=>a.createElement("li",{key:null===e||void 0===e?void 0:e.id},a.createElement("b",null,null===e||void 0===e?void 0:e.displayName)," ",B.A.t("submitting {{variables1}} after every {{variables2}} days",{variables1:null===e||void 0===e?void 0:e.periodType,variables2:null===e||void 0===e?void 0:e.timelyDays})))))}Pt.propTypes={id:c().string.isRequired};var kt=l(77337),Gt=l(50433),_t={"indicator-row-link":"indicatorGroupRow_indicator-row-link__aN7cG"};function Ct(e){var t;function l(e){let t;var l;n?t=null===(l=e)||void 0===l?void 0:l.map(e=>a.createElement("li",{key:e.id,className:_t.indicatorRowLink,onClick:()=>o(null===e||void 0===e?void 0:e.id)},null===e||void 0===e?void 0:e.displayName)):t=(e=e.slice(0,3)).map(e=>a.createElement("li",{key:null===e||void 0===e?void 0:e.id,className:_t.indicatorRowLink,onClick:()=>o(null===e||void 0===e?void 0:e.id)},null===e||void 0===e?void 0:e.displayName));return t}const[n,i]=(0,a.useState)(!1),r=(0,Gt.W6)();function o(e){r.replace("/indicator/"+e)}return a.createElement(G.J,null,a.createElement(q.B,{bordered:!0},e.no),a.createElement(q.B,{bordered:!0},e.name),a.createElement(q.B,{bordered:!0},e.code),a.createElement(q.B,{bordered:!0},a.createElement("ol",null,l(null===e||void 0===e?void 0:e.indicators)),(null===e||void 0===e||null===(t=e.indicators)||void 0===t?void 0:t.length)>3?a.createElement(kt.$,{name:"Basic button",onClick:function(){i(!n),l(e.indicators)},value:"default"},B.A.t(n?"Show less":"Show more")):null))}Ct.PropTypes={no:c().number.isRequired,name:c().string.isRequired,code:c().string.isRequired,indicators:c().arrayOf(Object)};const qt={indicatorGroups:{resource:"indicators",id:({id:e})=>e,params:{fields:["indicatorGroups[id,displayName,indicators[id,displayName]]"]}}};function xt({id:e}){var t,l,n;const{loading:i,error:r,data:o,refetch:d}=(0,v.iO)(qt,{variables:{id:e}});if((0,a.useEffect)(()=>{d({id:e})},[e]),i)return a.createElement(V,null);if(r)return a.createElement(F,{error:r});if(null!==o&&void 0!==o&&null!==(t=o.indicatorGroups)&&void 0!==t&&t.indicatorGroups)return a.createElement("p",null,B.A.t(" There are no indicator facts associated with this indicator"));let u=0;return a.createElement("div",null,a.createElement("h3",null,B.A.t("Indicator facts")),a.createElement("p",null,B.A.t("Belongs to the following groups of indicators")),a.createElement("div",null,a.createElement(P.b,null,a.createElement(k.n,null,a.createElement(G.J,null,a.createElement(_.w,null,"#"),a.createElement(_.w,null,B.A.t("Name")),a.createElement(_.w,null,B.A.t("Code")),a.createElement(_.w,null,B.A.t("Indicators")))),a.createElement(C.B,null,null===o||void 0===o||null===(l=o.indicatorGroups)||void 0===l||null===(n=l.indicatorGroups)||void 0===n?void 0:n.map(e=>(u++,a.createElement(Ct,{key:null===e||void 0===e?void 0:e.id,no:u,name:null===e||void 0===e?void 0:e.displayName,code:null===e||void 0===e?void 0:e.id,indicators:null===e||void 0===e?void 0:e.indicators})))))))}xt.PropTypes={id:c().string.isRequired};var Mt={"identify-link":"introduction_identify-link__--rdA"};const Ut={indicatorsDetails:{resource:"indicators",id:({id:e})=>e,params:{fields:["id","name","displayDescription","href","numeratorDescription","denominatorDescription","indicatorType[displayName,id]"]}}};function jt({id:e}){var t;const{loading:l,error:n,data:i,refetch:r}=(0,v.iO)(Ut,{variables:{id:e}});if((0,a.useEffect)(()=>{r({id:e})},[e]),l)return a.createElement(V,null);if(n)return a.createElement(F,{error:n});const o=null===i||void 0===i?void 0:i.indicatorsDetails;return a.createElement("div",null,a.createElement("h2",{id:"test-indicator-details"},null===o||void 0===o?void 0:o.name," "),a.createElement("h3",null,B.A.t("Introduction")),a.createElement("p",null,a.createElement("b",{id:"test-indicator-details"},null===o||void 0===o?void 0:o.name," "),B.A.t("is a"),a.createElement("b",null," ",null===o||void 0===o||null===(t=o.indicatorType)||void 0===t?void 0:t.displayName," "),B.A.t("indicator, measured by"),a.createElement("b",{id:"test-indicator-details"}," ",null===o||void 0===o?void 0:o.numeratorDescription," "),B.A.t("to"),a.createElement("b",{id:"test-indicator-details"}," ",null===o||void 0===o?void 0:o.denominatorDescription," ")),a.createElement("p",{id:"test-indicator-details"},B.A.t("Its described as {{variable}}",{variable:null===o||void 0===o?void 0:o.displayDescription})),a.createElement("p",null,a.createElement("span",null,a.createElement("i",{onClick:()=>onClickIdentified(null===o||void 0===o?void 0:o.id)},B.A.t("Identified by:")," ",a.createElement("span",{id:"test-indicator-details",className:Mt.identifylink}," ",null===o||void 0===o?void 0:o.id," ")," "))))}jt.propTypes={id:c().string.isRequired};function Lt(e){var t;const l=null===e||void 0===e?void 0:e.legendSet;return a.createElement("li",{key:null===l||void 0===l?void 0:l.id},a.createElement("p",null,null===l||void 0===l?void 0:l.displayName," spread accross ",null===l||void 0===l||null===(t=l.legends)||void 0===t?void 0:t.length," ","classes of for analysis"),a.createElement("div",null,a.createElement(P.b,null,a.createElement(k.n,null,a.createElement(G.J,null,a.createElement(_.w,null,B.A.t("Class")),a.createElement(_.w,null,B.A.t("Upper")),a.createElement(_.w,null,B.A.t("Lower")),a.createElement(_.w,null,B.A.t("Color")))),a.createElement(C.B,null,null===l||void 0===l?void 0:l.legends.map(e=>a.createElement(G.J,{key:e.id},a.createElement(q.B,{bordered:!0},null===e||void 0===e?void 0:e.displayName),a.createElement(q.B,{bordered:!0},null===e||void 0===e?void 0:e.endValue),a.createElement(q.B,{bordered:!0},null===e||void 0===e?void 0:e.startValue),a.createElement("td",{bordered:!0,style:{background:null===e||void 0===e?void 0:e.color}})))))))}const Ft={legendAnalysis:{resource:"indicators",id:({id:e})=>e,params:{fields:["id","displayName","legendSets[id,displayName,legends[id,displayName,startValue,endValue,color]]"]}}};function Jt({id:e}){var t,l,n;const{loading:i,error:r,data:o,refetch:d}=(0,v.iO)(Ft,{variables:{id:e}});if((0,a.useEffect)(()=>{d({id:e})},[e]),i)return a.createElement(V,null);if(r)return a.createElement(F,{error:r});if(0===(null===o||void 0===o||null===(t=o.legendAnalysis)||void 0===t||null===(l=t.legendSets)||void 0===l?void 0:l.length))return a.createElement(a.Fragment,null,a.createElement("p",null,"There are no legends associated with these indicator"));const u=null===o||void 0===o||null===(n=o.legendAnalysis)||void 0===n?void 0:n.legendSets;return a.createElement("div",null,a.createElement("h3",null,B.A.t("Legends for analysis")),a.createElement("p",null,B.A.t("Uses {{variables}} legends for for analysis, spread accross multiple cut-off points of interest, existing legends are:",{variables:null===u||void 0===u?void 0:u.length})," "),a.createElement("ul",null,null===u||void 0===u?void 0:u.map(e=>a.createElement(Lt,{key:null===e||void 0===e?void 0:e.id,legendSet:e}))))}Jt.PropTypes={id:c().string.isRequired};const Vt={programIndicator:{resource:"programIndicators",id:({id:e})=>e,params:{fields:["id","displayName","aggregationType","analyticsType","analyticsPeriodBoundaries[id,analyticsPeriodBoundaryType,boundaryTarget]","filter","programIndicatorGroups[id,displayName]","legendSets[id,displayName]"]}}};function $t(e){var t;const l=e.programInd,n=l.id,{loading:i,error:r,data:o}=(0,v.iO)(Vt,{variables:{id:n}}),d=(0,v.ow)(),[u,s]=(0,a.useState)([]),[c,m]=(0,a.useState)([]),[E,p]=(0,a.useState)([]);(0,a.useEffect)(()=>{var e;if(null!==o&&void 0!==o&&null!==(e=o.programIndicator)&&void 0!==e&&e.filter){var t;const e=ee(null===o||void 0===o||null===(t=o.programIndicator)||void 0===t?void 0:t.filter,"#{");e.length&&A(e,0)}},[o]),(0,a.useEffect)(()=>{var e;const t=ee(null===o||void 0===o||null===(e=o.programIndicator)||void 0===e?void 0:e.filter,"A{");t.length&&A(t,3)},[o]),(0,a.useEffect)(()=>{var e;const t=ee(null===o||void 0===o||null===(e=o.programIndicator)||void 0===e?void 0:e.filter,"C{");t.length&&A(t,4)},[o]);const f=[],g=[],y=[],b=ie(null===o||void 0===o||null===(t=o.programIndicator)||void 0===t?void 0:t.filter,u,[],[],c,E);async function A(e,t){const l=[];let n=0;for(n=0;n<e.length;n++){const t=re(d,e[n]);l.push(t)}n=0,await Promise.all(l).then(l=>{t===S.DATA_ELEMENT&&l.map(t=>{t.length>1?f.push({id:e[n],val:t[0]+" "+t[1]}):f.push({id:e[n],val:t[0]}),++n}),t===S.ATTRIBUTES&&l.map(t=>{g.push({id:e[n],val:t[0]}),++n}),t===S.CONSTANTS&&l.map(t=>{y.push({id:e[n],val:t[0]}),++n}),f.length===e.length&&s(f),g.length===e.length&&m(g),y.length===e.length&&p(y)})}return a.createElement(G.J,null,a.createElement(q.B,{bordered:!0},null===l||void 0===l?void 0:l.val),a.createElement(q.B,{bordered:!0},null===l||void 0===l?void 0:l.location),(h=null===o||void 0===o?void 0:o.programIndicator,a.createElement(a.Fragment,null,a.createElement(q.B,{bordered:!0},b),a.createElement(q.B,{bordered:!0},null===h||void 0===h?void 0:h.aggregationType),a.createElement(q.B,{bordered:!0},null===h||void 0===h?void 0:h.analyticsType),a.createElement(q.B,{bordered:!0},a.createElement("ol",null,null===h||void 0===h?void 0:h.analyticsPeriodBoundaries.map(e=>{var t;return a.createElement("li",{key:e.id},ae(null===e||void 0===e||null===(t=e.analyticsPeriodBoundaryType)||void 0===t?void 0:t.replace(/_/g," ")))}))),a.createElement(q.B,{bordered:!0},a.createElement("ol",null,null===h||void 0===h?void 0:h.legendSets.map(e=>a.createElement("li",{key:e.id},null===e||void 0===e?void 0:e.displayName)))),a.createElement(q.B,{bordered:!0},a.createElement("ol",null,null===h||void 0===h?void 0:h.programIndicatorGroups.map(e=>a.createElement("li",{key:e.id},null===e||void 0===e?void 0:e.displayName)))))));var h}function zt(){const e=(0,r.useRecoilValue)(p);if(0===e.length)return a.createElement("div",null,a.createElement("h3",null,B.A.t("Program Indicators in indicator")," "),a.createElement("p",null,B.A.t("There were no Program Indicators in the Indicator Calculations")," "));let t=0;return a.createElement("div",null,a.createElement("h3",null,B.A.t("Program Indicators in indicator")," "),a.createElement("p",null,B.A.t("The following is the summary of the program indicators used in calculations:")," "),a.createElement(P.b,null,a.createElement(k.n,null,a.createElement(G.J,null,a.createElement(_.w,{bordered:!0},B.A.t("Program Indicator")),a.createElement(_.w,{bordered:!0},B.A.t("Expression part")),a.createElement(_.w,null,B.A.t("Filter")),a.createElement(_.w,null,B.A.t("Aggregation type")),a.createElement(_.w,null,B.A.t("Analytics type")),a.createElement(_.w,null,B.A.t("Period boundaries")),a.createElement(_.w,null,B.A.t("Legends")),a.createElement(_.w,null,B.A.t("Groups")))),a.createElement(C.B,null,e.map(e=>(++t,a.createElement($t,{key:t,programInd:e}))))))}function Wt({id:e}){const t=(0,r.useRecoilCallback)(({reset:e})=>()=>{e(E),e(f),e(p)});return(0,a.useEffect)(()=>()=>{t()},[e]),a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.createElement(jt,{id:e}),a.createElement(Pt,{id:e}),a.createElement(xt,{id:e}),a.createElement(Jt,{id:e}),a.createElement(xe,{id:e}),a.createElement(wt,null),a.createElement(zt,null),a.createElement(Ot,null),a.createElement(W,{id:e,resourceType:"indicators"}))}function Kt({aggregate:e}){var t;const l=(0,r.useSetRecoilState)(b),n=(0,r.useSetRecoilState)(T),o=null===e||void 0===e?void 0:e.map(e=>e.split(".")[0]);n(e=>i().concat(e,o));const d=(0,v.ow)(),u=null===e||void 0===e?void 0:e.map(e=>null===e||void 0===e?void 0:e.split(".")[0]),{loading:s,error:c,data:m}=Oe(u,d);let E=[];return(0,a.useEffect)(()=>{var e;null===m||void 0===m||null===(e=m.dataSets)||void 0===e||e.map(e=>{e.map(e=>{E.push(e)})}),E=i().uniqWith(E,i().isEqual),l(e=>i().concat(e,E))},[m]),s?a.createElement(V,{text:""}):c?a.createElement(F,{error:c}):a.createElement("div",null,B.A.t("Datasets"),a.createElement("ul",null,null===(t=E)||void 0===t?void 0:t.map(e=>a.createElement("li",{key:null===e||void 0===e?void 0:e.id},null===e||void 0===e?void 0:e.displayName," ",B.A.t(" submitting ")," ",null===e||void 0===e?void 0:e.periodType," ",B.A.t(" after every ")," ",null===e||void 0===e?void 0:e.timelyDays," ",B.A.t(" days")," "))))}Wt.propTypes={id:c().string.isRequired},Kt.propTypes={aggregate:c().array.isRequired};const Zt={identifiableObjects:{resource:"identifiableObjects",id:({id:e})=>e,params:{fields:["id","displayName"]}}},Ht={program:{resource:"programIndicators",id:({id:e})=>e,params:{fields:["program[id,displayName]"]}}};async function Yt(e,t){if((null===t||void 0===t?void 0:t.length)>0){const l=null===t||void 0===t?void 0:t.map(t=>new Promise((l,n)=>{l(async function(e,t){const l=await e.query(Zt,{variables:{id:t}});return null===l||void 0===l?void 0:l.identifiableObjects}(e,t))}));return await Promise.all(l).then(e=>e.map((e,t)=>e))}}async function Xt(e,t){if((null===t||void 0===t?void 0:t.length)>0){const l=null===t||void 0===t?void 0:t.map(t=>new Promise((l,n)=>{l(async function(e,t){var l;const n=await e.query(Ht,{variables:{id:t}});return null===n||void 0===n||null===(l=n.program)||void 0===l?void 0:l.program}(e,t))}));return await Promise.all(l).then(e=>e.map((e,t)=>e))}}function Qt({sources:e}){var t;const l=(0,v.ow)(),n=(0,r.useSetRecoilState)(A),o=(0,r.useSetRecoilState)(h),{loading:d,error:u,data:s}=function(e,t){const[l,n]=(0,a.useState)(!0),[i,r]=(0,a.useState)(!1),[o,d]=(0,a.useState)();return(0,a.useEffect)(()=>{let l=null===e||void 0===e?void 0:e.attr,i=null===e||void 0===e?void 0:e.prgDtEl,a=null===e||void 0===e?void 0:e.prgInd;(async function(){l=await Yt(t,l),i=await Yt(t,i),a=await Xt(t,a)})().then(()=>{d({attr:l,prgInd:a,prgDtEl:i}),n(!1)}).catch(e=>{n(!1),r(e)})},[]),{loading:l,error:i,data:o}}(e,l);let c=[],m=[];return(0,a.useEffect)(()=>{var t,l,a;o(t=>i().concat(t,null===e||void 0===e?void 0:e.prgDtEl)),c=i().concat([],null!==(t=null===s||void 0===s?void 0:s.attr)&&void 0!==t?t:[],null!==(l=null===s||void 0===s?void 0:s.prgInd)&&void 0!==l?l:[],null!==(a=null===s||void 0===s?void 0:s.prgDtEl)&&void 0!==a?a:[]),m=i().uniqWith(c,i().isEqual),n(e=>i().concat(e,m))},[s]),d?a.createElement(V,{text:""}):u?a.createElement(F,{error:u}):(null===(t=c)||void 0===t?void 0:t.length)>0?a.createElement("div",null,"Programs",a.createElement("ul",null,null===(E=m)||void 0===E?void 0:E.map((e,t)=>a.createElement("li",{key:t},a.createElement("b",null,null===e||void 0===e?void 0:e.displayName)," ",B.A.t("submitting records on every event(case or individual)")," ")))):a.createElement(a.Fragment,null);var E}const el={sources:{resource:"indicatorGroups",id:({id:e})=>e,params:{fields:["indicators[id,displayName,numerator,denominator]"]}}};function tl({id:e}){var t,l;const{loading:n,error:o,data:d,refetch:u}=(0,v.iO)(el,{variables:{id:e}});(0,a.useEffect)(()=>{u({id:e})},[e]);const[s,c]=(0,a.useState)({}),m=(0,r.useSetRecoilState)(N),E=(0,r.useSetRecoilState)(R);return(0,a.useEffect)(()=>{var e,t,l,n;let a,r,o,u;const s=null===d||void 0===d||null===(e=d.sources)||void 0===e||null===(t=e.indicators)||void 0===t?void 0:t.map(e=>(a=ee(null===e||void 0===e?void 0:e.numerator,O.DATA_ELEMENT),r=ee(null===e||void 0===e?void 0:e.denominator,O.DATA_ELEMENT),[...a,...r])),v=null===d||void 0===d||null===(l=d.sources)||void 0===l||null===(n=l.indicators)||void 0===n?void 0:n.map(e=>{o=ee(null===e||void 0===e?void 0:e.numerator,O.PROGRAM_DATA_ELEMENT),u=ee(null===e||void 0===e?void 0:e.denominator,O.PROGRAM_DATA_ELEMENT);return{prgInd:i().concat([],ee(null===e||void 0===e?void 0:e.numerator,O.PROGRAM_INDICATOR),ee(null===e||void 0===e?void 0:e.denominator,O.PROGRAM_INDICATOR)),attr:i().concat([],ee(null===e||void 0===e?void 0:e.numerator,O.ATTRIBUTES),ee(null===e||void 0===e?void 0:e.denominator,O.ATTRIBUTES)),prgDtEl:[...o,...u]}});c({sourcesDataElement:s,sourceProgram:v}),m({aggregate:a,tracker:o}),E({aggregate:r,tracker:u})},[d]),n?a.createElement(V,{text:""}):o?a.createElement(F,{error:o}):a.createElement("div",null,a.createElement("h3",null,B.A.t("Data sources (Datasets/Programs)")," "),a.createElement("p",null," ",B.A.t("Indicators in this group are captured from the following sources")," "),a.createElement("ul",null,s.sourcesDataElement?null===d||void 0===d||null===(t=d.sources)||void 0===t||null===(l=t.indicators)||void 0===l?void 0:l.map((e,t)=>{var l;return a.createElement("li",null,a.createElement("b",null," ",null===e||void 0===e?void 0:e.displayName," "),a.createElement(Kt,{aggregate:null!==(l=null===s||void 0===s?void 0:s.sourcesDataElement[t])&&void 0!==l?l:[]}),a.createElement(Qt,{sources:null===s||void 0===s?void 0:s.sourceProgram[t]}))}):""))}tl.propTypes={id:c().string.isRequired};const ll={sources:{resource:"indicatorGroups",id:({id:e})=>e,params:{fields:["indicators"]}}};function nl({id:e}){var t,l,n,o;const{loading:d,error:u,data:s,refetch:c}=(0,v.iO)(ll,{variables:{id:e}});(0,a.useEffect)(()=>{c({id:e})},[e]);let m=(0,r.useRecoilValue)(b),E=(0,r.useRecoilValue)(A),p=(0,r.useRecoilValue)(h),f=(0,r.useRecoilValue)(T);if(d)return a.createElement(V,{text:""});if(u)return a.createElement(F,{error:u});m=i().uniqWith(m,i().isEqual),E=i().uniqWith(E,i().isEqual),f=i().uniqWith(f,i().isEqual),p=p.map(e=>{var t;return{id:null!==(t=e.split(".")[1])&&void 0!==t?t:""}}),f=f.map(e=>({id:e}));const g=[...p,...f];return a.createElement("div",null,a.createElement("h3",null,B.A.t("Indicator group Facts")),a.createElement("ul",null,a.createElement("li",null," ",B.A.t(" It has {{variables}} indicators",{variables:null===s||void 0===s||null===(t=s.sources)||void 0===t||null===(l=t.indicators)||void 0===l?void 0:l.length})," "),a.createElement("li",null,B.A.t(" It\u2019s data elements belongs to {{variables}} datasets and {{variables2}} program sources of data",{variables:null===(n=m)||void 0===n?void 0:n.length,variables2:null===(o=E)||void 0===o?void 0:o.length})),a.createElement("li",null,a.createElement(Xe,{dataElementsArray:g}))))}const il={dataElementGroups:{resource:"indicatorGroups",id:({id:e})=>e,params:{fields:["id","displayName","href"]}}};function al({id:e}){const{loading:t,error:l,data:n,refetch:i}=(0,v.iO)(il,{variables:{id:e}});(0,a.useEffect)(()=>{i({id:e})},[e]);const r=null===n||void 0===n?void 0:n.dataElementGroups;return t?a.createElement(V,{text:""}):l?a.createElement(F,{error:l}):a.createElement("div",null,a.createElement("h2",null,null===r||void 0===r?void 0:r.displayName),a.createElement("h3",null,B.A.t("Introduction")," "),a.createElement("p",null," ",B.A.t("Indicator Group name is  {{variables1}}.",{variables1:null===r||void 0===r?void 0:r.displayName})),a.createElement(tt,{href:null===r||void 0===r?void 0:r.href,id:null===r||void 0===r?void 0:r.id}))}const rl={program:{resource:"identifiableObjects",id:({id1:e})=>e,params:{fields:["displayName"]}},dataElementInIndicator:{resource:"dataElements",id:({id2:e})=>e,params:{fields:["id","displayName","valueType","zeroIsSignificant","dataElementGroups[id,displayName]","categoryCombo[categories[id,displayName]]"]}}};function ol({id:e,location:t}){var l,n,i,r,o,d,u,s;const c=null===e||void 0===e?void 0:e.split(".")[0],m=null===e||void 0===e?void 0:e.split(".")[1],{loading:E,error:p,data:f}=(0,v.iO)(rl,{variables:{id1:c,id2:m}});return E?a.createElement(V,null):p?a.createElement(F,{error:""}):a.createElement(G.J,null,a.createElement(q.B,{bordered:!0},null===f||void 0===f||null===(l=f.dataElementInIndicator)||void 0===l?void 0:l.displayName),a.createElement(q.B,{bordered:!0},t),a.createElement(q.B,{bordered:!0},null===f||void 0===f||null===(n=f.dataElementInIndicator)||void 0===n?void 0:n.valueType),a.createElement(q.B,{bordered:!0},JSON.stringify(null===f||void 0===f||null===(i=f.dataElementInIndicator)||void 0===i?void 0:i.zeroIsSignificant)),a.createElement(q.B,{bordered:!0},a.createElement("ol",null,null===f||void 0===f||null===(r=f.dataElementInIndicator)||void 0===r||null===(o=r.categoryCombo)||void 0===o?void 0:o.categories.map(e=>a.createElement("li",{key:null===e||void 0===e?void 0:e.id},null===e||void 0===e?void 0:e.displayName)))),a.createElement(q.B,{bordered:!0},null===f||void 0===f||null===(d=f.program)||void 0===d?void 0:d.displayName),a.createElement(q.B,{bordered:!0},a.createElement("ol",null,null===f||void 0===f||null===(u=f.dataElementInIndicator)||void 0===u||null===(s=u.dataElementGroups)||void 0===s?void 0:s.map(e=>a.createElement("li",{key:null===e||void 0===e?void 0:e.id},null===e||void 0===e?void 0:e.displayName)))))}ol.propTypes={id:c().string.isRequired,location:c().string.isRequired};const dl={dataElementInIndicator:{resource:"dataElements",id:({id:e})=>e,params:{fields:["id","displayName","valueType","zeroIsSignificant","dataSetElements[dataSet[id,displayName]]","dataElementGroups[id,displayName]","categoryCombo[categories[id,displayName]]"]}}};function ul({id:e,location:t}){var l,n,i,r,o,d,u,s,c;let m;if(ue(e))m=E(e).dataElementInIndicator;else{m=E(e.split(".")[0]).dataElementInIndicator}function E(e){const{loading:t,error:l,data:n}=(0,v.iO)(dl,{variables:{id:e}});return t?a.createElement(V,null):l?a.createElement(F,{error:""}):n}return a.createElement(G.J,null,a.createElement(q.B,{bordered:!0},null===(l=m)||void 0===l?void 0:l.displayName),a.createElement(q.B,{bordered:!0},t),a.createElement(q.B,{bordered:!0},null===(n=m)||void 0===n?void 0:n.valueType),a.createElement(q.B,{bordered:!0},JSON.stringify(null===(i=m)||void 0===i?void 0:i.zeroIsSignificant)),a.createElement(q.B,{bordered:!0},a.createElement("ol",null,null===(r=m)||void 0===r||null===(o=r.categoryCombo)||void 0===o?void 0:o.categories.map(e=>a.createElement("li",{key:null===e||void 0===e?void 0:e.id},null===e||void 0===e?void 0:e.displayName)))),a.createElement(q.B,{bordered:!0},a.createElement("ol",null,null===(d=m)||void 0===d||null===(u=d.dataSetElements)||void 0===u?void 0:u.map(e=>{var t,l;return a.createElement("li",{key:null===e||void 0===e||null===(t=e.dataSet)||void 0===t?void 0:t.id},null===e||void 0===e||null===(l=e.dataSet)||void 0===l?void 0:l.displayName)}))),a.createElement(q.B,{bordered:!0},a.createElement("ol",null,null===(s=m)||void 0===s||null===(c=s.dataElementGroups)||void 0===c?void 0:c.map(e=>a.createElement("li",{key:null===e||void 0===e?void 0:e.id},null===e||void 0===e?void 0:e.displayName)))))}ul.propTypes={id:c().string.isRequired,location:c().string.isRequired};function sl(){var e,t,l,n;const i=(0,r.useRecoilValue)(N),o=(0,r.useRecoilValue)(R);return a.createElement("div",null,a.createElement("h3",null,B.A.t("Related Data elements")," "),a.createElement("p",null,B.A.t("The following is the summary of the data elements used in the group")),a.createElement(P.b,null,a.createElement(k.n,null,a.createElement(G.J,null,a.createElement(_.w,{bordered:!0},B.A.t("Data Element")),a.createElement(_.w,{bordered:!0},B.A.t("Expression part (Numerator/ Denominator)")),a.createElement(_.w,null,B.A.t("Value Type")),a.createElement(_.w,null,B.A.t("Zero Significance")),a.createElement(_.w,null,B.A.t("Categories")),a.createElement(_.w,null,B.A.t("Datasets/ Programs")),a.createElement(_.w,null,B.A.t("Groups")))),a.createElement(C.B,null,null===i||void 0===i||null===(e=i.aggregate)||void 0===e?void 0:e.map(e=>a.createElement(ul,{key:e,id:e,location:"numerator"})),null===i||void 0===i||null===(t=i.tracker)||void 0===t?void 0:t.map(e=>a.createElement(ol,{key:e,id:e,location:"numerator"})),null===o||void 0===o||null===(l=o.aggregate)||void 0===l?void 0:l.map(e=>a.createElement(ul,{key:e,id:e,location:"denominator"})),null===o||void 0===o||null===(n=o.tracker)||void 0===n?void 0:n.map(e=>a.createElement(ol,{key:e,id:e,location:"denominator"})))))}function cl(e){const t=e.id;return a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.createElement(al,{id:t}),a.createElement(tl,{id:t}),a.createElement(nl,{id:t}),a.createElement(sl,null),a.createElement(W,{id:t,resourceType:"indicatorGroups"}))}function ml(e){var t,l;const n=e.target,i=e.analyticsPeriodBoundaryType,r=e.offsetPeriod,o=e.periodType;return a.createElement(G.J,null,a.createElement(q.B,{bordered:!0},null===(t=ae(n))||void 0===t?void 0:t.replace(/_/g," ")),a.createElement(q.B,{bordered:!0},null===(l=ae(i))||void 0===l?void 0:l.replace(/_/g," ")),a.createElement(q.B,{bordered:!0,b:!0},r),a.createElement(q.B,{bordered:!0},o))}function vl(e){const t=e.rows;return a.createElement(P.b,null,a.createElement(k.n,null,a.createElement(G.J,null,a.createElement(_.w,null,"Boundary target"),a.createElement(_.w,null,"Analytics period boundary type"),a.createElement(_.w,null,"Offset period by amount"),a.createElement(_.w,null,"Period type"))),a.createElement(C.B,null,null===t||void 0===t?void 0:t.map(e=>a.createElement(ml,{key:null===e||void 0===e?void 0:e.id,tableDetail:null===e||void 0===e?void 0:e.analyticsPeriodBoundaries,target:null===e||void 0===e?void 0:e.boundaryTarget,analyticsPeriodBoundaryType:null===e||void 0===e?void 0:e.analyticsPeriodBoundaryType,offsetPeriod:null===e||void 0===e?void 0:e.offsetPeriods,periodType:null===e||void 0===e?void 0:e.offsetPeriodType}))))}function El({expression:e,filter:t}){return a.createElement(P.b,null,a.createElement(k.n,null,a.createElement(G.J,null,a.createElement(_.w,null),a.createElement(_.w,null,B.A.t("Expression")),a.createElement(_.w,null,B.A.t("Filter")))),a.createElement(C.B,null,a.createElement(G.J,null,a.createElement(q.B,{bordered:!0,tag:"th"},B.A.t("Details")),a.createElement(q.B,{bordered:!0},a.createElement(Be,{formula:e})),a.createElement(q.B,{bordered:!0},a.createElement(Be,{formula:t})))))}cl.PropTypes={id:c().string.isRequired},El.propTypes={expression:c().string.isRequired,filter:c().string.isRequired};const pl={calculation:{resource:"programIndicators",id:({id:e})=>e,params:{fields:["analyticsType","aggregationType","expression","filter","analyticsPeriodBoundaries[id,boundaryTarget,analyticsPeriodBoundaryType,offsetPeriods,offsetPeriodType]"]}}};function fl({id:e}){const{loading:t,error:l,data:n,refetch:i}=(0,v.iO)(pl,{variables:{id:e}});if((0,a.useEffect)(()=>{i({id:e})},[e]),t)return a.createElement(V,{text:""});if(l)return a.createElement(F,{error:l});const r=null===n||void 0===n?void 0:n.calculation;return a.createElement("div",null,a.createElement("h3",null,B.A.t(" Calculation details")),a.createElement("p",null,B.A.t("Calculation of the values will be {{variables}} of {{variables2}} across orgunit and period.",{variables:null===r||void 0===r?void 0:r.aggregationType,variables2:null===r||void 0===r?void 0:r.analyticsType})),a.createElement("p",null,B.A.t("Program indicator calculation will be based on Analytics Type, for distinction purposes:")),a.createElement("ul",null,(null===r||void 0===r?void 0:r.analyticsType)===D.EVENT?a.createElement("li",null,B.A.t(" Events implies, each event from data source is considered as independent row to be counted, and properties and details of the event are used to filter events.")):(null===r||void 0===r?void 0:r.analyticsType)===D.ENROLLMENT?a.createElement("li",null,B.A.t("Enrollment implies, each enrollment from data source is considered as independent row to be counted, and events from any stage and other properties and details of enrollment are used to filter enrollments.")):""),a.createElement("div",null,a.createElement("p",null,B.A.t("Below are expression details on computing program indicator and it\u2019s related data source"))),a.createElement("div",null,a.createElement(El,{expression:null===r||void 0===r?void 0:r.expression,filter:null===r||void 0===r?void 0:r.filter})),a.createElement("div",null,a.createElement("p",null,B.A.t("Below are period boundaries that determines which {{variables}} will be included in calculations of the program indicators, where for",{variables:ae(null===r||void 0===r?void 0:r.analyticsType)}),(null===r||void 0===r?void 0:r.analyticsType)===D.EVENT?B.A.t(" event date will be used."):(null===r||void 0===r?void 0:r.analyticsType)===D.ENROLLMENT?B.A.t("enrollment analytics will be used."):"")),a.createElement("div",null,a.createElement(vl,{rows:null===r||void 0===r?void 0:r.analyticsPeriodBoundaries})))}const gl={sources:{resource:"programIndicators",id:({id:e})=>e,params:{fields:["program[id,displayName]"]}}};function yl({id:e}){var t,l;const{loading:n,error:i,data:r,refetch:o}=(0,v.iO)(gl,{variables:{id:e}});return(0,a.useEffect)(()=>{o({id:e})},[e]),n?a.createElement(V,{text:""}):i?a.createElement(F,{error:i}):a.createElement("div",null," ",B.A.t("Program Indicator is captured from with following program"),a.createElement("ul",null,a.createElement("li",null,B.A.t("{{variables}} submitting records on every event",{variables:null===r||void 0===r||null===(t=r.sources)||void 0===t||null===(l=t.program)||void 0===l?void 0:l.displayName}))))}var bl={"indicator-row-link":"indicatorGroupRow_indicator-row-link__B57i1"};function Al({list:e}){const[t,l]=(0,a.useState)(!1),[n,i]=(0,a.useState)(e.slice(0,3)),r=(0,Gt.W6)();function o(){i(t=>{const l=t;return t.length>3?[...l.slice(0,3)]:e}),l(!t)}function d(e){r.replace("/programIndicator/"+e)}return t?a.createElement(a.Fragment,null,a.createElement("ul",null,null===n||void 0===n?void 0:n.map(e=>a.createElement("li",{key:e.id,className:bl["indicator-row-link"],onClick:()=>d(null===e||void 0===e?void 0:e.id)},null===e||void 0===e?void 0:e.displayName))),e.length>3?a.createElement(kt.$,{name:"Basic button",onClick:o,value:"default"},t?B.A.t("show less"):B.A.t("show more")):null):a.createElement(a.Fragment,null,a.createElement("ul",null,n.map(e=>a.createElement("li",{key:null===e||void 0===e?void 0:e.id,className:bl["indicator-row-link"],onClick:()=>d(null===e||void 0===e?void 0:e.id)},null===e||void 0===e?void 0:e.displayName))),e.length>3?a.createElement(kt.$,{name:"Basic button",onClick:o,value:"default"},t?B.A.t("show less"):B.A.t("show more")):null)}function hl({no:e,name:t,code:l,indicators:n}){return a.createElement(G.J,null,a.createElement(q.B,{bordered:!0},e),a.createElement(q.B,{bordered:!0},t),a.createElement(q.B,{bordered:!0},l),a.createElement(q.B,{bordered:!0},a.createElement(Al,{list:n})))}Al.propTypes={list:c().array.isRequired},hl.propTypes={no:c().string.isRequired,name:c().string.isRequired,code:c().string.isRequired,indicators:c().array.isRequired};const Tl={indicatorGroups:{resource:"programIndicators",id:({id:e})=>e,params:{fields:["programIndicatorGroups[id,code,displayName,programIndicators[id,displayName]]"]}}};function Nl({id:e}){var t,l,n,i;const{loading:r,error:o,data:d,refetch:u}=(0,v.iO)(Tl,{variables:{id:e}});return(0,a.useEffect)(()=>{u({id:e})},[e]),r?a.createElement(V,{text:""}):o?a.createElement(F,{error:o}):0===(null===d||void 0===d||null===(t=d.indicatorGroups)||void 0===t||null===(l=t.programIndicatorGroups)||void 0===l?void 0:l.length)?a.createElement("p",null,B.A.t("There are no indicator facts associated with this Program Indicator")," "):a.createElement("div",null,a.createElement("h3",null,B.A.t("Program Indicator facts")," "),a.createElement("p",null,B.A.t("Belongs to the following program groups of indicators")," "),a.createElement("div",null,a.createElement(P.b,null,a.createElement(k.n,null,a.createElement(G.J,null,a.createElement(_.w,null,B.A.t("#")),a.createElement(_.w,null,B.A.t("Name")),a.createElement(_.w,null,B.A.t("Code")),a.createElement(_.w,null,B.A.t("Indicators")))),a.createElement(C.B,null,null===d||void 0===d||null===(n=d.indicatorGroups)||void 0===n||null===(i=n.programIndicatorGroups)||void 0===i?void 0:i.map((e,t)=>a.createElement(hl,{key:null===e||void 0===e?void 0:e.id,no:t,name:null===e||void 0===e?void 0:e.displayName,code:null===e||void 0===e?void 0:e.code,indicators:null===e||void 0===e?void 0:e.programIndicators}))))))}Nl.prototype={id:c().string.isRequired};const Rl={programIndicators:{resource:"programIndicators",id:({id:e})=>e,params:{fields:["id","displayName","displayDescription","aggregationType","displayShortName","code","decimals","displayInForm","href"]}}};function Sl({id:e}){const{loading:t,error:l,data:n,refetch:i}=(0,v.iO)(Rl,{variables:{id:e}});if((0,a.useEffect)(()=>{i({id:e})},[e]),t)return a.createElement(V,{text:""});if(l)return a.createElement(F,{error:l});const r=null===n||void 0===n?void 0:n.programIndicators;return a.createElement("div",null,a.createElement("h2",null,null===r||void 0===r?void 0:r.displayName),a.createElement("h3",null,B.A.t("Introduction")," "),a.createElement("p",null,B.A.t("{{variables1}} is a {{variables2}} indicator, described as {{variables3}}. It\u2019s labelled in short as {{variables4}} and has a code of {{variables5}}. In analytics it displays up to {{variables6}} decimals.",{variables1:null===r||void 0===r?void 0:r.displayName,variables2:null===r||void 0===r?void 0:r.aggregationType,variables3:null===r||void 0===r?void 0:r.displayDescription,variables4:null===r||void 0===r?void 0:r.displayShortName,variables5:null===r||void 0===r?void 0:r.code,variables6:null===r||void 0===r?void 0:r.decimals}),null!==r&&void 0!==r&&r.displayInForm?B.A.t("It is also set to display in form"):""),a.createElement(tt,{href:null===r||void 0===r?void 0:r.href,id:null===r||void 0===r?void 0:r.id}))}function wl(e){var t;const l=null===e||void 0===e?void 0:e.legendSet;return a.createElement("li",{key:null===l||void 0===l?void 0:l.id},a.createElement("p",null,null===l||void 0===l?void 0:l.displayName," spread accross ",null===l||void 0===l||null===(t=l.legends)||void 0===t?void 0:t.length," ","classes of for analysis"),a.createElement("div",null,a.createElement(P.b,null,a.createElement(k.n,null,a.createElement(G.J,null,a.createElement(_.w,null,B.A.t("Class")),a.createElement(_.w,null,B.A.t("Upper")),a.createElement(_.w,null,B.A.t("Lower")),a.createElement(_.w,null,B.A.t("Color")))),a.createElement(C.B,null,null===l||void 0===l?void 0:l.legends.map(e=>a.createElement(G.J,{key:e.id},a.createElement(q.B,{bordered:!0},null===e||void 0===e?void 0:e.displayName),a.createElement(q.B,{bordered:!0},null===e||void 0===e?void 0:e.endValue),a.createElement(q.B,{bordered:!0},null===e||void 0===e?void 0:e.startValue),a.createElement("td",{bordered:!0,style:{background:null===e||void 0===e?void 0:e.color}})))))))}Sl.PropTypes={id:c().string.isRequired};const Il={legendAnalysis:{resource:"programIndicators",id:({id:e})=>e,params:{fields:["id","displayName","legendSets[id,displayName,legends[id,displayName,startValue,endValue,color]]"]}}};function Dl({id:e}){var t,l,n;const{loading:i,error:r,data:o,refetch:d}=(0,v.iO)(Il,{variables:{id:e}});if((0,a.useEffect)(()=>{d({id:e})},[e]),i)return a.createElement(V,{text:""});if(r)return a.createElement(F,{error:r});if(0===(null===o||void 0===o||null===(t=o.legendAnalysis)||void 0===t||null===(l=t.legendSets)||void 0===l?void 0:l.length))return a.createElement(a.Fragment,null,a.createElement("p",null,B.A.t("There are no legends associated with these Program Indicator")," "));const u=null===o||void 0===o||null===(n=o.legendAnalysis)||void 0===n?void 0:n.legendSets;return a.createElement("div",null,a.createElement("h3",null,B.A.t("Legends for analysis")," "),a.createElement("p",null,B.A.t("Uses {{variables}} legends for for analysis, spread across multiple cut-off points of interest, existing legends are:",{variables:null===u||void 0===u?void 0:u.length})),a.createElement("ul",null,null===u||void 0===u?void 0:u.map(e=>a.createElement(wl,{key:null===e||void 0===e?void 0:e.id,legendSet:e}))))}function Ol({id:e}){return a.createElement("div",null,a.createElement("h3",null,B.A.t("Related Indicators")," "),a.createElement(ke,{id:e}))}function Bl({id:e}){return a.createElement("div",null,a.createElement(Sl,{id:e}),a.createElement(yl,{id:e}),a.createElement(Nl,{id:e}),a.createElement(Dl,{id:e}),a.createElement(Ol,{id:e,resourceType:"Program Indicator"}),a.createElement(fl,{id:e}),a.createElement(ze,{resourceType:"Program Indicator"}),a.createElement(W,{id:e,resourceType:"programIndicators"}))}var Pl=l(74179),kl=l(31594);function Gl({type:e,id:t}){const l=(0,v.ow)(),n=(0,r.useRecoilCallback)(({reset:e})=>()=>{e(E),e(f),e(p),e(g),e(y),e(b),e(A),e(h),e(T),e(N),e(R)}),[i,o]=(0,a.useState)(e),[d,u]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{!async function(){u(!0);try{var e;o(null===(e=await(0,kl.qK)(l,t))||void 0===e?void 0:e.type)}catch(n){console.error(n)}finally{u(!1)}}()},[l,t]),(0,a.useEffect)(()=>()=>{n()},[t]),d?a.createElement(Pl.VI,null):i===w.INDICATOR?a.createElement(Wt,{id:t}):i===w.DATA_ELEMENT||i===w.PROGRAM_DATA_ELEMENT?a.createElement(_e,{id:t}):i===w.PROGRAM_INDICATOR?a.createElement(Bl,{id:t}):i===w.DATA_ELEMENT_GROUP?a.createElement(rt,{id:t}):i===w.INDICATOR_GROUP?a.createElement(cl,{id:t}):i===w.FUNCTION?a.createElement(Nt,{id:t}):null}function _l(){var e;const t=null!==(e=(0,r.useRecoilValue)(o.v))&&void 0!==e?e:[],[l,i]=(0,a.useState)((0,n.head)(t));return a.createElement("div",{style:{overflow:"hidden"},className:"column"},a.createElement(m,{selectedTab:l,dataSources:t,onTabChange:i}),a.createElement("div",{style:{overflow:"auto",maxHeight:"100%",flex:1,padding:" 0 16px"}},a.createElement(Gl,{type:null===l||void 0===l?void 0:l.type,id:null===l||void 0===l?void 0:l.id})))}Gl.propTypes={id:c().string.isRequired,type:c().oneOf(Object.values(w)).isRequired}}}]);
//# sourceMappingURL=3992.6e925cf9.chunk.js.map