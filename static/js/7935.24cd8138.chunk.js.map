{"version":3,"file":"static/js/7935.24cd8138.chunk.js","mappings":"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","sources":["D2App/modules/Main/Components/ScoreCardManagement/Components/Access/Components/OrgUnitFilter/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/Access/hooks/useAccessManage.js","D2App/modules/Main/Components/ScoreCardManagement/Components/Access/Components/Sharing/utils.js","D2App/modules/Main/Components/ScoreCardManagement/Components/Access/Components/Sharing/Components/SharingList/Components/SharingMenu.js","D2App/modules/Main/Components/ScoreCardManagement/Components/Access/Components/Sharing/Components/SharingList/Components/SingleSharingComponent.js","D2App/modules/Main/Components/ScoreCardManagement/Components/Access/Components/Sharing/Components/SharingList/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/Access/Components/Sharing/Components/UserAndUserGroupSelector/hooks/useSearch.js","D2App/modules/Main/Components/ScoreCardManagement/Components/Access/Components/Sharing/Components/UserAndUserGroupSelector/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/Access/Components/Sharing/Components/SharingList/Components/AddSharingAccess.js","D2App/modules/Main/Components/ScoreCardManagement/Components/Access/Components/Sharing/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/Instructions.js","D2App/modules/Main/Components/ScoreCardManagement/Components/General/utils/utils.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSourceConfiguration/Components/TargetsArea/components/LegendsField.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSourceConfiguration/Components/TargetsArea/components/LevelTargetsField.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSourceConfiguration/Components/OrgUnitLevelSpecificTargetsModal/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSourceConfiguration/Components/OrgUnitSpecificTargetsModal/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSourceConfiguration/Components/PeriodSpecificTargetsModal/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSourceConfiguration/Components/TargetsArea/components/SpecificTargetView.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSourceConfiguration/Components/TargetsArea/components/TargetsField.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSourceConfiguration/Components/TargetsArea/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataSourceConfigurationForm/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSourceConfiguration/Components/Form/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSourceConfiguration/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/EmptyDataGroups.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/PreviewScorecardTable/Components/CustomLinkedCell.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/PreviewScorecardTable/Components/PreviewCustomCell.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/PreviewScorecardTable/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSourceSelectorModal/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataGroup/Components/Accordions.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataGroup/Components/EditTitle.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataGroup/Components/GroupTitle.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSource/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSourceHolder/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataGroup/Components/LinkingContainer.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/hooks/useLinkManage.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataGroup/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/hooks/useDataGroupManage.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/hooks/useDataGroupLayout.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/hooks/useDataHolders.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataGroup/utils.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/DataGroupArea.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/utils.js","webpack://@dhis2/app-shell/./src/D2App/modules/Main/Components/ScoreCardManagement/ScorecardManagement.module.css?4a6b","D2App/modules/Main/Components/ScoreCardManagement/Components/General/Components/LegendDefinitionFormField/hooks/useResetLegends.js","D2App/modules/Main/Components/ScoreCardManagement/Components/General/Components/LegendDefinitionFormField/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/General/Components/PeriodSelector.js","webpack://@dhis2/app-shell/./src/D2App/modules/Main/Components/ScoreCardManagement/Components/General/styles/PeriodTypeSelector.module.css?9c7e","D2App/modules/Main/Components/ScoreCardManagement/Components/General/Components/PeriodTypeSelector.js","D2App/modules/Main/Components/ScoreCardManagement/Components/General/Components/GeneralForm.js","D2App/modules/Main/Components/ScoreCardManagement/Components/HighlightedIndicators/HighlightedDataSourceConfigurationForm/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/HighlightedIndicators/Table/index.js","D2App/modules/Main/Components/ScoreCardManagement/state/pages.js","D2App/modules/Main/Components/ScoreCardManagement/Components/General/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/hooks/useHelp.js","D2App/modules/Main/Components/ScoreCardManagement/Components/HighlightedIndicators/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/Access/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/Options/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/Options/hooks/useOptionsManage.js","D2App/modules/Main/Components/ScoreCardManagement/hooks/useScorecardManage.js","D2App/modules/Main/Components/ScoreCardManagement/hooks/useScorecardManagerNavigate.js","D2App/modules/Main/Components/ScoreCardManagement/index.js"],"sourcesContent":["import i18n from \"@dhis2/d2-i18n\";\nimport { colors, IconError24 } from '@dhis2/ui';\nimport { OrgUnitSelector } from '@hisptz/dhis2-ui';\nimport { ContainerLoader, OrgUnitSelection } from \"@scorecard/shared\";\nimport { get } from 'lodash';\nimport React, { Suspense, useCallback } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nfunction anyOrgUnitSelected(_ref) {\n  let {\n    groups,\n    levels,\n    orgUnits,\n    userOrgUnit,\n    userSubUnit,\n    userSubX2Unit\n  } = _ref;\n  return userSubX2Unit || userSubUnit || userOrgUnit || groups.length > 0 || levels.length > 0 || orgUnits.length > 0;\n}\nexport default function OrgUnit() {\n  const {\n    setValue,\n    watch,\n    register,\n    formState\n  } = useFormContext();\n  register(\"orgUnitSelection\", {\n    validate: {\n      atLeastOneOrgUnit: value => {\n        if (anyOrgUnitSelected(value)) {\n          return true;\n        }\n        return i18n.t(\"Please select at least one organisation unit\");\n      }\n    }\n  });\n  const organisationUnit = watch(\"orgUnitSelection\");\n  const setOrganisationUnit = useCallback(updatedOrgUnitSelection => {\n    setValue(\"orgUnitSelection\", updatedOrgUnitSelection);\n  }, [setValue]);\n  const onSetOrgUnit = values => {\n    setOrganisationUnit(OrgUnitSelection.setObject(organisationUnit, values));\n  };\n  const error = get(formState.errors, \"orgUnitSelection\");\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column h-100\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pt-16 pb-16\"\n  }, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Organisation Unit\"))), error && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      gap: 8,\n      alignItems: \"center\",\n      padding: \"8px 0\",\n      color: colors.red500\n    }\n  }, /*#__PURE__*/React.createElement(IconError24, null), error === null || error === void 0 ? void 0 : error.message), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      minHeight: 400\n    },\n    className: \"access-org-unit-filter h-100\"\n  }, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(ContainerLoader, {\n      height: 400\n    })\n  }, /*#__PURE__*/React.createElement(OrgUnitSelector, {\n    showGroups: true,\n    showLevels: true,\n    showUserOptions: true,\n    onUpdate: onSetOrgUnit,\n    value: organisationUnit\n  }))));\n}","import { AccessTypes } from \"@scorecard/shared\";\nimport { ScorecardAccess } from \"@scorecard/shared\";\nimport produce from \"immer\";\nimport { cloneDeep, findIndex, remove, set } from \"lodash\";\nimport { useCallback, useMemo } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nexport default function useAccessManage() {\n  const {\n    watch,\n    setValue\n  } = useFormContext();\n  const publicAccess = watch(\"publicAccess\");\n  const setPublicAccess = useCallback(updatedValue => {\n    setValue(\"publicAccess\", updatedValue);\n  }, [setValue]);\n  const userGroupAccesses = watch(\"userGroupAccesses\");\n  const setUserGroupAccesses = useCallback(updatedValue => {\n    setValue(\"userGroupAccesses\", updatedValue);\n  }, [setValue]);\n  const userAccesses = watch(\"userAccesses\");\n  const setUserAccesses = useCallback(updatedValue => {\n    setValue(\"userAccesses\", updatedValue);\n  }, [setValue]);\n  const userAndUserGroupAccesses = useMemo(() => [...(userAccesses || []), ...(userGroupAccesses || [])], [userAccesses, userGroupAccesses]);\n  const onPublicAccessChange = useCallback(value => {\n    setPublicAccess(value);\n  }, [setPublicAccess]);\n  const onDelete = useCallback(access => {\n    const {\n      type\n    } = access || {};\n    if (type === \"user\") {\n      const updatedList = cloneDeep(userAccesses);\n      remove(updatedList, [\"id\", access === null || access === void 0 ? void 0 : access.id]);\n      setUserAccesses(updatedList);\n      return;\n    }\n    const updatedList = cloneDeep(userGroupAccesses);\n    remove(updatedList, [\"id\", access === null || access === void 0 ? void 0 : access.id]);\n    setUserGroupAccesses(updatedList);\n  }, [setUserAccesses, setUserGroupAccesses, userAccesses, userGroupAccesses]);\n  const onUpdate = useCallback(updatedAccess => {\n    const {\n      type\n    } = updatedAccess || {};\n    if (type === AccessTypes.USER) {\n      const index = findIndex(userAccesses, [\"id\", updatedAccess === null || updatedAccess === void 0 ? void 0 : updatedAccess.id]);\n      setUserAccesses(produce(userAccesses, draft => {\n        set(draft, [index], updatedAccess);\n      }));\n    }\n    const index = findIndex(userGroupAccesses, [\"id\", updatedAccess === null || updatedAccess === void 0 ? void 0 : updatedAccess.id]);\n    setUserGroupAccesses(produce(userGroupAccesses, draft => {\n      set(draft, [index], updatedAccess);\n    }));\n  }, [setUserAccesses, setUserGroupAccesses, userAccesses, userGroupAccesses]);\n  const onAdd = useCallback((selectedAccess, selectedUserGroup) => {\n    if (selectedAccess && selectedUserGroup) {\n      if ((selectedUserGroup === null || selectedUserGroup === void 0 ? void 0 : selectedUserGroup.type) === \"user\") {\n        setUserAccesses([...(userAccesses !== null && userAccesses !== void 0 ? userAccesses : []), new ScorecardAccess({\n          id: selectedUserGroup === null || selectedUserGroup === void 0 ? void 0 : selectedUserGroup.id,\n          displayName: selectedUserGroup === null || selectedUserGroup === void 0 ? void 0 : selectedUserGroup.displayName,\n          type: \"user\",\n          access: selectedAccess\n        })]);\n      } else {\n        setUserGroupAccesses([...(userGroupAccesses !== null && userGroupAccesses !== void 0 ? userGroupAccesses : []), new ScorecardAccess({\n          id: selectedUserGroup === null || selectedUserGroup === void 0 ? void 0 : selectedUserGroup.id,\n          displayName: selectedUserGroup === null || selectedUserGroup === void 0 ? void 0 : selectedUserGroup.displayName,\n          type: \"userGroup\",\n          access: selectedAccess\n        })]);\n      }\n    }\n  }, [setUserAccesses, setUserGroupAccesses, userAccesses, userGroupAccesses]);\n  return {\n    onAdd,\n    publicAccess,\n    onPublicAccessChange,\n    userAndUserGroupAccesses,\n    onDelete,\n    onUpdate\n  };\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { ScorecardAccessType } from \"@scorecard/shared\";\nimport UserGroupIcon from \"@material-ui/icons/People\";\nimport UserIcon from \"@material-ui/icons/Person\";\nimport PublicIcon from \"@material-ui/icons/Public\";\nimport React from \"react\";\nexport function getAccessName() {\n  let access = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  switch (access) {\n    case ScorecardAccessType.NO_ACCESS:\n      return i18n.t(\"No Access\");\n    case ScorecardAccessType.READ_ONLY:\n      return i18n.t(\"Can Read\");\n    case ScorecardAccessType.READ_WRITE:\n      return i18n.t(\"Can Read and Write\");\n  }\n}\nexport function getAccessIcon() {\n  let type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  switch (type) {\n    case \"public\":\n      return /*#__PURE__*/React.createElement(PublicIcon, null);\n    case \"user\":\n      return /*#__PURE__*/React.createElement(UserIcon, null);\n    case \"userGroup\":\n      return /*#__PURE__*/React.createElement(UserGroupIcon, null);\n  }\n}","import { FlyoutMenu, Layer, MenuItem, Popper } from \"@dhis2/ui\";\nimport { ACCESS_TYPES } from \"@scorecard/shared\";\nimport CheckIcon from \"@material-ui/icons/Check\";\nimport PropTypes from \"prop-types\";\nimport React, { Fragment } from \"react\";\nimport { getAccessName } from \"../../../utils\";\nexport default function SharingMenu(_ref) {\n  let {\n    reference,\n    onClose,\n    selectedAccess,\n    onAccessChange\n  } = _ref;\n  return /*#__PURE__*/React.createElement(Layer, {\n    onClick: onClose\n  }, /*#__PURE__*/React.createElement(Popper, {\n    reference: reference,\n    placement: \"bottom-start\"\n  }, /*#__PURE__*/React.createElement(FlyoutMenu, null, ACCESS_TYPES === null || ACCESS_TYPES === void 0 ? void 0 : ACCESS_TYPES.map(accessType => /*#__PURE__*/React.createElement(Fragment, {\n    key: accessType\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    onClick: () => onAccessChange(accessType),\n    active: selectedAccess === accessType,\n    label: getAccessName(accessType),\n    icon: selectedAccess === accessType && /*#__PURE__*/React.createElement(CheckIcon, null)\n  }))))));\n}\nSharingMenu.propTypes = {\n  reference: PropTypes.object.isRequired,\n  selectedAccess: PropTypes.string.isRequired,\n  onAccessChange: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { Button, ButtonStrip, colors, MenuItem } from \"@dhis2/ui\";\nimport { ScorecardAccess } from \"@scorecard/shared\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport { cloneDeep, set } from \"lodash\";\nimport PropTypes from \"prop-types\";\nimport React, { useState } from \"react\";\nimport { getAccessIcon, getAccessName } from \"../../../utils\";\nimport SharingMenu from \"./SharingMenu\";\nexport default function SingleSharingComponent(_ref) {\n  let {\n    access,\n    onDelete,\n    onAccessChange\n  } = _ref;\n  const {\n    access: selectedAccess,\n    type,\n    displayName\n  } = access;\n  const [ref, setRef] = useState();\n  const onChange = newAccess => {\n    const updatedAccess = cloneDeep(access);\n    set(updatedAccess, [\"access\"], newAccess);\n    onAccessChange(updatedAccess);\n    setRef(undefined);\n  };\n  return /*#__PURE__*/React.createElement(MenuItem, {\n    icon: getAccessIcon(type),\n    label: /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row space-between align-items-center\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column\"\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        margin: 2,\n        fontSize: 16\n      }\n    }, displayName), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        color: colors.grey700,\n        fontSize: 14,\n        margin: 0\n      }\n    }, getAccessName(selectedAccess))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column align-items-end\"\n    }, /*#__PURE__*/React.createElement(ButtonStrip, {\n      className: \"edit-delete-access\"\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: (_, e) => setRef(e.currentTarget),\n      icon: /*#__PURE__*/React.createElement(EditIcon, null)\n    }, i18n.t(\"Edit\")), Boolean(onDelete) && /*#__PURE__*/React.createElement(Button, {\n      onClick: () => {\n        onDelete(access);\n      },\n      icon: /*#__PURE__*/React.createElement(DeleteIcon, null)\n    }, i18n.t(\"Delete\")))), ref && /*#__PURE__*/React.createElement(SharingMenu, {\n      reference: ref,\n      onClose: () => setRef(undefined),\n      selectedAccess: selectedAccess,\n      onAccessChange: onChange\n    }))\n  });\n}\nSingleSharingComponent.propTypes = {\n  access: PropTypes.instanceOf(ScorecardAccess).isRequired,\n  onAccessChange: PropTypes.func.isRequired,\n  onDelete: PropTypes.func\n};","import { Menu, MenuDivider } from \"@dhis2/ui\";\nimport React, { Fragment } from \"react\";\nimport useAccessManage from \"../../../../hooks/useAccessManage\";\nimport SingleSharingComponent from \"./Components/SingleSharingComponent\";\nexport default function SharingList() {\n  const {\n    publicAccess,\n    onPublicAccessChange,\n    userAndUserGroupAccesses,\n    onUpdate,\n    onDelete\n  } = useAccessManage();\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Menu, {\n    dense: true\n  }, /*#__PURE__*/React.createElement(SingleSharingComponent, {\n    onAccessChange: onPublicAccessChange,\n    access: publicAccess\n  }), /*#__PURE__*/React.createElement(MenuDivider, null), userAndUserGroupAccesses === null || userAndUserGroupAccesses === void 0 ? void 0 : userAndUserGroupAccesses.map(access => /*#__PURE__*/React.createElement(Fragment, {\n    key: access === null || access === void 0 ? void 0 : access.id\n  }, /*#__PURE__*/React.createElement(SingleSharingComponent, {\n    onAccessChange: onUpdate,\n    access: access,\n    onDelete: onDelete\n  }), /*#__PURE__*/React.createElement(MenuDivider, null)))));\n}","import { useDataQuery } from \"@dhis2/app-runtime\";\nimport { useEffect, useMemo, useState } from \"react\";\nconst query = {\n  users: {\n    resource: \"users\",\n    params: _ref => {\n      let {\n        keyword\n      } = _ref;\n      return {\n        filter: [`displayName:ilike:${keyword}`],\n        fields: [\"id\", \"displayName\"],\n        order: \"name:asc\"\n      };\n    }\n  },\n  userGroups: {\n    resource: \"userGroups\",\n    params: _ref2 => {\n      let {\n        keyword\n      } = _ref2;\n      return {\n        filter: keyword ? [`displayName:ilike:${keyword}`] : undefined,\n        fields: [\"id\", \"name\", \"displayName\"],\n        order: \"name:asc\"\n      };\n    }\n  }\n};\nexport default function useSearchUserAndUserGroup(initialKeyword) {\n  const [keyword, setKeyword] = useState(initialKeyword);\n  const {\n    data,\n    errors,\n    loading,\n    refetch\n  } = useDataQuery(query, {\n    variables: {\n      keyword\n    },\n    lazy: true\n  });\n  useEffect(() => {\n    function search() {\n      if (keyword) {\n        refetch({\n          keyword\n        });\n      }\n    }\n    search();\n  }, [keyword]);\n  const userAndUserGroups = useMemo(() => {\n    var _data$users, _data$users$users, _data$userGroups, _data$userGroups$user;\n    const users = (data === null || data === void 0 ? void 0 : (_data$users = data.users) === null || _data$users === void 0 ? void 0 : (_data$users$users = _data$users.users) === null || _data$users$users === void 0 ? void 0 : _data$users$users.map(user => ({\n      ...user,\n      type: \"user\"\n    }))) || [];\n    const userGroups = (data === null || data === void 0 ? void 0 : (_data$userGroups = data.userGroups) === null || _data$userGroups === void 0 ? void 0 : (_data$userGroups$user = _data$userGroups.userGroups) === null || _data$userGroups$user === void 0 ? void 0 : _data$userGroups$user.map(userGroup => ({\n      ...userGroup,\n      type: \"userGroup\"\n    }))) || [];\n    return [...users, ...userGroups];\n  }, [data === null || data === void 0 ? void 0 : data.users, data === null || data === void 0 ? void 0 : data.userGroups]);\n  return {\n    data: userAndUserGroups,\n    errors,\n    loading,\n    setKeyword\n  };\n}","import { FlyoutMenu, InputField, MenuItem, Popper } from \"@dhis2/ui\";\nimport { debounce, filter, isEmpty } from \"lodash\";\nimport PropTypes from \"prop-types\";\nimport React, { Fragment, useEffect, useRef, useState } from \"react\";\nimport { getAccessIcon } from \"../../utils\";\nimport useSearchUserAndUserGroup from \"./hooks/useSearch\";\nfunction UserAndUserGroupsMenu(_ref) {\n  let {\n    data,\n    onSelect,\n    reference,\n    onClose\n  } = _ref;\n  const onSelectElement = selected => {\n    onSelect(selected);\n    onClose();\n  };\n  return reference ? /*#__PURE__*/React.createElement(Popper, {\n    className: \"layer-1\",\n    reference: reference,\n    placement: \"bottom-start\"\n  }, /*#__PURE__*/React.createElement(FlyoutMenu, {\n    maxHeight: \"400px\"\n  }, data === null || data === void 0 ? void 0 : data.map(element => /*#__PURE__*/React.createElement(MenuItem, {\n    key: element === null || element === void 0 ? void 0 : element.id,\n    onClick: () => onSelectElement(element),\n    label: element === null || element === void 0 ? void 0 : element.displayName,\n    icon: getAccessIcon(element === null || element === void 0 ? void 0 : element.type)\n  })))) : null;\n}\nUserAndUserGroupsMenu.propTypes = {\n  data: PropTypes.arrayOf(PropTypes.object).isRequired,\n  reference: PropTypes.any.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onSelect: PropTypes.func.isRequired\n};\nexport default function UserAndUserGroupSelector(_ref2) {\n  let {\n    selected,\n    onChange,\n    selectedList = []\n  } = _ref2;\n  const [value, setValue] = useState(selected === null || selected === void 0 ? void 0 : selected.displayName);\n  const {\n    data,\n    loading,\n    error,\n    setKeyword\n  } = useSearchUserAndUserGroup(value);\n  const reference = useRef();\n  const [inputReference, setInputReference] = useState();\n  const onSearch = debounce(() => {\n    setKeyword(value === null || value === void 0 ? void 0 : value.trim());\n  }, 1000);\n\n  //Clears the field on submit\n  useEffect(() => {\n    if (!selected) {\n      setValue(undefined);\n    }\n  }, [selected]);\n  const onKeywordChange = (_ref3, event) => {\n    let {\n      value: keyword\n    } = _ref3;\n    setValue(keyword);\n    setInputReference(event === null || event === void 0 ? void 0 : event.target);\n    onSearch();\n  };\n  const onValueSelect = selectedValue => {\n    setValue(selectedValue === null || selectedValue === void 0 ? void 0 : selectedValue.displayName);\n    onChange(selectedValue);\n  };\n  return /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: reference\n  }, /*#__PURE__*/React.createElement(InputField, {\n    loading: loading,\n    error: error,\n    validationText: error === null || error === void 0 ? void 0 : error.message,\n    label: \"Select User or User Group\",\n    value: value,\n    onChange: onKeywordChange\n  })), inputReference && !isEmpty(data) && /*#__PURE__*/React.createElement(UserAndUserGroupsMenu, {\n    onClose: () => setInputReference(undefined),\n    reference: inputReference,\n    onSelect: onValueSelect,\n    data: filter(data, _ref4 => {\n      let {\n        id\n      } = _ref4;\n      return !(selectedList !== null && selectedList !== void 0 && selectedList.includes(id));\n    })\n  }));\n}\nUserAndUserGroupSelector.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  selected: PropTypes.object,\n  selectedList: PropTypes.arrayOf(PropTypes.string)\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { Button, SingleSelectField, SingleSelectOption } from \"@dhis2/ui\";\nimport { ACCESS_TYPES } from \"@scorecard/shared\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport React, { useState } from \"react\";\nimport useAccessManage from \"../../../../../hooks/useAccessManage\";\nimport { getAccessName } from \"../../../utils\";\nimport UserAndUserGroupSelector from \"../../UserAndUserGroupSelector\";\nexport default function AddSharingAccess() {\n  const {\n    userAndUserGroupAccesses,\n    onAdd\n  } = useAccessManage();\n  const [selectedUserGroup, setSelectedUserGroup] = useState();\n  const [selectedAccess, setSelectedAccess] = useState();\n  const selectedList = userAndUserGroupAccesses;\n  const onAddClick = () => {\n    onAdd(selectedAccess, selectedUserGroup);\n    setSelectedAccess(undefined);\n    setSelectedUserGroup(undefined);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row align-items-end add-sharing-access\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column pr-16 user-selector\",\n    style: {\n      width: \"50%\"\n    }\n  }, /*#__PURE__*/React.createElement(UserAndUserGroupSelector, {\n    selectedList: selectedList === null || selectedList === void 0 ? void 0 : selectedList.map(_ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    }),\n    selected: selectedUserGroup,\n    onChange: setSelectedUserGroup\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column pr-16\",\n    style: {\n      width: \"30%\"\n    }\n  }, /*#__PURE__*/React.createElement(SingleSelectField, {\n    className: \"access-selector\",\n    required: true,\n    selected: selectedAccess,\n    onChange: _ref2 => {\n      let {\n        selected\n      } = _ref2;\n      setSelectedAccess(selected);\n    },\n    label: i18n.t(\"Select Access\")\n  }, ACCESS_TYPES === null || ACCESS_TYPES === void 0 ? void 0 : ACCESS_TYPES.map(accessType => /*#__PURE__*/React.createElement(SingleSelectOption, {\n    value: accessType,\n    key: accessType,\n    label: getAccessName(accessType)\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\",\n    style: {\n      width: \"20%\"\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"add-access-button\",\n    onClick: onAddClick,\n    icon: /*#__PURE__*/React.createElement(AddIcon, null)\n  }, i18n.t(\"Add\"))));\n}","import i18n from \"@dhis2/d2-i18n\";\nimport React from \"react\";\nimport SharingList from \"./Components/SharingList\";\nimport AddSharingAccess from \"./Components/SharingList/Components/AddSharingAccess\";\nexport default function Sharing() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-16 pl-32\"\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Sharing\"))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      fontSize: 18\n    }\n  }, i18n.t(\"Shared With\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sharing-list\"\n  }, /*#__PURE__*/React.createElement(SharingList, null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pt-32\"\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      fontSize: 18\n    }\n  }, i18n.t(\"Add Access\"))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(AddSharingAccess, null)));\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { colors } from \"@dhis2/ui\";\nimport React from \"react\";\nexport default function Instructions() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12\",\n    style: {\n      height: \"100%\"\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row center\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"info-box\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\"\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"info-box-title\"\n  }, i18n.t(\"Configure Data Sources\")), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"info-box-list\"\n  }, /*#__PURE__*/React.createElement(\"li\", null, i18n.t(\"Add a data source group\")), /*#__PURE__*/React.createElement(\"li\", null, i18n.t(\"Modify the group name\")), /*#__PURE__*/React.createElement(\"li\", null, i18n.t(\"Add different data sources to a group\")), /*#__PURE__*/React.createElement(\"li\", null, i18n.t(\"Click on a data source to configure it\")), /*#__PURE__*/React.createElement(\"li\", null, i18n.t(\"View the changes on the preview panel above\")))))));\n}\nexport function DataSourceInstructions() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12\",\n    style: {\n      height: \"100%\"\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row center align-items-center\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"info-box\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\"\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      fontSize: 18,\n      color: colors.grey600,\n      fontWeight: \"bold\"\n    }\n  }, i18n.t(\"Select a data source to configure\"))))));\n}","import { getScorecardSummary } from \"@scorecard/shared\";\nimport { generateLegendDefaults } from \"@scorecard/shared\";\nimport { cloneDeep, find, isEmpty, set } from \"lodash\";\nexport function resetLegends(groups, legendDefinitions) {\n  const newGroups = cloneDeep(groups);\n  if (newGroups) {\n    newGroups === null || newGroups === void 0 ? void 0 : newGroups.forEach(group => {\n      var _group$dataHolders;\n      group === null || group === void 0 ? void 0 : (_group$dataHolders = group.dataHolders) === null || _group$dataHolders === void 0 ? void 0 : _group$dataHolders.forEach(dataHolder => {\n        var _dataHolder$dataSourc;\n        dataHolder === null || dataHolder === void 0 ? void 0 : (_dataHolder$dataSourc = dataHolder.dataSources) === null || _dataHolder$dataSourc === void 0 ? void 0 : _dataHolder$dataSourc.forEach(dataSource => {\n          set(dataSource, \"legends\", generateLegendDefaults(getNonDefaultLegendDefinitions(legendDefinitions)));\n          if (!isEmpty(dataSource.specificTargets)) {\n            dataSource.specificTargets.forEach(specificTarget => {\n              set(specificTarget, \"legends\", generateLegendDefaults(getNonDefaultLegendDefinitions(legendDefinitions)));\n            });\n          }\n        });\n      });\n    });\n  }\n  return newGroups;\n}\nexport function getNonDefaultLegendDefinitions(legendDefinitions) {\n  var _legendDefinitions$fi;\n  return (_legendDefinitions$fi = legendDefinitions === null || legendDefinitions === void 0 ? void 0 : legendDefinitions.filter(legendDefinition => !legendDefinition.isDefault)) !== null && _legendDefinitions$fi !== void 0 ? _legendDefinitions$fi : [];\n}\nexport function getDefaultLegendDefinitions(legendDefinitions) {\n  var _legendDefinitions$fi2;\n  return (_legendDefinitions$fi2 = legendDefinitions === null || legendDefinitions === void 0 ? void 0 : legendDefinitions.filter(legendDefinition => legendDefinition.isDefault)) !== null && _legendDefinitions$fi2 !== void 0 ? _legendDefinitions$fi2 : [];\n}\nexport async function titleDoesNotExist(engine, id, title) {\n  const {\n    summary\n  } = await getScorecardSummary(engine);\n  if (isEmpty(summary)) {\n    return true;\n  }\n  const scorecard = find(summary, {\n    title\n  });\n  if (scorecard) {\n    return scorecard.id === id;\n  }\n  return !scorecard;\n}","import { DHIS2FormField } from \"@hisptz/dhis2-ui\";\nimport { set } from \"lodash\";\nimport React from \"react\";\nfunction autoSetAdjacentValues(data, index, highIsGood) {\n  const newData = [...data];\n  const updatedValue = newData[index];\n  const previousValueIndex = highIsGood ? index - 1 : index + 1;\n  const nextValueIndex = highIsGood ? index + 1 : index - 1;\n  if (previousValueIndex >= 0) {\n    set(newData, `${previousValueIndex}.startValue`, updatedValue === null || updatedValue === void 0 ? void 0 : updatedValue.endValue);\n  }\n  if (nextValueIndex < newData.length) {\n    set(newData, `${nextValueIndex}.endValue`, updatedValue === null || updatedValue === void 0 ? void 0 : updatedValue.startValue);\n  }\n  return newData;\n}\nfunction editAtIndex(index, value, _ref) {\n  let {\n    data,\n    highIsGood\n  } = _ref;\n  const newData = [...data];\n  set(newData, index, value);\n  return autoSetAdjacentValues(newData, index, highIsGood);\n}\nexport default function LegendsField(_ref2) {\n  let {\n    value,\n    onChange,\n    legendDefinitions,\n    highIsGood\n  } = _ref2;\n  return /*#__PURE__*/React.createElement(DHIS2FormField, {\n    value: value,\n    legendDefinitions: legendDefinitions,\n    highIsGood: highIsGood,\n    valueType: \"LEGEND_MIN_MAX_GROUP\",\n    name: \"legend-min-max-group\",\n    onChange: onChange\n  });\n}","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { colors, Field } from \"@dhis2/ui\";\nimport { FormFieldModel } from \"@scorecard/shared\";\nimport { OrgUnitLevels } from \"@scorecard/shared\";\nimport { generateLegendDefaults } from \"@scorecard/shared\";\nimport { Accordion, AccordionDetails, AccordionSummary } from \"@material-ui/core\";\nimport produce from \"immer\";\nimport { fromPairs, get, head, set } from \"lodash\";\nimport PropTypes from \"prop-types\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport { useRecoilValue } from \"recoil\";\nimport { getNonDefaultLegendDefinitions } from \"../../../../../../../../General/utils/utils\";\nimport LegendsField from \"./LegendsField\";\nexport default function LevelTargetsField(_ref) {\n  var _head;\n  let {\n    name,\n    value: initialValue = [],\n    onChange,\n    multipleFields,\n    weight,\n    highIsGood,\n    ...props\n  } = _ref;\n  const orgUnitLevels = useRecoilValue(OrgUnitLevels);\n  const {\n    watch\n  } = useFormContext();\n  const [expanded, setExpanded] = useState((_head = head(orgUnitLevels)) === null || _head === void 0 ? void 0 : _head.id);\n  const legendDefinitions = getNonDefaultLegendDefinitions(watch(\"legendDefinitions\"));\n  const handleChange = panel => (event, isExpanded) => {\n    setExpanded(isExpanded ? panel : false);\n  };\n  const value = useMemo(() => {\n    var _orgUnitLevels$map;\n    return !Array.isArray(initialValue) ? initialValue : fromPairs([...((_orgUnitLevels$map = orgUnitLevels === null || orgUnitLevels === void 0 ? void 0 : orgUnitLevels.map(_ref2 => {\n      let {\n        id\n      } = _ref2;\n      return [id, generateLegendDefaults(multipleFields, weight, highIsGood)];\n    })) !== null && _orgUnitLevels$map !== void 0 ? _orgUnitLevels$map : [])]);\n  }, [highIsGood, initialValue, multipleFields, orgUnitLevels, weight]);\n  const onFieldChange = (newValue, level) => {\n    onChange({\n      value: produce(value, draft => {\n        return set(draft, [level], newValue);\n      })\n    });\n  };\n  useEffect(() => {\n    if (Array.isArray(initialValue)) {\n      onChange({\n        value\n      });\n    }\n  }, [value, initialValue]);\n  return /*#__PURE__*/React.createElement(Field, _extends({\n    name: name\n  }, props), orgUnitLevels === null || orgUnitLevels === void 0 ? void 0 : orgUnitLevels.map(_ref3 => {\n    var _get;\n    let {\n      id,\n      displayName\n    } = _ref3;\n    return /*#__PURE__*/React.createElement(Accordion, {\n      expanded: expanded === id,\n      key: id,\n      onChange: handleChange(id)\n    }, /*#__PURE__*/React.createElement(AccordionSummary, {\n      style: {\n        background: colors.grey200\n      }\n    }, displayName), /*#__PURE__*/React.createElement(AccordionDetails, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column w-100\"\n    }, /*#__PURE__*/React.createElement(LegendsField, {\n      highIsGood: highIsGood,\n      legendDefinitions: legendDefinitions,\n      value: (_get = get(value, id)) !== null && _get !== void 0 ? _get : [],\n      onChange: value => onFieldChange(value, id)\n    }))));\n  }));\n}\nLevelTargetsField.propTypes = {\n  highIsGood: PropTypes.bool.isRequired,\n  multipleFields: PropTypes.arrayOf(PropTypes.instanceOf(FormFieldModel)).isRequired,\n  name: PropTypes.string.isRequired,\n  weight: PropTypes.number.isRequired,\n  onChange: PropTypes.func.isRequired,\n  value: PropTypes.any\n};","import { FormFieldModel } from \"@scorecard/shared\";\nimport { DHIS2ValueTypes } from \"@scorecard/shared\";\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useFormContext } from \"react-hook-form\";\nimport { getNonDefaultLegendDefinitions } from \"../../../../../../../General/utils/utils\";\nimport LevelTargetsField from \"../TargetsArea/components/LevelTargetsField\";\nexport default function OrgUnitLevelSpecificTargets(_ref) {\n  let {\n    path\n  } = _ref;\n  const {\n    watch,\n    setValue\n  } = useFormContext();\n  const legendDefinitions = getNonDefaultLegendDefinitions(watch(\"legendDefinitions\"));\n  const weight = watch(`${path}.weight`);\n  const highIsGood = watch(`${path}.highIsGood`);\n  const defaultLegends = watch(`${path}.legends`);\n  return /*#__PURE__*/React.createElement(LevelTargetsField, {\n    multipleFields: legendDefinitions === null || legendDefinitions === void 0 ? void 0 : legendDefinitions.map(legend => new FormFieldModel({\n      id: legend.id,\n      mandatory: false,\n      name: legend.name,\n      legendDefinition: legend,\n      valueType: DHIS2ValueTypes.LEGEND_MIN_MAX.name\n    })),\n    value: defaultLegends,\n    onChange: _ref2 => {\n      let {\n        value\n      } = _ref2;\n      setValue(`${path}.legends`, value);\n    },\n    legends: defaultLegends,\n    highIsGood: highIsGood,\n    weight: weight,\n    path: path,\n    name: \"legends\"\n  });\n}\nOrgUnitLevelSpecificTargets.propTypes = {\n  path: PropTypes.string.isRequired\n};","import i18n from '@dhis2/d2-i18n';\nimport { Button, ButtonStrip, CircularLoader, InputField, Modal, ModalActions, ModalContent, ModalTitle } from '@dhis2/ui';\nimport { OrgUnitSelectorModal } from \"@hisptz/dhis2-ui\";\nimport { SelectedOrgUnits } from \"@scorecard/shared\";\nimport { isEmpty } from \"lodash\";\nimport PropTypes from 'prop-types';\nimport React, { Suspense, useCallback, useState } from 'react';\nimport { useFormContext } from \"react-hook-form\";\nimport { useRecoilValue } from \"recoil\";\nimport { getNonDefaultLegendDefinitions } from \"../../../../../../../General/utils/utils\";\nimport LegendsField from \"../TargetsArea/components/LegendsField\";\nfunction OrgUnitSelector(_ref) {\n  var _orgUnits$map;\n  let {\n    target,\n    setTarget\n  } = _ref;\n  const [periodSelectorOpen, setPeriodSelectorOpen] = useState(isEmpty(target.items));\n  const orgUnits = useRecoilValue(SelectedOrgUnits(target.items));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \" align-items-end row gap-8 w-100\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column flex-1\"\n  }, /*#__PURE__*/React.createElement(InputField, {\n    fullWidth: true,\n    label: i18n.t(\"Organisation Unit(s)\"),\n    disabled: true,\n    value: orgUnits === null || orgUnits === void 0 ? void 0 : (_orgUnits$map = orgUnits.map(ou => ou === null || ou === void 0 ? void 0 : ou.displayName)) === null || _orgUnits$map === void 0 ? void 0 : _orgUnits$map.join(\", \")\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-25\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => setPeriodSelectorOpen(true)\n  }, i18n.t(\"Change\")))), periodSelectorOpen && /*#__PURE__*/React.createElement(OrgUnitSelectorModal, {\n    value: {\n      orgUnits: orgUnits !== null && orgUnits !== void 0 ? orgUnits : []\n    },\n    onClose: () => setPeriodSelectorOpen(false),\n    hide: !periodSelectorOpen,\n    onUpdate: _ref2 => {\n      let {\n        orgUnits\n      } = _ref2;\n      setTarget(prevState => {\n        return {\n          ...prevState,\n          items: orgUnits === null || orgUnits === void 0 ? void 0 : orgUnits.map(orgUnit => orgUnit.id)\n        };\n      });\n      setPeriodSelectorOpen(false);\n    }\n  }));\n}\nOrgUnitSelector.propTypes = {\n  setTarget: PropTypes.func,\n  target: PropTypes.object\n};\nexport default function OrgUnitSpecificTargetsModal(_ref3) {\n  let {\n    open,\n    onClose,\n    onUpdate,\n    specificTarget,\n    defaultLegends,\n    onChangeDefaultLegends,\n    path\n  } = _ref3;\n  const {\n    watch\n  } = useFormContext();\n  const [target, setTarget] = useState(specificTarget);\n  const legendDefinitions = getNonDefaultLegendDefinitions(watch(\"legendDefinitions\"));\n  const highIsGood = watch(`${path}.highIsGood`);\n  const onUpdateClick = useCallback(() => {\n    onUpdate({\n      ...target\n    });\n    onClose();\n  }, [onClose, onUpdate, target]);\n  return /*#__PURE__*/React.createElement(Modal, {\n    onClose: onClose,\n    hide: !open,\n    position: \"middle\"\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t(\"Organisation Unit Specific Targets\")), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column align-items-center justify-content-center\",\n      style: {\n        height: 100,\n        width: \"100%\"\n      }\n    }, /*#__PURE__*/React.createElement(CircularLoader, {\n      small: true\n    }))\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column w-100 gap-16\"\n  }, /*#__PURE__*/React.createElement(OrgUnitSelector, {\n    target: target,\n    setTarget: setTarget\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column w-100 legend-settings-area\"\n  }, /*#__PURE__*/React.createElement(LegendsField, {\n    highIsGood: highIsGood,\n    legendDefinitions: legendDefinitions,\n    value: target.legends,\n    onChange: legends => {\n      setTarget(prevState => {\n        return {\n          ...prevState,\n          legends\n        };\n      });\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column w-100 legend-settings-area\"\n  }, /*#__PURE__*/React.createElement(\"p\", null, i18n.t(\"Other Periods\")), /*#__PURE__*/React.createElement(LegendsField, {\n    highIsGood: highIsGood,\n    legendDefinitions: legendDefinitions,\n    value: defaultLegends,\n    onChange: onChangeDefaultLegends\n  })))))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(Button, {\n    onClick: onClose\n  }, i18n.t(\"Cancel\")), /*#__PURE__*/React.createElement(Button, {\n    onClick: onUpdateClick,\n    primary: true\n  }, i18n.t(\"Update\")))));\n}\nOrgUnitSpecificTargetsModal.propTypes = {\n  defaultLegends: PropTypes.array.isRequired,\n  path: PropTypes.string.isRequired,\n  specificTarget: PropTypes.object.isRequired,\n  onChangeDefaultLegends: PropTypes.func.isRequired,\n  open: PropTypes.bool,\n  onClose: PropTypes.func,\n  onUpdate: PropTypes.func\n};","import i18n from '@dhis2/d2-i18n';\nimport { Button, ButtonStrip, InputField, Modal, ModalActions, ModalContent, ModalTitle } from '@dhis2/ui';\nimport { PeriodSelectorModal } from \"@hisptz/dhis2-ui\";\nimport { Period } from \"@iapps/period-utilities\";\nimport { SystemSettingsState } from \"@scorecard/shared\";\nimport { compact, isEmpty } from \"lodash\";\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useState } from 'react';\nimport { useFormContext } from \"react-hook-form\";\nimport { useRecoilValue } from \"recoil\";\nimport { getNonDefaultLegendDefinitions } from \"../../../../../../../General/utils/utils\";\nimport LegendsField from \"../TargetsArea/components/LegendsField\";\nexport default function PeriodSpecificTargetsModal(_ref) {\n  var _target$items, _target$items$map, _target$items$map2, _target$items2;\n  let {\n    open,\n    onClose,\n    onUpdate,\n    specificTarget,\n    defaultLegends,\n    onChangeDefaultLegends,\n    path\n  } = _ref;\n  const {\n    watch\n  } = useFormContext();\n  const [target, setTarget] = useState(specificTarget);\n  const {\n    calendar\n  } = useRecoilValue(SystemSettingsState);\n  const legendDefinitions = getNonDefaultLegendDefinitions(watch(\"legendDefinitions\"));\n  const highIsGood = watch(`${path}.highIsGood`);\n  const [periodSelectorOpen, setPeriodSelectorOpen] = useState(isEmpty(target.items));\n  const onUpdateClick = useCallback(() => {\n    onUpdate({\n      ...target\n    });\n    onClose();\n  }, [onClose, onUpdate, target]);\n  return /*#__PURE__*/React.createElement(Modal, {\n    onClose: onClose,\n    hide: !open,\n    position: \"middle\"\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t(\"Period Specific Targets\")), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column w-100 gap-16\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \" align-items-end row gap-8 w-100\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column flex-1\"\n  }, /*#__PURE__*/React.createElement(InputField, {\n    fullWidth: true,\n    label: i18n.t(\"Period\"),\n    disabled: true,\n    value: target === null || target === void 0 ? void 0 : (_target$items = target.items) === null || _target$items === void 0 ? void 0 : (_target$items$map = _target$items.map(item => {\n      if (item) {\n        var _Period$setPreference;\n        return (_Period$setPreference = new Period().setPreferences({\n          allowFuturePeriods: true\n        }).setCalendar(calendar).getById(item)) === null || _Period$setPreference === void 0 ? void 0 : _Period$setPreference.name;\n      }\n    })) === null || _target$items$map === void 0 ? void 0 : _target$items$map.join(\", \")\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-25\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => setPeriodSelectorOpen(true)\n  }, i18n.t(\"Change Period\")))), periodSelectorOpen && /*#__PURE__*/React.createElement(PeriodSelectorModal, {\n    enablePeriodSelector: true,\n    excludeRelativePeriods: true,\n    singleSelection: true,\n    selectedPeriods: compact([...((_target$items$map2 = (_target$items2 = target.items) === null || _target$items2 === void 0 ? void 0 : _target$items2.map(item => {\n      if (item) {\n        return item;\n      }\n    })) !== null && _target$items$map2 !== void 0 ? _target$items$map2 : [])]),\n    onClose: () => setPeriodSelectorOpen(false),\n    hide: !periodSelectorOpen,\n    onUpdate: periods => {\n      setTarget(prevState => {\n        var _periods$;\n        return {\n          ...prevState,\n          items: [(_periods$ = periods[0]) === null || _periods$ === void 0 ? void 0 : _periods$.id]\n        };\n      });\n      setPeriodSelectorOpen(false);\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column w-100 legend-settings-area\"\n  }, /*#__PURE__*/React.createElement(LegendsField, {\n    highIsGood: highIsGood,\n    legendDefinitions: legendDefinitions,\n    value: target.legends,\n    onChange: legends => {\n      setTarget(prevState => {\n        return {\n          ...prevState,\n          legends\n        };\n      });\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column w-100 legend-settings-area\"\n  }, /*#__PURE__*/React.createElement(\"p\", null, i18n.t(\"Other Periods\")), /*#__PURE__*/React.createElement(LegendsField, {\n    highIsGood: highIsGood,\n    legendDefinitions: legendDefinitions,\n    value: defaultLegends,\n    onChange: onChangeDefaultLegends\n  }))))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(Button, {\n    onClick: onClose\n  }, i18n.t(\"Cancel\")), /*#__PURE__*/React.createElement(Button, {\n    onClick: onUpdateClick,\n    primary: true\n  }, i18n.t(\"Update\")))));\n}\nPeriodSpecificTargetsModal.propTypes = {\n  path: PropTypes.string.isRequired,\n  specificTarget: PropTypes.object.isRequired,\n  defaultLegends: PropTypes.any,\n  open: PropTypes.bool,\n  onChangeDefaultLegends: PropTypes.func,\n  onClose: PropTypes.func,\n  onUpdate: PropTypes.func\n};","import i18n from '@dhis2/d2-i18n';\nimport { Button, colors, Tag } from '@dhis2/ui';\nimport { Period } from \"@iapps/period-utilities\";\nimport { SelectedOrgUnits, SystemSettingsState } from \"@scorecard/shared\";\nimport { find } from \"lodash\";\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useRecoilValue } from \"recoil\";\nfunction LegendsView(_ref) {\n  let {\n    legends,\n    legendDefinitions\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row gap-16 space-evenly\"\n  }, legends === null || legends === void 0 ? void 0 : legends.map((legend, index) => {\n    var _find;\n    const {\n      legendDefinitionId,\n      startValue,\n      endValue\n    } = legend !== null && legend !== void 0 ? legend : {};\n    const legendDefinition = (_find = find(legendDefinitions, {\n      id: legendDefinitionId\n    })) !== null && _find !== void 0 ? _find : {};\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row gap-8 align-items-center\",\n      key: index\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        height: 32,\n        width: 48,\n        background: legendDefinition.color\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", null, `${endValue} - ${startValue}`));\n  }));\n}\nLegendsView.propTypes = {\n  legendDefinitions: PropTypes.array,\n  legends: PropTypes.array\n};\nfunction getTypeLabel(type) {\n  switch (type) {\n    case \"period\":\n      return i18n.t('Period');\n    case \"orgUnit\":\n      return i18n.t('Organisation unit(s)');\n    case \"orgUnitLevel\":\n      return i18n.t('Organisation unit levels');\n  }\n}\nexport function OrgUnitSpecificTargetView(_ref2) {\n  let {\n    specificTarget,\n    legendDefinitions,\n    onUpdate,\n    defaultLegends\n  } = _ref2;\n  const {\n    legends,\n    items\n  } = specificTarget !== null && specificTarget !== void 0 ? specificTarget : {};\n  const orgUnits = useRecoilValue(SelectedOrgUnits(items));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      border: `1px solid ${colors.grey500}`,\n      borderRadius: 4,\n      padding: 8\n    },\n    className: \"column gap-8 flex-wrap\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column gap-8 flex-wrap\"\n  }, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Organisation Unit(s)\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row gap-8 flex-wrap\"\n  }, orgUnits === null || orgUnits === void 0 ? void 0 : orgUnits.map(item => {\n    return /*#__PURE__*/React.createElement(Tag, {\n      key: `${item}-tag`\n    }, item.displayName);\n  }))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"p\", null, i18n.t(\"Legends\")), /*#__PURE__*/React.createElement(LegendsView, {\n    legends: legends,\n    legendDefinitions: legendDefinitions\n  })), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"p\", null, i18n.t(`Other Organisation Units`)), /*#__PURE__*/React.createElement(LegendsView, {\n    legends: defaultLegends,\n    legendDefinitions: legendDefinitions\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row gap-8 justify-content-end\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: onUpdate\n  }, i18n.t(\"Update\"))));\n}\nexport function PeriodSpecificTargetView(_ref3) {\n  let {\n    specificTarget,\n    legendDefinitions,\n    onUpdate,\n    defaultLegends\n  } = _ref3;\n  const {\n    legends,\n    type,\n    items\n  } = specificTarget !== null && specificTarget !== void 0 ? specificTarget : {};\n  const {\n    calendar\n  } = useRecoilValue(SystemSettingsState);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      border: `1px solid ${colors.grey500}`,\n      borderRadius: 4,\n      padding: 8\n    },\n    className: \"column gap-8 flex-wrap\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column gap-8 flex-wrap\"\n  }, /*#__PURE__*/React.createElement(\"b\", null, getTypeLabel(type)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row gap-8 flex-wrap\"\n  }, items === null || items === void 0 ? void 0 : items.map(item => {\n    var _Period$setPreference;\n    return /*#__PURE__*/React.createElement(Tag, {\n      key: `${item}-tag`\n    }, (_Period$setPreference = new Period().setPreferences({\n      allowFuturePeriods: true\n    }).setCalendar(calendar).getById(item)) === null || _Period$setPreference === void 0 ? void 0 : _Period$setPreference.name);\n  }))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"p\", null, i18n.t(\"Legends\")), /*#__PURE__*/React.createElement(LegendsView, {\n    legends: legends,\n    legendDefinitions: legendDefinitions\n  })), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"p\", null, i18n.t(`Other ${getTypeLabel(type)}`)), /*#__PURE__*/React.createElement(LegendsView, {\n    legends: defaultLegends,\n    legendDefinitions: legendDefinitions\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row gap-8 justify-content-end\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: onUpdate\n  }, i18n.t(\"Update\"))));\n}\nOrgUnitSpecificTargetView.propTypes = {\n  defaultLegends: PropTypes.array,\n  legendDefinitions: PropTypes.array,\n  specificTarget: PropTypes.object,\n  onDelete: PropTypes.func,\n  onUpdate: PropTypes.func\n};\nPeriodSpecificTargetView.propTypes = {\n  defaultLegends: PropTypes.array,\n  legendDefinitions: PropTypes.array,\n  specificTarget: PropTypes.object,\n  onDelete: PropTypes.func,\n  onUpdate: PropTypes.func\n};","import { RHFDHIS2FormField } from \"@hisptz/dhis2-ui\";\nimport React, { useMemo } from \"react\";\nimport { useWatch } from \"react-hook-form\";\nexport default function TargetsField(props) {\n  const {\n    name,\n    path\n  } = props !== null && props !== void 0 ? props : {};\n  const [legendDefinitions, highIsGood] = useWatch({\n    name: [`legendDefinitions`, `${path}.highIsGood`]\n  });\n  const nonDefaultLegendDefinitions = useMemo(() => legendDefinitions.filter(legendDefinition => !legendDefinition.isDefault), [legendDefinitions]);\n  return /*#__PURE__*/React.createElement(RHFDHIS2FormField, {\n    name: name,\n    valueType: 'LEGEND_MIN_MAX_GROUP',\n    highIsGood: !highIsGood,\n    legendDefinitions: nonDefaultLegendDefinitions\n  });\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { CircularLoader, SingleSelectField, SingleSelectOption } from '@dhis2/ui';\nimport { RHFDHIS2FormField } from \"@hisptz/dhis2-ui\";\nimport { DHIS2ValueTypes, generateLegendDefaults, uid } from \"@scorecard/shared\";\nimport { head, isEmpty } from \"lodash\";\nimport PropTypes from 'prop-types';\nimport React, { Suspense, useEffect, useState } from \"react\";\nimport { useFormContext, useWatch } from \"react-hook-form\";\nimport { getNonDefaultLegendDefinitions } from \"../../../../../../../General/utils/utils\";\nimport OrgUnitLevelSpecificTargets from \"../OrgUnitLevelSpecificTargetsModal\";\nimport OrgUnitSpecificTargetsModal from \"../OrgUnitSpecificTargetsModal\";\nimport PeriodSpecificTargetsModal from \"../PeriodSpecificTargetsModal\";\nimport { OrgUnitSpecificTargetView, PeriodSpecificTargetView } from \"./components/SpecificTargetView\";\nimport TargetsField from \"./components/TargetsField\";\nfunction getSelectedType(specificTargets, specificTargetsSet) {\n  if (!isEmpty(specificTargets) && specificTargetsSet) {\n    var _head;\n    return (_head = head(specificTargets)) === null || _head === void 0 ? void 0 : _head.type;\n  }\n  if (specificTargetsSet) {\n    return \"orgUnitLevel\";\n  }\n  return null;\n}\nexport default function TargetsArea(_ref) {\n  let {\n    path\n  } = _ref;\n  const {\n    setValue\n  } = useFormContext();\n  const [allLegendDefinitions, areSpecificTargetsSet, specificTargets, defaultLegends, weight, highIsGood] = useWatch({\n    name: [\"legendDefinitions\", `${path}.specificTargetsSet`, `${path}.specificTargets`, `${path}.legends`, `${path}.weight`, `${path}.highIsGood`]\n  });\n  const legendDefinitions = getNonDefaultLegendDefinitions(allLegendDefinitions);\n  const [openConfigDialog, setOpenConfigDialog] = useState(false);\n  const [selectedType, setSelectedType] = useState(getSelectedType(specificTargets, areSpecificTargetsSet));\n  useEffect(() => {\n    if (!areSpecificTargetsSet && !isEmpty(specificTargets)) {\n      setSelectedType(null);\n      setValue(`${path}.specificTargets`, []);\n    }\n  }, [areSpecificTargetsSet, specificTargets, setValue, path]);\n  useEffect(() => {\n    var _specificTargets$;\n    if (selectedType && isEmpty((_specificTargets$ = specificTargets[0]) === null || _specificTargets$ === void 0 ? void 0 : _specificTargets$.items)) {\n      setOpenConfigDialog(true);\n    }\n  }, [selectedType, specificTargets]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column gap-16\"\n  }, /*#__PURE__*/React.createElement(RHFDHIS2FormField, {\n    valueType: DHIS2ValueTypes.TRUE_ONLY.name,\n    label: i18n.t(\"Set Specific Targets\"),\n    name: `${path}.specificTargetsSet`\n  }), areSpecificTargetsSet ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column gap-16\"\n  }, /*#__PURE__*/React.createElement(SingleSelectField, {\n    label: i18n.t(\"Specific target type\"),\n    selected: selectedType,\n    onChange: _ref2 => {\n      let {\n        selected\n      } = _ref2;\n      if (selected === \"orgUnitLevel\") {\n        setSelectedType(selected);\n        setValue(`${path}.legends`, []);\n        setValue(`${path}.specificTargets`, []);\n        return;\n      }\n      setSelectedType(selected);\n      setValue(`${path}.legends`, generateLegendDefaults(legendDefinitions, weight, highIsGood));\n      setValue(`${path}.specificTargets`, [{\n        id: uid(),\n        type: selected,\n        items: [],\n        legends: generateLegendDefaults(legendDefinitions, weight, highIsGood)\n      }]);\n    }\n  }, /*#__PURE__*/React.createElement(SingleSelectOption, {\n    value: \"period\",\n    label: i18n.t(\"Period\")\n  }), /*#__PURE__*/React.createElement(SingleSelectOption, {\n    value: \"orgUnit\",\n    label: i18n.t(\"Organisation Unit\")\n  }), /*#__PURE__*/React.createElement(SingleSelectOption, {\n    value: \"orgUnitLevel\",\n    label: i18n.t(\"Organisation Unit Level\")\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column gap-8\"\n  }, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column align-items-center justify-content-center\",\n      style: {\n        height: 100,\n        width: \"100%\"\n      }\n    }, /*#__PURE__*/React.createElement(CircularLoader, {\n      small: true\n    }))\n  }, selectedType !== \"orgUnitLevel\" && (specificTargets === null || specificTargets === void 0 ? void 0 : specificTargets.map(target => selectedType === \"period\" ? /*#__PURE__*/React.createElement(PeriodSpecificTargetView, {\n    defaultLegends: defaultLegends,\n    onDelete: () => {\n      setValue(`${path}.specificTargets`, []);\n    },\n    legendDefinitions: legendDefinitions,\n    onUpdate: () => setOpenConfigDialog(true),\n    key: `${target.id}-view`,\n    specificTarget: target\n  }) : /*#__PURE__*/React.createElement(OrgUnitSpecificTargetView, {\n    defaultLegends: defaultLegends,\n    onDelete: () => {\n      setValue(`${path}.specificTargets`, []);\n    },\n    legendDefinitions: legendDefinitions,\n    onUpdate: () => setOpenConfigDialog(true),\n    key: `${target.id}-view`,\n    specificTarget: target\n  }))))), selectedType === \"period\" && openConfigDialog && !isEmpty(specificTargets) ? /*#__PURE__*/React.createElement(PeriodSpecificTargetsModal, {\n    path: path,\n    defaultLegends: defaultLegends,\n    onChangeDefaultLegends: legends => setValue(`${path}.legends`, legends),\n    specificTarget: specificTargets[0],\n    onClose: () => setOpenConfigDialog(false),\n    open: openConfigDialog,\n    onUpdate: target => {\n      setOpenConfigDialog(false);\n      setValue(`${path}.specificTargets`, [target]);\n    }\n  }) : null, selectedType === \"orgUnit\" && openConfigDialog && !isEmpty(specificTargets) ? /*#__PURE__*/React.createElement(OrgUnitSpecificTargetsModal, {\n    path: path,\n    defaultLegends: defaultLegends,\n    onChangeDefaultLegends: legends => setValue(`${path}.legends`, legends),\n    specificTarget: specificTargets[0],\n    onClose: () => setOpenConfigDialog(false),\n    open: openConfigDialog,\n    onUpdate: target => {\n      setOpenConfigDialog(false);\n      setValue(`${path}.specificTargets`, [target]);\n    }\n  }) : null, selectedType === \"orgUnitLevel\" && /*#__PURE__*/React.createElement(OrgUnitLevelSpecificTargets, {\n    path: path\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column w-100 legend-settings-area\"\n  }, /*#__PURE__*/React.createElement(TargetsField, {\n    name: `${path}.legends`,\n    path: path\n  }))));\n}\nTargetsArea.propTypes = {\n  path: PropTypes.string.isRequired\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { Divider } from \"@dhis2/ui\";\nimport { RHFDHIS2FormField } from \"@hisptz/dhis2-ui\";\nimport { DHIS2ValueTypes } from \"@scorecard/shared\";\nimport PropTypes from \"prop-types\";\nimport React, { useEffect } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport TargetsArea from \"../DataConfiguration/Components/DataGroups/Components/DataSourceConfiguration/Components/TargetsArea\";\nexport default function DataSourceConfigurationForm(_ref) {\n  let {\n    path\n  } = _ref;\n  const {\n    watch,\n    setValue\n  } = useFormContext();\n  useEffect(() => {\n    if (path) {\n      setValue(path, watch(path));\n    }\n  }, [watch, path, setValue]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container p-16 data-source-form-container\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      gap: 16\n    },\n    className: \"column\"\n  }, /*#__PURE__*/React.createElement(RHFDHIS2FormField, {\n    disabled: true,\n    mandatory: true,\n    valueType: DHIS2ValueTypes.TEXT.name,\n    label: i18n.t(\"Name\"),\n    name: `${path}.name`\n  }), /*#__PURE__*/React.createElement(RHFDHIS2FormField, {\n    mandatory: true,\n    valueType: DHIS2ValueTypes.TEXT.name,\n    label: i18n.t(\"Label\"),\n    name: `${path}.label`,\n    validations: {\n      required: i18n.t(\"Label is required\")\n    }\n  }), /*#__PURE__*/React.createElement(RHFDHIS2FormField, {\n    valueType: DHIS2ValueTypes.NUMBER.name,\n    label: i18n.t(\"Weight\"),\n    name: `${path}.weight`\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row space-between\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column pr-16 effective-gap-settings\"\n  }, /*#__PURE__*/React.createElement(RHFDHIS2FormField, {\n    valueType: DHIS2ValueTypes.NUMBER.name,\n    label: i18n.t(\"Effective Gap\"),\n    name: `${path}.effectiveGap`\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column pl-16 indicator-options-settings-area\"\n  }, /*#__PURE__*/React.createElement(RHFDHIS2FormField, {\n    renderAsCheckbox: true,\n    valueType: \"BOOLEAN\",\n    label: i18n.t(\"Display Arrows\"),\n    name: `${path}.displayArrows`\n  }), /*#__PURE__*/React.createElement(RHFDHIS2FormField, {\n    renderAsCheckbox: true,\n    valueType: \"BOOLEAN\",\n    label: i18n.t(\"High is Good\"),\n    name: `${path}.highIsGood`\n  }), /*#__PURE__*/React.createElement(RHFDHIS2FormField, {\n    renderAsCheckbox: true,\n    valueType: \"BOOLEAN\",\n    label: i18n.t(\"Show Colors\"),\n    name: `${path}.showColors`\n  }))), /*#__PURE__*/React.createElement(Divider, null), /*#__PURE__*/React.createElement(TargetsArea, {\n    path: path\n  })));\n}\nDataSourceConfigurationForm.propTypes = {\n  path: PropTypes.string.isRequired\n};","import { CircularLoader } from \"@dhis2/ui\";\nimport { ScorecardConfigEditState } from \"@scorecard/shared\";\nimport React, { Suspense } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport { useRecoilValue } from \"recoil\";\nimport DataSourceConfigurationForm from \"../../../../../../../DataSourceConfigurationForm\";\nexport default function SelectedDataSourceConfigurationForm() {\n  var _ref, _selectedDataHolder$d;\n  const {\n    watch\n  } = useFormContext();\n  const scorecardEditState = useRecoilValue(ScorecardConfigEditState);\n  const selectedGroupIndex = scorecardEditState === null || scorecardEditState === void 0 ? void 0 : scorecardEditState.selectedGroupIndex;\n  const selectedDataHolderIndex = scorecardEditState === null || scorecardEditState === void 0 ? void 0 : scorecardEditState.selectedDataHolderIndex;\n  const path = (_ref = [\"dataSelection\", \"dataGroups\", selectedGroupIndex, \"dataHolders\", selectedDataHolderIndex]) === null || _ref === void 0 ? void 0 : _ref.join(\".\");\n  const selectedDataHolder = watch(path);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"data-configuration-row\"\n  }, (selectedDataHolder === null || selectedDataHolder === void 0 ? void 0 : (_selectedDataHolder$d = selectedDataHolder.dataSources) === null || _selectedDataHolder$d === void 0 ? void 0 : _selectedDataHolder$d.map((dataSource, index) => {\n    const dataSourcePath = `${path}.dataSources.${index}`;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: dataSource.id,\n      style: {\n        maxWidth: 720,\n        minWidth: 480\n      },\n      className: \"w-100 h-100\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-bordered h-100\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-16\"\n    }, /*#__PURE__*/React.createElement(Suspense, {\n      fallback: /*#__PURE__*/React.createElement(\"div\", {\n        className: \"w-100 h-100 center align-items-center\"\n      }, /*#__PURE__*/React.createElement(CircularLoader, {\n        small: true\n      }))\n    }, /*#__PURE__*/React.createElement(DataSourceConfigurationForm, {\n      path: dataSourcePath\n    }))))));\n  })) || null);\n}","import { ContainerLoader } from \"@scorecard/shared\";\nimport { ScorecardConfigEditState } from \"@scorecard/shared\";\nimport React, { Suspense } from \"react\";\nimport { useRecoilValue } from \"recoil\";\nimport { DataSourceInstructions } from \"../../../Instructions\";\nimport SelectedDataSourceConfigurationForm from \"./Components/Form\";\nexport default function DataSourceConfiguration() {\n  const {\n    selectedDataHolderIndex\n  } = useRecoilValue(ScorecardConfigEditState);\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(ContainerLoader, null)\n  }, !isNaN(selectedDataHolderIndex) ? /*#__PURE__*/React.createElement(SelectedDataSourceConfigurationForm, null) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row center align-items-center\"\n  }, /*#__PURE__*/React.createElement(DataSourceInstructions, null))));\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { Button } from \"@dhis2/ui\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nexport default function EmptyDataGroups(_ref) {\n  let {\n    onGroupAdd\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      margin: \"auto\"\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: onGroupAdd,\n    icon: /*#__PURE__*/React.createElement(AddIcon, null),\n    className: \"scorecard-add-group-button\",\n    dataTest: \"scorecard-add-group-button\"\n  }, i18n.t(\"Add Group\")));\n}\nEmptyDataGroups.propTypes = {\n  onGroupAdd: PropTypes.func.isRequired\n};","import { LinkedCellSvg } from \"@scorecard/shared\";\nimport { generateRandomValues, getLegend } from \"@scorecard/shared\";\nimport PropTypes from \"prop-types\";\nimport React, { useMemo } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nexport default function CustomLinkedCell(_ref) {\n  var _getLegend, _getLegend2;\n  let {\n    top,\n    bottom,\n    orgUnit,\n    period\n  } = _ref;\n  const {\n    legends: topLegends,\n    showColors: showTopColors,\n    displayArrows: topDisplayArrows,\n    weight: topWeight,\n    specificTargets: topSpecificTargets\n  } = top !== null && top !== void 0 ? top : {};\n  const {\n    legends: bottomLegends,\n    showColors: showBottomColors,\n    displayArrows: bottomDisplayArrows,\n    weight: bottomWeight,\n    specificTargets: bottomSpecificTargets\n  } = bottom !== null && bottom !== void 0 ? bottom : {};\n  const {\n    watch\n  } = useFormContext();\n  const legendDefinitions = watch(\"legendDefinitions\");\n  const topValue = useMemo(generateRandomValues, []);\n  const bottomValue = useMemo(generateRandomValues, []);\n  const {\n    color: topColor\n  } = (_getLegend = getLegend(topValue, topLegends, {\n    max: topWeight,\n    specificTargets: topSpecificTargets,\n    orgUnit,\n    period,\n    legendDefinitions\n  })) !== null && _getLegend !== void 0 ? _getLegend : {};\n  const {\n    color: bottomColor\n  } = (_getLegend2 = getLegend(bottomValue, bottomLegends, {\n    max: bottomWeight,\n    specificTargets: bottomSpecificTargets,\n    orgUnit,\n    period,\n    legendDefinitions\n  })) !== null && _getLegend2 !== void 0 ? _getLegend2 : {};\n  return /*#__PURE__*/React.createElement(\"td\", {\n    className: \"data-cell\"\n  }, /*#__PURE__*/React.createElement(LinkedCellSvg, {\n    topStatus: topDisplayArrows && \"increasing\",\n    bottomStatus: bottomDisplayArrows && \"decreasing\",\n    topColor: showTopColors ? topColor : undefined,\n    bottomColor: showBottomColors ? bottomColor : undefined,\n    bottomValue: bottomValue,\n    topValue: topValue\n  }));\n}\nCustomLinkedCell.propTypes = {\n  bottom: PropTypes.object.isRequired,\n  top: PropTypes.object.isRequired,\n  orgUnit: PropTypes.string,\n  period: PropTypes.string\n};","import { SingleCellSvg } from \"@scorecard/shared\";\nimport { OrgUnitLevels, UserState } from \"@scorecard/shared\";\nimport { generateRandomValues, getLegend } from \"@scorecard/shared\";\nimport { head } from \"lodash\";\nimport PropTypes from \"prop-types\";\nimport React, { useMemo } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport { useRecoilValue } from \"recoil\";\nimport CustomLinkedCell from \"./CustomLinkedCell\";\nexport default function PreviewCustomCell(_ref) {\n  var _config$dataSources, _config$dataSources2, _head;\n  let {\n    config\n  } = _ref;\n  const {\n    watch\n  } = useFormContext();\n  const orgUnitLevels = useRecoilValue(OrgUnitLevels);\n  const {\n    organisationUnits\n  } = useRecoilValue(UserState);\n  const legendDefinitions = watch(\"legendDefinitions\");\n  const hasLinked = (config === null || config === void 0 ? void 0 : (_config$dataSources = config.dataSources) === null || _config$dataSources === void 0 ? void 0 : _config$dataSources.length) > 1;\n  const [top, bottom] = (_config$dataSources2 = config === null || config === void 0 ? void 0 : config.dataSources) !== null && _config$dataSources2 !== void 0 ? _config$dataSources2 : [];\n  const {\n    legends,\n    showColors,\n    id,\n    displayArrows,\n    weight,\n    specificTargets\n  } = top !== null && top !== void 0 ? top : {};\n  const value = useMemo(generateRandomValues, []);\n  const orgUnit = (_head = head(organisationUnits)) === null || _head === void 0 ? void 0 : _head.id;\n  const period = new Date().getFullYear();\n  const legend = getLegend(value, legends, {\n    max: weight,\n    orgUnitLevels,\n    dataOrgUnitLevel: 1,\n    legendDefinitions,\n    specificTargets,\n    orgUnit,\n    period\n  });\n  return hasLinked ? /*#__PURE__*/React.createElement(CustomLinkedCell, {\n    orgUnit: orgUnit,\n    period: period,\n    bottom: bottom,\n    top: top,\n    specificTargets: specificTargets\n  }) : /*#__PURE__*/React.createElement(\"td\", {\n    width: \"100px\",\n    className: \"data-cell\",\n    align: \"center\",\n    key: `${id}-data`,\n    id: id\n  }, /*#__PURE__*/React.createElement(SingleCellSvg, {\n    status: displayArrows && \"decreasing\",\n    color: showColors ? legend === null || legend === void 0 ? void 0 : legend.color : undefined,\n    value: value\n  }));\n}\nPreviewCustomCell.propTypes = {\n  config: PropTypes.object.isRequired\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { DataTable, DataTableBody, DataTableCell, DataTableHead, DataTableRow } from \"@dhis2/ui\";\nimport { UserState } from \"@scorecard/shared\";\nimport { head } from \"lodash\";\nimport React, { useMemo } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport { useRecoilValue } from \"recoil\";\nimport PreviewCustomCell from \"./Components/PreviewCustomCell\";\nexport default function PreviewScorecardTable() {\n  var _watch, _head;\n  const {\n    watch\n  } = useFormContext();\n  const {\n    organisationUnits\n  } = useRecoilValue(UserState);\n  const {\n    dataGroups\n  } = (_watch = watch(\"dataSelection\")) !== null && _watch !== void 0 ? _watch : {};\n  const columns = useMemo(() => [...dataGroups], [dataGroups]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\",\n    style: {\n      width: \"100%\",\n      overflowX: \"auto\"\n    }\n  }, /*#__PURE__*/React.createElement(DataTable, {\n    bordered: true,\n    width: \"100%\"\n  }, /*#__PURE__*/React.createElement(DataTableHead, null, /*#__PURE__*/React.createElement(DataTableRow, null, /*#__PURE__*/React.createElement(DataTableCell, {\n    fixed: true,\n    align: \"center\",\n    className: \"table-header scorecard-table-header\",\n    bordered: true,\n    rowSpan: \"2\"\n  }, i18n.t(\"Organisation Unit\")), columns === null || columns === void 0 ? void 0 : columns.map(column => {\n    var _column$dataHolders;\n    return /*#__PURE__*/React.createElement(DataTableCell, {\n      fixed: true,\n      align: \"center\",\n      className: \"table-header scorecard-table-header\",\n      bordered: true,\n      colSpan: column === null || column === void 0 ? void 0 : (_column$dataHolders = column.dataHolders) === null || _column$dataHolders === void 0 ? void 0 : _column$dataHolders.length,\n      key: column === null || column === void 0 ? void 0 : column.id\n    }, column === null || column === void 0 ? void 0 : column.title);\n  })), /*#__PURE__*/React.createElement(DataTableRow, null, dataGroups === null || dataGroups === void 0 ? void 0 : dataGroups.map(group => {\n    var _group$dataHolders, _group$dataHolders2, _group$dataHolders3;\n    return /*#__PURE__*/React.createElement(\"th\", {\n      width: `${((_group$dataHolders = group.dataHolders) === null || _group$dataHolders === void 0 ? void 0 : _group$dataHolders.length) * 100}px`,\n      key: group.id,\n      colSpan: ((_group$dataHolders2 = group.dataHolders) === null || _group$dataHolders2 === void 0 ? void 0 : _group$dataHolders2.length) || 1\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      style: {\n        borderSpacing: 0,\n        height: \"100%\"\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", null, group === null || group === void 0 ? void 0 : (_group$dataHolders3 = group.dataHolders) === null || _group$dataHolders3 === void 0 ? void 0 : _group$dataHolders3.map(_ref => {\n      var _dataSources$, _dataSources$2, _dataSources$3, _dataSources$4;\n      let {\n        dataSources\n      } = _ref;\n      return /*#__PURE__*/React.createElement(DataTableCell, {\n        width: \"100px\",\n        fixed: true,\n        bordered: true,\n        key: (_dataSources$ = dataSources[0]) === null || _dataSources$ === void 0 ? void 0 : _dataSources$.id,\n        id: (_dataSources$2 = dataSources[0]) === null || _dataSources$2 === void 0 ? void 0 : _dataSources$2.id\n      }, (_dataSources$3 = dataSources[0]) === null || _dataSources$3 === void 0 ? void 0 : _dataSources$3.label, \" \", dataSources.length > 1 && `/${dataSources === null || dataSources === void 0 ? void 0 : (_dataSources$4 = dataSources[1]) === null || _dataSources$4 === void 0 ? void 0 : _dataSources$4.label}`);\n    }))));\n  }))), /*#__PURE__*/React.createElement(DataTableBody, null, /*#__PURE__*/React.createElement(DataTableRow, {\n    bordered: true\n  }, /*#__PURE__*/React.createElement(DataTableCell, {\n    width: \"100%\",\n    className: \"min-width-200\",\n    fixed: true,\n    tag: \"th\",\n    bordered: true\n  }, (_head = head(organisationUnits)) === null || _head === void 0 ? void 0 : _head.displayName), dataGroups === null || dataGroups === void 0 ? void 0 : dataGroups.map(group => {\n    var _group$dataHolders4, _group$dataHolders5, _group$dataHolders6;\n    return /*#__PURE__*/React.createElement(\"td\", {\n      className: \"no-wrap\",\n      width: `${((_group$dataHolders4 = group.dataHolders) === null || _group$dataHolders4 === void 0 ? void 0 : _group$dataHolders4.length) * 100}px`,\n      style: {\n        height: 47\n      },\n      key: group.id,\n      colSpan: ((_group$dataHolders5 = group.dataHolders) === null || _group$dataHolders5 === void 0 ? void 0 : _group$dataHolders5.length) || 1\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      style: {\n        borders: \"none\",\n        borderSpacing: 0\n      }\n    }, /*#__PURE__*/React.createElement(DataTableRow, null, group === null || group === void 0 ? void 0 : (_group$dataHolders6 = group.dataHolders) === null || _group$dataHolders6 === void 0 ? void 0 : _group$dataHolders6.map(config => /*#__PURE__*/React.createElement(PreviewCustomCell, {\n      key: config.id,\n      config: config\n    })))));\n  })))));\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { Button, ButtonStrip, Modal, ModalActions, ModalContent, ModalTitle } from \"@dhis2/ui\";\nimport { DataSourceSelector } from \"@hisptz/dhis2-ui\";\nimport PropTypes from \"prop-types\";\nimport React, { useState } from \"react\";\n\n//TODO: Refactor to shared\n\nexport default function DataSourceSelectorModal(_ref) {\n  let {\n    onClose,\n    open,\n    onSelect,\n    disabled\n  } = _ref;\n  const [selectedItems, setSelectedItems] = useState([]);\n  return /*#__PURE__*/React.createElement(Modal, {\n    onClose: onClose,\n    position: \"middle\",\n    large: true,\n    hide: !open\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t(\"Add Data source\")), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-100\"\n  }, /*#__PURE__*/React.createElement(DataSourceSelector, {\n    dataSources: [\"indicator\", \"dataElement\", \"dataSet\", \"programIndicator\", \"customFunction\"],\n    selected: selectedItems,\n    disabled: disabled,\n    onSelect: setSelectedItems\n  }))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, {\n    end: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: onClose\n  }, i18n.t(\"Cancel\")), /*#__PURE__*/React.createElement(Button, {\n    dataTest: \"scorecard-data-source-add\",\n    primary: true,\n    onClick: () => {\n      onSelect(selectedItems);\n      onClose();\n    }\n  }, i18n.t(\"Add\")))));\n}\nDataSourceSelectorModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  onSelect: PropTypes.func.isRequired,\n  disabled: PropTypes.array,\n  open: PropTypes.bool\n};","import { withStyles } from \"@material-ui/core\";\nimport MuiAccordion from \"@material-ui/core/Accordion\";\nimport MuiAccordionDetails from \"@material-ui/core/AccordionDetails\";\nimport MuiAccordionSummary from \"@material-ui/core/AccordionSummary\";\nconst Accordion = withStyles({\n  root: {\n    border: \"1px solid rgba(0, 0, 0, .125)\",\n    boxShadow: \"none\",\n    \"&:not(:last-child)\": {\n      borderBottom: 0\n    },\n    \"&:before\": {\n      display: \"none\"\n    },\n    \"&$expanded\": {\n      margin: \"auto\"\n    }\n  },\n  expanded: {}\n})(MuiAccordion);\nconst AccordionSummary = withStyles({\n  root: {\n    background: \"#F8F9FA\",\n    borderBottom: \"1px solid rgba(0, 0, 0, .125)\",\n    marginBottom: -1,\n    minHeight: 56,\n    \"&$expanded\": {\n      minHeight: 56\n    }\n  },\n  content: {\n    \"&$expanded\": {\n      margin: \"12px 0\"\n    }\n  },\n  expanded: {}\n})(MuiAccordionSummary);\nconst AccordionDetails = withStyles(theme => ({\n  root: {\n    padding: theme.spacing(2)\n  }\n}))(MuiAccordionDetails);\nexport { AccordionSummary, AccordionDetails, Accordion };","import i18n from \"@dhis2/d2-i18n\";\nimport { Button, ButtonStrip, Input } from \"@dhis2/ui\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nexport default function EditTitle(_ref) {\n  let {\n    titleEditValue,\n    setTitleEditValue,\n    title,\n    onClose,\n    onTitleEditSubmit\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row space-between w-100\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: event => event.stopPropagation(),\n    className: \"column\"\n  }, /*#__PURE__*/React.createElement(Input, {\n    initialFocus: true,\n    value: titleEditValue,\n    onChange: _ref2 => {\n      let {\n        value\n      } = _ref2;\n      return setTitleEditValue(value);\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column \"\n  }, /*#__PURE__*/React.createElement(ButtonStrip, {\n    end: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: onTitleEditSubmit\n  }, i18n.t(\"Save\")), /*#__PURE__*/React.createElement(Button, {\n    onClick: (_, event) => {\n      event.stopPropagation();\n      onClose(false);\n      setTitleEditValue(title);\n    }\n  }, i18n.t(\"Cancel\")))));\n}\nEditTitle.propTypes = {\n  title: PropTypes.string.isRequired,\n  titleEditValue: PropTypes.string.isRequired,\n  setTitleEditValue: PropTypes.func.isRequired,\n  onTitleEditSubmit: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { Button } from \"@dhis2/ui\";\nimport { ErrorIcon } from \"@scorecard/shared\";\nimport { IconButton } from \"@material-ui/core\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nexport default function GroupTitle(_ref) {\n  let {\n    setTitleEditOpen,\n    title,\n    error,\n    onDelete,\n    id\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row space-between align-items-center\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row  align-items-center accordion-title-container\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column w-auto\"\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    onDoubleClick: event => {\n      event.stopPropagation();\n      setTitleEditOpen(true);\n    },\n    onClick: event => event.stopPropagation(),\n    className: \"accordion-title group-name-area\"\n  }, title), error && /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      fontSize: 12,\n      margin: 4,\n      color: \"#f44336\"\n    }\n  }, error === null || error === void 0 ? void 0 : error.message)), /*#__PURE__*/React.createElement(IconButton, {\n    onClick: event => {\n      event.stopPropagation();\n      setTitleEditOpen(true);\n    },\n    size: \"small\",\n    className: \"accordion-title-edit\"\n  }, /*#__PURE__*/React.createElement(EditIcon, null))), /*#__PURE__*/React.createElement(\"div\", {\n    className: true\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row align-items-center\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"delete-group-icon\",\n    onClick: (_, event) => {\n      event.stopPropagation();\n      if (onDelete) {\n        onDelete(id);\n      }\n    },\n    icon: /*#__PURE__*/React.createElement(DeleteIcon, null)\n  }, i18n.t(\"Delete\")), error && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      paddingLeft: 16\n    }\n  }, /*#__PURE__*/React.createElement(ErrorIcon, {\n    color: \"#f44336\",\n    size: 24\n  })))));\n}\nGroupTitle.propTypes = {\n  id: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n  setTitleEditOpen: PropTypes.func.isRequired,\n  onDelete: PropTypes.func.isRequired,\n  error: PropTypes.any\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { Button } from \"@dhis2/ui\";\nimport { ScorecardIndicator } from \"@scorecard/shared\";\nimport { getDataSourceShortName } from \"@scorecard/shared\";\nimport { Avatar } from \"@material-ui/core\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nexport default function DataSource(_ref) {\n  let {\n    dataSource,\n    index,\n    onDelete\n  } = _ref;\n  const {\n    label,\n    type\n  } = dataSource !== null && dataSource !== void 0 ? dataSource : new ScorecardIndicator();\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-bordered data-source p-8 w-100\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row space-between align-items-center\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row align-items-center \"\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: \"data-source avatar\"\n  }, getDataSourceShortName(type)), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"data-source name\"\n  }, label, \" \")), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Button, {\n    className: \"data-source close-icon\",\n    small: true,\n    onClick: (_, event) => {\n      event.stopPropagation();\n      onDelete(index);\n    },\n    icon: /*#__PURE__*/React.createElement(DeleteIcon, null)\n  }, i18n.t(\"Delete\"))))));\n}\nDataSource.propTypes = {\n  dataSource: PropTypes.instanceOf(ScorecardIndicator).isRequired,\n  index: PropTypes.number.isRequired,\n  onDelete: PropTypes.func.isRequired\n};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { colors } from \"@dhis2/ui\";\nimport { ScorecardIndicatorHolder } from \"@scorecard/shared\";\nimport { ScorecardConfigDirtySelector, ScorecardConfigEditState } from \"@scorecard/shared\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { Draggable } from \"react-beautiful-dnd\";\nimport { useFormContext } from \"react-hook-form\";\nimport { useRecoilState, useSetRecoilState } from \"recoil\";\nimport DataSource from \"../DataSource\";\nexport default function DataSourceHolder(_ref) {\n  let {\n    dataHolder,\n    id,\n    index,\n    onDelete\n  } = _ref;\n  const {\n    dataSources\n  } = dataHolder !== null && dataHolder !== void 0 ? dataHolder : new ScorecardIndicatorHolder();\n  const {\n    trigger\n  } = useFormContext();\n  const [scorecardEditState, setScorecardEditState] = useRecoilState(ScorecardConfigEditState);\n  const path = [\"dataGroups\", scorecardEditState.selectedGroupIndex, \"dataHolders\", index];\n  const updateDataHolder = useSetRecoilState(ScorecardConfigDirtySelector({\n    key: \"dataSelection\",\n    path\n  }));\n  const selected = scorecardEditState.selectedDataHolderIndex === index;\n  const hasLinked = (dataSources === null || dataSources === void 0 ? void 0 : dataSources.length) > 1;\n  const onDataSourceDelete = indicatorIndex => {\n    if (hasLinked) {\n      const updatedDataSources = [...dataSources];\n      updatedDataSources.splice(indicatorIndex, 1);\n      updateDataHolder(prevState => ScorecardIndicatorHolder.set(prevState, \"dataSources\", updatedDataSources));\n      return;\n    }\n    onDelete(index);\n  };\n  return /*#__PURE__*/React.createElement(Draggable, {\n    draggableId: `${id}`,\n    index: index\n  }, provided => /*#__PURE__*/React.createElement(\"div\", _extends({}, provided.draggableProps, provided.dragHandleProps, {\n    ref: provided.innerRef\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row align-items-center\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: async () => {\n      if (id) {\n        if (await trigger()) {\n          setScorecardEditState(prevState => ({\n            ...prevState,\n            selectedDataHolderIndex: index\n          }));\n        }\n      }\n    },\n    className: \"column center\",\n    style: {\n      border: hasLinked && `1px solid ${colors.grey400}`,\n      background: selected && `${colors.teal200}`,\n      padding: hasLinked && 8,\n      marginBottom: 8\n    }\n  }, dataSources === null || dataSources === void 0 ? void 0 : dataSources.map((dataGroup, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"data-holder\",\n      key: dataGroup.id,\n      style: {\n        margin: \"4px 0\"\n      }\n    }, /*#__PURE__*/React.createElement(DataSource, {\n      hasLinked: hasLinked,\n      dataSource: dataGroup,\n      key: dataGroup.id,\n      onDelete: onDataSourceDelete,\n      index: index\n    }));\n  })))));\n}\nDataSourceHolder.propTypes = {\n  dataHolder: PropTypes.array.isRequired,\n  id: PropTypes.string.isRequired,\n  index: PropTypes.number.isRequired,\n  onDelete: PropTypes.func.isRequired\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { Tooltip } from \"@dhis2/ui\";\nimport { ScorecardIndicatorHolder } from \"@scorecard/shared\";\nimport { IconButton } from \"@material-ui/core\";\nimport LinkIcon from \"@material-ui/icons/Link\";\nimport UnlinkIcon from \"@material-ui/icons/LinkOff\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport useLinkManage from \"../../../../../hooks/useLinkManage\";\nimport DataSourceHolder from \"../../DataSourceHolder\";\nexport default function LinkingContainer(_ref) {\n  let {\n    chunk,\n    onDataSourceDelete,\n    onLink,\n    onUnlink,\n    dataHolders\n  } = _ref;\n  const {\n    linkable,\n    hasLink,\n    onIconClick,\n    getIndex,\n    onUnlinkClick\n  } = useLinkManage({\n    onLink,\n    onUnlink,\n    dataHolders,\n    chunk\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"linking-container\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row align-items-center\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\"\n  }, chunk === null || chunk === void 0 ? void 0 : chunk.map(source => /*#__PURE__*/React.createElement(Tooltip, {\n    content: i18n.t(\"Click to configure, drag to rearrange\"),\n    key: source.id\n  }, /*#__PURE__*/React.createElement(DataSourceHolder, {\n    onUnlink: onUnlinkClick,\n    dataHolder: source,\n    onDelete: onDataSourceDelete,\n    key: source.id,\n    id: source.id,\n    index: getIndex(source.id)\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"link-button-container\"\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    content: i18n.t(\"Click to {{linkAction}}\", {\n      linkAction: hasLink ? i18n.t(\"unlink\") : i18n.t(\"link\")\n    })\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    onClick: onIconClick,\n    disabled: !linkable && !hasLink\n  }, (linkable || hasLink) && (hasLink ? /*#__PURE__*/React.createElement(UnlinkIcon, {\n    className: \"link-button\"\n  }) : /*#__PURE__*/React.createElement(LinkIcon, {\n    className: \"link-button\"\n  })))))));\n}\nLinkingContainer.propTypes = {\n  chunk: PropTypes.array.isRequired,\n  dataHolders: PropTypes.arrayOf(PropTypes.instanceOf(ScorecardIndicatorHolder)).isRequired,\n  onDataSourceDelete: PropTypes.func.isRequired,\n  onLink: PropTypes.func.isRequired,\n  onUnlink: PropTypes.func.isRequired\n};","import { findIndex, head, last } from \"lodash\";\nimport { useCallback } from \"react\";\nexport default function useLinkManage(_ref) {\n  var _head, _head$dataSources;\n  let {\n    onLink,\n    onUnlink,\n    dataHolders,\n    chunk\n  } = _ref;\n  const linkable = chunk.length > 1;\n  const hasLink = ((_head = head(chunk)) === null || _head === void 0 ? void 0 : (_head$dataSources = _head.dataSources) === null || _head$dataSources === void 0 ? void 0 : _head$dataSources.length) > 1;\n  const getIndex = useCallback(id => {\n    return findIndex(dataHolders, [\"id\", id]);\n  }, [dataHolders]);\n  const onLinkClick = () => {\n    var _head2, _last;\n    const indexOfMergedHolder = getIndex((_head2 = head(chunk)) === null || _head2 === void 0 ? void 0 : _head2.id);\n    const indexOfDeletedHolder = getIndex((_last = last(chunk)) === null || _last === void 0 ? void 0 : _last.id);\n    onLink(indexOfMergedHolder, indexOfDeletedHolder);\n  };\n  const onUnlinkClick = () => {\n    onUnlink(head(chunk).id);\n  };\n  const onIconClick = () => {\n    hasLink ? onUnlinkClick() : onLinkClick();\n  };\n  return {\n    linkable,\n    hasLink,\n    onIconClick,\n    onLinkClick,\n    onUnlinkClick,\n    getIndex\n  };\n}","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from \"@dhis2/d2-i18n\";\nimport { Button, colors, Tooltip } from \"@dhis2/ui\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport { ScorecardIndicatorGroup } from \"@scorecard/shared\";\nimport { isEmpty } from \"lodash\";\nimport PropTypes from \"prop-types\";\nimport React, { forwardRef, useRef, useState } from \"react\";\nimport { DragDropContext, Draggable, Droppable } from \"react-beautiful-dnd\";\nimport useDataGroupLayout from \"../../../../hooks/useDataGroupLayout\";\nimport useDataGroupManage from \"../../../../hooks/useDataGroupManage\";\nimport useDataHolders from \"../../../../hooks/useDataHolders\";\nimport DataSourceSelectorModal from \"../DataSourceSelectorModal\";\nimport { Accordion, AccordionDetails, AccordionSummary } from \"./Components/Accordions\";\nimport EditTitle from \"./Components/EditTitle\";\nimport GroupTitle from \"./Components/GroupTitle\";\nimport LinkingContainer from \"./Components/LinkingContainer\";\nfunction DataGroup(_ref, ref) {\n  let {\n    handleAccordionChange,\n    expanded,\n    index,\n    onDelete,\n    error\n  } = _ref;\n  const {\n    onDataSourceDelete,\n    onDataSourceAdd,\n    onTitleEditSubmit,\n    titleEditValue,\n    titleEditOpen,\n    setTitleEditOpen,\n    setTitleEditValue,\n    group\n  } = useDataGroupManage({\n    index,\n    expanded\n  });\n  const {\n    onLink,\n    onUnlink,\n    onDragEnd,\n    onExpand\n  } = useDataGroupLayout({\n    handleAccordionChange,\n    index\n  });\n  const {\n    dataHolderChunks,\n    selectedDataSourcesIds\n  } = useDataHolders({\n    index\n  });\n  const {\n    title,\n    id,\n    dataHolders\n  } = group !== null && group !== void 0 ? group : new ScorecardIndicatorGroup();\n  const [openAdd, setOpenAdd] = useState(false);\n  const summaryRef = useRef();\n  return /*#__PURE__*/React.createElement(Draggable, {\n    ref: ref,\n    index: index,\n    draggableId: id\n  }, provided => /*#__PURE__*/React.createElement(Accordion, {\n    innerRef: provided.innerRef,\n    onDoubleClick: event => event.stopPropagation(),\n    expandIcon: /*#__PURE__*/React.createElement(ExpandMoreIcon, null),\n    square: true,\n    expanded: expanded === id,\n    onChange: onExpand\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    content: i18n.t(\"Click to {{action}}, drag to rearrange\", {\n      action: expanded === id ? i18n.t(\"collapse\") : i18n.t(\"expand\")\n    })\n  }, /*#__PURE__*/React.createElement(AccordionSummary, _extends({\n    innerRef: summaryRef,\n    onClick: event => event.stopPropagation()\n  }, provided.draggableProps, provided.dragHandleProps, {\n    expandIcon: /*#__PURE__*/React.createElement(ExpandMoreIcon, {\n      className: \"expand-group-icon\",\n      dataTest: \"scorecard-group-expand\"\n    }),\n    \"aria-controls\": `${id}d-content`,\n    id: `${id}d--header`,\n    dataTest: \"scorecard-group-item\"\n  }), titleEditOpen ? /*#__PURE__*/React.createElement(EditTitle, {\n    onTitleEditSubmit: onTitleEditSubmit,\n    titleEditValue: titleEditValue,\n    onClose: setTitleEditOpen,\n    title: title,\n    setTitleEditValue: setTitleEditValue\n  }) : /*#__PURE__*/React.createElement(GroupTitle, {\n    title: title,\n    onDelete: onDelete,\n    setTitleEditOpen: setTitleEditOpen,\n    id: id,\n    error: error\n  }))), /*#__PURE__*/React.createElement(AccordionDetails, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column data-holders-area\"\n  }, isEmpty(dataHolders) ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column w-100 text-center center\",\n    style: {\n      height: 100\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: colors.grey600\n    }\n  }, i18n.t(\"Add a data source\"))) : /*#__PURE__*/React.createElement(DragDropContext, {\n    onDragEnd: onDragEnd\n  }, /*#__PURE__*/React.createElement(Droppable, {\n    droppableId: `${id}`\n  }, provided => /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: \"w-100 \"\n  }, provided.droppableProps, {\n    ref: provided.innerRef\n  }), dataHolderChunks === null || dataHolderChunks === void 0 ? void 0 : dataHolderChunks.map((chunk, i) => /*#__PURE__*/React.createElement(LinkingContainer, {\n    dataHolders: dataHolders,\n    onUnlink: onUnlink,\n    onLink: onLink,\n    chunk: chunk,\n    chunkIndex: i,\n    onDataSourceDelete: onDataSourceDelete,\n    key: `${i}-linking-container-${group === null || group === void 0 ? void 0 : group.id}`\n  })), provided.placeholder))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Button, {\n    className: \"scorecard-indicator-add\",\n    dataTest: \"scorecard-indicator-add\",\n    onClick: () => setOpenAdd(true),\n    icon: /*#__PURE__*/React.createElement(AddIcon, null)\n  }, i18n.t(\"Add Item\")))), openAdd && /*#__PURE__*/React.createElement(DataSourceSelectorModal, {\n    disabled: selectedDataSourcesIds,\n    onSelect: onDataSourceAdd,\n    onClose: () => setOpenAdd(false),\n    open: openAdd\n  }))));\n}\nexport default /*#__PURE__*/forwardRef(DataGroup);\nDataGroup.propTypes = {\n  index: PropTypes.number.isRequired,\n  error: PropTypes.object,\n  expanded: PropTypes.string,\n  handleAccordionChange: PropTypes.func,\n  onDelete: PropTypes.func\n};","import { ScorecardIndicator, ScorecardIndicatorGroup, ScorecardIndicatorHolder } from \"@scorecard/shared\";\nimport { OrgUnitLevels, ScorecardConfigDirtyState, ScorecardConfigEditState } from \"@scorecard/shared\";\nimport { generateLegendDefaults, uid } from \"@scorecard/shared\";\nimport { cloneDeep, filter, fromPairs, isEmpty } from \"lodash\";\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport { useRecoilState, useRecoilValue } from \"recoil\";\nexport default function useDataGroupManage(_ref) {\n  let {\n    index,\n    expanded\n  } = _ref;\n  const {\n    watch,\n    setValue\n  } = useFormContext();\n  const orgUnitLevels = useRecoilValue(OrgUnitLevels);\n  const targetOnLevels = useRecoilValue(ScorecardConfigDirtyState(\"targetOnLevels\"));\n  const [scorecardEditorState, setScorecardEditorState] = useRecoilState(ScorecardConfigEditState);\n  const path = useMemo(() => [\"dataSelection\", \"dataGroups\", index].join(\".\"), [index]);\n  const group = watch(path);\n  const setGroup = useCallback(updatedGroup => {\n    try {\n      setValue(path, updatedGroup);\n    } catch (e) {\n      console.error(e);\n    }\n  }, [path, setValue]);\n  const legendDefinitions = watch(\"legendDefinitions\");\n  const filteredLegendDefinitions = useMemo(() => filter(legendDefinitions, _ref2 => {\n    let {\n      isDefault\n    } = _ref2;\n    return !isDefault;\n  }), [legendDefinitions]);\n  const {\n    title,\n    id,\n    dataHolders\n  } = group !== null && group !== void 0 ? group : new ScorecardIndicatorGroup();\n  const [titleEditOpen, setTitleEditOpen] = useState(false);\n  const [titleEditValue, setTitleEditValue] = useState(title);\n  const onDataSourceAdd = addedDataSources => {\n    //Assigns each of the selected indicator to its own holder\n    const newDataSources = addedDataSources === null || addedDataSources === void 0 ? void 0 : addedDataSources.map(dataSource => {\n      var _orgUnitLevels$map;\n      return new ScorecardIndicatorHolder({\n        id: uid(),\n        dataSources: [new ScorecardIndicator({\n          ...dataSource,\n          label: dataSource.displayName,\n          name: dataSource.displayName,\n          legends: targetOnLevels ? fromPairs([...((_orgUnitLevels$map = orgUnitLevels === null || orgUnitLevels === void 0 ? void 0 : orgUnitLevels.map(_ref3 => {\n            let {\n              id\n            } = _ref3;\n            return [id, generateLegendDefaults(filteredLegendDefinitions, 100, true)];\n          })) !== null && _orgUnitLevels$map !== void 0 ? _orgUnitLevels$map : [])]) : generateLegendDefaults(filteredLegendDefinitions, 100, true)\n        })]\n      });\n    });\n    const updatedDataSources = [...dataHolders, ...newDataSources];\n    setGroup(ScorecardIndicatorGroup.set(group, \"dataHolders\", updatedDataSources));\n  };\n  const onDataSourceDelete = deletedDataSourceIndex => {\n    try {\n      if (scorecardEditorState.selectedDataHolderIndex === deletedDataSourceIndex) {\n        setScorecardEditorState(prevState => ({\n          ...prevState,\n          selectedDataHolderIndex: undefined\n        }));\n      }\n      const updatedDataSources = cloneDeep(dataHolders) || [];\n      if (!isEmpty(updatedDataSources)) {\n        updatedDataSources.splice(deletedDataSourceIndex, 1);\n        setGroup(ScorecardIndicatorGroup.set(group, \"dataHolders\", updatedDataSources));\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  };\n  useEffect(() => {\n    if (expanded === id) {\n      setScorecardEditorState(prevState => {\n        return {\n          ...prevState,\n          selectedDataHolderIndex: undefined,\n          selectedGroupIndex: index\n        };\n      });\n    }\n  }, [expanded]);\n  //Only want to run this effect when the expanded state changes, DO NOT ADD TO EFFECT DEPENDENCIES!\n\n  const onTitleEditSubmit = (_, event) => {\n    event.stopPropagation();\n    if (isEmpty(titleEditValue.trim())) {\n      setTitleEditValue(title);\n      setTitleEditOpen(false);\n    } else {\n      setGroup(ScorecardIndicatorGroup.set(group, \"title\", titleEditValue));\n      setTitleEditOpen(false);\n    }\n  };\n  return {\n    onDataSourceDelete,\n    onDataSourceAdd,\n    onTitleEditSubmit,\n    titleEditOpen,\n    titleEditValue,\n    setTitleEditValue,\n    setTitleEditOpen,\n    group\n  };\n}","import { ScorecardIndicatorGroup, ScorecardIndicatorHolder } from \"@scorecard/shared\";\nimport { ScorecardConfigEditState } from \"@scorecard/shared\";\nimport { updateListFromDragAndDrop } from \"@scorecard/shared\";\nimport { cloneDeep, find, findIndex, head, last, set } from \"lodash\";\nimport { useCallback, useMemo } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport { useRecoilCallback } from \"recoil\";\nexport default function useDataGroupLayout(_ref) {\n  let {\n    handleAccordionChange,\n    index\n  } = _ref;\n  const {\n    watch,\n    setValue\n  } = useFormContext();\n  const path = useMemo(() => [\"dataSelection\", \"dataGroups\", index].join(\".\"), [index]);\n  const group = watch(path);\n  const {\n    id,\n    dataHolders\n  } = group !== null && group !== void 0 ? group : new ScorecardIndicatorGroup();\n  const setGroup = useCallback(updatedGroup => {\n    setValue(path, updatedGroup);\n  }, [path, setValue]);\n  const onLink = useRecoilCallback(_ref2 => {\n    let {\n      snapshot,\n      set\n    } = _ref2;\n    return (indexOfMergedHolder, indexOfTheDeletedHolder) => {\n      var _dataHolders$indexOfT, _snapshot$getLoadable;\n      const dataSourceToLink = head((_dataHolders$indexOfT = dataHolders[indexOfTheDeletedHolder]) === null || _dataHolders$indexOfT === void 0 ? void 0 : _dataHolders$indexOfT.dataSources);\n      const mergedHolder = ScorecardIndicatorHolder.linkDataSource(dataHolders[indexOfMergedHolder], dataSourceToLink);\n      const updatedHolderList = [...dataHolders];\n      updatedHolderList.splice(indexOfMergedHolder, 1, mergedHolder);\n      updatedHolderList.splice(indexOfTheDeletedHolder, 1);\n      const selectedDataHolderIndex = (_snapshot$getLoadable = snapshot.getLoadable(ScorecardConfigEditState).contents) === null || _snapshot$getLoadable === void 0 ? void 0 : _snapshot$getLoadable.selectedDataHolderIndex;\n      if (selectedDataHolderIndex === indexOfMergedHolder || selectedDataHolderIndex === indexOfTheDeletedHolder) {\n        set(ScorecardConfigEditState, prevState => {\n          return {\n            ...prevState,\n            selectedDataHolderIndex: indexOfMergedHolder\n          };\n        });\n      }\n      setGroup(ScorecardIndicatorGroup.set(group, \"dataHolders\", updatedHolderList));\n    };\n  }, [dataHolders, group, setGroup]);\n  const onUnlink = useRecoilCallback(_ref3 => {\n    let {\n      set: setState\n    } = _ref3;\n    return id => {\n      var _dataHolderToModify$d;\n      //get the linked holder by id\n      const dataHolder = find(dataHolders, [\"id\", id]);\n      const dataHolderIndex = findIndex(dataHolders, [\"id\", id]);\n      //create a new holder for the last dataSource\n      const newDataHolder = new ScorecardIndicatorHolder({\n        dataSources: [last(dataHolder === null || dataHolder === void 0 ? void 0 : dataHolder.dataSources)]\n      });\n      const dataHolderToModify = cloneDeep(dataHolder);\n      const modifiedDataHolder = ScorecardIndicatorHolder.set(dataHolderToModify, \"dataSources\", dataHolderToModify === null || dataHolderToModify === void 0 ? void 0 : (_dataHolderToModify$d = dataHolderToModify.dataSources) === null || _dataHolderToModify$d === void 0 ? void 0 : _dataHolderToModify$d.splice(0, 1));\n      const updatedHolderList = [...dataHolders];\n      set(updatedHolderList, [dataHolderIndex], modifiedDataHolder);\n      updatedHolderList.splice(dataHolderIndex, 0, newDataHolder);\n      setGroup(ScorecardIndicatorGroup.set(group, \"dataHolders\", updatedHolderList));\n      setState(ScorecardConfigEditState, prevState => {\n        return {\n          ...prevState,\n          selectedDataHolderIndex: undefined\n        };\n      });\n    };\n  });\n  const onDragEnd = useRecoilCallback(_ref4 => {\n    let {\n      set\n    } = _ref4;\n    return result => {\n      const {\n        destination,\n        source\n      } = result || {};\n      setGroup(ScorecardIndicatorGroup.set(group, \"dataHolders\", updateListFromDragAndDrop(group === null || group === void 0 ? void 0 : group.dataHolders, source === null || source === void 0 ? void 0 : source.index, destination === null || destination === void 0 ? void 0 : destination.index)));\n      set(ScorecardConfigEditState, prevState => {\n        if (prevState.selectedDataHolderIndex === (source === null || source === void 0 ? void 0 : source.index)) {\n          return {\n            ...prevState,\n            selectedDataHolderIndex: destination === null || destination === void 0 ? void 0 : destination.index\n          };\n        }\n        return prevState;\n      });\n    };\n  });\n  const onExpand = (event, newExpanded) => {\n    handleAccordionChange(id)(event, newExpanded);\n  };\n  return {\n    onLink,\n    onUnlink,\n    onDragEnd,\n    onExpand\n  };\n}","import { ScorecardIndicatorGroup } from \"@scorecard/shared\";\nimport { flattenDeep } from \"lodash\";\nimport { useMemo } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport { customChunk } from \"../Components/DataGroups/Components/DataGroup/utils\";\nexport default function useDataHolders(_ref) {\n  var _flattenDeep;\n  let {\n    index\n  } = _ref;\n  const {\n    watch\n  } = useFormContext();\n  const path = useMemo(() => [\"dataSelection\", \"dataGroups\", index].join(\".\"), [index]);\n  const group = watch(path);\n  const {\n    dataHolders\n  } = group !== null && group !== void 0 ? group : new ScorecardIndicatorGroup();\n  const dataHolderChunks = customChunk(dataHolders);\n  const selectedDataSourcesIds = (_flattenDeep = flattenDeep(dataHolders === null || dataHolders === void 0 ? void 0 : dataHolders.map(_ref2 => {\n    let {\n      dataSources\n    } = _ref2;\n    return dataSources;\n  }))) === null || _flattenDeep === void 0 ? void 0 : _flattenDeep.map(_ref3 => {\n    let {\n      id\n    } = _ref3;\n    return id;\n  });\n  return {\n    dataHolderChunks,\n    selectedDataSourcesIds\n  };\n}","export function getChunkChildIndex() {\n  let chunkSize = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 2;\n  let chunkIndex = arguments.length > 1 ? arguments[1] : undefined;\n  let childIndex = arguments.length > 2 ? arguments[2] : undefined;\n  return chunkSize * chunkIndex + childIndex;\n}\nexport function customChunk() {\n  let list = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  const chunks = [];\n  const listToModify = [...list];\n  const i = 0;\n  while (listToModify.length > 0) {\n    var _listToModify$i, _listToModify$i2, _listToModify$i2$data, _listToModify, _listToModify$dataSou;\n    if (((_listToModify$i = listToModify[i]) === null || _listToModify$i === void 0 ? void 0 : _listToModify$i.dataSources) > 1) {\n      chunks.push(listToModify.splice(i, 1));\n      continue;\n    }\n    if (((_listToModify$i2 = listToModify[i]) === null || _listToModify$i2 === void 0 ? void 0 : (_listToModify$i2$data = _listToModify$i2.dataSources) === null || _listToModify$i2$data === void 0 ? void 0 : _listToModify$i2$data.length) < 2 && ((_listToModify = listToModify[i + 1]) === null || _listToModify === void 0 ? void 0 : (_listToModify$dataSou = _listToModify.dataSources) === null || _listToModify$dataSou === void 0 ? void 0 : _listToModify$dataSou.length) < 2) {\n      chunks.push(listToModify.splice(i, 2));\n      continue;\n    }\n    chunks.push(listToModify.splice(i, 1));\n  }\n  return chunks;\n}","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from \"@dhis2/d2-i18n\";\nimport { DataSelection } from \"@scorecard/shared\";\nimport { ScorecardConfigEditState } from \"@scorecard/shared\";\nimport { filter, findIndex, isEmpty, last, remove, set } from \"lodash\";\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { Droppable } from \"react-beautiful-dnd\";\nimport { Controller, useFormContext } from \"react-hook-form\";\nimport { useRecoilValue, useResetRecoilState } from \"recoil\";\nimport { SearchedGroupsState } from \"../../DataGroupArea\";\nimport DataGroup from \"./Components/DataGroup\";\nexport default function DataGroups() {\n  var _last;\n  const {\n    setValue,\n    watch\n  } = useFormContext();\n  const dataSelection = watch(\"dataSelection\");\n  const searchedGroups = useRecoilValue(SearchedGroupsState);\n  const updateDataSelection = useCallback(updatedDataSelection => {\n    setValue(\"dataSelection\", updatedDataSelection);\n  }, [setValue]);\n  const resetEditState = useResetRecoilState(ScorecardConfigEditState);\n  const {\n    dataGroups: groups\n  } = dataSelection || new DataSelection();\n  const [expanded, setExpanded] = useState((_last = last(groups)) === null || _last === void 0 ? void 0 : _last.id);\n  const handleAccordionChange = panel => (event, newExpanded) => {\n    setExpanded(newExpanded ? panel : false);\n  };\n  const onDeleteGroup = id => {\n    const updatedGroupList = [...groups];\n    remove(updatedGroupList, [\"id\", id]);\n    updateDataSelection(DataSelection.set(dataSelection, \"dataGroups\", updatedGroupList));\n    resetEditState();\n  };\n  const onGroupUpdate = (index, newGroupData) => {\n    const updatedGroupList = [...groups];\n    set(updatedGroupList, [index], newGroupData);\n    updateDataSelection(DataSelection.set(dataSelection, \"dataGroups\", updatedGroupList));\n  };\n  const filteredGroups = useMemo(() => {\n    if (isEmpty(searchedGroups)) {\n      return groups;\n    } else {\n      return filter(groups, _ref => {\n        let {\n          id\n        } = _ref;\n        return searchedGroups.includes(id);\n      });\n    }\n  }, [searchedGroups, groups]);\n  useEffect(() => {\n    var _last2;\n    setExpanded((_last2 = last(filteredGroups)) === null || _last2 === void 0 ? void 0 : _last2.id);\n  }, [filteredGroups, filteredGroups.length]);\n  return /*#__PURE__*/React.createElement(Droppable, {\n    droppableId: \"group-area\"\n  }, provided => /*#__PURE__*/React.createElement(\"div\", _extends({}, provided.droppableProps, {\n    ref: provided.innerRef\n  }), /*#__PURE__*/React.createElement(\"div\", null, filteredGroups === null || filteredGroups === void 0 ? void 0 : filteredGroups.map(group => {\n    const groupIndex = findIndex(groups, [\"id\", group.id]);\n    return /*#__PURE__*/React.createElement(Controller, {\n      key: group.id,\n      id: group.id,\n      rules: {\n        validate: {\n          isNotEmpty: value => !isEmpty(value === null || value === void 0 ? void 0 : value.dataHolders) || i18n.t(\"Please select at least one data source for this group\")\n        }\n      },\n      name: `dataSelection.dataGroups.${groupIndex}`,\n      render: _ref2 => {\n        let {\n          field,\n          fieldState\n        } = _ref2;\n        return /*#__PURE__*/React.createElement(DataGroup, _extends({}, field, {\n          error: fieldState.error,\n          onGroupUpdate: onGroupUpdate,\n          onDelete: onDeleteGroup,\n          index: groupIndex,\n          group: group,\n          expanded: expanded,\n          handleAccordionChange: handleAccordionChange\n        }));\n      }\n    });\n  }), provided.placeholder)));\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { Button, Input } from \"@dhis2/ui\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport { DataSelection, ScorecardConfigEditState, updateListFromDragAndDrop } from \"@scorecard/shared\";\nimport { debounce, find } from \"lodash\";\nimport PropTypes from \"prop-types\";\nimport React, { useRef, useState } from \"react\";\nimport { DragDropContext } from \"react-beautiful-dnd\";\nimport { useFormContext } from \"react-hook-form\";\nimport { atom, useRecoilCallback, useSetRecoilState } from \"recoil\";\nimport DataGroups from \"./Components/DataGroups\";\nexport const SearchedGroupsState = atom({\n  key: \"dataSelectionFilterAtom\",\n  default: []\n});\nexport default function DataGroupArea(_ref) {\n  let {\n    onGroupAdd\n  } = _ref;\n  const {\n    setValue,\n    watch\n  } = useFormContext();\n  const dataSelection = watch(\"dataSelection\");\n  const [keyword, setKeyword] = useState(\"\");\n  const setSearchedGroups = useSetRecoilState(SearchedGroupsState);\n  const onSearch = useRef(debounce(keyword => {\n    setSearchedGroups(() => {\n      if (keyword) {\n        var _dataSelection$dataGr;\n        return dataSelection === null || dataSelection === void 0 ? void 0 : (_dataSelection$dataGr = dataSelection.dataGroups.filter(dataHolderGroup => {\n          return find(dataHolderGroup === null || dataHolderGroup === void 0 ? void 0 : dataHolderGroup.dataHolders, dataHolderIndicator => {\n            return find(dataHolderIndicator === null || dataHolderIndicator === void 0 ? void 0 : dataHolderIndicator.dataSources, dataHolderIndicatorSelections => {\n              const searchIndex = `${dataHolderIndicatorSelections.name} ${dataHolderIndicatorSelections.label}`.toLowerCase();\n              return searchIndex.match(new RegExp(keyword.toLowerCase()));\n            });\n          });\n        })) === null || _dataSelection$dataGr === void 0 ? void 0 : _dataSelection$dataGr.map(_ref2 => {\n          let {\n            id\n          } = _ref2;\n          return id;\n        });\n      } else {\n        return [];\n      }\n    });\n  }, 500));\n  const onDragEnd = useRecoilCallback(_ref3 => {\n    let {\n      set\n    } = _ref3;\n    return result => {\n      const {\n        destination,\n        source\n      } = result !== null && result !== void 0 ? result : {};\n      setValue(\"dataSelection\", DataSelection.set(dataSelection, \"dataGroups\", [...updateListFromDragAndDrop(dataSelection === null || dataSelection === void 0 ? void 0 : dataSelection.dataGroups, source === null || source === void 0 ? void 0 : source.index, destination === null || destination === void 0 ? void 0 : destination.index)]));\n      set(ScorecardConfigEditState, prevState => {\n        if (prevState.selectedGroupIndex === (source === null || source === void 0 ? void 0 : source.index)) {\n          return {\n            ...prevState,\n            selectedGroupIndex: destination === null || destination === void 0 ? void 0 : destination.index\n          };\n        }\n        return prevState;\n      });\n    };\n  }, [dataSelection, setValue]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column h-100\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-16\"\n  }, /*#__PURE__*/React.createElement(Input, {\n    value: keyword,\n    name: \"\",\n    onChange: _ref4 => {\n      let {\n        value\n      } = _ref4;\n      setKeyword(value);\n      if (value !== \"\" && value !== undefined) {\n        onSearch.current(value);\n      } else {\n        setSearchedGroups([]);\n      }\n    },\n    placeholder: i18n.t(\"Search for Indicator\")\n  })), /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"pl-16\"\n  }, i18n.t(\"Groups\")), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      maxHeight: '60vh',\n      overflowY: 'auto',\n      flex: 1\n    }\n  }, /*#__PURE__*/React.createElement(DragDropContext, {\n    onDragEnd: onDragEnd\n  }, /*#__PURE__*/React.createElement(DataGroups, null))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-8 column\",\n    style: {\n      alignItems: \"start\"\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: onGroupAdd,\n    icon: /*#__PURE__*/React.createElement(AddIcon, null),\n    dataTest: \"scocecard-add-group-button\",\n    className: \"scorecard-add-group-button\"\n  }, i18n.t(\"Add Group\"))));\n}\nDataGroupArea.propTypes = {\n  onGroupAdd: PropTypes.func.isRequired\n};","import { ScorecardIndicatorGroup } from \"@scorecard/shared\";\nimport { generateLegendDefaults } from \"@scorecard/shared\";\nimport { fromPairs, set } from \"lodash\";\nexport function generateNewGroupData(groups) {\n  return new ScorecardIndicatorGroup({\n    title: `Group ${(groups === null || groups === void 0 ? void 0 : groups.length) + 1 || 1}`\n  });\n}\nexport function updateLegendsOnDataGroups(dataGroups, _ref) {\n  let {\n    targetOnLevels,\n    filteredLegendDefinitions,\n    orgUnitLevels\n  } = _ref;\n  const newValue = targetOnLevels ? fromPairs([...(orgUnitLevels === null || orgUnitLevels === void 0 ? void 0 : orgUnitLevels.map(_ref2 => {\n    let {\n      id\n    } = _ref2;\n    return [id, generateLegendDefaults(filteredLegendDefinitions, 100, true)];\n  }))]) : generateLegendDefaults(filteredLegendDefinitions, 100, true);\n  let updatedGroups = [...dataGroups];\n  for (const groupIndex in updatedGroups) {\n    for (const holderIndex in (_updatedGroups$groupI = updatedGroups[groupIndex]) === null || _updatedGroups$groupI === void 0 ? void 0 : _updatedGroups$groupI.dataHolders) {\n      var _updatedGroups$groupI;\n      for (const sourceIndex in (_updatedGroups$groupI2 = updatedGroups[groupIndex]) === null || _updatedGroups$groupI2 === void 0 ? void 0 : (_updatedGroups$groupI3 = _updatedGroups$groupI2.dataHolders) === null || _updatedGroups$groupI3 === void 0 ? void 0 : (_updatedGroups$groupI4 = _updatedGroups$groupI3[holderIndex]) === null || _updatedGroups$groupI4 === void 0 ? void 0 : _updatedGroups$groupI4.dataSources) {\n        var _updatedGroups$groupI2, _updatedGroups$groupI3, _updatedGroups$groupI4;\n        updatedGroups = set(updatedGroups, [groupIndex, \"dataHolders\", holderIndex, \"dataSources\", sourceIndex, \"legends\"], newValue);\n      }\n    }\n  }\n  return updatedGroups;\n}","// extracted by mini-css-extract-plugin\nexport default {\"step\":\"ScorecardManagement_step__A9+fv\",\"edit-container\":\"ScorecardManagement_edit-container__sZk39\"};","import { useCallback } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport { resetLegends } from \"../../../utils/utils\";\nexport function useResetLegends() {\n  const {\n    watch,\n    setValue\n  } = useFormContext();\n  const dataGroups = watch(\"dataSelection.dataGroups\");\n  const shouldVerify = dataGroups.length > 0;\n  const onResetLegends = useCallback(updatedDefinitions => {\n    const newGroups = resetLegends(dataGroups, updatedDefinitions);\n    setValue(\"dataSelection.dataGroups\", newGroups);\n  }, [dataGroups, setValue]);\n  return {\n    onResetLegends,\n    shouldVerify\n  };\n}","import i18n from '@dhis2/d2-i18n';\nimport { RHFDHIS2FormField } from \"@hisptz/dhis2-ui\";\nimport React from \"react\";\nimport { useResetLegends } from \"./hooks/useResetLegends\";\nexport default function LegendDefinitionFormField() {\n  const {\n    shouldVerify,\n    onResetLegends\n  } = useResetLegends();\n  return /*#__PURE__*/React.createElement(RHFDHIS2FormField, {\n    label: i18n.t(\"Legend Definitions\"),\n    onResetLegends: onResetLegends,\n    shouldVerify: shouldVerify,\n    valueType: \"LEGEND_DEFINITIONS\",\n    name: \"legendDefinitions\",\n    mandatory: true\n  });\n}","import i18n from '@dhis2/d2-i18n';\nimport { CustomSelectField } from \"@hisptz/dhis2-ui\";\nimport { PeriodTypeCategory, PeriodUtility } from \"@hisptz/dhis2-utils\";\nimport { find, head } from \"lodash\";\nimport React, { useMemo, useState } from \"react\";\nimport { Controller, useFormContext, useWatch } from \"react-hook-form\";\nexport default function PeriodSelector() {\n  const {\n    getValues\n  } = useFormContext();\n  const defaultYear = useMemo(() => {\n    const period = head(getValues('periodSelection.periods'));\n    if (period) {\n      return PeriodUtility.getPeriodById(period === null || period === void 0 ? void 0 : period.id).start.year;\n    }\n    return new Date().getFullYear();\n  }, [getValues]);\n  const [year, setYear] = useState(defaultYear !== null && defaultYear !== void 0 ? defaultYear : new Date().getFullYear());\n  const periodType = useWatch({\n    name: \"periodType\"\n  });\n  const options = useMemo(() => {\n    var _type$periods;\n    if (!periodType) {\n      return [];\n    }\n    const utility = PeriodUtility.fromObject({\n      year,\n      category: PeriodTypeCategory.FIXED\n    });\n    const type = utility.getPeriodType(periodType.toUpperCase());\n    return type === null || type === void 0 ? void 0 : (_type$periods = type.periods) === null || _type$periods === void 0 ? void 0 : _type$periods.map(_ref => {\n      let {\n        id,\n        name\n      } = _ref;\n      return {\n        name: name,\n        code: id\n      };\n    });\n  }, [periodType, year]);\n  const years = useMemo(() => new Array(10).fill(\"\").map((_, index) => ({\n    code: (new Date().getFullYear() - index).toString(),\n    name: new Date().getFullYear() - index\n  })).reverse(), []);\n  return /*#__PURE__*/React.createElement(Controller, {\n    render: _ref2 => {\n      var _head, _field$value;\n      let {\n        field\n      } = _ref2;\n      const onChange = code => {\n        const period = PeriodUtility.getPeriodById(code);\n        field.onChange({\n          periods: [{\n            name: period.name,\n            id: period === null || period === void 0 ? void 0 : period.id\n          }]\n        });\n      };\n      const valueId = (_head = head(field === null || field === void 0 ? void 0 : (_field$value = field.value) === null || _field$value === void 0 ? void 0 : _field$value.periods)) === null || _head === void 0 ? void 0 : _head.id;\n      const value = find(options, ['code', valueId]) ? valueId : undefined;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          display: \"flex\",\n          gap: 16,\n          width: \"100%\"\n        }\n      }, /*#__PURE__*/React.createElement(CustomSelectField, {\n        fullWidth: true,\n        label: i18n.t(\"Year\"),\n        value: year.toString(),\n        optionSet: {\n          options: years\n        },\n        name: \"year\",\n        onChange: setYear\n      }), /*#__PURE__*/React.createElement(CustomSelectField, {\n        fullWidth: true,\n        label: i18n.t(\"Period\"),\n        value: value,\n        optionSet: {\n          options\n        },\n        name: \"periodSelection\",\n        onChange: onChange\n      }));\n    },\n    name: \"periodSelection\"\n  });\n}","// extracted by mini-css-extract-plugin\nexport default {\"select-header\":\"PeriodTypeSelector_select-header__c8O-e\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { SingleSelectField, SingleSelectOption } from '@dhis2/ui';\nimport { PeriodTypeCategory, PeriodUtility } from \"@hisptz/dhis2-utils\";\nimport PropTypes from 'prop-types';\nimport React, { useMemo } from \"react\";\nimport { Controller } from \"react-hook-form\";\nimport classes from \"../styles/PeriodTypeSelector.module.css\";\nexport default function PeriodTypeSelector(_ref) {\n  let {\n    label,\n    name\n  } = _ref;\n  const fixedPeriodTypes = useMemo(() => new PeriodUtility().setCategory(PeriodTypeCategory.FIXED).periodTypes, []);\n  const relativePeriodTypes = useMemo(() => new PeriodUtility().setCategory(PeriodTypeCategory.RELATIVE).periodTypes, []);\n  return /*#__PURE__*/React.createElement(Controller, {\n    name: name,\n    rules: {\n      required: i18n.t(\"Period type is required\")\n    },\n    render: _ref2 => {\n      var _fieldState$error;\n      let {\n        field,\n        fieldState\n      } = _ref2;\n      return /*#__PURE__*/React.createElement(SingleSelectField, _extends({}, field, {\n        label: label,\n        required: true,\n        filterable: true,\n        selected: field.value,\n        onChange: _ref3 => {\n          let {\n            selected\n          } = _ref3;\n          return field.onChange(selected);\n        },\n        validationText: (_fieldState$error = fieldState.error) === null || _fieldState$error === void 0 ? void 0 : _fieldState$error.message,\n        error: !!fieldState.error\n      }), /*#__PURE__*/React.createElement(SingleSelectOption, {\n        value: \"disabled\",\n        disabled: true,\n        className: classes['select-header'],\n        label: i18n.t(\"Fixed Periods\")\n      }), fixedPeriodTypes === null || fixedPeriodTypes === void 0 ? void 0 : fixedPeriodTypes.map(periodType => {\n        return /*#__PURE__*/React.createElement(SingleSelectOption, {\n          key: periodType.id,\n          value: periodType.id,\n          label: periodType.config.name\n        });\n      }), /*#__PURE__*/React.createElement(SingleSelectOption, {\n        value: \"disabled\",\n        disabled: true,\n        className: classes['select-header'],\n        label: i18n.t(\"Relative Periods\")\n      }), relativePeriodTypes === null || relativePeriodTypes === void 0 ? void 0 : relativePeriodTypes.map(periodType => {\n        return /*#__PURE__*/React.createElement(SingleSelectOption, {\n          key: periodType.id,\n          value: periodType.id,\n          label: periodType.config.name\n        });\n      }));\n    }\n  });\n}\nPeriodTypeSelector.propTypes = {\n  label: PropTypes.string,\n  name: PropTypes.string\n};","import { useDataEngine } from \"@dhis2/app-runtime\";\nimport i18n from \"@dhis2/d2-i18n\";\nimport { RHFDHIS2FormField as RHFCustomInput } from \"@hisptz/dhis2-ui\";\nimport { DHIS2ValueTypes } from \"@scorecard/shared\";\nimport React from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport \"../../../ScorecardManagement.module.css\";\nimport { titleDoesNotExist } from \"../utils/utils\";\nimport LegendDefinitionFormField from \"./LegendDefinitionFormField\";\nimport PeriodSelector from \"./PeriodSelector\";\nimport PeriodTypeSelector from \"./PeriodTypeSelector\";\nexport default function GeneralForm() {\n  const {\n    id\n  } = useParams();\n  const engine = useDataEngine();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      gap: 16,\n      display: \"flex\",\n      flexDirection: \"column\"\n    },\n    className: \"col-12\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      gap: 16\n    },\n    className: \"col-12 general-settings\"\n  }, /*#__PURE__*/React.createElement(RHFCustomInput, {\n    valueType: DHIS2ValueTypes.TEXT.name,\n    name: \"title\",\n    label: i18n.t(\"Title\"),\n    required: true,\n    validations: {\n      required: i18n.t(\"Title is required\"),\n      validate: async value => {\n        return (await titleDoesNotExist(engine, id, value)) || i18n.t(`A scorecard with the title '{{value}}' already exists. Please select another title`, {\n          value\n        });\n      }\n    }\n  }), /*#__PURE__*/React.createElement(RHFCustomInput, {\n    valueType: DHIS2ValueTypes.TEXT.name,\n    name: \"subtitle\",\n    label: i18n.t(\"Subtitle\"),\n    max: \"120\"\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"description-settings\"\n  }, /*#__PURE__*/React.createElement(RHFCustomInput, {\n    name: \"description\",\n    valueType: DHIS2ValueTypes.LONG_TEXT.name,\n    label: i18n.t(\"Description\")\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row align-items-center\",\n    style: {\n      gap: 24\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4 period-type-settings\"\n  }, /*#__PURE__*/React.createElement(PeriodTypeSelector, {\n    label: i18n.t(\"Period Type\"),\n    name: \"periodType\"\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-1 period-settings w-100\"\n  }, /*#__PURE__*/React.createElement(PeriodSelector, null))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"custom-header-settings\"\n  }, /*#__PURE__*/React.createElement(RHFCustomInput, {\n    name: \"customHeader\",\n    label: i18n.t(\"Custom Header\"),\n    valueType: DHIS2ValueTypes.RICH_TEXT.name\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-6 col-xl-4 legend-definitions-settings gap-8\"\n  }, /*#__PURE__*/React.createElement(LegendDefinitionFormField, null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-6 col-xl-4 additional-labels-settings\"\n  }, /*#__PURE__*/React.createElement(RHFCustomInput, {\n    addable: true,\n    deletable: true,\n    name: \"additionalLabels\",\n    valueType: DHIS2ValueTypes.MULTIPLE_FIELDS.name,\n    label: i18n.t(\"Additional Labels (Tags)\"),\n    multipleField: {\n      name: \"label\",\n      valueType: DHIS2ValueTypes.TEXT.name\n    }\n  })));\n}\nGeneralForm.propTypes = {};","import { Help } from \"@scorecard/shared\";\nimport { INDICATOR_CONFIGURATION_STEPS } from \"@scorecard/shared\";\nimport { ScorecardConfigEditState } from \"@scorecard/shared\";\nimport React from \"react\";\nimport { useRecoilValue } from \"recoil\";\nimport DataSourceConfigurationForm from \"../../DataSourceConfigurationForm\";\nexport default function HighlightedDataSourceConfigurationForm() {\n  var _useRecoilValue;\n  const {\n    selectedHighlightedIndicatorIndex\n  } = (_useRecoilValue = useRecoilValue(ScorecardConfigEditState)) !== null && _useRecoilValue !== void 0 ? _useRecoilValue : {};\n  const path = `highlightedIndicators.${selectedHighlightedIndicatorIndex}`;\n  return !isNaN(selectedHighlightedIndicatorIndex) ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-bordered\"\n  }, /*#__PURE__*/React.createElement(Help, {\n    helpSteps: INDICATOR_CONFIGURATION_STEPS\n  }), /*#__PURE__*/React.createElement(DataSourceConfigurationForm, {\n    path: path\n  })) : null;\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { Button, DataTable, DataTableCell, DataTableColumnHeader, DataTableHead, DataTableRow, TableBody } from \"@dhis2/ui\";\nimport { Help } from \"@scorecard/shared\";\nimport { HIGHLIGHTED_TABLE_HELP_STEPS } from \"@scorecard/shared\";\nimport { ScorecardConfigEditState } from \"@scorecard/shared\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport { cloneDeep, findIndex, get, isEmpty, remove } from \"lodash\";\nimport React, { Fragment, useCallback } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport { useRecoilState } from \"recoil\";\nconst columns = [{\n  label: \"Name\",\n  path: \"displayName\"\n}, {\n  label: \"Label\",\n  path: \"label\"\n}];\nexport default function HighlightedIndicatorsTable() {\n  const {\n    watch,\n    setValue,\n    trigger\n  } = useFormContext();\n  const highlightedIndicators = watch(\"highlightedIndicators\");\n  const setHighlightedIndicators = useCallback(highlightedIndicators => {\n    setValue(\"highlightedIndicators\", highlightedIndicators);\n  }, [setValue]);\n  const [scorecardEditState, setScorecardEditorState] = useRecoilState(ScorecardConfigEditState);\n  const onRowClick = async index => {\n    if (await trigger()) {\n      setScorecardEditorState(prevState => ({\n        ...prevState,\n        selectedHighlightedIndicatorIndex: index\n      }));\n    }\n  };\n  const onRemove = useCallback(id => {\n    if (findIndex(highlightedIndicators, [\"id\", id]) === scorecardEditState.selectedHighlightedIndicatorIndex) {\n      setScorecardEditorState(prevState => ({\n        ...prevState,\n        selectedHighlightedIndicatorIndex: undefined\n      }));\n    }\n    const updatedList = cloneDeep(highlightedIndicators);\n    remove(updatedList, [\"id\", id]);\n    setHighlightedIndicators(updatedList);\n  }, [highlightedIndicators, scorecardEditState.selectedHighlightedIndicatorIndex, setHighlightedIndicators, setScorecardEditorState]);\n  return !isEmpty(highlightedIndicators) ? /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(Help, {\n    helpSteps: HIGHLIGHTED_TABLE_HELP_STEPS\n  }), /*#__PURE__*/React.createElement(DataTable, {\n    fixed: true,\n    scrollHeight: \"75vh\"\n  }, /*#__PURE__*/React.createElement(DataTableHead, null, /*#__PURE__*/React.createElement(DataTableRow, null, columns === null || columns === void 0 ? void 0 : columns.map(_ref => {\n    let {\n      label,\n      path\n    } = _ref;\n    return /*#__PURE__*/React.createElement(DataTableColumnHeader, {\n      fixed: true,\n      top: \"0\",\n      key: `${path}-column`\n    }, label);\n  }), /*#__PURE__*/React.createElement(DataTableColumnHeader, {\n    fixed: true,\n    top: \"0\"\n  }))), /*#__PURE__*/React.createElement(TableBody, null, highlightedIndicators === null || highlightedIndicators === void 0 ? void 0 : highlightedIndicators.map((data, index) => /*#__PURE__*/React.createElement(DataTableRow, {\n    selected: (scorecardEditState === null || scorecardEditState === void 0 ? void 0 : scorecardEditState.selectedHighlightedIndicatorIndex) === index,\n    key: `${data === null || data === void 0 ? void 0 : data.id}`\n  }, columns === null || columns === void 0 ? void 0 : columns.map(_ref2 => {\n    let {\n      path\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(DataTableCell, {\n      onClick: () => onRowClick(index),\n      key: `${data === null || data === void 0 ? void 0 : data.id}-${path}`\n    }, get(data, path));\n  }), /*#__PURE__*/React.createElement(DataTableCell, {\n    align: \"center\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: (value, e) => {\n      e.stopPropagation();\n      onRemove(data === null || data === void 0 ? void 0 : data.id);\n    },\n    icon: /*#__PURE__*/React.createElement(DeleteIcon, null)\n  }, i18n.t(\"Delete\")))))))) : null;\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { DATA_CONFIGURATION_HELP_STEPS, GENERAL_HELP_STEPS, scorecardManagementTooltips } from \"@scorecard/shared\";\nimport { findIndex } from \"lodash\";\nimport { atom, selector } from \"recoil\";\nimport AccessScorecardForm from \"../Components/Access\";\nimport DataConfigurationScorecardForm from \"../Components/DataConfiguration\";\nimport GeneralScorecardForm from \"../Components/General\";\nimport HighlightedIndicatorsScorecardForm from \"../Components/HighlightedIndicators\";\nimport OptionsScorecardForm from \"../Components/Options\";\nexport const steps = [{\n  label: i18n.t(\"General\"),\n  component: GeneralScorecardForm,\n  helpSteps: GENERAL_HELP_STEPS,\n  tooltip: scorecardManagementTooltips[0]['content'],\n  id: \"general\"\n}, {\n  label: i18n.t(\"Data Configuration\"),\n  component: DataConfigurationScorecardForm,\n  helpSteps: DATA_CONFIGURATION_HELP_STEPS,\n  tooltip: scorecardManagementTooltips[1]['content'],\n  id: \"dataConfiguration\"\n}, {\n  label: i18n.t(\"Highlighted Indicators\"),\n  component: HighlightedIndicatorsScorecardForm,\n  helpSteps: [],\n  tooltip: scorecardManagementTooltips[2]['content'],\n  id: \"highlightedIndicators\"\n}, {\n  label: i18n.t(\"Access\"),\n  component: AccessScorecardForm,\n  helpSteps: [],\n  tooltip: scorecardManagementTooltips[3]['content'],\n  id: \"access\"\n}, {\n  label: i18n.t(\"Options\"),\n  component: OptionsScorecardForm,\n  helpSteps: [],\n  tooltip: scorecardManagementTooltips[4]['content'],\n  id: \"options\"\n}];\nexport const ActiveStepState = atom({\n  key: \"activeStepState\",\n  default: steps[0]\n});\nexport const ActiveStepIndexState = selector({\n  key: \"activeStepIndexState\",\n  get: _ref => {\n    let {\n      get\n    } = _ref;\n    const activeStep = get(ActiveStepState);\n    return findIndex(steps, step => step.id === activeStep.id);\n  }\n});","import { Help } from \"@scorecard/shared\";\nimport { GENERAL_HELP_STEPS } from \"@scorecard/shared\";\nimport React from \"react\";\nimport GeneralForm from \"./Components/GeneralForm\";\nexport default function GeneralScorecardForm() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\"\n  }, /*#__PURE__*/React.createElement(Help, {\n    helpSteps: GENERAL_HELP_STEPS\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column space-between\"\n  }, /*#__PURE__*/React.createElement(GeneralForm, null)));\n}","import { ContainerLoader, Help } from \"@scorecard/shared\";\nimport { DataSelection } from \"@scorecard/shared\";\nimport { isEmpty } from \"lodash\";\nimport React, { Suspense, useCallback } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport DataSourceConfiguration from \"./Components/DataGroups/Components/DataSourceConfiguration\";\nimport EmptyDataGroups from \"./Components/EmptyDataGroups\";\nimport Instructions from \"./Components/Instructions\";\nimport PreviewScorecardTable from \"./Components/PreviewScorecardTable\";\nimport DataGroupArea from \"./DataGroupArea\";\nimport useHelp from \"./hooks/useHelp\";\nimport { generateNewGroupData } from \"./utils\";\nexport default function DataConfigurationScorecardForm() {\n  const {\n    setValue,\n    watch,\n    register\n  } = useFormContext();\n  register(\"dataSelection\");\n  const dataSelection = watch(\"dataSelection\");\n  const updateDataSelection = useCallback(updatedDataSelection => {\n    setValue(\"dataSelection\", updatedDataSelection);\n  }, [setValue]);\n  const {\n    dataGroups: groups\n  } = dataSelection !== null && dataSelection !== void 0 ? dataSelection : new DataSelection();\n  const helpSteps = useHelp(groups);\n  const onGroupAdd = useCallback(() => {\n    var _dataSelection$dataGr;\n    updateDataSelection(DataSelection.set(dataSelection, \"dataGroups\", [...((_dataSelection$dataGr = dataSelection === null || dataSelection === void 0 ? void 0 : dataSelection.dataGroups) !== null && _dataSelection$dataGr !== void 0 ? _dataSelection$dataGr : []), generateNewGroupData(groups)]));\n  }, [dataSelection, groups, updateDataSelection]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    style: {\n      height: \"100%\"\n    }\n  }, /*#__PURE__*/React.createElement(Help, {\n    helpSteps: helpSteps\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4 col-sm-6 p-16 groups-configuration-area\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \" container-bordered column\",\n    style: {\n      minHeight: \"100%\",\n      height: '100%'\n    }\n  }, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(ContainerLoader, null)\n  }, isEmpty(groups) ? /*#__PURE__*/React.createElement(EmptyDataGroups, {\n    onGroupAdd: onGroupAdd\n  }) : /*#__PURE__*/React.createElement(DataGroupArea, {\n    onGroupAdd: onGroupAdd\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-8 p-16 h-100\"\n  }, !isEmpty(groups) && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row pb-16\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column preview-table-area\"\n  }, /*#__PURE__*/React.createElement(PreviewScorecardTable, null))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column h-100\"\n  }, isEmpty(groups) ? /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      margin: \"auto\"\n    }\n  }, /*#__PURE__*/React.createElement(Instructions, null)) : /*#__PURE__*/React.createElement(DataSourceConfiguration, null))));\n}","import { GROUPS_CONFIG_HELP_STEPS, INDICATOR_CONFIGURATION_STEPS, INDICATOR_SETUP_HELP_STEPS, INTRODUCTION_HELP_STEPS, NO_GROUPS_HELP_STEPS, NO_INDICATORS_HELP_STEPS, PREVIEW_TABLE_HELP_STEPS } from \"@scorecard/shared\";\nimport { ScorecardConfigEditState } from \"@scorecard/shared\";\nimport { getHoldersFromGroups } from \"@scorecard/shared\";\nimport { isEmpty, uniqBy } from \"lodash\";\nimport { useEffect, useState } from \"react\";\nimport { useRecoilValue } from \"recoil\";\nexport default function useHelp(groups) {\n  const [helpSteps, setHelpSteps] = useState(INTRODUCTION_HELP_STEPS);\n  const {\n    selectedDataHolderIndex\n  } = useRecoilValue(ScorecardConfigEditState);\n  useEffect(() => {\n    setHelpSteps(prevSteps => {\n      let steps = [...prevSteps];\n      if (!isEmpty(groups)) {\n        steps = [...INTRODUCTION_HELP_STEPS, ...GROUPS_CONFIG_HELP_STEPS, ...PREVIEW_TABLE_HELP_STEPS];\n      }\n      if (isEmpty(groups)) {\n        steps = [...INTRODUCTION_HELP_STEPS, ...NO_GROUPS_HELP_STEPS];\n      }\n      if (!isEmpty(groups) && isEmpty(getHoldersFromGroups(groups))) {\n        steps = [...steps, ...NO_INDICATORS_HELP_STEPS];\n      }\n      if (!isEmpty(getHoldersFromGroups(groups))) {\n        steps = [...steps, ...INDICATOR_SETUP_HELP_STEPS];\n      }\n      if (!isNaN(selectedDataHolderIndex)) {\n        steps = [...steps, ...INDICATOR_CONFIGURATION_STEPS];\n      }\n      return uniqBy(steps, \"element\");\n    });\n  }, [groups, selectedDataHolderIndex]);\n  return helpSteps;\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { Button } from \"@dhis2/ui\";\nimport { Help } from \"@scorecard/shared\";\nimport { HIGHLIGHTED_INDICATOR_HELP_STEPS } from \"@scorecard/shared\";\nimport { ScorecardIndicator } from \"@scorecard/shared\";\nimport { ScorecardConfigEditState } from \"@scorecard/shared\";\nimport { generateLegendDefaults } from \"@scorecard/shared\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport { isEmpty } from \"lodash\";\nimport React, { Fragment, useCallback, useState } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport { useSetRecoilState } from \"recoil\";\nimport DataSourceSelectorModal from \"../DataConfiguration/Components/DataGroups/Components/DataSourceSelectorModal\";\nimport { getNonDefaultLegendDefinitions } from \"../General/utils/utils\";\nimport HighlightedDataSourceConfigurationForm from \"./HighlightedDataSourceConfigurationForm\";\nimport HighlightedIndicatorsTable from \"./Table\";\nexport default function HighlightedIndicatorsScorecardForm() {\n  const {\n    watch,\n    setValue,\n    register\n  } = useFormContext();\n  register(\"highlightedIndicators\");\n  const highlightedIndicators = watch(\"highlightedIndicators\");\n  const setHighlightedIndicators = useCallback(highlightedIndicators => {\n    setValue(\"highlightedIndicators\", highlightedIndicators);\n  }, [setValue]);\n  const legendDefinitions = getNonDefaultLegendDefinitions(watch(\"legendDefinitions\"));\n  const setScorecardEditorState = useSetRecoilState(ScorecardConfigEditState);\n  const [addOpen, setAddOpen] = useState(false);\n  const onAddClick = () => {\n    setAddOpen(true);\n  };\n  const onAdd = useCallback(dataSources => {\n    const legendDefaults = generateLegendDefaults(legendDefinitions, 100, true);\n    const newDataSources = dataSources === null || dataSources === void 0 ? void 0 : dataSources.map(source => new ScorecardIndicator({\n      ...source,\n      label: source === null || source === void 0 ? void 0 : source.displayName,\n      legends: legendDefaults\n    }));\n    setHighlightedIndicators([...(highlightedIndicators !== null && highlightedIndicators !== void 0 ? highlightedIndicators : []), ...(newDataSources !== null && newDataSources !== void 0 ? newDataSources : [])]);\n    if (!isEmpty(dataSources)) {\n      setScorecardEditorState(prevState => ({\n        ...prevState,\n        selectedHighlightedIndicatorIndex: 0\n      }));\n    }\n  }, [highlightedIndicators, legendDefinitions, setHighlightedIndicators, setScorecardEditorState]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\",\n    style: {\n      height: \"100%\"\n    }\n  }, /*#__PURE__*/React.createElement(Help, {\n    helpSteps: HIGHLIGHTED_INDICATOR_HELP_STEPS\n  }), /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Highlighted Indicators\")), !isEmpty(highlightedIndicators) ? /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rowlabel \"\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"add-highlighted-indicator-button\",\n    onClick: onAddClick,\n    icon: /*#__PURE__*/React.createElement(AddIcon, null)\n  }, i18n.t(\"Add\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-8 pt-32 \"\n  }, /*#__PURE__*/React.createElement(HighlightedIndicatorsTable, null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pl-16 pt-32\"\n  }, /*#__PURE__*/React.createElement(HighlightedDataSourceConfigurationForm, null))))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row align-items-center center flex-1\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"add-highlighted-indicator-button\",\n    onClick: onAddClick,\n    icon: /*#__PURE__*/React.createElement(AddIcon, null)\n  }, i18n.t(\"Add Highlighted Indicator\"))), addOpen && /*#__PURE__*/React.createElement(DataSourceSelectorModal, {\n    open: addOpen,\n    onSelect: onAdd,\n    disabled: highlightedIndicators === null || highlightedIndicators === void 0 ? void 0 : highlightedIndicators.map(_ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    }),\n    onClose: () => setAddOpen(false)\n  }));\n}","import { Help } from \"@scorecard/shared\";\nimport { ACCESS_HELP_STEPS } from \"@scorecard/shared\";\nimport React from \"react\";\nimport OrgUnit from \"./Components/OrgUnitFilter\";\nimport Sharing from \"./Components/Sharing\";\nexport default function AccessScorecardForm() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      minHeight: '70vh',\n      height: '100%'\n    },\n    className: \"container p-16\"\n  }, /*#__PURE__*/React.createElement(Help, {\n    helpSteps: ACCESS_HELP_STEPS\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\"\n  }, /*#__PURE__*/React.createElement(OrgUnit, null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\"\n  }, /*#__PURE__*/React.createElement(Sharing, null))));\n}","import { ScorecardOptionsForm } from \"@scorecard/shared\";\nimport React from \"react\";\nimport useOptionsManage from \"./hooks/useOptionsManage\";\nexport default function OptionsScorecardForm() {\n  const {\n    scorecardOptions,\n    onChange,\n    onAverageChange\n  } = useOptionsManage();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: '100%'\n    }\n  }, /*#__PURE__*/React.createElement(ScorecardOptionsForm, {\n    options: scorecardOptions,\n    onChange: onChange,\n    onAverageChange: onAverageChange\n  }));\n}","import { ScorecardOptions } from \"@scorecard/shared\";\nimport { useCallback } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nexport default function useOptionsManage() {\n  const {\n    watch,\n    setValue\n  } = useFormContext();\n  const scorecardOptions = watch(\"options\");\n  const setScorecardOptions = useCallback(updatedOptions => {\n    setValue(\"options\", updatedOptions);\n  }, [setValue]);\n  const onChange = key => newValue => {\n    var _newValue$checked;\n    setScorecardOptions(ScorecardOptions.set(scorecardOptions, key, (_newValue$checked = newValue === null || newValue === void 0 ? void 0 : newValue.checked) !== null && _newValue$checked !== void 0 ? _newValue$checked : newValue));\n  };\n  const onAverageChange = value => {\n    setScorecardOptions(ScorecardOptions.set(scorecardOptions, \"averageDisplayType\", value));\n  };\n  return {\n    onAverageChange,\n    onChange,\n    scorecardOptions\n  };\n}","import { useAlert } from \"@dhis2/app-runtime\";\nimport i18n from \"@dhis2/d2-i18n\";\nimport { useAddScorecard, useUpdateScorecard } from \"@scorecard/shared\";\nimport { Scorecard } from \"@scorecard/shared\";\nimport { IsNewScorecardState, RouterState, ScorecardConfigEditState, ScorecardConfigErrorState, ScorecardConfState, ScorecardIdState, ShouldValidate, UserState } from \"@scorecard/shared\";\nimport { uid } from \"@scorecard/shared\";\nimport produce from \"immer\";\nimport { cloneDeep, findIndex, set } from \"lodash\";\nimport { useEffect, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { useRecoilCallback, useRecoilState, useRecoilValue, useSetRecoilState } from \"recoil\";\nimport { ActiveStepIndexState, ActiveStepState, steps } from \"../state/pages\";\nexport default function useScorecardManage() {\n  const history = useHistory();\n  const {\n    id: scorecardId\n  } = useParams();\n  const setIsNew = useSetRecoilState(IsNewScorecardState);\n  const activeStepIndex = useRecoilValue(ActiveStepIndexState);\n  const user = useRecoilValue(UserState);\n  const [route, setRoute] = useRecoilState(RouterState);\n  const {\n    update\n  } = useUpdateScorecard(scorecardId);\n  const scorecardConf = useRecoilValue(ScorecardConfState(scorecardId));\n  const [saving, setSaving] = useState(false);\n  const [savingAndContinue, setSavingAndContinue] = useState(false);\n  const scorecard = cloneDeep(scorecardConf);\n  const form = useForm({\n    shouldFocusError: true,\n    defaultValues: {\n      ...scorecard\n    },\n    reValidateMode: \"onChange\"\n  });\n  const setActiveStep = useSetRecoilState(ActiveStepState);\n  const {\n    add\n  } = useAddScorecard();\n  const {\n    show\n  } = useAlert(_ref => {\n    let {\n      message\n    } = _ref;\n    return message;\n  }, _ref2 => {\n    let {\n      type\n    } = _ref2;\n    return {\n      ...type,\n      duration: 3000\n    };\n  });\n  const resetEditStates = useRecoilCallback(_ref3 => {\n    let {\n      reset\n    } = _ref3;\n    return () => {\n      reset(ScorecardConfigEditState);\n      reset(ScorecardConfigErrorState);\n      reset(ShouldValidate);\n      reset(IsNewScorecardState);\n      reset(ActiveStepState);\n    };\n  });\n  const resetScorecardStates = useRecoilCallback(_ref4 => {\n    let {\n      reset\n    } = _ref4;\n    return () => {\n      reset(ScorecardConfState(scorecardId));\n      reset(ScorecardIdState);\n    };\n  });\n  useEffect(() => {\n    return () => {\n      resetEditStates();\n      resetScorecardStates();\n    };\n  }, []);\n  const onNavigate = () => {\n    setRoute(prevRoute => ({\n      ...prevRoute,\n      previous: `/edit/${scorecardId}`\n    }));\n    history.replace(route === null || route === void 0 ? void 0 : route.previous);\n  };\n  const createNewScorecard = async updatedScorecard => {\n    await Scorecard.save(updatedScorecard, add, user);\n  };\n  const updateData = async updatedScorecard => {\n    await Scorecard.update(updatedScorecard, update);\n  };\n  const onSave = useRecoilCallback(() => async updatedScorecard => {\n    setSaving(true);\n    try {\n      if (scorecardId) {\n        await updateData(updatedScorecard);\n        show({\n          message: i18n.t(\"Scorecard updated successfully\"),\n          type: {\n            success: true\n          }\n        });\n      } else {\n        const id = uid();\n        const updatedData = produce(cloneDeep(updatedScorecard), draft => {\n          set(draft, \"id\", id);\n        });\n        await createNewScorecard(cloneDeep(updatedData));\n        show({\n          message: i18n.t(\"Scorecard added successfully\"),\n          type: {\n            success: true\n          }\n        });\n      }\n      onNavigate();\n    } catch (e) {\n      console.error(e);\n      show({\n        message: i18n.t(\"Scorecard could not be saved\" + \": \" + (e === null || e === void 0 ? void 0 : e.message)),\n        type: {\n          info: true\n        }\n      });\n    }\n    setSaving(false);\n  });\n  const onSaveAndContinue = useRecoilCallback(() => async updatedScorecard => {\n    setSavingAndContinue(true);\n    try {\n      if (scorecardId) {\n        await updateData(updatedScorecard);\n        setActiveStep(prevStep => {\n          const prevStepIndex = findIndex(steps, {\n            id: prevStep.id\n          });\n          if (prevStepIndex !== steps.length - 1) {\n            return steps[prevStepIndex + 1];\n          }\n        });\n      } else {\n        const id = uid();\n        const updatedData = produce(updatedScorecard, draft => {\n          set(draft, \"id\", id);\n        });\n        await createNewScorecard(updatedData);\n        setIsNew({\n          nextStepIndex: activeStepIndex + 1\n        });\n        history.replace(`edit/${id}?new=true`);\n      }\n    } catch (e) {\n      console.error(e);\n      show({\n        message: i18n.t(\"Scorecard could not be saved\" + \": \" + (e === null || e === void 0 ? void 0 : e.message)),\n        type: {\n          info: true\n        }\n      });\n    }\n    setSavingAndContinue(false);\n  });\n  return {\n    form,\n    resetEditStates,\n    resetScorecardStates,\n    saving,\n    onSave,\n    onNavigate,\n    onSaveAndContinue,\n    savingAndContinue\n  };\n}","import { useAlert } from \"@dhis2/app-runtime\";\nimport i18n from \"@dhis2/d2-i18n\";\nimport { HelpIndex, IsNewScorecardState } from \"@scorecard/shared\";\nimport { getValidationPageFields } from \"@scorecard/shared\";\nimport { findIndex } from \"lodash\";\nimport { useCallback, useEffect, useMemo } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport { useRecoilState, useResetRecoilState } from \"recoil\";\nimport { ActiveStepState, steps } from \"../state/pages\";\nexport default function useScorecardManagerNavigate(_ref) {\n  let {\n    form,\n    onSave,\n    onNavigate\n  } = _ref;\n  const [helpStepIndex, setHelpStepIndex] = useRecoilState(HelpIndex);\n  const [activeStep, setActiveStep] = useRecoilState(ActiveStepState);\n  const {\n    search\n  } = useLocation();\n  const resetNewState = useResetRecoilState(IsNewScorecardState);\n  const Component = activeStep.component;\n  const {\n    show\n  } = useAlert(_ref2 => {\n    let {\n      message\n    } = _ref2;\n    return message;\n  }, _ref3 => {\n    let {\n      type\n    } = _ref3;\n    return {\n      ...type,\n      duration: 3000\n    };\n  });\n  useEffect(() => {\n    const searchParams = new URLSearchParams(search);\n    const isNew = searchParams.get('new');\n    if (isNew) {\n      setActiveStep(prevStep => {\n        const currentIndex = findIndex(steps, ['id', prevStep.id]);\n        if (currentIndex === 0) {\n          return steps[1];\n        } else {\n          return prevStep;\n        }\n      });\n    }\n  }, [resetNewState, search, setActiveStep]);\n  const hasNextStep = useMemo(() => findIndex(steps, [\"id\", activeStep.id]) !== steps.length - 1, [activeStep]);\n  const hasPreviousStep = useMemo(() => findIndex(steps, [\"id\", activeStep.id]) > 0, [activeStep]);\n  const currentIndex = useMemo(() => findIndex(steps, [\"id\", activeStep.id]), [activeStep]);\n  const onNextStep = async () => {\n    if (!hasNextStep) {\n      await form.handleSubmit(onSave)();\n      return;\n    }\n    if (!(await form.trigger())) {\n      show({\n        message: i18n.t(\"Please fill in all required fields\"),\n        type: {\n          info: true\n        }\n      });\n      return;\n    }\n    const index = findIndex(steps, [\"id\", activeStep.id]);\n    if (index !== steps.length - 1) {\n      setActiveStep(steps[index + 1]);\n      setHelpStepIndex(0);\n    }\n  };\n  const onStepChange = useCallback(async step => {\n    if (!(await form.trigger(getValidationPageFields(form, activeStep)))) {\n      return;\n    }\n    setActiveStep(step);\n  }, [activeStep, form]);\n  const onPreviousStep = () => {\n    const index = findIndex(steps, [\"id\", activeStep.id]);\n    if (index !== 0) {\n      setActiveStep(steps[index - 1]);\n      setHelpStepIndex(0);\n    }\n  };\n  const onCancel = () => {\n    onNavigate();\n  };\n  return {\n    Component,\n    activeStep,\n    onNextStep,\n    onPreviousStep,\n    onCancel,\n    helpStepIndex,\n    setHelpStepIndex,\n    hasNextStep,\n    hasPreviousStep,\n    currentIndex,\n    steps,\n    onStepChange\n  };\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { Button, ButtonStrip, Tooltip } from \"@dhis2/ui\";\nimport { Step, StepLabel, Stepper } from \"@material-ui/core\";\nimport HelpIcon from \"@material-ui/icons/Help\";\nimport { AccessDeniedPage, FullPageLoader, HelpState, HelpSteps, STEP_OPTIONS, useMediaQuery, UserAuthorityOnScorecard } from \"@scorecard/shared\";\nimport { Steps } from \"intro.js-react\";\nimport React, { Suspense } from \"react\";\nimport { FormProvider } from \"react-hook-form\";\nimport { useParams } from \"react-router-dom\";\nimport { useRecoilState, useRecoilValue } from \"recoil\";\nimport useScorecardManage from \"./hooks/useScorecardManage\";\nimport useScorecardManagerNavigate from \"./hooks/useScorecardManagerNavigate\";\nimport classes from \"./ScorecardManagement.module.css\";\nexport default function ScoreCardManagement() {\n  var _steps$label, _steps, _steps2;\n  const [helpEnabled, setHelpEnabled] = useRecoilState(HelpState);\n  const helpSteps = useRecoilValue(HelpSteps);\n  const {\n    id: scorecardId\n  } = useParams();\n  const {\n    write: writeAccess\n  } = useRecoilValue(UserAuthorityOnScorecard(scorecardId));\n  const {\n    height\n  } = useMediaQuery();\n  const {\n    form,\n    onSave,\n    saving,\n    onNavigate,\n    onSaveAndContinue,\n    savingAndContinue\n  } = useScorecardManage();\n  const {\n    Component,\n    activeStep,\n    helpStepIndex,\n    onCancel,\n    onNextStep,\n    onPreviousStep,\n    setHelpStepIndex,\n    steps,\n    currentIndex,\n    hasPreviousStep,\n    hasNextStep,\n    onStepChange\n  } = useScorecardManagerNavigate({\n    form,\n    onSave,\n    onNavigate\n  });\n  if (!writeAccess && scorecardId) {\n    return /*#__PURE__*/React.createElement(AccessDeniedPage, {\n      accessType: \"edit\"\n    });\n  }\n  //scorecardManagementTooltips\n  return /*#__PURE__*/React.createElement(FormProvider, form, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(FullPageLoader, null)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes[\"edit-container\"]\n  }, /*#__PURE__*/React.createElement(Steps, {\n    enabled: helpEnabled,\n    options: STEP_OPTIONS,\n    steps: helpSteps,\n    initialStep: helpStepIndex,\n    onBeforeChange: newStepIndex => {\n      setHelpStepIndex(newStepIndex);\n    },\n    onExit: () => {\n      setHelpEnabled(false);\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\"\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Stepper, null, steps === null || steps === void 0 ? void 0 : steps.map(step => /*#__PURE__*/React.createElement(Step, {\n    style: step === activeStep ? {\n      background: \"#00695c\"\n    } : undefined,\n    active: step === activeStep,\n    onClick: () => onStepChange(step),\n    key: `${step.id}-step`\n  }, /*#__PURE__*/React.createElement(StepLabel, null, /*#__PURE__*/React.createElement(Tooltip, {\n    content: step.tooltip,\n    key: `${step.id}-step`\n  }, step.label)))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column center\",\n    style: {\n      flex: 1\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container container-bordered background-white center\",\n    style: {\n      width: \"100%\",\n      height: \"100%\",\n      minHeight: height * 0.8\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    style: {\n      height: \"100%\"\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column p-16\",\n    style: {\n      height: \"100%\",\n      justifyContent: \"space-between\"\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row end align-items-center\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    icon: /*#__PURE__*/React.createElement(HelpIcon, null),\n    onClick: () => {\n      setHelpStepIndex(0);\n      setHelpEnabled(true);\n    }\n  }, i18n.t(\"Help\"))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: \"100%\",\n      padding: 16\n    }\n  }, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(FullPageLoader, {\n      small: true\n    })\n  }, /*#__PURE__*/React.createElement(Component, {\n    onNextStep: onNextStep,\n    onPreviousStep: onPreviousStep\n  }))), /*#__PURE__*/React.createElement(ButtonStrip, {\n    start: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    disabled: !hasPreviousStep,\n    onClick: onPreviousStep\n  }, i18n.t(`Previous: ${(_steps$label = (_steps = steps[currentIndex - 1]) === null || _steps === void 0 ? void 0 : _steps.label) !== null && _steps$label !== void 0 ? _steps$label : \"\"}`)), /*#__PURE__*/React.createElement(Button, {\n    loading: saving,\n    primary: true,\n    disabled: saving,\n    onClick: onNextStep,\n    className: \"settings-next-button\",\n    dataTest: \"scorecard-admin-next-button\"\n  }, !hasNextStep ? saving ? `${i18n.t(\"Saving\")}...` : i18n.t(\"Save\") : i18n.t(`Next: ${(_steps2 = steps[currentIndex + 1]) === null || _steps2 === void 0 ? void 0 : _steps2.label}`)))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row center p-16\"\n  }, /*#__PURE__*/React.createElement(ButtonStrip, {\n    center: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    loading: saving,\n    dataTest: \"scorecard-save-button\",\n    disabled: saving,\n    onClick: form.handleSubmit(onSave)\n  }, saving ? `${i18n.t(\"Saving\")}...` : i18n.t(\"Save and exit\")), hasNextStep && /*#__PURE__*/React.createElement(Button, {\n    loading: savingAndContinue,\n    dataTest: \"scorecard-save-and-continue-button\",\n    disabled: savingAndContinue,\n    onClick: form.handleSubmit(onSaveAndContinue)\n  }, savingAndContinue ? `${i18n.t(\"Saving\")}...` : i18n.t(\"Save and continue\")), /*#__PURE__*/React.createElement(Button, {\n    onClick: onCancel\n  }, i18n.t(\"Exit without saving\"))))))));\n}"],"names":["OrgUnit","setValue","watch","register","formState","useFormContext","validate","atLeastOneOrgUnit","value","_ref","groups","levels","orgUnits","userOrgUnit","userSubUnit","userSubX2Unit","length","anyOrgUnitSelected","i18n","t","organisationUnit","setOrganisationUnit","useCallback","updatedOrgUnitSelection","error","get","errors","React","className","style","display","gap","alignItems","padding","color","colors","red500","IconError24","message","minHeight","Suspense","fallback","ContainerLoader","height","OrgUnitSelector","showGroups","showLevels","showUserOptions","onUpdate","values","OrgUnitSelection","setObject","useAccessManage","publicAccess","setPublicAccess","updatedValue","userGroupAccesses","setUserGroupAccesses","userAccesses","setUserAccesses","userAndUserGroupAccesses","useMemo","onPublicAccessChange","onDelete","access","type","updatedList","cloneDeep","remove","id","updatedAccess","AccessTypes","USER","index","findIndex","produce","draft","set","onAdd","selectedAccess","selectedUserGroup","ScorecardAccess","displayName","getAccessName","arguments","undefined","ScorecardAccessType","NO_ACCESS","READ_ONLY","READ_WRITE","getAccessIcon","PublicIcon","UserIcon","UserGroupIcon","SharingMenu","reference","onClose","onAccessChange","Layer","onClick","Popper","placement","FlyoutMenu","ACCESS_TYPES","map","accessType","Fragment","key","MenuItem","active","label","icon","CheckIcon","SingleSharingComponent","ref","setRef","useState","margin","fontSize","grey700","ButtonStrip","Button","_","e","currentTarget","EditIcon","Boolean","DeleteIcon","newAccess","SharingList","Menu","dense","MenuDivider","query","users","resource","params","keyword","filter","fields","order","userGroups","_ref2","UserAndUserGroupsMenu","data","onSelect","maxHeight","element","UserAndUserGroupSelector","selected","onChange","selectedList","loading","setKeyword","initialKeyword","refetch","useDataQuery","variables","lazy","useEffect","_data$users","_data$users$users","_data$userGroups","_data$userGroups$user","user","userGroup","useSearchUserAndUserGroup","useRef","inputReference","setInputReference","onSearch","debounce","trim","InputField","validationText","onKeywordChange","_ref3","event","target","isEmpty","selectedValue","_ref4","includes","AddSharingAccess","setSelectedUserGroup","setSelectedAccess","width","SingleSelectField","required","SingleSelectOption","onAddClick","AddIcon","Sharing","Instructions","DataSourceInstructions","grey600","fontWeight","getNonDefaultLegendDefinitions","legendDefinitions","_legendDefinitions$fi","legendDefinition","isDefault","LegendsField","highIsGood","DHIS2FormField","valueType","name","_extends","Object","assign","bind","i","source","prototype","hasOwnProperty","call","apply","this","LevelTargetsField","_head","initialValue","multipleFields","weight","props","orgUnitLevels","useRecoilValue","OrgUnitLevels","expanded","setExpanded","head","_orgUnitLevels$map","Array","isArray","fromPairs","generateLegendDefaults","onFieldChange","newValue","level","Field","_get","Accordion","panel","isExpanded","AccordionSummary","background","grey200","AccordionDetails","OrgUnitLevelSpecificTargets","path","defaultLegends","legend","FormFieldModel","mandatory","DHIS2ValueTypes","LEGEND_MIN_MAX","legends","_orgUnits$map","setTarget","periodSelectorOpen","setPeriodSelectorOpen","items","SelectedOrgUnits","fullWidth","disabled","ou","join","OrgUnitSelectorModal","hide","prevState","orgUnit","OrgUnitSpecificTargetsModal","open","specificTarget","onChangeDefaultLegends","onUpdateClick","Modal","position","ModalTitle","ModalContent","CircularLoader","small","ModalActions","primary","PeriodSpecificTargetsModal","_target$items","_target$items$map","_target$items$map2","_target$items2","calendar","SystemSettingsState","item","_Period$setPreference","Period","setPreferences","allowFuturePeriods","setCalendar","getById","PeriodSelectorModal","enablePeriodSelector","excludeRelativePeriods","singleSelection","selectedPeriods","compact","periods","_periods$","LegendsView","_find","legendDefinitionId","startValue","endValue","find","getTypeLabel","OrgUnitSpecificTargetView","border","grey500","borderRadius","Tag","PeriodSpecificTargetView","TargetsField","useWatch","nonDefaultLegendDefinitions","RHFDHIS2FormField","TargetsArea","allLegendDefinitions","areSpecificTargetsSet","specificTargets","openConfigDialog","setOpenConfigDialog","selectedType","setSelectedType","specificTargetsSet","getSelectedType","_specificTargets$","TRUE_ONLY","uid","DataSourceConfigurationForm","TEXT","validations","NUMBER","renderAsCheckbox","Divider","SelectedDataSourceConfigurationForm","_selectedDataHolder$d","scorecardEditState","ScorecardConfigEditState","selectedGroupIndex","selectedDataHolderIndex","selectedDataHolder","dataSources","dataSource","dataSourcePath","maxWidth","minWidth","DataSourceConfiguration","isNaN","EmptyDataGroups","onGroupAdd","dataTest","CustomLinkedCell","_getLegend","_getLegend2","top","bottom","period","topLegends","showColors","showTopColors","displayArrows","topDisplayArrows","topWeight","topSpecificTargets","bottomLegends","showBottomColors","bottomDisplayArrows","bottomWeight","bottomSpecificTargets","topValue","generateRandomValues","bottomValue","topColor","getLegend","max","bottomColor","LinkedCellSvg","topStatus","bottomStatus","PreviewCustomCell","_config$dataSources","_config$dataSources2","config","organisationUnits","UserState","hasLinked","Date","getFullYear","dataOrgUnitLevel","align","SingleCellSvg","status","PreviewScorecardTable","_watch","dataGroups","columns","overflowX","DataTable","bordered","DataTableHead","DataTableRow","DataTableCell","fixed","rowSpan","column","_column$dataHolders","colSpan","dataHolders","title","group","_group$dataHolders","_group$dataHolders2","_group$dataHolders3","borderSpacing","_dataSources$","_dataSources$2","_dataSources$3","_dataSources$4","DataTableBody","tag","_group$dataHolders4","_group$dataHolders5","_group$dataHolders6","borders","DataSourceSelectorModal","selectedItems","setSelectedItems","large","DataSourceSelector","end","withStyles","root","boxShadow","borderBottom","MuiAccordion","marginBottom","content","MuiAccordionSummary","theme","spacing","MuiAccordionDetails","EditTitle","titleEditValue","setTitleEditValue","onTitleEditSubmit","stopPropagation","Input","initialFocus","GroupTitle","setTitleEditOpen","onDoubleClick","IconButton","size","paddingLeft","ErrorIcon","DataSource","ScorecardIndicator","Avatar","getDataSourceShortName","DataSourceHolder","dataHolder","ScorecardIndicatorHolder","trigger","setScorecardEditState","useRecoilState","updateDataHolder","useSetRecoilState","ScorecardConfigDirtySelector","onDataSourceDelete","indicatorIndex","updatedDataSources","splice","Draggable","draggableId","provided","draggableProps","dragHandleProps","innerRef","async","grey400","teal200","dataGroup","LinkingContainer","chunk","onLink","onUnlink","linkable","hasLink","onIconClick","getIndex","onUnlinkClick","_head$dataSources","onLinkClick","_head2","_last","indexOfMergedHolder","indexOfDeletedHolder","last","useLinkManage","Tooltip","linkAction","UnlinkIcon","LinkIcon","DataGroup","handleAccordionChange","onDataSourceAdd","titleEditOpen","targetOnLevels","ScorecardConfigDirtyState","scorecardEditorState","setScorecardEditorState","setGroup","updatedGroup","console","filteredLegendDefinitions","ScorecardIndicatorGroup","deletedDataSourceIndex","addedDataSources","newDataSources","useDataGroupManage","onDragEnd","onExpand","useRecoilCallback","snapshot","indexOfTheDeletedHolder","_dataHolders$indexOfT","_snapshot$getLoadable","dataSourceToLink","mergedHolder","linkDataSource","updatedHolderList","getLoadable","contents","setState","_dataHolderToModify$d","dataHolderIndex","newDataHolder","dataHolderToModify","modifiedDataHolder","result","destination","updateListFromDragAndDrop","newExpanded","useDataGroupLayout","dataHolderChunks","selectedDataSourcesIds","_flattenDeep","chunks","listToModify","_listToModify$i","_listToModify$i2","_listToModify$i2$data","_listToModify","_listToModify$dataSou","push","customChunk","flattenDeep","useDataHolders","openAdd","setOpenAdd","summaryRef","expandIcon","ExpandMoreIcon","square","action","DragDropContext","Droppable","droppableId","droppableProps","chunkIndex","placeholder","forwardRef","DataGroups","dataSelection","searchedGroups","SearchedGroupsState","updateDataSelection","updatedDataSelection","resetEditState","useResetRecoilState","DataSelection","onDeleteGroup","updatedGroupList","onGroupUpdate","newGroupData","filteredGroups","_last2","groupIndex","Controller","rules","isNotEmpty","render","field","fieldState","atom","default","DataGroupArea","setSearchedGroups","_dataSelection$dataGr","dataHolderGroup","dataHolderIndicator","dataHolderIndicatorSelections","toLowerCase","match","RegExp","current","overflowY","flex","generateNewGroupData","useResetLegends","shouldVerify","onResetLegends","updatedDefinitions","newGroups","forEach","_dataHolder$dataSourc","resetLegends","LegendDefinitionFormField","PeriodSelector","getValues","defaultYear","PeriodUtility","getPeriodById","start","year","setYear","periodType","options","_type$periods","fromObject","category","PeriodTypeCategory","FIXED","getPeriodType","toUpperCase","code","years","fill","toString","reverse","_field$value","valueId","CustomSelectField","optionSet","PeriodTypeSelector","fixedPeriodTypes","setCategory","periodTypes","relativePeriodTypes","RELATIVE","_fieldState$error","filterable","classes","GeneralForm","useParams","engine","useDataEngine","flexDirection","RHFCustomInput","summary","getScorecardSummary","scorecard","titleDoesNotExist","LONG_TEXT","RICH_TEXT","addable","deletable","MULTIPLE_FIELDS","multipleField","HighlightedDataSourceConfigurationForm","_useRecoilValue","selectedHighlightedIndicatorIndex","Help","helpSteps","INDICATOR_CONFIGURATION_STEPS","HighlightedIndicatorsTable","highlightedIndicators","setHighlightedIndicators","onRemove","HIGHLIGHTED_TABLE_HELP_STEPS","scrollHeight","DataTableColumnHeader","TableBody","onRowClick","steps","component","GENERAL_HELP_STEPS","tooltip","scorecardManagementTooltips","setHelpSteps","INTRODUCTION_HELP_STEPS","prevSteps","GROUPS_CONFIG_HELP_STEPS","PREVIEW_TABLE_HELP_STEPS","NO_GROUPS_HELP_STEPS","getHoldersFromGroups","NO_INDICATORS_HELP_STEPS","INDICATOR_SETUP_HELP_STEPS","uniqBy","useHelp","DATA_CONFIGURATION_HELP_STEPS","addOpen","setAddOpen","legendDefaults","HIGHLIGHTED_INDICATOR_HELP_STEPS","ACCESS_HELP_STEPS","scorecardOptions","onAverageChange","setScorecardOptions","updatedOptions","ScorecardOptions","_newValue$checked","checked","useOptionsManage","ScorecardOptionsForm","ActiveStepState","ActiveStepIndexState","selector","activeStep","step","useScorecardManage","history","useHistory","scorecardId","setIsNew","IsNewScorecardState","activeStepIndex","route","setRoute","RouterState","update","useUpdateScorecard","scorecardConf","ScorecardConfState","saving","setSaving","savingAndContinue","setSavingAndContinue","form","useForm","shouldFocusError","defaultValues","reValidateMode","setActiveStep","add","useAddScorecard","show","useAlert","duration","resetEditStates","reset","ScorecardConfigErrorState","ShouldValidate","resetScorecardStates","ScorecardIdState","onNavigate","prevRoute","previous","replace","createNewScorecard","Scorecard","save","updatedScorecard","updateData","onSave","success","updatedData","info","onSaveAndContinue","prevStep","prevStepIndex","nextStepIndex","useScorecardManagerNavigate","helpStepIndex","setHelpStepIndex","HelpIndex","search","useLocation","resetNewState","Component","URLSearchParams","hasNextStep","hasPreviousStep","currentIndex","onStepChange","getValidationPageFields","onNextStep","handleSubmit","onPreviousStep","onCancel","ScoreCardManagement","_steps$label","_steps","_steps2","helpEnabled","setHelpEnabled","HelpState","HelpSteps","write","writeAccess","UserAuthorityOnScorecard","useMediaQuery","AccessDeniedPage","FormProvider","FullPageLoader","Steps","enabled","STEP_OPTIONS","initialStep","onBeforeChange","newStepIndex","onExit","Stepper","Step","StepLabel","justifyContent","HelpIcon","center"],"sourceRoot":""}