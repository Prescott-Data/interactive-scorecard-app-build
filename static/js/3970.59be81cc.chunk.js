"use strict";(self.webpackChunk_dhis2_app_shell=self.webpackChunk_dhis2_app_shell||[]).push([[3970],{63970:function(e,t,a){a.r(t),a.d(t,{default:function(){return oe}});var r=a(21758),c=a(4147),i=a(16272),l=a(66190),n=a(17092),o=a(34174),s=a(96098),m=a(80629),d=a(77337),p=a(25363),u=a(52637),_=a(22063),v=a(6023),g=a(48978),E=a(17459),h=a(64352),C=a(26095),S=a(83387),y=a(26906),f=a(41887),b=a(30732),N=a(48389),w=a(67857),A=a(55360),k=a(79817),T=a(9261),x=a(94883),R=a(88295),I=a(96915),D=a(22173),P=a(65374),$=a(62349),L=a(32831),M=a(28576),j=a(80976),H=a(24560),z={container:"StaticCards_container__SBOWl",header:"StaticCards_header__oO4oN",headerContent:"StaticCards_headerContent__lQIp-",headerText:"StaticCards_headerText__R7ozs",pageTitle:"StaticCards_pageTitle__ye8tC",pageSubtitle:"StaticCards_pageSubtitle__JjDng",userInfo:"StaticCards_userInfo__Mmv2U",userAvatar:"StaticCards_userAvatar__WxC3p",mainGrid:"StaticCards_mainGrid__3ccCt",leftColumn:"StaticCards_leftColumn__EDej2",rightColumn:"StaticCards_rightColumn__baJDe",welcomeCard:"StaticCards_welcomeCard__-dJXF",quickActionsCard:"StaticCards_quickActionsCard__Qycer",performanceOverview:"StaticCards_performanceOverview__kqyFx",programDistribution:"StaticCards_programDistribution__g9M3F",thematicAreasGrid:"StaticCards_thematicAreasGrid__2Y9QR",thematicAreaCard:"StaticCards_thematicAreaCard__LrFE4",thematicAreaHeader:"StaticCards_thematicAreaHeader__73JnT",thematicAreaIcon:"StaticCards_thematicAreaIcon__2jorg",thematicAreaInfo:"StaticCards_thematicAreaInfo__yo9Na",thematicAreaName:"StaticCards_thematicAreaName__xW69t",thematicAreaStats:"StaticCards_thematicAreaStats__zsLVZ",thematicAreaContent:"StaticCards_thematicAreaContent__OGVh6",bestPerformingProject:"StaticCards_bestPerformingProject__YP7H1",bestProjectLabel:"StaticCards_bestProjectLabel__VS3Iz",bestProjectInfo:"StaticCards_bestProjectInfo__RAQHh",bestProjectName:"StaticCards_bestProjectName__AQcjn",bestProjectReach:"StaticCards_bestProjectReach__vp80J",reachBreakdown:"StaticCards_reachBreakdown__jynzg",reachItem:"StaticCards_reachItem__KjicG",reachLabel:"StaticCards_reachLabel__GHTFP",reachValue:"StaticCards_reachValue__OzXuI",sectionHeader:"StaticCards_sectionHeader__qKSgl",metricsGrid:"StaticCards_metricsGrid__aVy9o",metricCard:"StaticCards_metricCard__kgRCj",metricIcon:"StaticCards_metricIcon__5SYNd",metricContent:"StaticCards_metricContent__yBk7Z",metricValue:"StaticCards_metricValue__1HeFD",metricLabel:"StaticCards_metricLabel__ZfXEe",sectionTitle:"StaticCards_sectionTitle__shLQB",quickActionsContainer:"StaticCards_quickActionsContainer__Lm77K",cardGrid:"StaticCards_cardGrid__bDAxA",cardWrapper:"StaticCards_cardWrapper__1lgvc",navCard:"StaticCards_navCard__ipBCw",cardContent:"StaticCards_cardContent__3S9XH",cardIconWrapper:"StaticCards_cardIconWrapper__zu9XP",cardTextContent:"StaticCards_cardTextContent__XtVwL",cardTitle:"StaticCards_cardTitle__m7dOf",cardDescription:"StaticCards_cardDescription__btTRK",expandIcon:"StaticCards_expandIcon__Mg2+D",expandableContent:"StaticCards_expandableContent__LcIHH",linkGrid:"StaticCards_linkGrid__pFi0Y",linkItem:"StaticCards_linkItem__SJX6T",activityContainer:"StaticCards_activityContainer__8iYyk",distributionContainer:"StaticCards_distributionContainer__uiCxl",activityHeader:"StaticCards_activityHeader__AvWu+",activityTitleWrapper:"StaticCards_activityTitleWrapper__seICx",activityIconWrapper:"StaticCards_activityIconWrapper__e1E40",activityTitle:"StaticCards_activityTitle__zGFsl",activityContent:"StaticCards_activityContent__NhxaR",activityLoader:"StaticCards_activityLoader__pcN+C",activityList:"StaticCards_activityList__P2tFa",activityItem:"StaticCards_activityItem__eT6ZM",activityItemIcon:"StaticCards_activityItemIcon__DSnDh",activityItemContent:"StaticCards_activityItemContent__6phuh",activityItemHeader:"StaticCards_activityItemHeader__iyg0O",activityType:"StaticCards_activityType__T4BBQ",activityTime:"StaticCards_activityTime__ONTp0",activityDescription:"StaticCards_activityDescription__UfPzY",activityStatus:"StaticCards_activityStatus__zredR",success:"StaticCards_success__-MGvw",active:"StaticCards_active__b68Qa",error:"StaticCards_error__LQe39",emptyState:"StaticCards_emptyState__HIbWD",chartsContainer:"StaticCards_chartsContainer__L-4Kp",chartCard:"StaticCards_chartCard__nbO4r",tableCard:"StaticCards_tableCard__0Mdxx",chartHeader:"StaticCards_chartHeader__zM+sT",chartTitle:"StaticCards_chartTitle__djvKy",chartContent:"StaticCards_chartContent__aOBRf","recharts-tooltip-wrapper":"StaticCards_recharts-tooltip-wrapper__3UAhQ","recharts-default-tooltip":"StaticCards_recharts-default-tooltip__ndsnq","recharts-tooltip-content":"StaticCards_recharts-tooltip-content__eYwbZ",tableContent:"StaticCards_tableContent__Qs+yS",programTable:"StaticCards_programTable__gNC3t",tableHeader:"StaticCards_tableHeader__Y2CQh",tableHeaderCell:"StaticCards_tableHeaderCell__HaNL3",tableRow:"StaticCards_tableRow__Pojku",tableCell:"StaticCards_tableCell__vwkWj",programType:"StaticCards_programType__HLBuf",withRegistration:"StaticCards_withRegistration__j6gtM",withoutRegistration:"StaticCards_withoutRegistration__L9X8Z",viewMoreButton:"StaticCards_viewMoreButton__ekgIb",loader:"StaticCards_loader__dn92i",chartModal:"StaticCards_chartModal__oJV12",chartModalContent:"StaticCards_chartModalContent__9ZhVZ",chartModalHeader:"StaticCards_chartModalHeader__DSpte",chartModalTitle:"StaticCards_chartModalTitle__iPy1W",chartModalBody:"StaticCards_chartModalBody__D6kAF"};const F={programs:{resource:"programs",params:{paging:!1,fields:"id,name,programType,enrollments,programStages,organisationUnits[id,name,level]"}},currentUser:{resource:"me",params:{fields:"id,name,username,organisationUnits[id]"}},organisationUnits:{resource:"organisationUnits",params:{paging:!1,fields:"id,name,level,parent[name]"}}};function W(){var e,t,a,i,l;const[n,o]=(0,r.useState)(!1),[s,m]=(0,r.useState)(!1),[p,u]=(0,r.useState)(null),[_,v]=(0,r.useState)(new Set),[W,B]=(0,r.useState)(null),[O,U]=(0,r.useState)(!1),[G,V]=(0,r.useState)(null),[K,Q]=(0,r.useState)(null),[Y,Z]=(0,r.useState)({current:0,total:0,programName:""}),{loading:J,data:q}=(0,c.iO)(F),X=(0,r.useMemo)(()=>{var e,t;return(null!==(e=null===q||void 0===q||null===(t=q.organisationUnits)||void 0===t?void 0:t.organisationUnits)&&void 0!==e?e:[]).find(e=>1===e.level)},[q]),ee=(0,r.useCallback)(async(e,t)=>{const a=(new Date).getFullYear(),r=`${a}-01-01`,c=`${a}-12-31`;let i=0,l=1;try{for(;;){var n;const a=await fetch(`${window.location.origin}/api/events.json?orgUnit=${t}&ouMode=DESCENDANTS&program=${e}&startDate=${r}&endDate=${c}&pageSize=1000&page=${l}&fields=event`,{credentials:"include",headers:{Accept:"application/json"}});if(!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);const o=(null===(n=(await a.json()).events)||void 0===n?void 0:n.length)||0;if(i+=o,o<1e3)break;if(l++,l>100)break}return i}catch(o){return 0}},[]),te=(0,r.useCallback)(async()=>{var e;if(null!==q&&void 0!==q&&null!==(e=q.programs)&&void 0!==e&&e.programs&&null!==X&&void 0!==X&&X.id){U(!0),V(null),Z({current:0,total:0,programName:""});try{const e=q.programs.programs,a=e.length,r=(new Date).getFullYear();Z({current:0,total:a,programName:"Starting..."});const c=[];let i=0;for(let t=0;t<e.length;t++){const r=e[t];Z({current:t+1,total:a,programName:r.name});const l=await ee(r.id,X.id);i+=l,c.push({id:r.id,name:r.name,programType:r.programType,eventCount:l}),await new Promise(e=>setTimeout(e,100))}const l={metadata:{generatedAt:(new Date).toISOString(),year:r,baseUrl:window.location.origin,deploymentType:"integrated",orgUnit:{id:X.id,name:X.name},dateRange:{startDate:`${r}-01-01`,endDate:`${r}-12-31`}},programs:c,summary:{totalPrograms:e.length,totalEvents:i,averageEventsPerProgram:i/e.length}};B(l),Q(new Date);try{localStorage.setItem("dhis2-program-data",JSON.stringify(l)),localStorage.setItem("dhis2-program-data-timestamp",(new Date).toISOString())}catch(t){}}catch(t){V(t.message)}finally{U(!1),Z({current:0,total:0,programName:""})}}},[q,X,ee]);(0,r.useEffect)(()=>{var e;!(()=>{try{const e=localStorage.getItem("dhis2-program-data"),t=localStorage.getItem("dhis2-program-data-timestamp");if(e&&t){const a=JSON.parse(e),r=new Date(t),c=new Date;if((c-r)/36e5<1)return B(a),Q(r),!0}}catch(e){}return!1})()&&null!==q&&void 0!==q&&null!==(e=q.programs)&&void 0!==e&&e.programs&&null!==X&&void 0!==X&&X.id&&te()},[q,X,te]),(0,r.useEffect)(()=>{const e=setInterval(()=>{var e;null!==q&&void 0!==q&&null!==(e=q.programs)&&void 0!==e&&e.programs&&null!==X&&void 0!==X&&X.id&&te()},36e5);return()=>clearInterval(e)},[q,X,te]);const ae=(0,r.useMemo)(()=>{if(null===X||void 0===X||!X.id)return null;const e=(new Date).getFullYear(),t=`${e}-01-01`,a=`${e}-12-31`;return{recentEvents:{resource:"events",params:{pageSize:10,page:1,fields:"event,program,eventDate,status,orgUnit,programStage",orgUnit:X.id,ouMode:"DESCENDANTS",order:"eventDate:desc",startDate:t,endDate:a}}}},[X]),{loading:re,data:ce}=(0,c.iO)(ae,{skip:!ae}),ie=[{id:"health",name:"Health",color:"#10b981",programs:[{id:"asbc",name:"ASBC",projects:["CE4HW"],totalReach:{male:1500,female:1800}},{id:"nutrition",name:"Nutrition Program",projects:["NUT001","NUT002"],totalReach:{male:1200,female:1400}}]},{id:"education",name:"Education",color:"#3b82f6",programs:[{id:"literacy",name:"Literacy Program",projects:["LIT001"],totalReach:{male:800,female:950}},{id:"stem",name:"STEM Education",projects:["STEM001","STEM002"],totalReach:{male:600,female:700}}]},{id:"social_protection",name:"Social Protection",color:"#8b5cf6",programs:[{id:"cash_transfer",name:"Cash Transfer Program",projects:["CTP001"],totalReach:{male:2e3,female:2200}},{id:"food_security",name:"Food Security",projects:["FS001","FS002"],totalReach:{male:1100,female:1300}}]},{id:"economic_empowerment",name:"Economic Empowerment",color:"#f59e0b",programs:[{id:"microfinance",name:"Microfinance",projects:["MF001"],totalReach:{male:500,female:800}},{id:"skills_training",name:"Skills Training",projects:["ST001","ST002"],totalReach:{male:900,female:1100}}]}],le=(0,r.useMemo)(()=>{const e=[];return ie.forEach(t=>{t.programs.forEach(a=>{const r=a.totalReach.male+a.totalReach.female;e.push({id:a.id,name:a.name,totalReach:r,maleReach:a.totalReach.male,femaleReach:a.totalReach.female,thematicArea:t.name,color:t.color,projects:a.projects})})}),e},[ie]),ne=(0,r.useMemo)(()=>ie.map(e=>{const t=e.programs.reduce((e,t)=>e+t.totalReach.male+t.totalReach.female,0),a=e.programs.reduce((e,t)=>t.totalReach.male+t.totalReach.female>e.totalReach.male+e.totalReach.female?t:e,e.programs[0]);return{...e,totalReach:t,bestProgram:a,bestProgramReach:a.totalReach.male+a.totalReach.female}}),[ie]),oe=(0,r.useMemo)(()=>null!==W&&void 0!==W&&W.summary?{totalEnrollments:W.summary.totalEvents}:{totalEnrollments:0},[W]),se=(new Date).getFullYear(),me=J,de=()=>{var e;null!==q&&void 0!==q&&null!==(e=q.programs)&&void 0!==e&&e.programs&&null!==X&&void 0!==X&&X.id&&te()},pe=window.location.origin,ue=[{title:"Import Data",description:"Transfer data into the system.",link:`${pe}/sims-web-import-export/#/import`,isExpandable:!0,type:"import",icon:r.createElement(g.A,null),color:"#4f46e5"},{title:"Export Data",description:"Transfer data out of the system.",link:`${pe}/sims-web-import-export/#/export`,isExpandable:!0,type:"export",icon:r.createElement(E.A,null),color:"#059669"},{title:"Forms Programs",description:"Access structured forms for data collection.",link:`${pe}/sims-web-capture/`,icon:r.createElement(h.A,null),color:"#4f46e5"},{title:"Spreadsheets Programs",description:"Input and manage data using Excel-like grids.",link:`${pe}/sims-web-aggregate-data-entry/`,icon:r.createElement(C.A,null),color:"#ea580c"},{title:"Thematic Areas",description:"View thematic areas",link:`${pe}/sims-web-maintenance/#/list/organisationUnitSection/organisationUnit`,icon:r.createElement(S.A,null),color:"#ea580c"},{title:"Visualize",description:"Interact with visualizations and reports",link:"https://metabase-prod-890193357774.us-central1.run.app/",icon:r.createElement(y.A,null),color:"#ea580c",isExternal:!0}],_e=[{title:"Import Spreadsheets Data",link:`${pe}/sims-web-import-export/#/import/data`},{title:"Import Forms Data",link:`${pe}/sims-web-import-export/#/import/event`},{title:"Import Metadata",link:`${pe}/sims-web-import-export/#/import/metadata`}],ve=[{title:"Export Spreadsheets",link:`${pe}/sims-web-import-export/#/export/data`},{title:"Export Forms Data",link:`${pe}/sims-web-import-export/#/export/event`},{title:"Export Metadata",link:`${pe}/sims-web-import-export/#/export/metadata`}],ge=e=>{e.isExpandable?"import"===e.type?(o(e=>!e),s&&m(!1)):"export"===e.type&&(m(e=>!e),n&&o(!1)):e.isExternal?window.open(e.link,"_blank","noopener,noreferrer"):window.location.href=e.link};return r.createElement("div",{className:z.container},me&&r.createElement("div",{className:z.loader},r.createElement(f.F,{small:!0})),r.createElement("div",{className:z.header},r.createElement("div",{className:z.headerContent},r.createElement("div",{className:z.headerText},r.createElement("p",{className:z.pageSubtitle},r.createElement("h1",null,"Welcome back, ",(null===q||void 0===q||null===(e=q.currentUser)||void 0===e||null===(t=e.name)||void 0===t?void 0:t.split(" ")[0])||"User"),X&&r.createElement("span",{style:{fontSize:"12px",color:"#666",display:"block"}},"Project: ",X.name," (ID: ",X.id,")"),K&&r.createElement("span",{style:{fontSize:"10px",color:"#999",display:"block"}},"Data updated: ",K.toLocaleString()," (Auto-refresh: hourly)"))),r.createElement("div",{className:z.userInfo},r.createElement(d.$,{small:!0,secondary:!0,onClick:de,disabled:O,style:{marginRight:"8px"}},r.createElement(b.A,null),O?"Collecting...":"Refresh Data")))),O&&r.createElement(N.Z,{style:{margin:"1rem 0",padding:"1rem"}},r.createElement("div",{style:{display:"flex",alignItems:"center",gap:"1rem"}},r.createElement(f.F,{small:!0}),r.createElement("div",null,r.createElement("div",{style:{fontWeight:"bold"}},"Collecting Program Data... (",Y.current,"/",Y.total,")"),r.createElement("div",{style:{fontSize:"12px",color:"#666"}},Y.programName),Y.total>0&&r.createElement("div",{style:{width:Y.current/Y.total*100+"%",height:"100%",backgroundColor:"#4f46e5",borderRadius:"2px",transition:"width 0.3s ease"}})))),G&&r.createElement(N.Z,{style:{margin:"1rem 0",padding:"1rem",backgroundColor:"#fff3cd",border:"1px solid #ffeaa7"}},r.createElement("div",{style:{color:"#856404"}},r.createElement("strong",null,"Data Collection Error:")," ",G,r.createElement(d.$,{small:!0,secondary:!0,onClick:de,style:{marginLeft:"1rem"}},"Retry"))),r.createElement("div",{className:z.mainGrid},r.createElement("div",{className:z.leftColumn},r.createElement("div",{className:z.quickActionsContainer},r.createElement("div",{className:z.sectionHeader},r.createElement("h3",{className:z.sectionTitle},"Quick Actions")),r.createElement("div",{className:z.cardGrid},ue.map(e=>r.createElement("div",{key:e.title,className:z.cardWrapper},r.createElement(N.Z,{className:z.navCard},r.createElement("div",{className:z.cardContent,role:"button",tabIndex:0,onClick:()=>ge(e),onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||ge(e)},style:{cursor:"pointer"}},r.createElement("div",{className:z.cardIconWrapper,style:{backgroundColor:`${e.color}15`,color:e.color}},e.icon),r.createElement("div",{className:z.cardTextContent},r.createElement("h3",{className:z.cardTitle},e.title),r.createElement("p",{className:z.cardDescription},e.description)),e.isExpandable&&r.createElement("div",{className:z.expandIcon},"import"===e.type&&n||"export"===e.type&&s?r.createElement(w.A,null):r.createElement(A.A,null))),"import"===e.type&&n&&r.createElement("div",{className:z.expandableContent},r.createElement(k.c,null),r.createElement("div",{className:z.linkGrid},_e.map(e=>r.createElement("a",{key:e.title,href:e.link,className:z.linkItem},e.title)))),"export"===e.type&&s&&r.createElement("div",{className:z.expandableContent},r.createElement(k.c,null),r.createElement("div",{className:z.linkGrid},ve.map(e=>r.createElement("a",{key:e.title,href:e.link,className:z.linkItem},e.title))))))))),r.createElement("div",{className:z.performanceOverview},r.createElement("div",{className:z.sectionHeader},r.createElement("h3",{className:z.sectionTitle},"Performance Overview")),r.createElement("div",{className:z.thematicAreasGrid},ne.map(e=>r.createElement("div",{key:e.id,className:z.thematicAreaCard},r.createElement("div",{className:z.thematicAreaHeader},r.createElement("div",{className:z.thematicAreaIcon,style:{backgroundColor:`${e.color}15`,color:e.color}},r.createElement(S.A,null)),r.createElement("div",{className:z.thematicAreaInfo},r.createElement("h4",{className:z.thematicAreaName},e.name),r.createElement("p",{className:z.thematicAreaStats},e.totalReach.toLocaleString()," total reach"))),r.createElement("div",{className:z.thematicAreaContent},r.createElement("div",{className:z.bestPerformingProject},r.createElement("h5",{className:z.bestProjectLabel},"Top Performing Program"),r.createElement("div",{className:z.bestProjectInfo},r.createElement("span",{className:z.bestProjectName},e.bestProgram.name),r.createElement("span",{className:z.bestProjectReach},e.bestProgramReach.toLocaleString()," reach")),r.createElement("div",{className:z.reachBreakdown},r.createElement("div",{className:z.reachItem},r.createElement("span",{className:z.reachLabel},"Male:"),r.createElement("span",{className:z.reachValue},e.bestProgram.totalReach.male.toLocaleString())),r.createElement("div",{className:z.reachItem},r.createElement("span",{className:z.reachLabel},"Female:"),r.createElement("span",{className:z.reachValue},e.bestProgram.totalReach.female.toLocaleString()))))))))),r.createElement("div",{className:z.activityContainer},r.createElement("div",{className:z.activityHeader},r.createElement("div",{className:z.activityTitleWrapper},r.createElement("div",{className:z.activityIconWrapper},r.createElement(T.A,null)),r.createElement("h3",{className:z.activityTitle},"Recent Activity")),r.createElement(d.$,{small:!0,secondary:!0},"View All")),r.createElement(k.c,null),r.createElement("div",{className:z.activityContent},re?r.createElement("div",{className:z.activityLoader},r.createElement(f.F,{small:!0})):r.createElement("div",{className:z.activityList},null===ce||void 0===ce||null===(a=ce.recentEvents)||void 0===a||null===(i=a.events)||void 0===i?void 0:i.slice(0,5).map(e=>{var t,a;const c=null===q||void 0===q||null===(t=q.programs)||void 0===t||null===(a=t.programs)||void 0===a?void 0:a.find(t=>t.id===e.program),i=(null===c||void 0===c?void 0:c.name)||"Unknown Program";return r.createElement("div",{key:e.event,className:z.activityItem},r.createElement("div",{className:z.activityItemIcon},r.createElement(h.A,null)),r.createElement("div",{className:z.activityItemContent},r.createElement("div",{className:z.activityItemHeader},r.createElement("span",{className:z.activityType},"COMPLETED"===e.status?"Event Completed":"Event Created"),r.createElement("span",{className:z.activityTime},(e=>{const t=new Date,a=new Date(e),r=Math.floor((t-a)/6e4);return r<1?"Just now":r<60?`${r}m ago`:r<1440?`${Math.floor(r/60)}h ago`:`${Math.floor(r/1440)}d ago`})(new Date(e.eventDate)))),r.createElement("p",{className:z.activityDescription},i," - Event ",e.event.substring(0,8),"...")),r.createElement("div",{className:`${z.activityStatus} ${"COMPLETED"===e.status?z.success:z.active}`}))}),r.createElement("div",{className:z.activityItem},r.createElement("div",{className:z.activityItemIcon},r.createElement(x.A,null)),r.createElement("div",{className:z.activityItemContent},r.createElement("div",{className:z.activityItemHeader},r.createElement("span",{className:z.activityType},"System Status"),r.createElement("span",{className:z.activityTime},"Just now")),r.createElement("p",{className:z.activityDescription},oe.totalEnrollments," total events across ",(null===W||void 0===W||null===(l=W.summary)||void 0===l?void 0:l.totalPrograms)||0," programs")),r.createElement("div",{className:`${z.activityStatus} ${z.success}`}))))),r.createElement("div",{className:z.distributionContainer},r.createElement("div",{className:z.sectionHeader},r.createElement("h3",{className:z.sectionTitle},"Program Distribution")),r.createElement("div",{className:z.chartsContainer},r.createElement(N.Z,{className:z.chartCard},r.createElement("div",{className:z.chartHeader},r.createElement("h4",{className:z.chartTitle},"Program Reach by Total Beneficiaries ",se),r.createElement(d.$,{small:!0,secondary:!0,onClick:()=>u("programs")},"Expand")),r.createElement(k.c,null),r.createElement("div",{className:z.chartContent},r.createElement(R.u,{width:"100%",height:400},r.createElement(I.E,{data:le,margin:{top:48,right:24,left:16,bottom:60}},r.createElement(D.d,{strokeDasharray:"3 3"}),r.createElement(P.W,{dataKey:"name",angle:-45,textAnchor:"end",height:100,fontSize:12}),r.createElement($.h,{label:{value:"Total Reach",angle:-90,position:"insideLeft"},fontSize:12}),r.createElement(L.m,{formatter:(e,t,a)=>{const c=a.payload;return[r.createElement("div",{key:"tooltip"},r.createElement("div",{style:{fontWeight:"bold",marginBottom:"8px"}},`Program: ${c.name}`),r.createElement("div",{style:{marginBottom:"4px"}},`Total Reach: ${e.toLocaleString()}`),r.createElement("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"}},`Male: ${c.maleReach.toLocaleString()}`),r.createElement("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"}},`Female: ${c.femaleReach.toLocaleString()}`),r.createElement("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"}},`Thematic Area: ${c.thematicArea}`),r.createElement("div",{style:{fontSize:"12px",color:"#666"}},`Projects: ${c.projects.join(", ")}`))]},labelFormatter:()=>"",contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)"}}),r.createElement(M.s,{layout:"horizontal",verticalAlign:"top",align:"center",wrapperStyle:{paddingBottom:8,fontSize:14}}),r.createElement(j.y,{dataKey:"totalReach",name:"Total Reach (Male + Female)",isAnimationActive:!1,barSize:40},le.map((e,t)=>r.createElement(H.f,{key:`cell-${t}`,fill:e.color}))))))))))),p?r.createElement("div",{className:z.chartModal,onClick:()=>u(null)},r.createElement("div",{className:z.chartModalContent,onClick:e=>e.stopPropagation()},r.createElement("div",{className:z.chartModalHeader},r.createElement("h3",{className:z.chartModalTitle},"Program Distribution by Total Reach"),r.createElement(d.$,{small:!0,secondary:!0,onClick:()=>u(null)},"Close")),r.createElement("div",{className:z.chartModalBody},r.createElement(R.u,{width:"100%",height:600},r.createElement(I.E,{data:le,margin:{top:48,right:24,left:16,bottom:80}},r.createElement(D.d,{strokeDasharray:"3 3"}),r.createElement(P.W,{dataKey:"name",angle:-45,textAnchor:"end",height:100,fontSize:12}),r.createElement($.h,{label:{value:"Total Reach",angle:-90,position:"insideLeft"},fontSize:12}),r.createElement(L.m,{formatter:(e,t,a)=>{const c=a.payload;return[r.createElement("div",{key:"tooltip"},r.createElement("div",{style:{fontWeight:"bold",marginBottom:"8px"}},`Program: ${c.name}`),r.createElement("div",{style:{marginBottom:"4px"}},`Total Reach: ${e.toLocaleString()}`),r.createElement("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"}},`Male: ${c.maleReach.toLocaleString()}`),r.createElement("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"}},`Female: ${c.femaleReach.toLocaleString()}`),r.createElement("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"}},`Thematic Area: ${c.thematicArea}`),r.createElement("div",{style:{fontSize:"12px",color:"#666"}},`Projects: ${c.projects.join(", ")}`))]},labelFormatter:()=>"",contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)"}}),r.createElement(M.s,{layout:"horizontal",verticalAlign:"top",align:"center",wrapperStyle:{paddingBottom:8,fontSize:16}}),r.createElement(j.y,{dataKey:"totalReach",name:"Total Reach (Male + Female)",isAnimationActive:!1,barSize:40},le.map((e,t)=>r.createElement(H.f,{key:`cell-${t}`,fill:e.color})))))))):null)}var B=a(26802),O=a(75038),U=a(59541),G=a(50433),V=a(65298);function K(){return r.createElement("div",{className:"column h-100"},r.createElement("div",{className:"row p-16"}),r.createElement("div",{style:{padding:"0 16px"}},r.createElement(W,null)))}var Q=a(96421),Y=a(83590),Z=a(95752);function J({keyword:e}){return r.createElement("div",{className:"h-100 w-100"},r.createElement(Q.o,null,r.createElement("div",{className:"column center align-items-center"},r.createElement(Z.A,{style:{color:Y.T.grey700,fontSize:64}}),r.createElement("h2",{"data-test":"no-scorecards-found-title",style:{color:Y.T.grey700,margin:8}},l.A.t("No scorecards found")),r.createElement("p",{style:{color:Y.T.grey700,margin:4}},l.A.t("Could not find scorecards matching the keyword "),r.createElement("b",null,`'${e}'`)))))}var q=a(10103);function X({scorecard:e,grid:t}){const a=(0,V.useSetRecoilState)(B.RouterState),{write:i,delete:n}=(0,V.useRecoilValue)((0,B.UserAuthorityOnScorecard)(null===e||void 0===e?void 0:e.id)),{title:s,description:m,id:p}=e,[u,_]=(0,r.useState)(!1),v=(0,G.W6)(),{remove:g}=(0,B.useDeleteScorecard)(p),{show:E}=(0,c.MW)(({message:e})=>e,({type:e})=>({...e,duration:3e3})),{confirm:h}=(0,q.G_)(),C=()=>{a(e=>({...e,previous:"/"})),v.push(`/view/${p}`)},S=()=>{i&&(a(e=>({...e,previous:"/"})),v.push(`/edit/${p}`))},y=(e,t)=>{t.stopPropagation(),h({title:l.A.t("Confirm scorecard delete"),message:r.createElement("p",null,l.A.t("Are you sure you want to delete scorecard "),":",r.createElement("b",null,s)),onCancel:()=>{},onConfirm:()=>{(async()=>{if(n){try{await g()}catch(e){E({message:e.message,type:{info:!0}})}E({message:l.A.t("Scorecard deleted successfully"),type:{success:!0}})}})()}})};return t?r.createElement("div",{className:"container-bordered p-16 ","data-test":"scorecard-thumbnail-view",style:{margin:16,background:"white"},onClick:C},r.createElement("div",{className:"column space-between h-100"},r.createElement("div",{className:"text-center p-8"},r.createElement("img",{alt:"img",src:B.ScorecardCardImage,style:{height:100,width:200}})),r.createElement("div",{className:"flex-1 column align-items-center"},r.createElement("h4",{className:"scorecard-list-card-title"},s),r.createElement("p",{className:"scorecard-list-card-description",style:{color:Y.T.grey700}},(null===m||void 0===m?void 0:m.length)>100?r.createElement("div",{onClick:e=>{e.stopPropagation(),_(e=>!e)},className:"row space-between align-content-end"},u?m:(0,B.truncateDescription)(m)):m)),r.createElement("div",{style:{margin:"0 8px"}},r.createElement(o.v,{middle:!0},r.createElement(d.$,{onClick:C},l.A.t("View")),i&&r.createElement(d.$,{dataTest:"edit-scorecard-button",onClick:function(e,t){t.stopPropagation(),S()}},l.A.t("Edit")),n&&r.createElement(d.$,{dataTest:"scorecard-delete-button",onClick:y},l.A.t("Delete")))))):r.createElement("div",{"data-test":"scorecard-thumbnail-view",className:"container-bordered p-32",style:{margin:16,background:"white"},onClick:C},r.createElement("div",{className:"row space-between align-items-center"},r.createElement("div",{className:"row align-items-center"},r.createElement("div",null,r.createElement("img",{alt:"img",src:B.ScorecardCardImage,style:{height:100,width:200}})),r.createElement("div",{className:"column start"},r.createElement("h4",{className:"scorecard-list-card-title"},s),r.createElement("p",{className:"scorecard-list-card-description",style:{color:Y.T.grey700}},(null===m||void 0===m?void 0:m.length)>100?r.createElement("div",{onClick:e=>{e.stopPropagation(),_(e=>!e)},className:"row space-between align-content-end"},u?m:(0,B.truncateDescription)(m)):m))),r.createElement("div",{className:"row end"},r.createElement(o.v,{middle:!0},r.createElement(d.$,{onClick:C},l.A.t("View")),i&&r.createElement(d.$,{dataTest:"edit-scorecard-button",onClick:function(e,t){t.stopPropagation(),S()}},l.A.t("Edit")),n&&r.createElement(d.$,{dataTest:"scorecard-delete-button",onClick:y},l.A.t("Delete"))))))}function ee({scorecards:e}){return r.createElement("div",{className:"scorecard-list-container grid p-32"},null===e||void 0===e?void 0:e.map(e=>r.createElement(X,{grid:!0,key:e.id,scorecard:e})))}var te=a(33791),ae=a(28384);function re(){const e=(0,V.useSetRecoilState)(B.HelpState);return r.createElement(te.n,null,r.createElement(ae.D,{onClick:()=>{e(!0)},label:l.A.t("Start a guided tour")}),r.createElement(ae.D,{onClick:()=>{const e=window.open();e.opener=null,e.target="_blank",e.location=B.SCORECARD_DOCUMENTATION_URL},label:l.A.t("Documentation")}))}function ce({scorecards:e}){return r.createElement("div",{className:"column"},null===e||void 0===e?void 0:e.map(e=>r.createElement(X,{scorecard:e,key:null===e||void 0===e?void 0:e.id,grid:!1})))}var ie=a(94450);function le({pageSize:e=8,scorecards:t=[],listComponent:a}){const[c,i]=(0,r.useState)(0),l=(0,r.useMemo)(()=>(0,U.chunk)(t,e),[t,e]),n=a;return r.createElement("div",{className:"p-16 scorecard-list"},r.createElement(n,{scorecards:l[c]}),l.length>1&&r.createElement("div",{className:"p-16"},r.createElement(ie.d,{hidePageSizeSelect:!0,total:t.length,pageCount:l.length,pageSize:e,page:c+1,onPageChange:e=>{i(e-1)},onPageSizeChange:()=>{}})))}function ne(){const e=(0,V.useResetRecoilState)(B.ScorecardIdState),t=(0,V.useSetRecoilState)(B.RouterState),[a,g]=(0,V.useRecoilState)(B.HelpState),E=(0,G.W6)(),[h,{set:C}]=(0,i.iK)("scorecardViewType"),S=(0,V.useRecoilValue)(B.ScorecardSummaryState),[y,f]=(0,r.useState)(),[b,N]=(0,r.useState)(S),{show:w}=(0,c.MW)(({message:e})=>e,({type:e})=>({...e,duration:3e3})),A=(0,r.useRef)((0,U.debounce)(e=>{N(()=>S.filter(({id:t,title:a,description:r,additionalLabels:c})=>{const i=`${t} ${a} ${r}`.toLowerCase();return Array.isArray(c)&&c.length>0&&i.concat(c.join(" ").toLowerCase()),"string"===typeof c&&i.concat(c.toLowerCase()),i.includes(e.toLowerCase())}))}));(0,r.useEffect)(()=>{y?A.current(y):N(S)},[y,S]);return r.createElement(r.Suspense,{fallback:r.createElement(B.FullPageLoader,null)},r.createElement(O.gj,{options:B.STEP_OPTIONS,enabled:a,steps:B.SCORECARD_LIST_HELP_STEPS,onExit:()=>{g(!1)},initialStep:0}),(0,U.isEmpty)(S)?r.createElement(K,null):r.createElement("div",{className:"column h-100"},r.createElement("div",{className:"row p-16"},r.createElement("div",{className:"row p-45 center",style:{paddingLeft:"35%"}},r.createElement("div",{className:"column w-30"},r.createElement(n.p,{className:"search-input",value:y,onChange:({value:e})=>{f(e)},placeholder:l.A.t("Search")}))),r.createElement("div",{className:"w-100"},r.createElement(o.v,{end:!0},r.createElement(s.g,{type:"button",component:r.createElement(re,null),icon:r.createElement(u.A,null)},l.A.t("Help")),r.createElement(m.m,{content:l.A.t("Switch to {{viewType}} view",{viewType:"grid"===h?l.A.t("list"):l.A.t("grid")})},r.createElement(d.$,{onClick:()=>{try{if("grid"===h)return void C("list");C("grid")}catch(t){var e;w({message:null!==(e=t.message)&&void 0!==e?e:t.toString(),type:{critical:!0}})}},className:"change-view-button",dataTest:"scorecard-view-orientation",icon:"grid"===h?r.createElement(_.A,null):r.createElement(v.A,null)})),r.createElement(d.$,{dataTest:"new-scorecard-button",className:"add-scorecard-button",onClick:()=>{e(),t(e=>({...e,previous:"/"})),E.push("/add")},primary:!0,icon:r.createElement(p.A,null)},l.A.t("Add New Scorecard"))))),r.createElement("div",{style:{padding:"0 16px"}},r.createElement(W,null)),(0,U.isEmpty)(b)?r.createElement("div",{className:"flex-1"},r.createElement(J,{keyword:y})):r.createElement(le,{scorecards:b,pageSize:"grid"===h?8:5,listComponent:"grid"===h?ee:ce})))}function oe(){return function(){const[e]=(0,i.iK)(B.DATA_MIGRATION_CHECK,{global:!0}),t=(0,G.W6)();(0,r.useEffect)(()=>{e||t.replace("/migrate")},[t,e])}(),r.createElement(ne,null)}}}]);
//# sourceMappingURL=3970.59be81cc.chunk.js.map