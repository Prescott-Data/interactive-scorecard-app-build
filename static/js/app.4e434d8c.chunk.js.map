{"version":3,"file":"static/js/app.4e434d8c.chunk.js","mappings":"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","sources":["D2App/cacheBuster.js","D2App/modules/Router/index.js","D2App/locales/index.js","D2App/App.js","webpack://@dhis2/app-shell/./src/D2App/App.module.css?85cb","D2App/Main.js","../../../../shared/build/es/components/Errors/FullPageError.js","../../../../shared/build/es/components/Loaders/ModalLoader.js","../../../../shared/build/es/components/ScorecardCell/Components/Arrows.js","../../../../shared/build/es/components/ScorecardView/components/SpecificTargetsLibrary/components/SpecificTargetView/index.js","webpack://@dhis2/app-shell/../../../shared/build/es/components/ScorecardView/components/SpecificTargetsLibrary/SpecificTargetsLibrary.module.css?35e6","../../../../shared/build/es/components/ScorecardView/components/SpecificTargetsLibrary/index.js","../../../../shared/build/es/components/Loaders/FullPageLoader.js","../../../../shared/build/es/components/Errors/AccessDeniedPage.js","../../../../shared/build/es/components/ScorecardView/components/EmptyOrgUnitsOrPeriod.js","../../../../shared/build/es/components/ScorecardView/components/HighlightedIndicatorsView/Components/HighlightedIndicator.js","../../../../shared/build/es/components/ScorecardView/components/HighlightedIndicatorsView/index.js","../../../../shared/build/es/components/ScorecardView/components/Download/Components/DownloadMenu.js","../../../../shared/build/es/components/ScorecardView/components/ScorecardViewHeader/services/download.js","../../../../shared/build/es/components/ScorecardView/components/ScorecardViewHeader/hooks/useDownload.js","../../../../shared/build/es/components/Help/index.js","../../../../shared/build/es/components/ScorecardOptionsForm/index.js","../../../../shared/build/es/components/modals/ScorecardOptionsModal/index.js","../../../../shared/build/es/components/ScorecardView/components/ScorecardActions.js","../../../../shared/build/es/components/ScorecardView/components/ScorecardHeader/index.js","../../../../shared/build/es/components/SelectionWrapper/index.js","../../../../shared/build/es/components/ScorecardView/components/ScorecardViewHeader/index.js","../../../../shared/build/es/components/ScorecardView/index.js","../../../../shared/build/es/components/Loaders/ContainerLoader.js","../../../../shared/build/es/components/ScorecardCell/Components/SingleCellSvg.js","../../../../shared/build/es/components/ScorecardCell/Components/LinkedCellSvg.js","../../../../shared/build/es/components/CustomForm/models/formField.model.js","../../../../shared/build/es/components/icons/ErrorIcon.js","../../../../shared/build/es/constants/config.js","../../../../shared/build/es/constants/alma.js","../../../../shared/build/es/constants/calendar.js","../../../../shared/build/es/constants/chart-types.constant.js","../../../../shared/build/es/constants/download.js","../../../../shared/build/es/constants/draggables.js","../../../../shared/build/es/constants/form.js","../../../../shared/build/es/constants/layout.js","../../../../shared/build/es/constants/migration.js","../../../../shared/build/es/constants/orientation.js","../../../../shared/build/es/constants/period.js","../../../../shared/build/es/constants/scorecardAccessType.js","../../../../shared/build/es/constants/selection.js","../../../../shared/build/es/constants/table.js","../../../../shared/build/es/constants/tableSort.js","../../../../shared/build/es/constants/averageDisplayType.js","../../../../shared/build/es/constants/help/options.js","../../../../shared/build/es/constants/help/scorecardList.js","../../../../shared/build/es/constants/help/scorecardManagement.js","../../../../shared/build/es/constants/help/scorecardView.js","../../../../shared/build/es/constants/tooltips/scorecardManagement.js","../../../../shared/build/es/hooks/useOrganisationUnits.js","../../../../shared/build/es/hooks/useMediaQuery.js","../../../../shared/build/es/hooks/datastore/useScorecardsSummary.js","../../../../shared/build/es/hooks/datastore/useScorecard.js","../../../../shared/build/es/hooks/datastore/useAllScorecards.js","../../../../shared/build/es/hooks/useInitApp.js","../../../../shared/build/es/hooks/useForceUpdate.js","../../../../shared/build/es/hooks/useSetDataEngine.js","../../../../shared/build/es/models/base.js","../../../../shared/build/es/models/dataSelection.js","../../../../shared/build/es/models/orgUnitSelection.js","../../../../shared/build/es/models/selectionItem.js","../../../../shared/build/es/models/periodSelection.js","../../../../shared/build/es/models/scorecardAccess.js","../../../../shared/build/es/models/scorecardOptions.js","../../../../shared/build/es/models/scorecard.js","../../../../shared/build/es/models/scorecardData.js","../../../../shared/build/es/models/scorecardIndicator.js","../../../../shared/build/es/models/scorecardIndicatorHolder.js","../../../../shared/build/es/models/scorecardLegend.js","../../../../shared/build/es/models/scorecardIndicatorGroup.js","../../../../shared/build/es/services/getCustomFunctions.js","../../../../shared/build/es/services/getScorecardCellData.js","../../../../shared/build/es/services/getScorecardData.js","../../../../shared/build/es/services/orgUnit.js","../../../../shared/build/es/services/getSystemSettings.js","../../../../shared/build/es/services/getScorecard.js","../../../../shared/build/es/services/getScorecardSummary.js","../../../../shared/build/es/state/engine.js","../../../../shared/build/es/state/system.js","../../../../shared/build/es/state/user.js","../../../../shared/build/es/state/window.js","../../../../shared/build/es/state/scorecard.js","../../../../shared/build/es/state/period.js","../../../../shared/build/es/state/orgUnit.js","../../../../shared/build/es/state/validators.js","../../../../shared/build/es/state/router.js","../../../../shared/build/es/state/help.js","../../../../shared/build/es/state/customFunctions.js","../../../../shared/build/es/state/highlightedIndicators.js","../../../../shared/build/es/utils/dataSource.js","../../../../shared/build/es/utils/dnd.js","../../../../shared/build/es/utils/utils.js","../../../../shared/build/es/utils/migrate.js","../../../../shared/build/es/utils/orgUnit.js","../../../../shared/build/es/utils/scorecard.js","../../../../shared/build/es/utils/customFunctions.js","../../../../shared/build/es/utils/table.js","../../../../shared/build/es/utils/validator.js"],"sourcesContent":["// Optimized cache buster with version management\n\n// Cache version - increment this when you want to force a cache clear\nconst CACHE_VERSION = '4';\nconst VERSION_PARAM = 'cv'; // Using a different parameter name to avoid conflicts\n\nasync function clearCaches() {\n  if ('caches' in window) {\n    try {\n      const cacheNames = await caches.keys();\n      const cachePromises = cacheNames.filter(name => name.includes('hisptz-scorecard')).map(name => caches.delete(name));\n      await Promise.all(cachePromises);\n      console.log('Caches cleared');\n    } catch (error) {\n      console.warn('Error clearing caches:', error);\n    }\n  }\n}\nasync function unregisterServiceWorkers() {\n  if ('serviceWorker' in navigator) {\n    try {\n      const registrations = await navigator.serviceWorker.getRegistrations();\n      for (const registration of registrations) {\n        await registration.unregister();\n      }\n      console.log('Service workers unregistered');\n    } catch (error) {\n      console.warn('Error unregistering service workers:', error);\n    }\n  }\n}\nfunction clearStorages() {\n  try {\n    // Only clear storage items that might cause conflicts\n    const clearKeys = [];\n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i);\n      if (key && key.startsWith('hisptz-scorecard')) {\n        clearKeys.push(key);\n      }\n    }\n    clearKeys.forEach(key => localStorage.removeItem(key));\n\n    // Clear session storage\n    sessionStorage.clear();\n  } catch (error) {\n    console.warn('Error clearing storage:', error);\n  }\n}\n\n// Main initialization\nexport async function initialize() {\n  // Skip in development\n  if (process.env.NODE_ENV !== 'production') {\n    return;\n  }\n  const url = new URL(window.location.href);\n  const currentVersion = url.searchParams.get(VERSION_PARAM);\n\n  // If version in URL doesn't match current version, update it\n  if (currentVersion !== CACHE_VERSION) {\n    // Store the current scroll position\n    sessionStorage.setItem('scrollPosition', window.scrollY);\n\n    // Update the version in URL without reloading if it's the first time\n    if (!currentVersion) {\n      url.searchParams.set(VERSION_PARAM, CACHE_VERSION);\n      window.history.replaceState({}, '', url);\n    } else {\n      // If version exists but doesn't match, do a hard reload\n      url.searchParams.set(VERSION_PARAM, CACHE_VERSION);\n      window.location.replace(url.toString());\n      return;\n    }\n  }\n\n  // Clear caches in the background if needed\n  if (!sessionStorage.getItem(`cacheCleared_${CACHE_VERSION}`)) {\n    sessionStorage.setItem(`cacheCleared_${CACHE_VERSION}`, 'true');\n    Promise.all([clearCaches(), unregisterServiceWorkers(), new Promise(resolve => {\n      setTimeout(() => {\n        clearStorages();\n        resolve();\n      }, 1000);\n    })]).catch(console.error);\n  }\n\n  // If we get here, we're on the correct version\n  console.log('Cache buster: Running version', CACHE_VERSION);\n}\nexport default {\n  initialize\n};","import { FullPageError, FullPageLoader } from \"@scorecard/shared\";\nimport { SystemSettingsState } from \"@scorecard/shared\";\nimport React, { Suspense } from \"react\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { HashRouter, Redirect, Route, Switch } from \"react-router-dom\";\nimport { useRecoilValue } from \"recoil\";\nconst Main = /*#__PURE__*/React.lazy(() => import(\"../Main\"));\nconst ScorecardManagement = /*#__PURE__*/React.lazy(() => import(\"../Main/Components/ScoreCardManagement\"));\nconst ScorecardView = /*#__PURE__*/React.lazy(() => import(\"@scorecard/shared\").then(module => ({\n  default: module.ScorecardView\n})));\nconst ScorecardMigration = /*#__PURE__*/React.lazy(() => import(\"../Main/Components/ScorecardMigration\"));\nconst pages = [{\n  pathname: \"/migrate\",\n  component: ScorecardMigration\n}, {\n  pathname: \"/edit/:id\",\n  component: ScorecardManagement\n}, {\n  pathname: \"/add\",\n  component: ScorecardManagement\n}, {\n  pathname: \"/view/:id\",\n  component: ScorecardView\n}, {\n  pathname: \"/\",\n  component: Main\n}];\nexport default function Router() {\n  useRecoilValue(SystemSettingsState);\n  return /*#__PURE__*/React.createElement(HashRouter, null, /*#__PURE__*/React.createElement(ErrorBoundary, {\n    FallbackComponent: FullPageError\n  }, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(FullPageLoader, null)\n  }, /*#__PURE__*/React.createElement(Switch, null, pages.map(_ref => {\n    let {\n      pathname,\n      component\n    } = _ref;\n    const Component = component;\n    return /*#__PURE__*/React.createElement(Route, {\n      key: pathname,\n      path: pathname\n    }, /*#__PURE__*/React.createElement(ErrorBoundary, {\n      FallbackComponent: FullPageError\n    }, /*#__PURE__*/React.createElement(Component, null)));\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/*\"\n  }, /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/\"\n  }))))));\n}","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport enTranslations from './en/translations.json';\nconst namespace = 'default';\ni18n.addResources('en', namespace, enTranslations);\nexport default i18n;","import { DataStoreProvider } from \"@dhis2/app-service-datastore\";\nimport { CssReset } from \"@dhis2/ui\";\nimport { ConfirmDialogProvider } from \"@hisptz/dhis2-ui\";\nimport { DATASTORE_NAMESPACE, FullPageError, FullPageLoader, useInitApp } from \"@scorecard/shared\";\nimport React, { Suspense } from \"react\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { RecoilRoot } from \"recoil\";\nimport \"./media-queries.css\";\nimport \"./App.css\";\nimport \"./print.css\";\nimport Router from \"./modules/Router\";\nimport \"./locales\";\nimport \"intro.js/introjs.css\";\nimport \"./intro-dhis2.css\";\nconst MyApp = () => {\n  const {\n    initializeState\n  } = useInitApp();\n  return /*#__PURE__*/React.createElement(DataStoreProvider, {\n    namespace: DATASTORE_NAMESPACE,\n    loadingComponent: /*#__PURE__*/React.createElement(FullPageLoader, null)\n  }, /*#__PURE__*/React.createElement(CssReset, null), /*#__PURE__*/React.createElement(RecoilRoot, {\n    initializeState: initializeState\n  }, /*#__PURE__*/React.createElement(ErrorBoundary, {\n    FallbackComponent: FullPageError\n  }, /*#__PURE__*/React.createElement(ConfirmDialogProvider, null, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(FullPageLoader, null)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"main-container\"\n  }, /*#__PURE__*/React.createElement(Router, null)))))));\n};\nexport default MyApp;","// extracted by mini-css-extract-plugin\nexport default {\"ant-layout\":\"App_ant-layout__+uunT\",\"ant-layout-content\":\"App_ant-layout-content__wrwoJ\",\"ant-layout-sider\":\"App_ant-layout-sider__G8hN1\",\"container\":\"App_container__KkHQY\",\"sidebar\":\"App_sidebar__EbNVl\",\"content\":\"App_content__MxC6Z\",\"corelytics_sidebar\":\"App_corelytics_sidebar__UQ+q2\",\"ant-menu-item\":\"App_ant-menu-item__XNXWL\",\"heading\":\"App_heading__21opY\",\"titBar\":\"App_titBar__B1vNp\",\"logo\":\"App_logo__h5EGN\",\"menu\":\"App_menu__Y4oQE\",\"cardGrid\":\"App_cardGrid__r9Q5A\",\"cardWrapper\":\"App_cardWrapper__NRGqF\",\"recharts-responsive-container\":\"App_recharts-responsive-container__m2xDT\"};","import { UserOutlined, SettingOutlined, LogoutOutlined, FormOutlined, DownloadOutlined, FileTextOutlined, AreaChartOutlined, MonitorOutlined, ImportOutlined, TeamOutlined, CheckCircleOutlined, BarsOutlined, MenuOutlined, EyeOutlined, ApartmentOutlined, HomeOutlined } from '@ant-design/icons';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport { Button, Layout, Menu, Dropdown, Avatar } from 'antd';\nimport React, { useState, useEffect } from 'react';\nimport cacheBuster from './cacheBuster';\nimport MyApp from './App.js';\nimport classes from './App.module.css';\nimport { Card } from \"@dhis2/ui\";\nimport { useHistory } from \"react-router-dom\";\nconst {\n  Sider,\n  Content\n} = Layout;\nconst ME_QUERY = {\n  me: {\n    resource: 'me',\n    params: {\n      fields: ['firstName', 'surname', 'email']\n    }\n  }\n};\nconst Main = () => {\n  useEffect(() => {\n    // Initialize cache buster when component mounts\n    cacheBuster.initialize();\n  }, []);\n  const [collapsed, setCollapsed] = useState(false);\n  const [openKeys, setOpenKeys] = useState(['3']);\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(ME_QUERY);\n  if (loading || error) return null;\n  const {\n    firstName,\n    surname,\n    email: userEmail\n  } = data.me;\n  const fullName = `${firstName} ${surname}`;\n  const initials = `${(firstName === null || firstName === void 0 ? void 0 : firstName[0]) || ''}${(surname === null || surname === void 0 ? void 0 : surname[0]) || ''}`;\n  const profileMenu = /*#__PURE__*/React.createElement(Menu, null, /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"profile-settings\",\n    icon: /*#__PURE__*/React.createElement(SettingOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-user-profile/#/profile\"\n  }, \"Settings\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"account\",\n    icon: /*#__PURE__*/React.createElement(UserOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-user-profile/#/account\"\n  }, \"Account\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"logout\",\n    icon: /*#__PURE__*/React.createElement(LogoutOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/dhis-web-commons-security/logout.action\"\n  }, \"Logout\")));\n  const dataCreationItems = [{\n    key: '2.1',\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null),\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-maintenance/#/list/organisationUnitSection/organisationUnit\"\n    }, \"Organisation Units\")\n  }, {\n    key: '2.2',\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null),\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-maintenance/#/list/programSection/program\"\n    }, \"Projects\")\n  }, {\n    key: '2.3',\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null),\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-maintenance/#/list/dataElementSection/dataElement\"\n    }, \"Data Elements\")\n  }, {\n    key: '2.4',\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null),\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-maintenance/#/list/dataSetSection/dataSet\"\n    }, \"Data Sets\")\n  }];\n  const adminCentreItems = [{\n    key: '5.1',\n    icon: /*#__PURE__*/React.createElement(MonitorOutlined, null),\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-usage-analytics/\"\n    }, \"Usage Analytics\")\n  }, {\n    key: '5.2',\n    icon: /*#__PURE__*/React.createElement(TeamOutlined, null),\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-user/\"\n    }, \"User Management\")\n  }, {\n    key: '5.3',\n    icon: /*#__PURE__*/React.createElement(SettingOutlined, null),\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-settings/\"\n    }, \"System Settings\")\n  }, {\n    key: '5.4',\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null),\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-maintenance/#/organisationUnitSection/hierarchy\"\n    }, \"Hierarchy Operations\")\n  }];\n  const dataCollectionItems = [{\n    key: '3.1',\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-capture/\"\n    }, \"Forms\"),\n    icon: /*#__PURE__*/React.createElement(FormOutlined, null)\n  }, {\n    key: '3.2',\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-aggregate-data-entry/\"\n    }, \"Spreadsheets\"),\n    icon: /*#__PURE__*/React.createElement(FileTextOutlined, null)\n  }, {\n    key: '3.3',\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-import-export/\"\n    }, \"Data Import & Export\"),\n    icon: /*#__PURE__*/React.createElement(DownloadOutlined, null)\n  }];\n  const onOpenChange = keys => {\n    const rootSubmenuKeys = ['2', '5'];\n    const latestOpenKey = keys.find(key => !openKeys.includes(key));\n    if (rootSubmenuKeys.includes(latestOpenKey)) {\n      setOpenKeys(latestOpenKey ? [latestOpenKey] : []);\n    } else {\n      setOpenKeys(keys);\n    }\n  };\n  return /*#__PURE__*/React.createElement(Layout, {\n    style: {\n      height: '100vh'\n    }\n  }, /*#__PURE__*/React.createElement(Sider, {\n    trigger: null,\n    collapsible: true,\n    width: \"20%\",\n    collapsedWidth: 80,\n    collapsed: collapsed,\n    onCollapse: collapsedState => setCollapsed(collapsedState),\n    breakpoint: \"lg\",\n    onBreakpoint: broken => setCollapsed(broken),\n    className: classes.sidebar,\n    style: {\n      padding: '10px 0',\n      transition: 'width 0.2s',\n      background: '#003D8F',\n      borderRight: '1px solid #d9d9d9',\n      overflow: 'hidden'\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      background: '#003D8F',\n      height: '100%'\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      gap: '10px',\n      flexShrink: 0\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.logo,\n    style: {\n      flexDirection: collapsed && 'column-reverse'\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"text\",\n    className: \"\",\n    icon: /*#__PURE__*/React.createElement(MenuOutlined, {\n      fontSize: \"medium\"\n    }),\n    onClick: () => setCollapsed(!collapsed),\n    style: {\n      width: '16px',\n      height: '16px',\n      color: '#fff'\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"img\", {\n    src: process.env.PUBLIC_URL + \"/sims-sidebar-logo.png\",\n    alt: \"SIMS\",\n    style: {\n      width: collapsed ? '30px' : '40px',\n      height: collapsed ? '30px' : '40px',\n      objectFit: 'cover',\n      transition: 'all 0.2s',\n      filter: \"brightness(0) invert(1)\"\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      overflowY: 'auto',\n      overflowX: 'hidden',\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%'\n    }\n  }, /*#__PURE__*/React.createElement(Menu, {\n    selectedKeys: ['1'],\n    openKeys: openKeys,\n    onOpenChange: onOpenChange,\n    style: {\n      height: '100%'\n    },\n    className: classes.menu,\n    defaultSelectedKeys: ['1'],\n    defaultOpenKeys: ['sub1'],\n    mode: \"inline\",\n    inlineCollapsed: collapsed\n  }, /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"1\",\n    icon: /*#__PURE__*/React.createElement(HomeOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-app/\"\n  }, \"Home\")), /*#__PURE__*/React.createElement(Menu.Divider, null), /*#__PURE__*/React.createElement(Menu.SubMenu, {\n    key: \"2\",\n    icon: /*#__PURE__*/React.createElement(CheckCircleOutlined, null),\n    title: \"Activation\"\n  }, /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"2.1\",\n    title: \"Thematic Areas\",\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-maintenance/#/list/organisationUnitSection/organisationUnit\"\n  }, \"Thematic Areas\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"2.2\",\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-maintenance/#/list/organisationUnitSection/programsHierarchy\"\n  }, \"Programs\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"2.3\",\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-maintenance/#/list/programSection/program\"\n  }, \"Projects\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"2.4\",\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-maintenance/#/list/dataElementSection/dataElement\"\n  }, \"Data Elements\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"2.5\",\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-maintenance/#/list/dataSetSection/dataSet\"\n  }, \"Data Sets\"))), /*#__PURE__*/React.createElement(Menu.Divider, null), /*#__PURE__*/React.createElement(Menu.SubMenu, {\n    key: '3',\n    icon: /*#__PURE__*/React.createElement(ImportOutlined, null),\n    title: \"Data Collection\"\n  }, dataCollectionItems.map(item => /*#__PURE__*/React.createElement(Menu.Item, {\n    key: item.key,\n    icon: item.icon\n  }, item.label))), /*#__PURE__*/React.createElement(Menu.Divider, null), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"4\",\n    icon: /*#__PURE__*/React.createElement(AreaChartOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-dashboard/\"\n  }, \"Visualization\")), /*#__PURE__*/React.createElement(Menu.Divider, null), /*#__PURE__*/React.createElement(Menu.SubMenu, {\n    key: '5',\n    icon: /*#__PURE__*/React.createElement(UserOutlined, null),\n    title: \"Admin Centre\",\n    style: {\n      marginTop: 'auto'\n    }\n  }, adminCentreItems.map(item => /*#__PURE__*/React.createElement(Menu.Item, {\n    key: item.key,\n    icon: item.icon\n  }, item.label))))), /*#__PURE__*/React.createElement(\"div\", null, profileMenu))), /*#__PURE__*/React.createElement(Layout, {\n    style: {\n      padding: '0 15px 15px 15px',\n      height: '100vh',\n      overflow: 'hidden'\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      backgroundColor: '#F9FAFB',\n      borderRadius: '8px',\n      padding: '10px 16px'\n    }\n  }), /*#__PURE__*/React.createElement(Content, {\n    style: {\n      margin: 0,\n      display: 'flex',\n      flexDirection: 'column',\n      padding: 0,\n      height: '100%',\n      overflow: 'auto'\n    }\n  }, /*#__PURE__*/React.createElement(MyApp, null))));\n};\nexport default Main;","import i18n from \"@dhis2/d2-i18n\";\nimport { Button, ButtonStrip, CenteredContent, colors, Modal, ModalActions, ModalContent, ModalTitle } from \"@dhis2/ui\";\nimport ErrorIcon from \"@material-ui/icons/Error\";\nimport PropTypes from \"prop-types\";\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nfunction ErrorDialog(_ref) {\n  let {\n    error,\n    onClose\n  } = _ref;\n  const {\n    details\n  } = error !== null && error !== void 0 ? error : {};\n  return /*#__PURE__*/React.createElement(Modal, {\n    position: \"middle\",\n    onClose: onClose\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t(\"Error Details\")), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      background: colors.grey050,\n      padding: 24,\n      border: `1px solid ${colors.grey300}`\n    }\n  }, /*#__PURE__*/React.createElement(\"code\", {\n    style: {\n      fontSize: 14\n    }\n  }, JSON.stringify(details)))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(Button, {\n    onClick: onClose\n  }, i18n.t(\"Close\"))));\n}\nErrorDialog.propTypes = {\n  error: PropTypes.object.isRequired,\n  onClose: PropTypes.func.isRequired\n};\nexport default function FullPageError(_ref2) {\n  var _error$title, _error$details;\n  let {\n    error,\n    resetErrorBoundary\n  } = _ref2;\n  const [errorDialogShow, setErrorDialogShow] = useState(false);\n  const history = useHistory();\n  const onRefresh = () => {\n    if (resetErrorBoundary) {\n      resetErrorBoundary();\n    } else {\n      window.location.reload();\n    }\n  };\n  const onGoToHome = () => {\n    if (history) {\n      history === null || history === void 0 ? void 0 : history.replace(\"/\");\n    } else {\n      onRefresh();\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column center \",\n    style: {\n      height: \"100%\",\n      textAlign: \"center\"\n    }\n  }, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column align-items-center\"\n  }, /*#__PURE__*/React.createElement(ErrorIcon, {\n    style: {\n      color: colors.grey700,\n      fontSize: 64\n    },\n    fontSize: \"large\"\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    style: {\n      color: colors.grey700,\n      margin: 8\n    }\n  }, (_error$title = error === null || error === void 0 ? void 0 : error.title) !== null && _error$title !== void 0 ? _error$title : i18n.t(\"Something Went Wrong\")), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: colors.grey700\n    }\n  }, typeof error === \"string\" ? error : error === null || error === void 0 ? void 0 : error.message), /*#__PURE__*/React.createElement(ButtonStrip, {\n    center: true\n  }, (error === null || error === void 0 ? void 0 : (_error$details = error.details) === null || _error$details === void 0 ? void 0 : _error$details.httpStatusCode) === 404 ? /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: onGoToHome\n  }, i18n.t(\"Back to scorecard list\")) : /*#__PURE__*/React.createElement(Button, {\n    onClick: onRefresh\n  }, i18n.t(\"Refresh\")), (error === null || error === void 0 ? void 0 : error.details) && /*#__PURE__*/React.createElement(Button, {\n    onClick: () => setErrorDialogShow(true)\n  }, i18n.t(\"View error logs\")))), errorDialogShow && /*#__PURE__*/React.createElement(ErrorDialog, {\n    error: error,\n    onClose: () => setErrorDialogShow(false)\n  })));\n}\nFullPageError.propTypes = {\n  error: PropTypes.any,\n  resetErrorBoundary: PropTypes.func\n};","import { CenteredContent, CircularLoader } from \"@dhis2/ui\";\nimport React from \"react\";\nexport default function ModalLoader() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-100 h-100\"\n  }, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  })));\n}","import PropTypes from \"prop-types\";\nimport React from \"react\";\nexport const IncreasingArrows = _ref => {\n  let {\n    x,\n    y,\n    decreasing,\n    fontSize\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"path\", {\n    d: `M ${x} ${y} L ${x - fontSize / 2} ${y + fontSize} L ${x + fontSize / 2} ${y + fontSize} Z`,\n    fill: \"black\",\n    transform: decreasing && \"rotate(90)\"\n  });\n};\nIncreasingArrows.propTypes = {\n  fontSize: PropTypes.number.isRequired,\n  x: PropTypes.number.isRequired,\n  y: PropTypes.number.isRequired,\n  decreasing: PropTypes.bool\n};\nexport const DecreasingArrows = _ref2 => {\n  let {\n    x,\n    y,\n    fontSize\n  } = _ref2;\n  return /*#__PURE__*/React.createElement(\"path\", {\n    d: `M ${x} ${y} L ${x - fontSize / 2} ${y - fontSize} L ${x + fontSize / 2} ${y - fontSize} Z`,\n    fill: \"black\"\n  });\n};\nDecreasingArrows.propTypes = {\n  fontSize: PropTypes.number.isRequired,\n  x: PropTypes.number.isRequired,\n  y: PropTypes.number.isRequired\n};","import i18n from '@dhis2/d2-i18n';\nimport { colors } from '@dhis2/ui';\nimport { Period } from \"@iapps/period-utilities\";\nimport { find } from \"lodash\";\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useRecoilValue } from \"recoil\";\nimport { OrgUnitLevels, ScorecardViewState, SelectedOrgUnits } from \"../../../../../../state\";\nfunction LegendsView(_ref) {\n  let {\n    legends\n  } = _ref;\n  const legendDefinitions = useRecoilValue(ScorecardViewState(\"legendDefinitions\"));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column gap-8\"\n  }, /*#__PURE__*/React.createElement(\"table\", null, /*#__PURE__*/React.createElement(\"col\", {\n    width: \"60%\"\n  }), /*#__PURE__*/React.createElement(\"col\", {\n    width: \"20%\"\n  }), /*#__PURE__*/React.createElement(\"col\", {\n    width: \"20%\"\n  }), /*#__PURE__*/React.createElement(\"thead\", null, /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", {\n    align: \"left\"\n  }, i18n.t(\"Legend\")), /*#__PURE__*/React.createElement(\"th\", null, i18n.t(\"Min\")), /*#__PURE__*/React.createElement(\"th\", null, i18n.t(\"Max\")))), /*#__PURE__*/React.createElement(\"tbody\", null, legends === null || legends === void 0 ? void 0 : legends.map(legend => {\n    const legendDefinition = find(legendDefinitions, {\n      id: legend.legendDefinitionId\n    });\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: `${legend.id}-view`\n    }, /*#__PURE__*/React.createElement(\"td\", null, /*#__PURE__*/React.createElement(\"table\", null, /*#__PURE__*/React.createElement(\"col\", {\n      width: \"20%\"\n    }), /*#__PURE__*/React.createElement(\"col\", {\n      width: \"80%\"\n    }), /*#__PURE__*/React.createElement(\"tbody\", null, /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"td\", null, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        height: 24,\n        width: 32,\n        background: legendDefinition.color\n      }\n    })), /*#__PURE__*/React.createElement(\"td\", null, legendDefinition.name))))), /*#__PURE__*/React.createElement(\"td\", {\n      align: \"center\"\n    }, legend === null || legend === void 0 ? void 0 : legend.startValue), /*#__PURE__*/React.createElement(\"td\", {\n      align: \"center\"\n    }, legend === null || legend === void 0 ? void 0 : legend.endValue));\n  }))));\n}\nLegendsView.propTypes = {\n  legends: PropTypes.array\n};\nexport function OrgUnitSpecificTargetView(_ref2) {\n  var _orgUnits$map;\n  let {\n    dataSourceLabel,\n    specificTarget\n  } = _ref2;\n  const {\n    items,\n    legends\n  } = specificTarget !== null && specificTarget !== void 0 ? specificTarget : {};\n  const orgUnits = useRecoilValue(SelectedOrgUnits(items));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      maxWidth: 350,\n      border: `1px solid ${colors.grey600}`,\n      borderRadius: 4\n    },\n    className: \"column gap-16 p-16\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column gap-16\"\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Organisation Unit(s)\"), \": \"), \" \", orgUnits === null || orgUnits === void 0 ? void 0 : (_orgUnits$map = orgUnits.map(ou => ou.displayName)) === null || _orgUnits$map === void 0 ? void 0 : _orgUnits$map.join(\", \")), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Data Source\"), \": \"), dataSourceLabel)), /*#__PURE__*/React.createElement(LegendsView, {\n    legends: legends\n  }));\n}\nexport function PeriodSpecificTargetView(_ref3) {\n  var _items$map;\n  let {\n    dataSourceLabel,\n    specificTarget\n  } = _ref3;\n  const {\n    items,\n    legends\n  } = specificTarget !== null && specificTarget !== void 0 ? specificTarget : {};\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      maxWidth: 350,\n      border: `1px solid ${colors.grey600}`,\n      borderRadius: 4\n    },\n    className: \"column gap-16 p-16\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column gap-16\"\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Period\"), \": \"), \" \", items === null || items === void 0 ? void 0 : (_items$map = items.map(pe => {\n    var _Period$setPreference;\n    return (_Period$setPreference = new Period().setPreferences({\n      allowFuturePeriods: true\n    }).getById(pe)) === null || _Period$setPreference === void 0 ? void 0 : _Period$setPreference.name;\n  })) === null || _items$map === void 0 ? void 0 : _items$map.join(\", \")), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Data Source\"), \": \"), dataSourceLabel)), /*#__PURE__*/React.createElement(LegendsView, {\n    legends: legends\n  }));\n}\nexport function OrgUnitLevelSpecificTargetView(_ref4) {\n  let {\n    dataSourceLabel,\n    legends\n  } = _ref4;\n  const levels = useRecoilValue(OrgUnitLevels);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row gap-16 page-break-avoid\"\n  }, levels === null || levels === void 0 ? void 0 : levels.map(level => {\n    var _level$displayName;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      key: `${level.id}- specific-level-view`,\n      style: {\n        maxWidth: 350,\n        border: `1px solid ${colors.grey600}`,\n        borderRadius: 4\n      },\n      className: \"column gap-16 p-16\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column gap-16\"\n    }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Organisation Unit Level\"), \": \"), \" \", (_level$displayName = level.displayName) !== null && _level$displayName !== void 0 ? _level$displayName : level.name), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Data Source\"), \": \"), dataSourceLabel)), /*#__PURE__*/React.createElement(LegendsView, {\n      legends: legends[level.id]\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"page-break\"\n    }));\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page-break\"\n  }));\n}\nOrgUnitLevelSpecificTargetView.propTypes = {\n  dataSourceLabel: PropTypes.string,\n  legends: PropTypes.object\n};\nOrgUnitSpecificTargetView.propTypes = {\n  dataSourceLabel: PropTypes.string,\n  specificTarget: PropTypes.object\n};\nPeriodSpecificTargetView.propTypes = {\n  dataSourceLabel: PropTypes.string,\n  specificTarget: PropTypes.object\n};","// extracted by mini-css-extract-plugin\nexport default {\"specific-targets-lib\":\"SpecificTargetsLibrary_specific-targets-lib__Fce6Y\"};","import i18n from '@dhis2/d2-i18n';\nimport { Button, CircularLoader, Modal, ModalActions, ModalContent, ModalTitle } from '@dhis2/ui';\nimport { filter, groupBy, head, isEmpty } from \"lodash\";\nimport PropTypes from 'prop-types';\nimport React, { Suspense, useMemo } from \"react\";\nimport { useRecoilValue } from \"recoil\";\nimport { OrgUnitLevelSpecificTargetView, OrgUnitSpecificTargetView, PeriodSpecificTargetView } from \"./components/SpecificTargetView\";\nimport classes from \"./SpecificTargetsLibrary.module.css\";\nimport { ScorecardViewState } from \"../../../../state\";\nimport { getDataSourcesFromGroups } from \"../../../../utils\";\nexport function SpecificTargetsLibrary() {\n  var _specificTargetsDataS, _specificTargetsDataS2, _specificTargetsDataS3;\n  const {\n    dataGroups\n  } = useRecoilValue(ScorecardViewState(\"dataSelection\"));\n  const dataSources = useMemo(() => getDataSourcesFromGroups(dataGroups), [dataGroups]);\n  const specificTargetsDataSourcesByType = useMemo(() => {\n    const dataSourcesWithSpecificTargets = filter(dataSources, ds => ds.specificTargetsSet);\n    const data = groupBy(filter(dataSourcesWithSpecificTargets, ds => !isEmpty(ds.specificTargets)), ds => {\n      var _head;\n      return (_head = head(ds.specificTargets)) === null || _head === void 0 ? void 0 : _head.type;\n    });\n    data[\"orgUnitLevel\"] = dataSourcesWithSpecificTargets.filter(ds => isEmpty(ds.specificTargets));\n    return data;\n  }, [dataSources]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column gap-16\"\n  }, !isEmpty(specificTargetsDataSourcesByType === null || specificTargetsDataSourcesByType === void 0 ? void 0 : specificTargetsDataSourcesByType.orgUnit) && /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Organisation Units Specific targets\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row gap-16\"\n  }, specificTargetsDataSourcesByType === null || specificTargetsDataSourcesByType === void 0 ? void 0 : (_specificTargetsDataS = specificTargetsDataSourcesByType.orgUnit) === null || _specificTargetsDataS === void 0 ? void 0 : _specificTargetsDataS.map(dataSource => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(OrgUnitSpecificTargetView, {\n    key: `${dataSource.id}-orgUnit-specific-target`,\n    specificTarget: head(dataSource.specificTargets),\n    dataSourceLabel: dataSource.label\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page-break\"\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page-break\"\n  })), !isEmpty(specificTargetsDataSourcesByType === null || specificTargetsDataSourcesByType === void 0 ? void 0 : specificTargetsDataSourcesByType.period) && /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Period Specific targets\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row gap-16\"\n  }, specificTargetsDataSourcesByType === null || specificTargetsDataSourcesByType === void 0 ? void 0 : (_specificTargetsDataS2 = specificTargetsDataSourcesByType.period) === null || _specificTargetsDataS2 === void 0 ? void 0 : _specificTargetsDataS2.map(dataSource => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PeriodSpecificTargetView, {\n    key: `${dataSource.id}-orgUnit-specific-target`,\n    specificTarget: head(dataSource.specificTargets),\n    dataSourceLabel: dataSource.label\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page-break\"\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page-break\"\n  })), !isEmpty(specificTargetsDataSourcesByType === null || specificTargetsDataSourcesByType === void 0 ? void 0 : specificTargetsDataSourcesByType.orgUnitLevell) && /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Organisation unit level targets\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column gap-16\"\n  }, specificTargetsDataSourcesByType === null || specificTargetsDataSourcesByType === void 0 ? void 0 : (_specificTargetsDataS3 = specificTargetsDataSourcesByType.orgUnitLevel) === null || _specificTargetsDataS3 === void 0 ? void 0 : _specificTargetsDataS3.map(dataSource => /*#__PURE__*/React.createElement(OrgUnitLevelSpecificTargetView, {\n    key: `${dataSource.id}-orgUnit-specific-target`,\n    legends: dataSource.legends,\n    dataSourceLabel: dataSource.label\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page-break\"\n  }))));\n}\nexport default function SpecificTargetsLibraryModal(_ref) {\n  let {\n    open,\n    onClose\n  } = _ref;\n  return /*#__PURE__*/React.createElement(Modal, {\n    onClose: onClose,\n    className: classes[\"specific-targets-lib\"],\n    large: true,\n    position: \"middle\",\n    hide: !open\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, \"Specific Targets Library\"), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column align-items-center justify-content-center\",\n      style: {\n        height: \"60vh\",\n        width: \"100%\"\n      }\n    }, /*#__PURE__*/React.createElement(CircularLoader, {\n      small: true\n    }))\n  }, /*#__PURE__*/React.createElement(SpecificTargetsLibrary, null))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(Button, {\n    onClick: onClose\n  }, i18n.t(\"Cancel\"))));\n}\nSpecificTargetsLibraryModal.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired\n};","import { CenteredContent, CircularLoader, colors } from \"@dhis2/ui\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nexport default function FullPageLoader(_ref) {\n  let {\n    text,\n    small\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column center\",\n    style: {\n      height: \"100%\",\n      width: '100%'\n    }\n  }, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(CircularLoader, {\n    small: small\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: colors.default\n    }\n  }, text))));\n}\nFullPageLoader.propTypes = {\n  small: PropTypes.bool,\n  text: PropTypes.string\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { Button, CenteredContent, colors } from \"@dhis2/ui\";\nimport ErrorIcon from \"@material-ui/icons/Warning\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nexport default function AccessDeniedPage(_ref) {\n  let {\n    accessType\n  } = _ref;\n  const history = useHistory();\n  const onHomeClick = () => {\n    history.replace(\"/\");\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column center align-items-center w-100 h-100\"\n  }, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column align-items-center\"\n  }, /*#__PURE__*/React.createElement(ErrorIcon, {\n    style: {\n      color: colors.grey700,\n      fontSize: 64\n    },\n    fontSize: \"large\"\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: colors.grey700,\n      fontWeight: \"bold\",\n      fontSize: \"1vw\"\n    }\n  }, i18n.t(\"You do not have access to {{accessType}} this Scorecard\", {\n    accessType\n  })), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: onHomeClick\n  }, i18n.t(\"Back to scorecard list\")))));\n}\nAccessDeniedPage.propTypes = {\n  accessType: PropTypes.oneOf([\"edit\", \"view\"]).isRequired\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { colors } from \"@dhis2/ui\";\nimport React from \"react\";\nexport default function EmptyOrgUnitsOrPeriod() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-1 column center align-items-center\"\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    style: {\n      color: colors.grey700\n    }\n  }, i18n.t(\"Select Organisation Units and Period to start\")));\n}","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { useRecoilValue } from \"recoil\";\nimport { OrgUnitLevels, ScorecardLegendDefinitionSelector, ScorecardViewState, SingleHighlightedIndicatorState } from \"../../../../../state\";\nimport { getLegend } from \"../../../../../utils\";\nexport default function HighlightedIndicator(_ref) {\n  var _getLegend;\n  let {\n    highlightedIndicator\n  } = _ref;\n  const orgUnitLevels = useRecoilValue(OrgUnitLevels);\n  const legendDefinitions = useRecoilValue(ScorecardViewState(\"legendDefinitions\"));\n  const defaultLegendDefinitions = useRecoilValue(ScorecardLegendDefinitionSelector(true));\n  const {\n    displayName,\n    legends,\n    id,\n    weight\n  } = highlightedIndicator !== null && highlightedIndicator !== void 0 ? highlightedIndicator : {};\n  const value = useRecoilValue(SingleHighlightedIndicatorState(id));\n  const {\n    color\n  } = (_getLegend = getLegend(value, legends, {\n    max: weight,\n    defaultLegends: defaultLegendDefinitions,\n    orgUnitLevels,\n    dataOrgUnitLevel: 1,\n    //TODO:Fix this,\n    legendDefinitions\n  })) !== null && _getLegend !== void 0 ? _getLegend : {};\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      background: \"white\",\n      border: \"1px solid rgb(232, 237, 242)\",\n      margin: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"test-highlighted-indicator\",\n    className: \"row flex-1 space-between align-items-center\"\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      margin: 0,\n      padding: \"0 8px\",\n      fontSize: 14\n    }\n  }, displayName), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: 60,\n      minHeight: \"100%\",\n      background: color,\n      padding: 16,\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      fontSize: 14,\n      margin: 0\n    }\n  }, value))));\n}\nHighlightedIndicator.propTypes = {\n  highlightedIndicator: PropTypes.object.isRequired\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { CircularLoader } from \"@dhis2/ui\";\nimport { isEmpty } from \"lodash\";\nimport React from \"react\";\nimport { useRecoilValue, useRecoilValueLoadable } from \"recoil\";\nimport HighlightedIndicator from \"./Components/HighlightedIndicator\";\nimport { HighlightedIndicatorsState, ScorecardViewState } from \"../../../../state\";\nexport default function HighlightedIndicatorsView() {\n  var _useRecoilValue, _ref, _ref2, _contents$message;\n  const highlightedIndicators = useRecoilValue(ScorecardViewState(\"highlightedIndicators\"));\n  const {\n    highlightedIndicators: showHighlightedIndicators\n  } = (_useRecoilValue = useRecoilValue(ScorecardViewState(\"options\"))) !== null && _useRecoilValue !== void 0 ? _useRecoilValue : {};\n  const {\n    state,\n    contents\n  } = useRecoilValueLoadable(HighlightedIndicatorsState);\n  return showHighlightedIndicators && !isEmpty(highlightedIndicators) ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\"\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Highlighted Indicators\"))), state === \"loading\" && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row center align-items-center p-16\"\n  }, /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  })), state === \"hasError\" && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row center align-items-center\"\n  }, /*#__PURE__*/React.createElement(ErrorIcon, {\n    size: 24\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      paddingLeft: 16\n    }\n  }, (_ref = (_ref2 = (_contents$message = contents === null || contents === void 0 ? void 0 : contents.message) !== null && _contents$message !== void 0 ? _contents$message : contents === null || contents === void 0 ? void 0 : contents.details) !== null && _ref2 !== void 0 ? _ref2 : contents.toString()) !== null && _ref !== void 0 ? _ref : \"Error\")), state === \"hasValue\" && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"grid highlighted-indicators-container\"\n  }, highlightedIndicators === null || highlightedIndicators === void 0 ? void 0 : highlightedIndicators.map(highlightedIndicator => /*#__PURE__*/React.createElement(HighlightedIndicator, {\n    key: highlightedIndicator === null || highlightedIndicator === void 0 ? void 0 : highlightedIndicator.id,\n    highlightedIndicator: highlightedIndicator\n  })))) : null;\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { FlyoutMenu, MenuItem } from \"@dhis2/ui\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { DownloadTypes } from \"../../../../../constants\";\nexport default function DownloadMenu(_ref) {\n  var _Object$values;\n  let {\n    onClose,\n    onDownload\n  } = _ref;\n  return /*#__PURE__*/React.createElement(FlyoutMenu, {\n    dataTest: \"download-menu\"\n  }, (_Object$values = Object.values(DownloadTypes)) === null || _Object$values === void 0 ? void 0 : _Object$values.map(type => /*#__PURE__*/React.createElement(MenuItem, {\n    dataTest: `${type}-download-menu`,\n    onClick: () => {\n      onDownload(type);\n      onClose();\n    },\n    key: `${type}-download-menu`,\n    label: type\n  })), /*#__PURE__*/React.createElement(MenuItem, {\n    dataTest: \"ALMA-download-menu\",\n    label: \"ALMA\"\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    dataTest: \"test-alma-data-json\",\n    label: `${i18n.t(\"Data\")}(JSON)`,\n    onClick: () => {\n      onDownload(\"ALMAData\");\n      onClose();\n    }\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    dataTest: \"test-alma-meta-data\",\n    label: i18n.t(\"Metadata\"),\n    onClick: () => {\n      onDownload(\"ALMAMeta\");\n      onClose();\n    }\n  })));\n}\nDownloadMenu.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  onDownload: PropTypes.func.isRequired\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { saveAs } from \"file-saver\";\nimport { find, flatten, forIn, set } from \"lodash\";\nimport { utils as xlsx, writeFile } from \"xlsx\";\nimport { ALMA_HEADERS } from \"../../../../../constants\";\nfunction generateExcelJSON(_ref) {\n  let {\n    periods = [],\n    data = {},\n    orgUnits = [],\n    dataSources = []\n  } = _ref;\n  return orgUnits === null || orgUnits === void 0 ? void 0 : orgUnits.map(_ref2 => {\n    let {\n      displayName: orgUnitName,\n      id: orgUnitId\n    } = _ref2;\n    const object = {\n      \"Organisation Unit\": orgUnitName\n    };\n    for (const dataSource of dataSources) {\n      const {\n        id: dataSourceId,\n        displayName: dataSourceName,\n        label: dataSourceLabel\n      } = dataSource !== null && dataSource !== void 0 ? dataSource : {};\n      for (const period of periods) {\n        var _data;\n        const {\n          id: periodId,\n          name: periodName\n        } = period !== null && period !== void 0 ? period : {};\n        object[`${dataSourceName !== null && dataSourceName !== void 0 ? dataSourceName : dataSourceLabel}-${periodName}`] = (_data = data[`${dataSourceId}_${orgUnitId}_${periodId}`]) === null || _data === void 0 ? void 0 : _data.current;\n      }\n    }\n    return object;\n  });\n}\nfunction downloadExcelFileTypes(_ref3) {\n  let {\n    periods,\n    data,\n    orgUnits,\n    dataHolders,\n    title,\n    type\n  } = _ref3;\n  try {\n    const json = generateExcelJSON({\n      periods,\n      data,\n      orgUnits,\n      dataSources: flatten(dataHolders === null || dataHolders === void 0 ? void 0 : dataHolders.map(_ref4 => {\n        let {\n          dataSources\n        } = _ref4;\n        return dataSources;\n      }))\n    });\n    const sheet = xlsx.json_to_sheet(json);\n    const workbook = xlsx.book_new();\n    xlsx.book_append_sheet(workbook, sheet, `${title}`);\n    writeFile(workbook, `${title}.${type}`);\n  } catch (e) {\n    return e;\n  }\n}\nexport function downloadExcel(_ref5) {\n  let {\n    periods,\n    data,\n    orgUnits,\n    dataHolders,\n    title\n  } = _ref5;\n  return downloadExcelFileTypes({\n    periods,\n    data,\n    orgUnits,\n    dataHolders,\n    title,\n    type: \"xlsx\"\n  });\n}\nexport function getALMAMetadata(_ref6) {\n  let {\n    orgUnits,\n    dataSources,\n    periods,\n    legendDefinitions\n  } = _ref6;\n  function getMetadataDimensions(orgUnits, dataSources, periods) {\n    return {\n      ou: orgUnits === null || orgUnits === void 0 ? void 0 : orgUnits.map(_ref7 => {\n        let {\n          id\n        } = _ref7;\n        return id;\n      }),\n      pe: periods === null || periods === void 0 ? void 0 : periods.map(_ref8 => {\n        let {\n          id\n        } = _ref8;\n        return id;\n      }),\n      dx: dataSources === null || dataSources === void 0 ? void 0 : dataSources.map(_ref9 => {\n        let {\n          id\n        } = _ref9;\n        return id;\n      }),\n      co: []\n    };\n  }\n  function getAllLegends(legends) {\n    if (Array.isArray(legends)) {\n      return legends === null || legends === void 0 ? void 0 : legends.map(_ref10 => {\n        var _find;\n        let {\n          startValue,\n          endValue,\n          legendDefinitionId\n        } = _ref10;\n        return {\n          min: startValue,\n          max: endValue,\n          color: (_find = find(legendDefinitions, [\"id\", legendDefinitionId])) === null || _find === void 0 ? void 0 : _find.color\n        };\n      });\n    } else {\n      const modifiedLegends = {};\n      forIn(legends, (value, key) => {\n        modifiedLegends[key] = value === null || value === void 0 ? void 0 : value.map(_ref11 => {\n          var _find2;\n          let {\n            startValue,\n            endValue,\n            legendDefinitionId\n          } = _ref11;\n          return {\n            min: startValue,\n            max: endValue,\n            color: (_find2 = find(legendDefinitions, [\"id\", legendDefinitionId])) === null || _find2 === void 0 ? void 0 : _find2.color\n          };\n        });\n      });\n      return modifiedLegends;\n    }\n  }\n  function getMetadataItems(orgUnits, dataSources) {\n    const items = {};\n    for (const dataSource of dataSources) {\n      const {\n        displayName,\n        id,\n        legends\n      } = dataSource !== null && dataSource !== void 0 ? dataSource : {};\n      set(items, [id], {\n        name: displayName,\n        legendSet: getAllLegends(legends)\n      });\n    }\n    for (const orgUnit of orgUnits) {\n      const {\n        id,\n        displayName\n      } = orgUnit !== null && orgUnit !== void 0 ? orgUnit : {};\n      set(items, [id], {\n        name: displayName\n      });\n    }\n    set(items, \"dx\", {\n      name: i18n.t(\"Data\")\n    });\n    set(items, \"pe\", {\n      name: i18n.t(\"Period\")\n    });\n    set(items, \"ou\", {\n      name: i18n.t(\"Organisation Unit\")\n    });\n    return items;\n  }\n  return {\n    dimensions: getMetadataDimensions(orgUnits, dataSources, periods),\n    items: getMetadataItems(orgUnits, dataSources)\n  };\n}\nfunction getALMAData(data) {\n  const rows = [];\n  forIn(data, (value, key) => {\n    const [dx, ou, pe] = key === null || key === void 0 ? void 0 : key.split(\"_\");\n    rows.push([dx, pe, ou, value === null || value === void 0 ? void 0 : value.current]);\n  });\n  return rows;\n}\nexport function downloadALMAData(_ref12) {\n  let {\n    periods,\n    data,\n    orgUnits,\n    dataHolders,\n    title,\n    legendDefinitions\n  } = _ref12;\n  try {\n    const json = JSON.stringify({\n      dataValues: [{\n        headers: ALMA_HEADERS,\n        metaData: getALMAMetadata({\n          orgUnits,\n          dataSources: flatten(dataHolders === null || dataHolders === void 0 ? void 0 : dataHolders.map(_ref13 => {\n            let {\n              dataSources\n            } = _ref13;\n            return dataSources;\n          })),\n          periods,\n          legendDefinitions\n        }),\n        rows: getALMAData(data)\n      }]\n    });\n    const blob = new Blob([json], {\n      type: \"application/json\"\n    });\n    saveAs(blob, `${title}.json`);\n  } catch (e) {\n    return e;\n  }\n}\nexport function downloadALMAMeta(_ref14) {\n  let {\n    orgUnits,\n    dataHolders,\n    title\n  } = _ref14;\n  try {\n    const json = JSON.stringify({\n      organisationUnits: orgUnits === null || orgUnits === void 0 ? void 0 : orgUnits.map(_ref15 => {\n        var _pathArray, _path$split;\n        let {\n          id,\n          level,\n          displayName,\n          path\n        } = _ref15;\n        const pathArray = path.split(\"/\");\n        const parent = pathArray.length >= 2 ? (_pathArray = pathArray === null || pathArray === void 0 ? void 0 : pathArray[pathArray.length - 2]) !== null && _pathArray !== void 0 ? _pathArray : \"\" : \"\";\n        return {\n          id,\n          name: displayName,\n          level: level !== null && level !== void 0 ? level : (path === null || path === void 0 ? void 0 : (_path$split = path.split(\"/\")) === null || _path$split === void 0 ? void 0 : _path$split.length) - 1,\n          parent: pathArray.length <= 2 ? {\n            id: parent\n          } : undefined\n        };\n      }),\n      indicators: flatten(dataHolders === null || dataHolders === void 0 ? void 0 : dataHolders.map(_ref16 => {\n        let {\n          dataSources\n        } = _ref16;\n        return dataSources === null || dataSources === void 0 ? void 0 : dataSources.map(_ref17 => {\n          let {\n            id,\n            displayName\n          } = _ref17;\n          return {\n            id,\n            name: displayName\n          };\n        });\n      }))\n    });\n    const blob = new Blob([json], {\n      type: \"application/json\"\n    });\n    saveAs(blob, `${title}-metadata.json`);\n  } catch (e) {\n    return e;\n  }\n}\nexport function downloadCSV(_ref18) {\n  let {\n    periods,\n    data,\n    orgUnits,\n    dataHolders,\n    title\n  } = _ref18;\n  return downloadExcelFileTypes({\n    periods,\n    data,\n    orgUnits,\n    dataHolders,\n    title,\n    type: \"csv\"\n  });\n}\nexport function downloadPDF() {}","import { useAlert } from \"@dhis2/app-runtime\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useReactToPrint } from \"react-to-print\";\nimport { useRecoilValue, useRecoilValueLoadable } from \"recoil\";\nimport { downloadALMAData, downloadALMAMeta, downloadCSV, downloadExcel } from \"../services/download\";\nimport { InitialOrgUnits, PeriodResolverState, ScorecardDataLoadingState, ScorecardDataSourceState, ScorecardOrgUnitState, ScorecardViewState } from \"../../../../../state\";\nimport { DownloadTypes } from \"../../../../../constants\";\nexport default function useDownload(downloadRef, dataEngine) {\n  const title = useRecoilValue(ScorecardViewState(\"title\"));\n  const legendDefinitions = useRecoilValue(ScorecardViewState(\"legendDefinitions\"));\n  const orgUnitState = useRecoilValueLoadable(InitialOrgUnits);\n  const orgUnits = useMemo(() => {\n    if (orgUnitState.state === \"hasValue\") {\n      var _orgUnitState$content;\n      return (_orgUnitState$content = orgUnitState.contents) === null || _orgUnitState$content === void 0 ? void 0 : _orgUnitState$content.orgUnits;\n    }\n    return [];\n  }, [orgUnitState]);\n  const orgUnitsIds = useMemo(() => orgUnits === null || orgUnits === void 0 ? void 0 : orgUnits.map(_ref => {\n    let {\n      id\n    } = _ref;\n    return id;\n  }), [orgUnits]);\n  const {\n    filteredOrgUnits,\n    childrenOrgUnits\n  } = useRecoilValue(ScorecardOrgUnitState(orgUnitsIds));\n  const dataHolders = useRecoilValue(ScorecardDataSourceState);\n  const allOrgUnits = useMemo(() => [...filteredOrgUnits, ...childrenOrgUnits], [filteredOrgUnits, childrenOrgUnits]);\n  const periods = useRecoilValue(PeriodResolverState);\n  const loading = useRecoilValue(ScorecardDataLoadingState(orgUnitsIds));\n  const [data, setData] = useState();\n  const {\n    show\n  } = useAlert(_ref2 => {\n    let {\n      message\n    } = _ref2;\n    return message;\n  }, _ref3 => {\n    let {\n      type\n    } = _ref3;\n    return {\n      ...type,\n      duration: 3000\n    };\n  });\n  const handlePDFDownload = useReactToPrint({\n    content: () => downloadRef === null || downloadRef === void 0 ? void 0 : downloadRef.current,\n    documentTitle: `${title}`\n  });\n  function subscribe() {\n    if (loading !== undefined && !loading && orgUnitState.state === \"hasValue\") {\n      const subscription = dataEngine.getAllOrgUnitData(allOrgUnits === null || allOrgUnits === void 0 ? void 0 : allOrgUnits.map(_ref4 => {\n        let {\n          id\n        } = _ref4;\n        return id;\n      })).subscribe(setData);\n      return () => subscription.unsubscribe();\n    }\n  }\n  useEffect(subscribe, [loading, allOrgUnits, dataEngine]);\n  const downloadFunction = type => {\n    if (loading !== undefined && !loading && orgUnitState.state === \"hasValue\") {\n      switch (type) {\n        case DownloadTypes.EXCEL:\n          return downloadExcel({\n            periods,\n            data,\n            orgUnits: allOrgUnits,\n            dataHolders,\n            title\n          });\n        case DownloadTypes.CSV:\n          return downloadCSV({\n            periods,\n            data,\n            orgUnits: allOrgUnits,\n            dataHolders,\n            title\n          });\n        case DownloadTypes.PDF:\n          return handlePDFDownload();\n        case \"ALMAData\":\n          return downloadALMAData({\n            periods,\n            data,\n            orgUnits,\n            dataHolders,\n            title,\n            legendDefinitions\n          });\n        case \"ALMAMeta\":\n          return downloadALMAMeta({\n            orgUnits: allOrgUnits,\n            dataHolders,\n            title\n          });\n        default:\n          return;\n      }\n    }\n  };\n  const download = type => {\n    const error = downloadFunction(type);\n    if (error) {\n      var _ref5, _error$message;\n      show({\n        message: (_ref5 = (_error$message = error === null || error === void 0 ? void 0 : error.message) !== null && _error$message !== void 0 ? _error$message : error.details) !== null && _ref5 !== void 0 ? _ref5 : error === null || error === void 0 ? void 0 : error.toString()\n      });\n    }\n  };\n  return {\n    download\n  };\n}","import { isEqual, pullAllWith } from \"lodash\";\nimport PropTypes from \"prop-types\";\nimport { useEffect } from \"react\";\nimport { useSetRecoilState } from \"recoil\";\nimport { HelpSteps } from \"../../state\";\nexport default function Help(_ref) {\n  let {\n    helpSteps\n  } = _ref;\n  const setHelpSteps = useSetRecoilState(HelpSteps);\n  useEffect(() => {\n    setHelpSteps(prevSteps => [...prevSteps, ...helpSteps]);\n    return () => {\n      setHelpSteps(prevSteps => {\n        const newSteps = [...prevSteps];\n        pullAllWith(newSteps, helpSteps, isEqual);\n        return newSteps;\n      });\n    };\n  }, [helpSteps]);\n  return null;\n}\nHelp.propTypes = {\n  helpSteps: PropTypes.arrayOf(PropTypes.object).isRequired\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { CheckboxField, Radio } from \"@dhis2/ui\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport Help from \"../Help\";\nimport { AverageDisplayType, OPTIONS_HELP_STEPS } from \"../../constants\";\nexport default function ScorecardOptionsForm(_ref) {\n  let {\n    options,\n    onChange\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container p-16\"\n  }, /*#__PURE__*/React.createElement(Help, {\n    helpSteps: OPTIONS_HELP_STEPS\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column \"\n  }, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Visibility\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column visibility-options\"\n  }, /*#__PURE__*/React.createElement(CheckboxField, {\n    checked: options === null || options === void 0 ? void 0 : options.legend,\n    onChange: onChange(\"legend\"),\n    value: \"legend\",\n    label: i18n.t(\"Legend\")\n  }), /*#__PURE__*/React.createElement(CheckboxField, {\n    checked: options === null || options === void 0 ? void 0 : options.title,\n    onChange: onChange(\"title\"),\n    value: \"title\",\n    label: i18n.t(\"Title\")\n  }), /*#__PURE__*/React.createElement(CheckboxField, {\n    checked: options === null || options === void 0 ? void 0 : options.itemNumber,\n    onChange: onChange(\"itemNumber\"),\n    value: \"itemNumber\",\n    label: i18n.t(\"Item Number\")\n  }), /*#__PURE__*/React.createElement(CheckboxField, {\n    checked: options === null || options === void 0 ? void 0 : options.emptyRows,\n    onChange: onChange(\"emptyRows\"),\n    value: \"emptyRows\",\n    label: i18n.t(\"Empty Rows\")\n  }), /*#__PURE__*/React.createElement(CheckboxField, {\n    checked: options === null || options === void 0 ? void 0 : options.showHierarchy,\n    onChange: onChange(\"showHierarchy\"),\n    value: \"showHierarchy\",\n    label: i18n.t(\"Show Hierarchy\")\n  }), /*#__PURE__*/React.createElement(CheckboxField, {\n    checked: options === null || options === void 0 ? void 0 : options.averageColumn,\n    onChange: onChange(\"averageColumn\"),\n    value: \"averageColumn\",\n    label: i18n.t(\"Average Column\")\n  }), /*#__PURE__*/React.createElement(CheckboxField, {\n    checked: options === null || options === void 0 ? void 0 : options.averageRow,\n    onChange: onChange(\"averageRow\"),\n    value: \"averageRow\",\n    label: i18n.t(\"Average Row\")\n  }), /*#__PURE__*/React.createElement(CheckboxField, {\n    checked: options === null || options === void 0 ? void 0 : options.highlightedIndicators,\n    onChange: onChange(\"highlightedIndicators\"),\n    value: \"highlightedIndicators\",\n    label: i18n.t(\"Highlighted Indicators\")\n  })), /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Average\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column average-options\"\n  }, /*#__PURE__*/React.createElement(Radio, {\n    onChange: () => onChange(\"averageDisplayType\")(AverageDisplayType.ALL),\n    checked: (options === null || options === void 0 ? void 0 : options.averageDisplayType) === AverageDisplayType.ALL,\n    value: AverageDisplayType.ALL,\n    label: i18n.t(\"All\")\n  }), /*#__PURE__*/React.createElement(Radio, {\n    onChange: () => onChange(\"averageDisplayType\")(AverageDisplayType.BELOW_AVERAGE),\n    checked: (options === null || options === void 0 ? void 0 : options.averageDisplayType) === AverageDisplayType.BELOW_AVERAGE,\n    value: AverageDisplayType.BELOW_AVERAGE,\n    label: i18n.t(\"Below Average\")\n  }), /*#__PURE__*/React.createElement(Radio, {\n    onChange: () => onChange(\"averageDisplayType\")(AverageDisplayType.ABOVE_AVERAGE),\n    checked: (options === null || options === void 0 ? void 0 : options.averageDisplayType) === AverageDisplayType.ABOVE_AVERAGE,\n    value: AverageDisplayType.ABOVE_AVERAGE,\n    label: i18n.t(\"Above Average\")\n  })), /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Options\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column other-options\"\n  }, /*#__PURE__*/React.createElement(CheckboxField, {\n    checked: options === null || options === void 0 ? void 0 : options.arrows,\n    onChange: onChange(\"arrows\"),\n    value: \"arrows\",\n    label: i18n.t(\"Arrows\")\n  }), /*#__PURE__*/React.createElement(CheckboxField, {\n    checked: options === null || options === void 0 ? void 0 : options.showDataInRows,\n    onChange: onChange(\"showDataInRows\"),\n    value: \"showDataInRows\",\n    label: i18n.t(\"Show Data in Rows\")\n  })))));\n}\nScorecardOptionsForm.propTypes = {\n  options: PropTypes.object.isRequired,\n  onChange: PropTypes.func.isRequired\n};","import { Button, ButtonStrip, Modal, ModalActions, ModalContent, ModalTitle } from \"@dhis2/ui\";\nimport PropTypes from \"prop-types\";\nimport React, { useState } from \"react\";\nimport ScorecardOptionsForm from \"../../ScorecardOptionsForm\";\nimport i18n from '@dhis2/d2-i18n';\nimport { ScorecardOptions } from \"../../../models\";\nexport default function ScorecardOptionsModal(_ref) {\n  let {\n    onSelect,\n    onClose,\n    initialValues\n  } = _ref;\n  const [values, setValues] = useState(initialValues);\n  const onChange = key => newValue => {\n    setValues(prevState => {\n      var _newValue$checked;\n      return ScorecardOptions.set(prevState, key, (_newValue$checked = newValue === null || newValue === void 0 ? void 0 : newValue.checked) !== null && _newValue$checked !== void 0 ? _newValue$checked : newValue);\n    });\n  };\n  const onUpdateClick = () => {\n    onSelect(values);\n    onClose();\n  };\n  return /*#__PURE__*/React.createElement(Modal, {\n    onClose: onClose,\n    large: true\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t(\"Options\")), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\"\n  }, /*#__PURE__*/React.createElement(ScorecardOptionsForm, {\n    options: values,\n    onChange: onChange\n  }))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(Button, {\n    onClick: onClose\n  }, i18n.t(\"Cancel\")), /*#__PURE__*/React.createElement(Button, {\n    dataTest: \"update-button-on-options\",\n    primary: true,\n    onClick: onUpdateClick\n  }, i18n.t(\"Update\")))));\n}\nScorecardOptionsModal.propTypes = {\n  initialValues: PropTypes.object.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onSelect: PropTypes.func.isRequired\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { Button, ButtonStrip, DropdownButton } from \"@dhis2/ui\";\nimport PropTypes from \"prop-types\";\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useRecoilCallback, useRecoilState, useRecoilValue, useSetRecoilState } from \"recoil\";\nimport DownloadMenu from \"./Download/Components/DownloadMenu\";\nimport useDownload from \"./ScorecardViewHeader/hooks/useDownload\";\nimport { ScorecardOptionsModal } from \"../../modals\";\nimport { useConfig } from \"@dhis2/app-runtime\";\nimport { APP_NAME, APP_TITLE } from \"../../../constants\";\nimport { RefreshScorecardState, RouterState, ScorecardIdState, ScorecardViewState, UserAuthorityOnScorecard } from \"../../../state\";\nimport { constructAppUrl } from \"../../../utils\";\nimport { ScorecardDataEngine } from \"../../../models\";\nexport default function ScorecardActions(_ref) {\n  let {\n    downloadAreaRef,\n    dataEngine,\n    widget\n  } = _ref;\n  const setRoute = useSetRecoilState(RouterState);\n  const [scorecardOptions, setScorecardOptions] = useRecoilState(ScorecardViewState(\"options\"));\n  const [optionsOpen, setOptionsOpen] = useState(false);\n  const {\n    baseUrl,\n    serverVersion\n  } = useConfig();\n  const {\n    download: onDownload\n  } = useDownload(downloadAreaRef, dataEngine);\n  const scorecardId = useRecoilValue(ScorecardIdState);\n  const userAuthority = useRecoilValue(UserAuthorityOnScorecard(scorecardId));\n  const writeAccess = userAuthority === null || userAuthority === void 0 ? void 0 : userAuthority.write;\n  const history = useHistory();\n  const onRefresh = useRecoilCallback(_ref2 => {\n    let {\n      set,\n      reset\n    } = _ref2;\n    return () => {\n      reset(ScorecardViewState(\"orgUnitSelection\"));\n      reset(ScorecardViewState(\"periodSelection\"));\n      set(RefreshScorecardState, prevValue => prevValue + 1);\n    };\n  });\n  const onEdit = () => {\n    if (writeAccess) {\n      setRoute(prevRoute => ({\n        ...prevRoute,\n        previous: `/view/${scorecardId}`\n      }));\n      if (widget) {\n        const appUrl = constructAppUrl(baseUrl, {\n          name: APP_NAME,\n          title: APP_TITLE\n        }, serverVersion);\n        return window.parent.open(appUrl + \"#/edit/\" + scorecardId);\n      } else {\n        history.push(`/edit/${scorecardId}`);\n      }\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row end print-hide\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column align-items-end\"\n  }, !widget && /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(Button, {\n    className: \"option-button\",\n    dataTest: \"scorecard-option-button\",\n    onClick: () => setOptionsOpen(true)\n  }, i18n.t(\"Options\")), writeAccess && /*#__PURE__*/React.createElement(Button, {\n    dataTest: \"edit-scorecard-button\",\n    className: \"scorecard-view-edit-button\",\n    onClick: onEdit\n  }, i18n.t(\"Edit\")), /*#__PURE__*/React.createElement(DropdownButton, {\n    component: /*#__PURE__*/React.createElement(DownloadMenu, {\n      onClose: () => {},\n      onDownload: onDownload\n    }),\n    className: \"download-button\",\n    dataTest: \"download-button\"\n  }, i18n.t(\"Download\")), /*#__PURE__*/React.createElement(Button, {\n    className: \"refresh-button\",\n    onClick: onRefresh\n  }, i18n.t(\"Refresh\")))), widget && writeAccess ? /*#__PURE__*/React.createElement(Button, {\n    dataTest: \"edit-scorecard-button\",\n    className: \"scorecard-view-edit-button\",\n    onClick: onEdit\n  }, i18n.t(\"Edit\")) : null, optionsOpen && /*#__PURE__*/React.createElement(ScorecardOptionsModal, {\n    onClose: () => setOptionsOpen(false),\n    initialValues: scorecardOptions,\n    onSelect: setScorecardOptions\n  }));\n}\nScorecardActions.propTypes = {\n  dataEngine: PropTypes.instanceOf(ScorecardDataEngine).isRequired,\n  downloadAreaRef: PropTypes.any.isRequired\n};","import { colors } from \"@dhis2/ui\";\nimport React from \"react\";\nimport JsxParser from \"react-jsx-parser\";\nimport { useRecoilValue } from \"recoil\";\nimport { PeriodResolverState, ScorecardViewState } from \"../../../../state\";\nimport { head, isEmpty } from \"lodash\";\nexport default function ScorecardHeader() {\n  var _head;\n  const {\n    title: showTitle\n  } = useRecoilValue(ScorecardViewState(\"options\"));\n  const customHeader = useRecoilValue(ScorecardViewState(\"customHeader\"));\n  const periods = useRecoilValue(PeriodResolverState);\n  const title = useRecoilValue(ScorecardViewState(\"title\"));\n  const subtitle = useRecoilValue(ScorecardViewState(\"subtitle\"));\n  return showTitle && !isEmpty(periods) ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row space-between\",\n    id: \"scorecard-header\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\"\n  }, customHeader ? /*#__PURE__*/React.createElement(JsxParser, {\n    autoCloseVoidElements: true,\n    className: \"w-100\",\n    onError: console.error,\n    bindings: {\n      title,\n      subtitle,\n      period: periods.length === 1 ? (_head = head(periods)) === null || _head === void 0 ? void 0 : _head.name : \"\"\n    },\n    jsx: customHeader\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column center align-items-center\"\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    style: {\n      margin: 8\n    },\n    id: \"data-test-score-card-title\"\n  }, title, \" \", `${periods.length === 1 ? ` - ${periods[0].name}` : \"\"}`), /*#__PURE__*/React.createElement(\"h3\", {\n    style: {\n      color: colors.grey600,\n      margin: 0\n    }\n  }, subtitle)))) : null;\n}","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from \"@dhis2/d2-i18n\";\nimport { Box, Chip, Tooltip } from \"@dhis2/ui\";\nimport { chunk, head } from \"lodash\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { FilterComponentTypes } from \"../../constants\";\nconst ITEM_DISPLAY_NO = 1;\nexport default function SelectionWrapper(_ref) {\n  let {\n    type,\n    onClick,\n    selectedItems = [],\n    id,\n    ...props\n  } = _ref;\n  const selectText = type === FilterComponentTypes.PERIOD ? i18n.t(\"Selected period\") : i18n.t(\"Selected organisation unit\");\n  const itemsToDisplay = head(chunk(selectedItems, ITEM_DISPLAY_NO));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: id,\n    onClick: onClick\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    content: /*#__PURE__*/React.createElement(\"div\", null, selectedItems === null || selectedItems === void 0 ? void 0 : selectedItems.map(_ref2 => {\n      let {\n        name,\n        displayName,\n        id\n      } = _ref2;\n      return /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          margin: 4\n        },\n        key: `${id}-tooltip`\n      }, name !== null && name !== void 0 ? name : displayName);\n    }))\n  }, /*#__PURE__*/React.createElement(Box, _extends({\n    className: \"selection-box\"\n  }, props), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"selection-box-header\"\n  }, selectText), /*#__PURE__*/React.createElement(Box, {\n    className: \"selection-text-box\",\n    width: \"90%\",\n    height: \"40%\"\n  }, itemsToDisplay === null || itemsToDisplay === void 0 ? void 0 : itemsToDisplay.map(_ref3 => {\n    let {\n      name,\n      displayName,\n      id\n    } = _ref3;\n    return /*#__PURE__*/React.createElement(Chip, {\n      key: id\n    }, name !== null && name !== void 0 ? name : displayName);\n  }), (selectedItems === null || selectedItems === void 0 ? void 0 : selectedItems.length) > ITEM_DISPLAY_NO && /*#__PURE__*/React.createElement(Chip, null, i18n.t(`and {{number}} more`, {\n    number: selectedItems.length - ITEM_DISPLAY_NO\n  }))))));\n}\nSelectionWrapper.defaultProps = {\n  type: \"\",\n  name: \"\"\n};\nSelectionWrapper.propTypes = {\n  name: PropTypes.string.isRequired,\n  type: PropTypes.oneOf([FilterComponentTypes.PERIOD, FilterComponentTypes.ORG_UNIT]).isRequired,\n  onClick: PropTypes.func.isRequired,\n  id: PropTypes.string,\n  selectedItems: PropTypes.array\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { Button, ButtonStrip, Card } from \"@dhis2/ui\";\nimport { OrgUnitSelectorModal, PeriodSelectorModal } from \"@hisptz/dhis2-ui\";\nimport { PeriodUtility } from \"@hisptz/dhis2-utils\";\nimport { Steps } from \"intro.js-react\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useRecoilCallback, useRecoilState, useRecoilValue } from \"recoil\";\nimport SelectionWrapper from \"../../../SelectionWrapper\";\nimport { HelpState, OrgUnitGroups, OrgUnitLevels, ScorecardConfState, ScorecardIdState, ScorecardViewState, SystemSettingsState } from \"../../../../state\";\nimport { getSelectedOrgUnitSelectionDisplay } from \"../../../../utils\";\nimport { FilterComponentTypes, SCORECARD_VIEW_HELP_STEPS, STEP_OPTIONS, UNSUPPORTED_PERIOD_TYPES } from \"../../../../constants\";\nexport default function ScorecardViewHeader() {\n  var _useRecoilValue;\n  const [helpEnabled, setHelpEnabled] = useRecoilState(HelpState);\n  const {\n    calendar\n  } = (_useRecoilValue = useRecoilValue(SystemSettingsState)) !== null && _useRecoilValue !== void 0 ? _useRecoilValue : {};\n  const history = useHistory();\n  const scorecardId = useRecoilValue(ScorecardIdState);\n  const orgUnitLevels = useRecoilValue(OrgUnitLevels);\n  const orgUnitGroups = useRecoilValue(OrgUnitGroups);\n  const [orgUnitSelection, setOrgUnitSelection] = useRecoilState(ScorecardViewState(\"orgUnitSelection\"));\n  const [periodSelection, setPeriodSelection] = useRecoilState(ScorecardViewState(\"periodSelection\"));\n  const [orgUnitSelectionOpen, setOrgUnitSelectionOpen] = useState(false);\n  const [periodSelectionOpen, setPeriodSelectionOpen] = useState(false);\n  const reset = useRecoilCallback(_ref => {\n    let {\n      reset\n    } = _ref;\n    return () => {\n      reset(ScorecardIdState);\n      reset(ScorecardConfState(scorecardId));\n    };\n  }, [scorecardId]);\n  const onHome = () => {\n    history.replace(\"/\");\n  };\n  useEffect(() => {\n    return () => {\n      reset();\n    };\n  }, []);\n  const orgUnitSelectionDisplay = useMemo(() => getSelectedOrgUnitSelectionDisplay(orgUnitSelection, {\n    orgUnitGroups,\n    orgUnitLevels\n  }), [orgUnitGroups, orgUnitLevels, orgUnitSelection]);\n  const onHelpExit = () => {\n    setHelpEnabled(false);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"selection-card\"\n  }, /*#__PURE__*/React.createElement(Steps, {\n    options: STEP_OPTIONS,\n    steps: SCORECARD_VIEW_HELP_STEPS,\n    enabled: helpEnabled,\n    initialStep: 0,\n    onExit: onHelpExit\n  }), /*#__PURE__*/React.createElement(Card, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row space-between align-items-center pl-16 pr-16\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row align-items-center\"\n  }, /*#__PURE__*/React.createElement(SelectionWrapper, {\n    id: \"org-unit-selector\",\n    selectedItems: orgUnitSelectionDisplay,\n    name: \"Organisation Unit\",\n    dataTest: \"test-selected-organization-unit\",\n    onClick: () => {\n      setOrgUnitSelectionOpen(true);\n    },\n    type: FilterComponentTypes.ORG_UNIT\n  }), /*#__PURE__*/React.createElement(SelectionWrapper, {\n    id: \"period-selector\",\n    selectedItems: periodSelection === null || periodSelection === void 0 ? void 0 : periodSelection.periods,\n    dataTest: \"test-selected-period\",\n    name: \"Period\",\n    onClick: () => {\n      setPeriodSelectionOpen(true);\n    },\n    type: FilterComponentTypes.PERIOD\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column align-items-end\"\n  }, /*#__PURE__*/React.createElement(ButtonStrip, {\n    className: \"pb-8\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"home-button\",\n    onClick: onHome\n  }, i18n.t(\"Back to all scorecards\")), /*#__PURE__*/React.createElement(Button, {\n    onClick: () => setHelpEnabled(true)\n  }, i18n.t(\"Help\")))), orgUnitSelectionOpen && /*#__PURE__*/React.createElement(OrgUnitSelectorModal, {\n    value: orgUnitSelection,\n    showGroups: true,\n    showLevels: true,\n    showUserOptions: true,\n    hide: !orgUnitSelectionOpen,\n    onClose: () => setOrgUnitSelectionOpen(false),\n    onUpdate: selected => {\n      setOrgUnitSelection(selected);\n      setOrgUnitSelectionOpen(false);\n    }\n  }), periodSelectionOpen && /*#__PURE__*/React.createElement(PeriodSelectorModal, {\n    enablePeriodSelector: true,\n    excludedPeriodTypes: UNSUPPORTED_PERIOD_TYPES,\n    calendar: calendar,\n    selectedPeriods: periodSelection.periods.map(_ref2 => {\n      let {\n        id\n      } = _ref2;\n      return id;\n    }),\n    hide: !periodSelectionOpen,\n    onClose: () => setPeriodSelectionOpen(false),\n    onUpdate: selectedPeriods => {\n      setPeriodSelection({\n        periods: selectedPeriods.map(period => PeriodUtility.getPeriodById(period))\n      });\n      setPeriodSelectionOpen(false);\n    }\n  }))));\n}","import i18n from '@dhis2/d2-i18n';\nimport { isEmpty } from \"lodash\";\nimport React, { lazy, Suspense, useEffect, useMemo, useRef } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useRecoilCallback, useRecoilValue, useRecoilValueLoadable, useSetRecoilState } from \"recoil\";\nimport { FullPageLoader } from \"../Loaders\";\nimport AccessDeniedPage from \"../Errors/AccessDeniedPage\";\nimport EmptyOrgUnitsOrPeriod from \"./components/EmptyOrgUnitsOrPeriod\";\nimport HighlightedIndicatorsView from \"./components/HighlightedIndicatorsView\";\nimport ScorecardActions from \"./components/ScorecardActions\";\nimport ScorecardHeader from \"./components/ScorecardHeader\";\nimport ScorecardViewHeader from \"./components/ScorecardViewHeader\";\nimport { SpecificTargetsLibrary } from \"./components/SpecificTargetsLibrary\";\nimport { InitialOrgUnits, IsSpecificTargetsSet, PeriodResolverState, ScorecardDataSourceState, ScorecardIdState, ScorecardNameSort, ScorecardTableOrientationState, ScorecardViewState, UserAuthorityOnScorecard } from \"../../state\";\nimport { ScorecardDataEngine } from \"../../models\";\nconst ScorecardLegendsView = /*#__PURE__*/lazy(() => import(\"./components/ScorecardLegendsView\"));\nconst ScorecardTable = /*#__PURE__*/lazy(() => import(\"./components/ScorecardTable\"));\nexport default function ScorecardView(_ref) {\n  var _orgUnitState$content4;\n  let {\n    widget\n  } = _ref;\n  const {\n    id: scorecardId\n  } = useParams();\n  const setScorecardIdState = useSetRecoilState(ScorecardIdState);\n  const orgUnitState = useRecoilValueLoadable(InitialOrgUnits);\n  const orgUnitsIds = useMemo(() => {\n    if (orgUnitState.state === 'hasValue') {\n      var _orgUnitState$content, _orgUnitState$content2, _orgUnitState$content3;\n      return (_orgUnitState$content = (_orgUnitState$content2 = orgUnitState.contents) === null || _orgUnitState$content2 === void 0 ? void 0 : (_orgUnitState$content3 = _orgUnitState$content2.orgUnits) === null || _orgUnitState$content3 === void 0 ? void 0 : _orgUnitState$content3.map(orgUnit => orgUnit === null || orgUnit === void 0 ? void 0 : orgUnit.id)) !== null && _orgUnitState$content !== void 0 ? _orgUnitState$content : [];\n    }\n    return [];\n  }, [orgUnitState.state, orgUnitState.contents]);\n  const {\n    read: access\n  } = useRecoilValue(UserAuthorityOnScorecard(scorecardId));\n  const downloadRef = useRef();\n  const periods = useRecoilValue(PeriodResolverState);\n  const isSpecificTargetsSet = useRecoilValue(IsSpecificTargetsSet);\n  const initialDataEngine = useMemo(() => new ScorecardDataEngine(), []);\n  const reset = useRecoilCallback(_ref2 => {\n    let {\n      reset\n    } = _ref2;\n    return () => {\n      reset(ScorecardViewState(\"periodSelection\"));\n      reset(ScorecardViewState(\"orgUnitSearchKeyword\"));\n      reset(ScorecardNameSort(orgUnitsIds));\n      reset(ScorecardViewState(\"options\"));\n      reset(ScorecardIdState);\n      reset(ScorecardTableOrientationState);\n      reset(ScorecardDataSourceState);\n    };\n  });\n  useEffect(() => {\n    setScorecardIdState(scorecardId);\n    return () => {\n      reset();\n    };\n  }, []);\n  if (!access) {\n    return /*#__PURE__*/React.createElement(AccessDeniedPage, {\n      accessType: \"view\"\n    });\n  }\n  return /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(FullPageLoader, null)\n  }, !widget && /*#__PURE__*/React.createElement(ScorecardViewHeader, null), /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(FullPageLoader, null)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: downloadRef,\n    className: \"column p-16  print-visible\",\n    style: {\n      height: \"100%\",\n      width: \"100%\",\n      overflow: \"visible\"\n    }\n  }, /*#__PURE__*/React.createElement(ScorecardActions, {\n    widget: widget,\n    dataEngine: initialDataEngine,\n    downloadAreaRef: downloadRef\n  }), /*#__PURE__*/React.createElement(ScorecardHeader, null), /*#__PURE__*/React.createElement(ScorecardLegendsView, null), /*#__PURE__*/React.createElement(HighlightedIndicatorsView, null), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column align-items-center pt-16 flex-1\"\n  }, !isEmpty(orgUnitState === null || orgUnitState === void 0 ? void 0 : (_orgUnitState$content4 = orgUnitState.contents) === null || _orgUnitState$content4 === void 0 ? void 0 : _orgUnitState$content4.orgUnits) && !isEmpty(periods) ? /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(FullPageLoader, {\n      small: true\n    })\n  }, /*#__PURE__*/React.createElement(ScorecardTable, {\n    initialDataEngine: initialDataEngine,\n    nested: false,\n    orgUnits: orgUnitsIds\n  })) : /*#__PURE__*/React.createElement(EmptyOrgUnitsOrPeriod, null), isSpecificTargetsSet && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"hide print-show always-page-break\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"always-page-break\"\n  }), /*#__PURE__*/React.createElement(\"h1\", null, i18n.t(\"Specific Targets Legends\")), /*#__PURE__*/React.createElement(SpecificTargetsLibrary, null))))));\n}","import { CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nexport default function ContainerLoader(_ref) {\n  let {\n    height\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: height !== null && height !== void 0 ? height : '100%',\n      minHeight: height !== null && height !== void 0 ? height : '100%'\n    },\n    className: \"column center align-items-center\"\n  }, /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  }));\n}\nContainerLoader.propTypes = {\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { DecreasingArrows, IncreasingArrows } from \"./Arrows\";\nexport default function SingleCellSvg(_ref) {\n  let {\n    cellRef,\n    color,\n    value,\n    status,\n    bold\n  } = _ref;\n  const width = (cellRef === null || cellRef === void 0 ? void 0 : cellRef.offsetWidth) - 1 || 100; //1px for the border\n  const height = (cellRef === null || cellRef === void 0 ? void 0 : cellRef.offsetHeight) - 1 || 47; //1px for the border\n  const fontSize = 12;\n  const arrowFontSize = 10;\n  const decreasing = status === \"decreasing\";\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    width: width,\n    height: height,\n    style: {\n      display: \"block\"\n    }\n  }, /*#__PURE__*/React.createElement(\"polygon\", {\n    points: `0 0 0 ${height} ${width} ${height} ${width} 0`,\n    style: {\n      fill: color !== null && color !== void 0 ? color : \"#FFFFFF\"\n    }\n  }), status && (decreasing ? /*#__PURE__*/React.createElement(DecreasingArrows, {\n    x: width / 2 - fontSize * 2,\n    y: (height - arrowFontSize) / 2 + arrowFontSize,\n    fontSize: arrowFontSize\n  }) : /*#__PURE__*/React.createElement(IncreasingArrows, {\n    fontSize: arrowFontSize,\n    y: (height - arrowFontSize) / 2,\n    x: width / 2 - fontSize * 2\n  })), /*#__PURE__*/React.createElement(\"text\", {\n    id: \"test-average-column\",\n    style: {\n      fontWeight: bold && \"bold\"\n    },\n    lengthAdjust: \"spacingAndGlyphs\",\n    fontSize: fontSize,\n    x: width / 2 - fontSize,\n    y: (height - fontSize) / 2 + fontSize\n  }, value));\n}\nSingleCellSvg.propTypes = {\n  value: PropTypes.string.isRequired,\n  bold: PropTypes.bool,\n  color: PropTypes.string,\n  status: PropTypes.oneOf([\"increasing\", \"decreasing\"])\n};","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { DecreasingArrows, IncreasingArrows } from \"./Arrows\";\nexport default function LinkedCellSvg(_ref) {\n  let {\n    bold,\n    topValue,\n    bottomValue,\n    topColor,\n    bottomColor,\n    topStatus,\n    bottomStatus,\n    cellRef\n  } = _ref;\n  const width = (cellRef === null || cellRef === void 0 ? void 0 : cellRef.offsetWidth) - 1 || 100;\n  const height = (cellRef === null || cellRef === void 0 ? void 0 : cellRef.offsetHeight) - 1 || 47;\n  const fontSize = 12;\n  const topFontSize = 12;\n  const bottomFontSize = 12;\n  const padding = 6;\n  const arrowFontSize = 10;\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    width: width,\n    height: height,\n    viewBox: `0 0 ${width} ${height}`,\n    style: {\n      display: \"block\"\n    }\n  }, /*#__PURE__*/React.createElement(\"polygon\", {\n    points: `0,0 0,${height} ${width}, 0`,\n    style: {\n      fill: topColor !== null && topColor !== void 0 ? topColor : \"#FFFFFF\",\n      strokeWidth: 1,\n      stroke: \"rgb(232, 237, 242)\"\n    }\n  }), /*#__PURE__*/React.createElement(\"text\", {\n    style: {\n      fontWeight: bold && \"bold\"\n    },\n    id: \"test-cell-selector\",\n    lengthAdjust: \"spacingAndGlyphs\",\n    textLength: (topValue === null || topValue === void 0 ? void 0 : topValue.length) > 4 ? 28 : null,\n    fontSize: topFontSize,\n    x: padding + fontSize,\n    y: fontSize + padding\n  }, topValue), topStatus && (topStatus === \"increasing\" ? /*#__PURE__*/React.createElement(IncreasingArrows, {\n    fontSize: arrowFontSize,\n    y: padding,\n    x: padding + fontSize / 2\n  }) : /*#__PURE__*/React.createElement(DecreasingArrows, {\n    fontSize: arrowFontSize,\n    y: padding + fontSize,\n    x: padding + fontSize / 2\n  })), /*#__PURE__*/React.createElement(\"polygon\", {\n    points: `${width},0 ${width},${height} 0,${height}`,\n    style: {\n      fill: bottomColor !== null && bottomColor !== void 0 ? bottomColor : \"#FFFFFF\",\n      strokeWidth: 1,\n      stroke: \"rgb(232, 237, 242)\"\n    }\n  }), /*#__PURE__*/React.createElement(\"text\", {\n    style: {\n      fontWeight: bold && \"bold\"\n    },\n    id: \"test-cell-selector\",\n    lengthAdjust: \"spacingAndGlyphs\",\n    textLength: (bottomValue === null || bottomValue === void 0 ? void 0 : bottomValue.length) > 4 ? 28 : null,\n    fontSize: bottomFontSize,\n    x: width / 2 + padding,\n    y: height - padding\n  }, bottomValue), bottomStatus && (bottomStatus === \"increasing\" ? /*#__PURE__*/React.createElement(IncreasingArrows, {\n    fontSize: arrowFontSize,\n    y: height - (fontSize + padding),\n    x: width - (padding + fontSize / 2)\n  }) : /*#__PURE__*/React.createElement(DecreasingArrows, {\n    fontSize: arrowFontSize,\n    y: height - padding,\n    x: width - (padding + fontSize / 2)\n  })));\n}\nLinkedCellSvg.propTypes = {\n  bottomValue: PropTypes.any.isRequired,\n  topValue: PropTypes.any.isRequired,\n  bold: PropTypes.bool,\n  bottomColor: PropTypes.string,\n  bottomStatus: PropTypes.oneOf([\"increasing\", \"decreasing\"]),\n  topColor: PropTypes.string,\n  topStatus: PropTypes.oneOf([\"increasing\", \"decreasing\"])\n};","import { defaultsDeep } from \"lodash\";\nexport default class FormFieldModel {\n  constructor() {\n    let attributes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    defaultsDeep(this, attributes, this.defaults);\n  }\n  get defaults() {\n    return {};\n  }\n}","import { colors } from \"@dhis2/ui\";\nimport MaterialErrorIcon from \"@material-ui/icons/Error\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nexport default function ErrorIcon(_ref) {\n  let {\n    size,\n    color\n  } = _ref;\n  return /*#__PURE__*/React.createElement(MaterialErrorIcon, {\n    style: {\n      color: color !== null && color !== void 0 ? color : colors.grey500,\n      fontSize: size !== null && size !== void 0 ? size : 24\n    }\n  });\n}\nErrorIcon.propTypes = {\n  size: PropTypes.number.isRequired,\n  color: PropTypes.string\n};","export const APP_NAME = \"hisptz-scorecard\";\nexport const APP_TITLE = \"Interactive Scorecard\";\nexport const DATASTORE_NAMESPACE = \"hisptz-scorecard\";\nexport const DATASTORE_ENDPOINT = \"dataStore/hisptz-scorecard\";\nexport const DATASTORE_SCORECARD_SUMMARY_KEY = \"scorecard-summary\";\nexport const DATASTORE_SCORECARD_SUMMARY_INCLUDE_KEYS = [{\n  key: \"title\",\n  path: [\"title\"]\n}, {\n  key: \"description\",\n  path: [\"description\"]\n}, {\n  key: \"id\",\n  path: [\"id\"]\n}, {\n  key: \"user\",\n  path: [\"user\", \"id\"]\n}, {\n  key: \"userAccesses\",\n  path: [\"userAccesses\"]\n}, {\n  key: \"userGroupAccesses\",\n  path: [\"userGroupAccesses\"]\n}, {\n  key: \"publicAccess\",\n  path: [\"publicAccess\"]\n}, {\n  key: \"additionalLabels\",\n  path: [\"additionalLabels\"]\n}];\nexport const DATASTORE_OLD_SCORECARD_ENDPOINT = \"dataStore/scorecards\";\nexport const DATASTORE_FUNCTIONS_ENDPOINT = \"dataStore/functions\";\nexport const SCORECARD_DOCUMENTATION_URL = \"https://docs.dhis2.org/en/use/optional-apps/interactive-scorecard-app/app-version-01/scorecard-and-demo.html\";","export const ALMA_HEADERS = [{\n  name: \"dx\",\n  column: \"Data\",\n  valueType: \"TEXT\",\n  type: \"java.lang.String\",\n  hidden: false,\n  meta: true\n}, {\n  name: \"pe\",\n  column: \"Period\",\n  valueType: \"TEXT\",\n  type: \"java.lang.String\",\n  hidden: false,\n  meta: true\n}, {\n  name: \"ou\",\n  column: \"Organisation unit\",\n  valueType: \"TEXT\",\n  type: \"java.lang.String\",\n  hidden: false,\n  meta: true\n}, {\n  name: \"value\",\n  column: \"Value\",\n  valueType: \"NUMBER\",\n  type: \"java.lang.Double\",\n  hidden: false,\n  meta: false\n}];","export const CalendarTypes = {\n  ETHIOPIAN: \"ethiopian\",\n  GREGORIAN: \"gregorian\"\n};","import i18n from '@dhis2/d2-i18n';\nimport { Area, Bar, Column, Dotted, Pie } from \"../resources\";\nexport const CHART_TYPES = [{\n  type: \"column\",\n  description: i18n.t(\"Column chart\"),\n  icon: Column\n}, {\n  type: \"line\",\n  description: i18n.t(\"Line chart\"),\n  icon: Dotted\n}, {\n  type: \"bar\",\n  description: i18n.t(\"Bar chart\"),\n  icon: Bar\n}, {\n  type: \"area\",\n  description: i18n.t(\"Area chart\"),\n  icon: Area\n}, {\n  type: \"pie\",\n  description: i18n.t(\"Pie chart\"),\n  icon: Pie\n}];","export const DownloadTypes = {\n  EXCEL: \"Excel\",\n  PDF: \"PDF\",\n  CSV: \"CSV\"\n};","export const DraggableItems = {\n  DATA_COLUMN: \"dataColumn\",\n  ORG_UNIT_COLUMN: \"orgUnitColumn\",\n  DATA_ROW: \"dataRow\",\n  ORG_UNIT_ROW: \"orgUnitRow\",\n  OU_LAYOUT: \"ou\",\n  DX_LAYOUT: \"dx\",\n  PE_LAYOUT: \"pe\"\n};","export const REQUIRED_FIELDS = [\"title\", \"description\", \"periodType\"];\nexport const DHIS2ValueTypes = {\n  INTEGER: {\n    name: \"INTEGER\",\n    formName: \"number\"\n  },\n  TRUE_ONLY: {\n    name: \"TRUE_ONLY\",\n    formName: \"checkbox\"\n  },\n  TEXT: {\n    name: \"TEXT\",\n    formName: \"text\"\n  },\n  NUMBER: {\n    name: \"NUMBER\",\n    formName: \"number\"\n  },\n  DATE: {\n    name: \"DATE\",\n    formName: \"date\"\n  },\n  LONG_TEXT: {\n    name: \"LONG_TEXT\",\n    formName: \"textarea\"\n  },\n  LEGEND_DEFINITION: {\n    name: \"LEGEND_DEFINITION\",\n    formName: \"legendDefinition\"\n  },\n  RICH_TEXT: {\n    name: \"RICH_TEXT\",\n    formName: \"richText\"\n  },\n  LEGEND_MIN_MAX: {\n    name: \"LEGEND_MIN_MAX\",\n    formName: \"legendMinMax\"\n  },\n  NORMAL_LEGEND_MIN_MAX: {\n    name: \"NORMAL_LEGEND_MIN_MAX\",\n    formName: \"normalLegendMinMax\"\n  },\n  LEVEL_LEGEND_MIN_MAX: {\n    name: \"LEVEL_LEGEND_MIN_MAX\",\n    formName: \"levelLegendMinMax\"\n  },\n  MULTIPLE_FIELDS: {\n    name: \"MULTIPLE_FIELDS\",\n    formName: \"multipleFields\"\n  }\n};\nexport const generalPageFields = [\"title\", \"subtitle\", \"description\", \"periodType\", \"periodSelection\", \"legendDefinitions\", \"additionalLabels\"];\nexport const dataConfigurationPageFields = [\"dataSelection\", \"dataSelection.dataGroups\"];\nexport const highlightedIndicatorPageFields = [];\nexport const accessPageFields = [];\nexport const optionsPageFields = [];","import i18n from \"@dhis2/d2-i18n\";\nimport { colors } from \"@dhis2/ui\";\nimport PeriodIcon from \"@material-ui/icons/AccessTime\";\nimport OrgUnitIcon from \"@material-ui/icons/AccountTree\";\nimport DataIcon from \"@material-ui/icons/Storage\";\nimport React from \"react\";\nexport const LAYOUTS = {\n  dx: {\n    name: \"data\",\n    displayName: i18n.t(\"Data\"),\n    icon: /*#__PURE__*/React.createElement(DataIcon, {\n      style: {\n        color: colors.grey700\n      }\n    })\n  },\n  ou: {\n    name: \"orgUnit\",\n    displayName: i18n.t(\"Organisation Unit\"),\n    icon: /*#__PURE__*/React.createElement(OrgUnitIcon, {\n      style: {\n        color: colors.grey700\n      }\n    })\n  },\n  pe: {\n    name: \"period\",\n    displayName: i18n.t(\"Period\"),\n    icon: /*#__PURE__*/React.createElement(PeriodIcon, {\n      style: {\n        color: colors.grey700\n      }\n    })\n  }\n};\nexport const DEFAULT_LAYOUT = {\n  column: [\"dx\"],\n  row: [\"pe\"],\n  filter: [\"ou\"]\n};","export const DATA_MIGRATION_CHECK = \"skipMigration\";","export const Orientation = {\n  ORG_UNIT_VS_DATA: \"orgUnitsVsData\",\n  DATA_VS_ORG_UNIT: \"dataVsOrgUnits\"\n};","import i18n from \"@dhis2/d2-i18n\";\nexport const PeriodCategories = {\n  RELATIVE: {\n    name: i18n.t(\"Relative Periods\"),\n    key: \"relative\"\n  },\n  FIXED: {\n    name: i18n.t(\"Fixed Periods\"),\n    key: \"fixed\"\n  }\n};\nexport const UNSUPPORTED_PERIOD_TYPES = [\"RelativeWeek\", \"RelativeFinancialYear\"];","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nexport default class ScorecardAccessType {}\n_defineProperty(ScorecardAccessType, \"READ_WRITE\", \"rw----\");\n_defineProperty(ScorecardAccessType, \"READ_ONLY\", \"r-----\");\n_defineProperty(ScorecardAccessType, \"NO_ACCESS\", \"------\");\nexport const DefaultAuthority = {\n  read: false,\n  write: false,\n  delete: false\n};\nexport const AccessTypes = {\n  USER: \"user\",\n  USER_GROUP: \"userGroup\"\n};\nexport const ACCESS_TYPES = [ScorecardAccessType.NO_ACCESS, ScorecardAccessType.READ_ONLY, ScorecardAccessType.READ_WRITE];","export const FilterComponentTypes = {\n  ORG_UNIT: \"ORG_UNIT\",\n  PERIOD: \"PERIOD\"\n};","export const ScorecardTableConstants = {\n  CELL_WIDTH: 102\n};","export const TableSort = {\n  ASC: \"asc\",\n  DESC: \"desc\",\n  DEFAULT: \"default\"\n};","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nexport default class AverageDisplayType {}\n_defineProperty(AverageDisplayType, \"ALL\", \"ALL\");\n_defineProperty(AverageDisplayType, \"BELOW_AVERAGE\", \"BELOW_AVERAGE\");\n_defineProperty(AverageDisplayType, \"ABOVE_AVERAGE\", \"ABOVE_AVERAGE\");","import i18n from \"@dhis2/d2-i18n\";\nexport const STEP_OPTIONS = {\n  nextLabel: i18n.t(\"Next\"),\n  prevLabel: i18n.t(\"Previous\"),\n  skipLabel: i18n.t(\"Skip\"),\n  doneLabel: i18n.t(\"Done\"),\n  hideNext: false,\n  hidePrev: true,\n  showProgress: false,\n  disableInteraction: false,\n  tooltipClass: \"custom-tooltip\"\n};","import i18n from \"@dhis2/d2-i18n\";\nimport React from \"react\";\nexport const SCORECARD_LIST_HELP_STEPS = [{\n  intro: /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h1\", null, i18n.t(\"Welcome to the most interactive scorecard ever!\")))\n}, {\n  element: \".search-input\",\n  intro: i18n.t(\"Search here for scorecards by name, id, or description\")\n}, {\n  element: \".change-view-button\",\n  intro: i18n.t(\"Click here to change the scorecards view to either list or grid\")\n}, {\n  element: \".add-scorecard-button\",\n  intro: i18n.t(\"Click here to add a new scorecard\")\n}, {\n  element: \".scorecard-list\",\n  intro: i18n.t(\"Click on View or anywhere on the scorecard to view, click on Edit to edit configurations and click on Delete to delete the scorecard\")\n}];","import i18n from \"@dhis2/d2-i18n\";\nimport React from \"react\";\nexport const GENERAL_HELP_STEPS = [{\n  intro: /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: 200\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Scorecard Management\")), i18n.t(\"Here you can modify your scorecard configuration\"))\n}, {\n  element: \".general-settings\",\n  intro: i18n.t(\"Set your title and subtitle here\")\n}, {\n  element: \".description-settings\",\n  intro: i18n.t(\"Describe your scorecard\")\n}, {\n  element: \".period-type-settings\",\n  intro: i18n.t(\"Set the default period type here. This will determine which periods will be selected as defaults\")\n}, {\n  element: \".custom-header-settings\",\n  intro: i18n.t(\"Modify the scorecard header here. You can add different styling, icons, images,and much more\")\n}, {\n  element: \".legend-definitions-settings\",\n  intro: i18n.t(\"Define legends here. Set the title and color\")\n}, {\n  element: \".additional-labels-settings\",\n  intro: i18n.t(\"Set additional labels here\")\n}, {\n  element: \".settings-next-button\",\n  intro: i18n.t(\"Click on next to move to data configuration page\")\n}];\nexport const INTRODUCTION_HELP_STEPS = [{\n  intro: /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Data Configuration\")), i18n.t(\"On this page, you can configure different data sources (indicators, dataElements, e.t.c) for the scorecard. You can also preview the scorecard table.\"))\n}];\nexport const PREVIEW_TABLE_HELP_STEPS = [{\n  element: \".preview-table-area\",\n  intro: i18n.t(\"This is the preview area. It shows how your scorecard will look like.\")\n}];\nexport const NO_GROUPS_HELP_STEPS = [{\n  element: \".groups-configuration-area\",\n  intro: /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"p\", null, i18n.t(\"You can configure different data sources on this area.\")), /*#__PURE__*/React.createElement(\"p\", null, i18n.t(\"Indicators are configured and displayed in groups\")))\n}, {\n  element: \".scorecard-add-group-button\",\n  intro: i18n.t(\"Click Here to add a group\")\n}];\nexport const GROUPS_CONFIG_HELP_STEPS = [{\n  element: \".groups-configuration-area\",\n  intro: /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"p\", null, i18n.t(\"You can configure different data sources on this area.\")), /*#__PURE__*/React.createElement(\"p\", null, i18n.t(\"Indicators are configured and displayed in groups\")))\n}, {\n  element: \".group-name-area\",\n  intro: i18n.t(\"Double click or click on the edit button to edit the group name\")\n}, {\n  element: \".expand-group-icon\",\n  intro: i18n.t(\"Click here to expand or collapse the group area\")\n}, {\n  element: \".delete-group-icon\",\n  intro: i18n.t(\"Click here to delete the group\")\n}, {\n  element: \".scorecard-add-group-button\",\n  intro: i18n.t(\"Click Here to add more groups\")\n}];\nexport const NO_INDICATORS_HELP_STEPS = [{\n  element: \".scorecard-indicator-add\",\n  intro: i18n.t(\"Click here to add an indicator\")\n}];\nexport const INDICATOR_SETUP_HELP_STEPS = [{\n  element: \".data-holders-area\",\n  intro: i18n.t(\"Selected indicators appear here\")\n}, {\n  element: \".data-holder\",\n  intro: i18n.t(\"Click here to configure this indicator. You can also drag this to rearrange the indicators within a group\")\n}, {\n  element: \".link-button\",\n  intro: i18n.t(\"Click here to link two adjacent indicators or to unlink linked indicators\")\n}, {\n  element: \".data-source.close-icon\",\n  intro: i18n.t(\"Click here to delete this indicator\")\n}, {\n  element: \".scorecard-indicator-add\",\n  intro: i18n.t(\"Click here to add more indicators\")\n}];\nexport const DATA_CONFIGURATION_WITH_DATA_HELP_STEPS = [{\n  element: \".groups-configuration-area\",\n  intro: i18n.t(\"You can configure different data sources on this area\")\n}, {\n  element: \".target-on-level-selector\",\n  intro: i18n.t(\"Check this box to set legend configuration according to organisation unit levels\")\n}, {\n  element: \".scorecard-add-group-button\",\n  intro: i18n.t(\"Click Here to add a group\")\n}, ...GROUPS_CONFIG_HELP_STEPS, ...INDICATOR_SETUP_HELP_STEPS];\nexport const INDICATOR_CONFIGURATION_STEPS = [{\n  element: \".data-source-form-container\",\n  intro: i18n.t(\"You can edit indicator configuration here\")\n}, {\n  element: 'input[name=\"label\"]',\n  intro: i18n.t(\"Edit indicator label here. This label will displayed on the scorecard table header\")\n}, {\n  element: 'input[name=\"weight\"]',\n  intro: i18n.t(\"You can set the indicator weight here. This is the indicator's maximum value\")\n}, {\n  element: \".effective-gap-settings\",\n  intro: i18n.t(\"You can set the effective gap here.\")\n}, {\n  element: \".indicator-options-settings-area\",\n  intro: /*#__PURE__*/React.createElement(\"div\", null, i18n.t(\"Here you can set different options for the indicator\"), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Display Arrows\"), \":\"), i18n.t(\"Check this to display increasing/decreasing arrows on this indicator's value\")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"High is Good\"), \":\"), i18n.t(\"Check this to indicate that higher values are good for this indicator  \")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Show Colors\"), \":\"), i18n.t(\"Check this to enable legend color on an indicator value \")))\n}, {\n  element: \".legend-settings-area\",\n  intro: i18n.t(\"Here you can configure the maximum and minimum values for each legend\")\n}];\nexport const DATA_CONFIGURATION_HELP_STEPS = [];\nexport const DATA_CONFIGURATION_STEPS_MAP = {\n  introduction: {\n    start: 0,\n    end: INTRODUCTION_HELP_STEPS.length - 1\n  },\n  emptyGroups: {\n    start: 1,\n    end: NO_GROUPS_HELP_STEPS.length - 1\n  },\n  groupConfig: {\n    start: NO_GROUPS_HELP_STEPS.length,\n    end: GROUPS_CONFIG_HELP_STEPS.length - 1\n  },\n  emptyIndicators: {\n    start: GROUPS_CONFIG_HELP_STEPS.length,\n    end: NO_INDICATORS_HELP_STEPS.length - 1\n  },\n  indicatorSetup: {\n    start: NO_INDICATORS_HELP_STEPS.length,\n    end: INDICATOR_SETUP_HELP_STEPS.length - 1\n  },\n  indicatorConfiguration: {\n    start: INDICATOR_SETUP_HELP_STEPS.length,\n    end: INDICATOR_CONFIGURATION_STEPS.length - 1\n  }\n};\nexport const HIGHLIGHTED_INDICATOR_HELP_STEPS = [{\n  intro: /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Highlighted Indicators\")), /*#__PURE__*/React.createElement(\"p\", null, i18n.t(\"In this page you can add and configure highlighted indicators. These indicators appear on top of the scorecard table\")))\n}, {\n  element: \".add-highlighted-indicator-button\",\n  intro: i18n.t(\"To add a highlighted indicator click here\")\n}];\nexport const HIGHLIGHTED_TABLE_HELP_STEPS = [{\n  element: \".highlighted-indicator-table\",\n  intro: i18n.t(\"Selected indicators will appear here\")\n}, {\n  element: \".highlighted-indicator-row\",\n  intro: i18n.t(\"Click on the row to configure the indicator\")\n}, {\n  element: \".highlighted-indicator-delete\",\n  intro: i18n.t(\"Click on the remove button to delete the indicator from the list\")\n}, {\n  element: \".add-highlighted-indicator-button\",\n  intro: i18n.t(\"To add more highlighted indicators click here\")\n}];\nexport const ACCESS_HELP_STEPS = [{\n  intro: /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Access Settings\")), /*#__PURE__*/React.createElement(\"p\", null, i18n.t(\"In this page you can configure the default organisation unit and sharing access\")))\n}, {\n  element: \".access-org-unit-filter\",\n  intro: i18n.t(\"Choose the default organisation unit from this selector\")\n}, {\n  element: \".add-sharing-access\",\n  intro: i18n.t(\"You can add a new user or user group to share the scorecard with here\")\n}, {\n  element: \".user-selector\",\n  intro: i18n.t(\"Search and select a user or user group here\")\n}, {\n  element: \".access-selector\",\n  intro: i18n.t(\"Select the appropriate access here\")\n}, {\n  element: \".add-access-button\",\n  intro: i18n.t(\"Click here to add the access settings\")\n}, {\n  element: \".sharing-list\",\n  intro: i18n.t(\"List of shared users and user groups will appear here\")\n}, {\n  element: \".edit-delete-access\",\n  intro: i18n.t(\"You can edit or delete access here\")\n}];\nexport const OPTIONS_HELP_STEPS = [{\n  intro: /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Default Options Settings\")), /*#__PURE__*/React.createElement(\"p\", null, i18n.t(\"In this page you can set default options for the scorecard view\")))\n}, {\n  element: \".visibility-options\",\n  intro: /*#__PURE__*/React.createElement(\"div\", null, i18n.t(\"These options affect the scorecard view\"), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Legend\"), \":\"), i18n.t(\"Allows the legends on the scorecard header to be displayed when checked\")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Title\"), \":\"), i18n.t(\"Allows the title on the scorecard header to be displayed when checked\")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Item Number\"), \":\"), i18n.t(\"Allows row numbers on the scorecard to be displayed when checked\")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Empty Rows\"), \":\"), i18n.t(\"Allows the empty rows on the scorecard to be displayed when checked\")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Show Hierarchy\"), \":\"), i18n.t(\"Allows the organisation units hierarchy to be displayed when checked\")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Average Column\"), \":\"), i18n.t(\"Allows the average column to be displayed when checked\")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Average Row\"), \":\"), i18n.t(\"Allows the average row to be displayed when checked\")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Highlighted Indicators\"), \":\"), i18n.t(\"Allows the highlighted indicators to be displayed when checked\")))\n}, {\n  element: \".average-options\",\n  intro: /*#__PURE__*/React.createElement(\"div\", null, i18n.t(\"These options allow to view data based on the average\"), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"All\"), \":\"), i18n.t(\"Allows all data to be displayed\")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Below Average\"), \":\"), i18n.t(\"Allows data that is below the overall average to be displayed\")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Above Average\"), \":\"), i18n.t(\"Allows data that is above the overall average to be displayed\")))\n}, {\n  element: \".other-options\",\n  intro: /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Arrows\"), \":\"), i18n.t(\"Allows increasing or decreasing indicators on data cells to be displayed\")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Show Data in Rows\"), \":\"), i18n.t(\"Changes the table layout, the indicators are shown in rows and orgaunisation units in columns\")))\n}];","import i18n from \"@dhis2/d2-i18n\";\nimport React from \"react\";\nexport const SCORECARD_VIEW_HELP_STEPS = [{\n  intro: /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Scorecard View\")), /*#__PURE__*/React.createElement(\"p\", null, i18n.t(\"This is the default view for your scorecard\")))\n}, {\n  element: \"#org-unit-selector\",\n  intro: i18n.t(\"Click here to select different organisation units\")\n}, {\n  element: \"#period-selector\",\n  intro: i18n.t(\"Click here to select different periods\")\n}, {\n  element: \".home-button\",\n  intro: i18n.t(\"Click here to return to scorecard list\")\n}, {\n  element: \".refresh-button\",\n  intro: i18n.t(\"Click here to refresh the scorecard page. This will reset organisation units, periods, and options to default values\")\n}, {\n  element: \".option-button\",\n  intro: i18n.t(\"Click here to customize the scorecard look. Add numbering, enable average rows and columns, hide or show arrows and many more\")\n}, {\n  element: \".scorecard-view-edit-button\",\n  intro: i18n.t(\"Click here to edit scorecard configuration\")\n}, {\n  element: \".download-button\",\n  intro: i18n.t(\"Click here to download the scorecard in Excel, PDF, CSV, and JSON formats\")\n}, {\n  element: \".scorecard-table\",\n  intro: /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Here is the scorecard!\")), `${i18n.t(\"Here you can\")}: `, /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, i18n.t(\"Sort table based on organisation unit names or values\")), /*#__PURE__*/React.createElement(\"li\", null, i18n.t(\"Search organisation units\")), /*#__PURE__*/React.createElement(\"li\", null, i18n.t(\"Change the table layout\")), /*#__PURE__*/React.createElement(\"li\", null, i18n.t(\"Further analyse data in the cells\"))))\n}, {\n  element: \".org-unit-search\",\n  intro: i18n.t(\"Search here for a specific organisation unit\")\n}, {\n  element: \"[data-test=\\\"dhis2-uicore-tableheadercellaction\\\"]\",\n  intro: i18n.t(\"Click on the arrows to sort the table based on the name or values\")\n}, {\n  element: \"th.parent-org-unit-cell\",\n  intro: i18n.t(\"To change the table layout, click, hold, and drag this cell to the table headers\")\n}, {\n  element: \".data-cell\",\n  intro: /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      margin: 2\n    }\n  }, i18n.t(\"Click on a data cell to see further analysis\")), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      margin: 2\n    }\n  }, i18n.t(\"You can also right click to view the cell data in different options\")))\n}, {\n  element: \"[data-test=\\\"orgUnit-children-table-column-cell\\\"] > td:nth-child(1)\",\n  intro: i18n.t(\"Click on the arrow to drill down to the scorecard of this organisation unit's lower level\")\n}];","import i18n from \"@dhis2/d2-i18n\";\nexport const scorecardManagementTooltips = [{\n  id: \"general\",\n  content: i18n.t(\"Here you can set your scorecard general information \\n\" + \" You can set name, period type, legends and additional labels of your scorecard.\")\n}, {\n  id: \"dataConfiguration\",\n  content: i18n.t(\"On this page, you can configure different data sources (indicators, dataElements, e.t.c) for the scorecard. You can also preview the scorecard table.\")\n}, {\n  id: \"highlightedIndicators\",\n  content: i18n.t(\"In this page you can add and configure highlighted indicators. These indicators appear on top of the scorecard table\")\n}, {\n  id: \"access\",\n  content: i18n.t(\"In this page you can configure the default organisation unit and sharing access for the scorecard.\")\n}, {\n  id: \"option\",\n  content: i18n.t(\"In this page you can set default options for the scorecard view. These options affect the scorecard view\")\n}];","import { useDataQuery } from \"@dhis2/app-runtime\";\nimport { debounce, isEmpty } from \"lodash\";\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useRecoilValueLoadable } from \"recoil\";\nimport { OrgUnitChildren } from \"../state\";\nexport function useOrganisationUnitChildren() {\n  let orgUnitId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  const [id, setId] = useState(orgUnitId);\n  const {\n    state,\n    contents\n  } = useRecoilValueLoadable(OrgUnitChildren(id));\n  return {\n    loading: state === \"loading\",\n    orgUnits: state === \"hasValue\" ? contents : [],\n    error: state === \"hasError\" ? contents : undefined,\n    setId\n  };\n}\nconst orgUnitSearchQuery = {\n  nameQuery: {\n    resource: \"organisationUnits\",\n    params: _ref => {\n      let {\n        keyword\n      } = _ref;\n      return {\n        filter: [`displayName:ilike:${keyword}`],\n        fields: [\"id\", \"displayName\", \"path\", \"level\"]\n      };\n    }\n  },\n  idQuery: {\n    resource: \"organisationUnits\",\n    params: _ref2 => {\n      let {\n        keyword\n      } = _ref2;\n      return {\n        filter: [`id:ilike:${keyword}`],\n        fields: [\"id\", \"displayName\", \"path\", \"level\"]\n      };\n    }\n  }\n};\nfunction formatSearchedOrgUnits(orgUnits) {\n  return orgUnits.map(orgUnit => {\n    return {\n      ...orgUnit,\n      hierarchy: orgUnit.displayName\n    };\n  });\n}\nexport async function searchOrganisationUnit(keyword, engine) {\n  if (!isEmpty(keyword)) {\n    const data = await engine.query(orgUnitSearchQuery, {\n      variables: {\n        keyword\n      }\n    });\n    if (!isEmpty(data)) {\n      var _data$idQuery$organis, _data$idQuery, _data$nameQuery$organ, _data$nameQuery;\n      const idResponse = (_data$idQuery$organis = data === null || data === void 0 ? void 0 : (_data$idQuery = data.idQuery) === null || _data$idQuery === void 0 ? void 0 : _data$idQuery.organisationUnits) !== null && _data$idQuery$organis !== void 0 ? _data$idQuery$organis : [];\n      const nameResponse = (_data$nameQuery$organ = data === null || data === void 0 ? void 0 : (_data$nameQuery = data.nameQuery) === null || _data$nameQuery === void 0 ? void 0 : _data$nameQuery.organisationUnits) !== null && _data$nameQuery$organ !== void 0 ? _data$nameQuery$organ : [];\n      return formatSearchedOrgUnits([...idResponse, ...nameResponse]);\n    }\n  }\n  return [];\n}\nexport function useSearchOrganisationUnit() {\n  const [keyword, setKeyword] = useState();\n  const {\n    data,\n    error,\n    loading,\n    refetch\n  } = useDataQuery(orgUnitSearchQuery, {\n    lazy: true\n  });\n  const updateKeyword = useRef(debounce(setKeyword, 1000, {\n    trailing: true,\n    leading: false\n  }));\n  const orgUnits = useMemo(() => {\n    if (!isEmpty(data)) {\n      var _data$idQuery$organis2, _data$idQuery2, _data$nameQuery$organ2, _data$nameQuery2;\n      const idResponse = (_data$idQuery$organis2 = data === null || data === void 0 ? void 0 : (_data$idQuery2 = data.idQuery) === null || _data$idQuery2 === void 0 ? void 0 : _data$idQuery2.organisationUnits) !== null && _data$idQuery$organis2 !== void 0 ? _data$idQuery$organis2 : [];\n      const nameResponse = (_data$nameQuery$organ2 = data === null || data === void 0 ? void 0 : (_data$nameQuery2 = data.nameQuery) === null || _data$nameQuery2 === void 0 ? void 0 : _data$nameQuery2.organisationUnits) !== null && _data$nameQuery$organ2 !== void 0 ? _data$nameQuery$organ2 : [];\n      return [...idResponse, ...nameResponse];\n    }\n    return [];\n  }, [data]);\n  useEffect(() => {\n    if (!isEmpty(keyword)) {\n      refetch({\n        keyword\n      });\n    }\n  }, [keyword]);\n  return {\n    orgUnits,\n    error,\n    loading,\n    updateKeyword: updateKeyword.current\n  };\n}","import { useLayoutEffect, useState } from \"react\";\nfunction getWindowDimensions() {\n  const {\n    innerWidth: width,\n    innerHeight: height\n  } = window;\n  return {\n    width: width > 1366 ? width : 1366,\n    height: (height > 763 ? height : 763) - 48 //considering the appbar\n  };\n}\nexport default function useMediaQuery() {\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\n  useLayoutEffect(() => {\n    function handleResize() {\n      setWindowDimensions(getWindowDimensions());\n    }\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n  return windowDimensions;\n}","import { useDataMutation } from \"@dhis2/app-runtime\";\nimport produce from \"immer\";\nimport { cloneDeep, findIndex } from \"lodash\";\nimport { useCallback, useState } from \"react\";\nimport { useRecoilCallback, useRecoilState } from \"recoil\";\nimport { DATASTORE_ENDPOINT, DATASTORE_SCORECARD_SUMMARY_KEY } from \"../../constants\";\nimport { ScorecardSummaryState } from \"../../state\";\nconst updateMutation = {\n  type: \"update\",\n  resource: DATASTORE_ENDPOINT,\n  id: DATASTORE_SCORECARD_SUMMARY_KEY,\n  data: _ref => {\n    let {\n      data\n    } = _ref;\n    return data;\n  }\n};\nexport default function useScorecardsSummary() {\n  const [executionError, setExecutionError] = useState();\n  const [summary, setSummary] = useRecoilState(ScorecardSummaryState);\n  const [update, {\n    error: updateError,\n    loading: updateLoading\n  }] = useDataMutation(updateMutation);\n  const addSingleScorecardSummary = useRecoilCallback(_ref2 => {\n    let {\n      set\n    } = _ref2;\n    return async updatedSummary => {\n      try {\n        var _cloneDeep;\n        const updatedList = (_cloneDeep = cloneDeep(summary)) !== null && _cloneDeep !== void 0 ? _cloneDeep : [];\n        updatedList.push(updatedSummary);\n        await update({\n          data: updatedList\n        });\n        set(ScorecardSummaryState, () => updatedList);\n      } catch (e) {\n        // setExecutionError(e);\n        console.error(e);\n      }\n    };\n  }, [summary, update]);\n  const updateSingleScorecardSummary = useCallback(async (id, updatedSummary) => {\n    try {\n      var _cloneDeep2;\n      const updatedList = (_cloneDeep2 = cloneDeep(summary)) !== null && _cloneDeep2 !== void 0 ? _cloneDeep2 : [];\n      updatedList.splice(findIndex(updatedList, [\"id\", id]), 1, updatedSummary);\n      await update({\n        data: updatedList\n      });\n      setSummary(updatedList);\n    } catch (e) {\n      setExecutionError(e);\n    }\n  }, [setSummary, summary, update]);\n  const removeSingleScorecardSummary = useCallback(async id => {\n    try {\n      const updatedList = produce(summary, draft => {\n        draft.splice(findIndex(draft, [\"id\", id]), 1);\n      });\n      await update({\n        data: updatedList\n      });\n      setSummary(updatedList);\n    } catch (e) {\n      console.error(e);\n      setExecutionError(e);\n    }\n  }, [setSummary, summary, update]);\n  return {\n    summary,\n    error: executionError !== null && executionError !== void 0 ? executionError : updateError,\n    loading: updateLoading,\n    updateSingleScorecardSummary,\n    removeSingleScorecardSummary,\n    addSingleScorecardSummary\n  };\n}","import { useDataEngine, useDataMutation, useDataQuery } from \"@dhis2/app-runtime\";\nimport { useEffect, useState } from \"react\";\nimport { useSetRecoilState } from \"recoil\";\nimport useScorecardsSummary from \"./useScorecardsSummary\";\nimport { DATASTORE_ENDPOINT } from \"../../constants\";\nimport { ScorecardConfState, ScorecardRequestId } from \"../../state\";\nimport { generateCreateMutation, generateScorecardSummary } from \"../../utils\";\nconst query = {\n  scorecard: {\n    resource: DATASTORE_ENDPOINT,\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    }\n  }\n};\nconst updateMutation = {\n  type: \"update\",\n  resource: DATASTORE_ENDPOINT,\n  id: _ref2 => {\n    let {\n      id\n    } = _ref2;\n    return id;\n  },\n  data: _ref3 => {\n    let {\n      data\n    } = _ref3;\n    return data;\n  }\n};\nconst deleteMutation = {\n  type: \"delete\",\n  resource: DATASTORE_ENDPOINT,\n  id: _ref4 => {\n    let {\n      id\n    } = _ref4;\n    return id;\n  }\n};\nexport function useDeleteScorecard(id) {\n  var _ref5;\n  const [executionError, setExecutionError] = useState();\n  const [removeMutate, {\n    loading,\n    error: removeError\n  }] = useDataMutation(deleteMutation, {\n    variables: {\n      id\n    }\n  });\n  const {\n    removeSingleScorecardSummary,\n    error\n  } = useScorecardsSummary();\n  const remove = async () => {\n    try {\n      await removeMutate({\n        id\n      });\n      await removeSingleScorecardSummary(id);\n    } catch (e) {\n      console.error(e);\n      setExecutionError(e);\n    }\n  };\n  return {\n    remove,\n    error: (_ref5 = removeError !== null && removeError !== void 0 ? removeError : executionError) !== null && _ref5 !== void 0 ? _ref5 : error,\n    loading\n  };\n}\nexport function useUpdateScorecard(id) {\n  const setScorecardRequestId = useSetRecoilState(ScorecardRequestId(id));\n  const [updateMutate, {\n    loading\n  }] = useDataMutation(updateMutation, {\n    variables: {\n      id\n    }\n  });\n  const {\n    updateSingleScorecardSummary\n  } = useScorecardsSummary();\n  const update = async data => {\n    const scorecardSummary = generateScorecardSummary(data);\n    await updateSingleScorecardSummary(id, scorecardSummary);\n    await updateMutate({\n      id,\n      data\n    });\n    setScorecardRequestId(prevState => prevState + 1);\n  };\n  return {\n    update,\n    loading\n  };\n}\nexport function useAddScorecard() {\n  const engine = useDataEngine();\n  const {\n    addSingleScorecardSummary\n  } = useScorecardsSummary();\n  const add = async data => {\n    const scorecardSummary = generateScorecardSummary(data);\n    await engine.mutate(generateCreateMutation(data === null || data === void 0 ? void 0 : data.id), {\n      variables: {\n        data\n      }\n    });\n    await addSingleScorecardSummary(scorecardSummary);\n  };\n  return {\n    add\n  };\n}\nexport default function useScorecard(scorecardId) {\n  const setScorecardState = useSetRecoilState(ScorecardConfState(scorecardId));\n  const {\n    loading,\n    data,\n    error,\n    refetch\n  } = useDataQuery(query, {\n    lazy: true\n  });\n  const set = async id => {\n    await refetch({\n      id\n    });\n  };\n  useEffect(() => {\n    function setState() {\n      if (data !== null && data !== void 0 && data.scorecard) {\n        setScorecardState(() => data === null || data === void 0 ? void 0 : data.scorecard);\n      }\n    }\n    setState();\n  }, [data]);\n  return {\n    loading,\n    error,\n    set\n  };\n}","import { useDeleteScorecard } from \"./useScorecard\";\nimport useScorecardsSummary from \"./useScorecardsSummary\";\nexport default function useAllScorecards() {\n  const {\n    removeSingleScorecardSummary,\n    error,\n    loading,\n    summary,\n    updateLoading\n  } = useScorecardsSummary();\n  const {\n    remove,\n    loading: removeLoading,\n    error: removeError\n  } = useDeleteScorecard(\"\", {\n    lazy: true\n  });\n  const deleteScorecard = async id => {\n    await remove({\n      id\n    });\n    await removeSingleScorecardSummary(id);\n  };\n  return {\n    scorecards: summary,\n    error: error !== null && error !== void 0 ? error : removeError,\n    loading,\n    removeLoading: removeLoading || updateLoading,\n    remove: deleteScorecard\n  };\n}","import { useConfig, useDataEngine } from \"@dhis2/app-runtime\";\nimport { Fn } from \"@iapps/function-analytics\";\nimport { useWebVitals } from \"react-web-vitals\";\nimport { EngineState, ScreenDimensionState } from \"../state\";\nimport { getWindowDimensions } from \"../utils\";\nexport default function useInitApp() {\n  useWebVitals();\n  const {\n    baseUrl,\n    apiVersion\n  } = useConfig();\n  Fn.init({\n    baseUrl: `${baseUrl}/api/${apiVersion}/`\n  });\n  const engine = useDataEngine();\n  function initializeState(_ref) {\n    let {\n      set\n    } = _ref;\n    set(ScreenDimensionState, getWindowDimensions());\n    set(EngineState, engine);\n  }\n  return {\n    initializeState\n  };\n}","import { useSetRecoilState } from \"recoil\";\nimport { ScorecardForceUpdateState } from \"../state\";\nexport default function useForceUpdate(scorecardId) {\n  const setForceUpdateState = useSetRecoilState(ScorecardForceUpdateState(scorecardId));\n  const forceUpdate = () => {\n    setForceUpdateState(prevState => prevState + 1);\n  };\n  return {\n    forceUpdate\n  };\n}","import { useDataEngine } from \"@dhis2/app-runtime\";\nimport { useEffect } from \"react\";\nimport { useSetRecoilState } from \"recoil\";\nimport { EngineState } from \"../state\";\nexport default function useSetDataEngine() {\n  const setEngine = useSetRecoilState(EngineState);\n  const engine = useDataEngine();\n  useEffect(() => {\n    setEngine(engine);\n  }, []);\n}","import produce from \"immer\";\nimport { cloneDeep, defaultsDeep } from \"lodash\";\nexport default class DataModel {\n  constructor() {\n    let attributes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    defaultsDeep(this, attributes, this.defaults);\n  }\n  get defaults() {\n    return {};\n  }\n  static set(object, key, value) {\n    if (key) {\n      const updatedObject = cloneDeep(object);\n      updatedObject[key] = value;\n      return updatedObject;\n    }\n    return this;\n  }\n  static setObject(object) {\n    let values = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const updatedObject = cloneDeep(object);\n    for (const key of Object.keys(values)) {\n      updatedObject[key] = values[key];\n    }\n    return updatedObject;\n  }\n}\nexport class SavableDataModel extends DataModel {\n  static async save(object, addFunction, user) {\n    const newObject = produce(JSON.parse(JSON.stringify(object)), draft => {\n      draft.user = {\n        id: user === null || user === void 0 ? void 0 : user.id\n      };\n    });\n    return await addFunction(newObject);\n  }\n  static async update(object, updateFunction) {\n    return await updateFunction(JSON.parse(JSON.stringify(object)));\n  }\n}","import DataModel from \"./base\";\nexport default class DataSelection extends DataModel {\n  get defaults() {\n    return {\n      dataGroups: []\n    };\n  }\n}","import DataModel from \"./base\";\nexport default class OrgUnitSelection extends DataModel {\n  get defaults() {\n    return {\n      levels: [],\n      groups: [],\n      orgUnits: [],\n      userSubX2Unit: false,\n      userSubUnit: false,\n      userOrgUnit: false\n    };\n  }\n}","export default class SelectionItem {\n  constructor(selectionItem) {\n    this.selectionItem = selectionItem;\n  }\n  get id() {\n    return this.selectionItem ? this.selectionItem.id : undefined;\n  }\n  get name() {\n    return this.selectionItem ? this.selectionItem.name : undefined;\n  }\n  get type() {\n    return this.selectionItem ? this.selectionItem.type : undefined;\n  }\n}","import SelectionItem from \"./selectionItem\";\nexport default class PeriodSelection {\n  constructor(periodSelection) {\n    this.periodSelection = periodSelection;\n  }\n  get items() {\n    return (this.periodSelection ? this.periodSelection.items : []).map(item => new SelectionItem(item));\n  }\n}","import DataModel from \"./base\";\nimport { ScorecardAccessType } from \"../constants\";\nexport default class ScorecardAccess extends DataModel {\n  get defaults() {\n    return {\n      id: undefined,\n      type: \"userGroup\",\n      access: ScorecardAccessType.NO_ACCESS,\n      displayName: \"\"\n    };\n  }\n}","import DataModel from \"./base\";\nimport { AverageDisplayType } from \"../constants\";\nexport default class ScorecardOption extends DataModel {\n  get defaults() {\n    return {\n      averageDisplayType: AverageDisplayType.ALL,\n      legend: true,\n      title: true,\n      itemNumber: true,\n      emptyRows: true,\n      showHierarchy: false,\n      averageColumn: false,\n      averageRow: false,\n      highlightedIndicators: false\n    };\n  }\n}","import { SavableDataModel } from \"./base\";\nimport DataSelection from \"./dataSelection\";\nimport OrgUnitSelection from \"./orgUnitSelection\";\nimport PeriodSelection from \"./periodSelection\";\nimport ScorecardAccess from \"./scorecardAccess\";\nimport ScorecardOption from \"./scorecardOptions\";\nimport { uid } from \"../utils\";\nexport default class Scorecard extends SavableDataModel {\n  get defaults() {\n    return {\n      id: uid(),\n      name: \"\",\n      title: \"\",\n      subtitle: \"\",\n      description: \"\",\n      customHeader: \"\",\n      periodType: \"\",\n      legendDefinitions: [],\n      dataSelection: new DataSelection(),\n      orgUnitSelection: new OrgUnitSelection(),\n      periodSelection: new PeriodSelection(),\n      options: new ScorecardOption(),\n      highlightedIndicators: [],\n      publicAccess: new ScorecardAccess(),\n      userGroupAccesses: [],\n      userAccesses: [],\n      user: {},\n      targetOnLevels: false,\n      additionalLabels: []\n    };\n  }\n}","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport { Fn } from \"@iapps/function-analytics\";\nimport { Period } from \"@iapps/period-utilities\";\nimport mapLimit from \"async/mapLimit\";\nimport { chunk, compact, differenceBy, find, flatten, forIn, fromPairs, groupBy, head, isEmpty, last, pickBy, reduce, sortBy, toPairs, uniq, uniqBy } from \"lodash\";\nimport { BehaviorSubject, of } from \"rxjs\";\nimport { map, take } from \"rxjs/operators\";\nimport $ from \"jquery\";\nimport { TableSort } from \"../constants\";\nexport default class ScorecardDataEngine {\n  constructor() {\n    _defineProperty(this, \"engine\", void 0);\n    _defineProperty(this, \"_cancelled\", false);\n    _defineProperty(this, \"_totalRequests\", 0);\n    _defineProperty(this, \"_progress\", 0);\n    _defineProperty(this, \"_progress$\", new BehaviorSubject());\n    _defineProperty(this, \"_dataEntities\", {});\n    _defineProperty(this, \"_dataEntities$\", new BehaviorSubject(this._dataEntities));\n    _defineProperty(this, \"dataEntities$\", this._dataEntities$.asObservable());\n    _defineProperty(this, \"_previousPeriods\", []);\n    _defineProperty(this, \"_calendar\", void 0);\n    _defineProperty(this, \"_loading$\", new BehaviorSubject());\n    this._cancelled = false;\n  }\n  get loading$() {\n    return this._loading$.asObservable();\n  }\n  get _canLoadData() {\n    var _this$_selectedOrgUni, _this$_selectedPeriod, _this$_selectedData$n, _this$_selectedData$c;\n    return ((_this$_selectedOrgUni = this._selectedOrgUnits) === null || _this$_selectedOrgUni === void 0 ? void 0 : _this$_selectedOrgUni.length) > 0 && ((_this$_selectedPeriod = this._selectedPeriods) === null || _this$_selectedPeriod === void 0 ? void 0 : _this$_selectedPeriod.length) > 0 && (((_this$_selectedData$n = this._selectedData.normalDataItems) === null || _this$_selectedData$n === void 0 ? void 0 : _this$_selectedData$n.length) > 0 || ((_this$_selectedData$c = this._selectedData.customDataItems) === null || _this$_selectedData$c === void 0 ? void 0 : _this$_selectedData$c.length) > 0);\n  }\n  setDataQueryEngine(engine) {\n    this.engine = engine;\n    return this;\n  }\n  setPeriodType(periodType) {\n    this._periodType = periodType;\n    this._selectedPeriods = this._getSelectedPeriods(this._selectedPeriods, periodType);\n    return this;\n  }\n  refresh() {\n    this.reset(false);\n    this.load();\n    return this;\n  }\n  setPeriods(periods) {\n    var _compact, _differenceBy;\n    let previousPeriods = [];\n    this._selectedPeriods = uniqBy((periods || []).map(period => {\n      const currentPeriod = new Period().setPreferences({\n        allowFuturePeriods: true\n      }).setCalendar(this._calendar).getById(period === null || period === void 0 ? void 0 : period.id);\n      previousPeriods = [...previousPeriods, currentPeriod === null || currentPeriod === void 0 ? void 0 : currentPeriod.lastPeriod];\n      return currentPeriod || period;\n    }), \"id\");\n    previousPeriods.forEach(previousPeriod => {\n      const currentPeriod = find(this._selectedPeriods, [\"id\", previousPeriod === null || previousPeriod === void 0 ? void 0 : previousPeriod.id]);\n      if (!currentPeriod) {\n        this._selectedPeriods = compact([...this._selectedPeriods, previousPeriod]);\n      }\n    });\n    this._previousPeriods = (_compact = compact((_differenceBy = differenceBy(previousPeriods, periods, \"id\")) === null || _differenceBy === void 0 ? void 0 : _differenceBy.map(period => {\n      return period === null || period === void 0 ? void 0 : period.id;\n    }))) !== null && _compact !== void 0 ? _compact : [];\n    return this;\n  }\n  setCalendar(calendar) {\n    this._calendar = calendar;\n    return this;\n  }\n  setDataGroups(dataGroups) {\n    this._selectedData = this._getSelectedData(dataGroups);\n    return this;\n  }\n  setOrgUnits(orgUnits) {\n    this._selectedOrgUnits = orgUnits;\n    return this;\n  }\n  _updateDataEntities(rows) {\n    (rows || []).forEach(row => {\n      var _row$dx, _row$ou, _row$pe, _find, _row$pe2;\n      const dataEntityId = `${row === null || row === void 0 ? void 0 : (_row$dx = row.dx) === null || _row$dx === void 0 ? void 0 : _row$dx.id}_${row === null || row === void 0 ? void 0 : (_row$ou = row.ou) === null || _row$ou === void 0 ? void 0 : _row$ou.id}_${row === null || row === void 0 ? void 0 : (_row$pe = row.pe) === null || _row$pe === void 0 ? void 0 : _row$pe.id}`;\n      const previousPeriod = (_find = find(this._selectedPeriods, [\"id\", row === null || row === void 0 ? void 0 : (_row$pe2 = row.pe) === null || _row$pe2 === void 0 ? void 0 : _row$pe2.id])) === null || _find === void 0 ? void 0 : _find.lastPeriod;\n      const previousPeriodRow = rows.find(previousRow => {\n        var _previousRow$dx, _row$dx2, _previousRow$ou, _row$ou2, _previousRow$pe;\n        return (previousRow === null || previousRow === void 0 ? void 0 : (_previousRow$dx = previousRow.dx) === null || _previousRow$dx === void 0 ? void 0 : _previousRow$dx.id) === (row === null || row === void 0 ? void 0 : (_row$dx2 = row.dx) === null || _row$dx2 === void 0 ? void 0 : _row$dx2.id) && (previousRow === null || previousRow === void 0 ? void 0 : (_previousRow$ou = previousRow.ou) === null || _previousRow$ou === void 0 ? void 0 : _previousRow$ou.id) === (row === null || row === void 0 ? void 0 : (_row$ou2 = row.ou) === null || _row$ou2 === void 0 ? void 0 : _row$ou2.id) && (previousRow === null || previousRow === void 0 ? void 0 : (_previousRow$pe = previousRow.pe) === null || _previousRow$pe === void 0 ? void 0 : _previousRow$pe.id) === (previousPeriod === null || previousPeriod === void 0 ? void 0 : previousPeriod.id);\n      });\n      this._dataEntities = {\n        ...(this._dataEntities || {}),\n        [dataEntityId]: {\n          current: row.value,\n          previous: previousPeriodRow === null || previousPeriodRow === void 0 ? void 0 : previousPeriodRow.value\n        }\n      };\n      this._dataEntities$.next(this._dataEntities);\n    });\n  }\n  load() {\n    if (this._canLoadData) {\n      this._loading$.next(true);\n      this._cancelled = false;\n      this._progress = 0;\n      this._progress$.next(this._progress);\n      this._getScorecardData({\n        selectedOrgUnits: this._selectedOrgUnits.map(orgUnit => orgUnit === null || orgUnit === void 0 ? void 0 : orgUnit.id),\n        selectedPeriods: this._selectedPeriods.map(period => period === null || period === void 0 ? void 0 : period.id),\n        selectedData: this._selectedData\n      });\n    }\n  }\n  getProgress() {\n    return this._progress$.pipe(map(progress => {\n      return Math.floor(progress / this._totalRequests * 100);\n    }));\n  }\n  isRowEmpty() {\n    let orgUnitId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return this.dataEntities$.pipe(map(dataEntities => {\n      const orgUnitsData = pickBy(dataEntities, (val, key) => key.match(RegExp(orgUnitId)));\n      return isEmpty(orgUnitsData);\n    }));\n  }\n  isDataSourcesRowEmpty() {\n    let dataSources = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    return this.dataEntities$.pipe(map(dataEntities => {\n      const orgUnitsData = pickBy(dataEntities, (_, key) => key.match(RegExp(head(dataSources))) || key.match(RegExp(last(dataSources))));\n      return isEmpty(orgUnitsData);\n    }));\n  }\n  sortOrgUnitsByDataAndPeriod(_ref) {\n    let {\n      dataSource,\n      period,\n      sortType\n    } = _ref;\n    return this.dataEntities$.pipe(take(1), map(dataEntities => {\n      if (sortType === TableSort.DEFAULT) {\n        return [];\n      }\n      const requiredDataEntities = pickBy(dataEntities, (value, key) => {\n        const [dx,, pe] = key.split(\"_\");\n        return dx === dataSource && pe === period;\n      });\n      const sortedOrgUnits = sortBy(toPairs(requiredDataEntities), [value => {\n        var _last;\n        return +((_last = last(value)) === null || _last === void 0 ? void 0 : _last.current);\n      }]);\n      if (sortType === TableSort.DESC) {\n        return sortedOrgUnits.reverse().map(_ref2 => {\n          let [key] = _ref2;\n          return key === null || key === void 0 ? void 0 : key.split(\"_\")[1];\n        });\n      }\n      return sortedOrgUnits.map(_ref3 => {\n        let [key] = _ref3;\n        return key === null || key === void 0 ? void 0 : key.split(\"_\")[1];\n      });\n    }));\n  }\n  sortOrgUnitsByData(_ref4) {\n    let {\n      dataSource,\n      periods = [],\n      sortType\n    } = _ref4;\n    return this.dataEntities$.pipe(take(1), map(dataEntities => {\n      if (sortType === TableSort.DEFAULT) {\n        return [];\n      }\n      const requiredDataEntities = pickBy(dataEntities, (value, key) => {\n        const [dx,, pe] = key.split(\"_\");\n        return dx === dataSource && periods.includes(pe);\n      });\n      const groupedValues = groupBy(toPairs(requiredDataEntities), value => {\n        var _head;\n        return ((_head = head(value)) === null || _head === void 0 ? void 0 : _head.split(\"_\"))[1];\n      });\n      const averageValues = {};\n      forIn(groupedValues, (value, key) => {\n        averageValues[key] = reduce(value, (acc, arr) => {\n          var _last2;\n          return acc + ((_last2 = last(arr)) === null || _last2 === void 0 ? void 0 : _last2.current) / (periods === null || periods === void 0 ? void 0 : periods.length);\n        }, 0);\n      });\n      const sortedValues = sortBy(toPairs(averageValues), [value => last(value)]);\n      if (sortType === TableSort.DESC) {\n        var _sortedValues$map;\n        return sortedValues === null || sortedValues === void 0 ? void 0 : (_sortedValues$map = sortedValues.map(_ref5 => {\n          let [ou] = _ref5;\n          return ou;\n        })) === null || _sortedValues$map === void 0 ? void 0 : _sortedValues$map.reverse();\n      }\n      return sortedValues === null || sortedValues === void 0 ? void 0 : sortedValues.map(_ref6 => {\n        let [ou] = _ref6;\n        return ou;\n      });\n    }));\n  }\n  sortDataSourceByOrgUnitAndPeriod(_ref7) {\n    let {\n      orgUnit,\n      period,\n      sortType\n    } = _ref7;\n    return this.dataEntities$.pipe(take(1), map(dataEntities => {\n      if (sortType === TableSort.DEFAULT) {\n        return [];\n      }\n      const requiredDataEntities = pickBy(dataEntities, (value, key) => {\n        const [, ou, pe] = key.split(\"_\");\n        return ou === orgUnit && pe === period;\n      });\n      const sortedOrgUnits = sortBy(toPairs(requiredDataEntities), [value => {\n        var _last3;\n        return parseInt((_last3 = last(value)) === null || _last3 === void 0 ? void 0 : _last3.current);\n      }]);\n      if (sortType === TableSort.DESC) {\n        return sortedOrgUnits.reverse().map(_ref8 => {\n          let [key] = _ref8;\n          return key === null || key === void 0 ? void 0 : key.split(\"_\")[0];\n        });\n      }\n      return sortedOrgUnits.map(_ref9 => {\n        let [key] = _ref9;\n        return key === null || key === void 0 ? void 0 : key.split(\"_\")[0];\n      });\n    }));\n  }\n  sortDataSourceByOrgUnit(_ref10) {\n    let {\n      periods,\n      orgUnit,\n      sortType\n    } = _ref10;\n    return this.dataEntities$.pipe(take(1), map(dataEntities => {\n      if (sortType === TableSort.DEFAULT) {\n        return [];\n      }\n      const requiredDataEntities = pickBy(dataEntities, (value, key) => {\n        const [, ou, pe] = key.split(\"_\");\n        return ou === orgUnit && periods.includes(pe);\n      });\n      const groupedValues = groupBy(toPairs(requiredDataEntities), value => {\n        var _head2;\n        return ((_head2 = head(value)) === null || _head2 === void 0 ? void 0 : _head2.split(\"_\"))[0];\n      });\n      const averageValues = {};\n      forIn(groupedValues, (value, key) => {\n        averageValues[key] = reduce(value, (acc, arr) => {\n          var _last4;\n          return acc + ((_last4 = last(arr)) === null || _last4 === void 0 ? void 0 : _last4.current) / (periods === null || periods === void 0 ? void 0 : periods.length);\n        }, 0);\n      });\n      const sortedValues = sortBy(toPairs(averageValues), [value => last(value)]);\n      if (sortType === TableSort.DESC) {\n        var _sortedValues$map2;\n        return sortedValues === null || sortedValues === void 0 ? void 0 : (_sortedValues$map2 = sortedValues.map(_ref11 => {\n          let [ou] = _ref11;\n          return ou;\n        })) === null || _sortedValues$map2 === void 0 ? void 0 : _sortedValues$map2.reverse();\n      }\n      return sortedValues === null || sortedValues === void 0 ? void 0 : sortedValues.map(_ref12 => {\n        let [ou] = _ref12;\n        return ou;\n      });\n    }));\n  }\n  getOrgUnitAverage() {\n    let orgUnitId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return this.dataEntities$.pipe(map(dataEntities => {\n      var _compact2;\n      const orgUnitsData = pickBy(dataEntities, (val, key) => {\n        const [, ou, pe] = key.split(\"_\");\n        return ou === orgUnitId && !this._previousPeriods.includes(pe) && !!find(this._selectedPeriods, period => (period === null || period === void 0 ? void 0 : period.id) === pe);\n      });\n      const noOfOrgUnits = Object.keys(orgUnitsData).length;\n      if (((_compact2 = compact(Object.values(orgUnitsData).map(_ref13 => {\n        let {\n          current\n        } = _ref13;\n        return current;\n      }))) === null || _compact2 === void 0 ? void 0 : _compact2.length) === 0) {\n        return undefined;\n      }\n      return reduce(orgUnitsData, (result, value) => {\n        return (result !== null && result !== void 0 ? result : 0) + value.current / noOfOrgUnits;\n      }, 0);\n    }));\n  }\n  getDataSourceAverage() {\n    let dataSources = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    return this.dataEntities$.pipe(map(dataEntities => {\n      const data = {};\n      for (const dataSource of dataSources) {\n        var _compact3;\n        const dataSourcesData = pickBy(dataEntities, (_, key) => {\n          var _this$_selectedOrgUni2;\n          const [dx, ou, pe] = key.split(\"_\");\n          return dataSource === dx && !this._previousPeriods.includes(pe) && !!find(this._selectedPeriods, period => (period === null || period === void 0 ? void 0 : period.id) === pe) && ((_this$_selectedOrgUni2 = this._selectedOrgUnits) === null || _this$_selectedOrgUni2 === void 0 ? void 0 : _this$_selectedOrgUni2.map(orgUnit => orgUnit === null || orgUnit === void 0 ? void 0 : orgUnit.id).includes(ou));\n        });\n        const noOfDataSources = Object.keys(dataSourcesData).length;\n        if (((_compact3 = compact(Object.values(dataSourcesData).map(_ref14 => {\n          let {\n            current\n          } = _ref14;\n          return current;\n        }))) === null || _compact3 === void 0 ? void 0 : _compact3.length) === 0) {\n          data[dataSource] = undefined;\n        } else {\n          data[dataSource] = reduce(dataSourcesData, (result, value) => {\n            return (result !== null && result !== void 0 ? result : 0) + value.current / noOfDataSources;\n          }, 0);\n        }\n      }\n      return data;\n    }));\n  }\n  getOrgUnitColumnAverage(_ref15) {\n    let {\n      period,\n      orgUnit\n    } = _ref15;\n    return this.dataEntities$.pipe(map(dataEntities => {\n      var _compact4;\n      const orgUnitsData = pickBy(dataEntities, (val, key) => {\n        const [, ou, pe] = key.split(\"_\");\n        return ou === orgUnit && pe === period;\n      });\n      const noOfOrgUnits = Object.keys(orgUnitsData).length;\n      if (((_compact4 = compact(Object.values(orgUnitsData).map(_ref16 => {\n        let {\n          current\n        } = _ref16;\n        return current;\n      }))) === null || _compact4 === void 0 ? void 0 : _compact4.length) === 0) {\n        return undefined;\n      }\n      return reduce(orgUnitsData, (result, value) => {\n        return (result !== null && result !== void 0 ? result : 0) + value.current / noOfOrgUnits;\n      }, 0);\n    }));\n  }\n  getDataSourceColumnAverage(_ref17) {\n    let {\n      period,\n      dataSources,\n      orgUnits\n    } = _ref17;\n    return this.dataEntities$.pipe(map(dataEntities => {\n      const data = {};\n      for (const dataSource of dataSources) {\n        var _compact5;\n        const dataSourcesData = pickBy(dataEntities, (val, key) => {\n          const [dx, ou, pe] = key.split(\"_\");\n          return dataSource === dx && pe === period && (orgUnits === null || orgUnits === void 0 ? void 0 : orgUnits.includes(ou));\n        });\n        const noOfDataSources = Object.keys(dataSourcesData).length;\n        if (((_compact5 = compact(Object.values(dataSourcesData).map(_ref18 => {\n          let {\n            current\n          } = _ref18;\n          return current;\n        }))) === null || _compact5 === void 0 ? void 0 : _compact5.length) === 0) {\n          data[dataSource] = undefined;\n        } else {\n          data[dataSource] = reduce(dataSourcesData, (result, value) => {\n            return (result !== null && result !== void 0 ? result : 0) + value.current / noOfDataSources;\n          }, 0);\n        }\n      }\n      return data;\n    }));\n  }\n  getOverallAverage(orgUnits) {\n    return this.dataEntities$.pipe(map(dataEntities => {\n      if (!isEmpty(dataEntities)) {\n        var _compact6;\n        const selectedDataEntities = pickBy(dataEntities, (value, key) => {\n          const [, ou, pe] = key.split(\"_\");\n          return (orgUnits === null || orgUnits === void 0 ? void 0 : orgUnits.includes(ou)) && !this._previousPeriods.includes(pe) && !!find(this._selectedPeriods, period => (period === null || period === void 0 ? void 0 : period.id) === pe);\n        });\n        const noOfDataEntities = Object.keys(selectedDataEntities).length;\n        if (((_compact6 = compact(Object.values(selectedDataEntities).map(_ref19 => {\n          let {\n            current\n          } = _ref19;\n          return current;\n        }))) === null || _compact6 === void 0 ? void 0 : _compact6.length) === 0) {\n          return undefined;\n        }\n        return reduce(selectedDataEntities, (result, value) => {\n          return (result !== null && result !== void 0 ? result : 0) + value.current / noOfDataEntities;\n        }, 0);\n      }\n    }));\n  }\n  getAllOrgUnitData(orgUnits) {\n    return this.dataEntities$.pipe(map(dataEntities => {\n      return pickBy(dataEntities, (value, key) => {\n        const [, ou] = key.split(\"_\");\n        return orgUnits === null || orgUnits === void 0 ? void 0 : orgUnits.includes(ou);\n      });\n    }));\n  }\n  get(id) {\n    return this.dataEntities$.pipe(map(dataEntities => dataEntities ? dataEntities[id] : null));\n  }\n  reset() {\n    let cancel = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    this._totalRequests = 0;\n    this._progress = 0;\n    this._progress$ = new BehaviorSubject();\n    this._loading$ = new BehaviorSubject();\n    this._dataEntities = {};\n    this._dataEntities$ = new BehaviorSubject(this._dataEntities);\n    this.dataEntities$ = this._dataEntities$.asObservable();\n    this._previousPeriods = [];\n    this._dataEntities = {};\n    this._cancelled = cancel;\n  }\n  _getScorecardData(selections) {\n    const {\n      selectedOrgUnits,\n      selectedPeriods,\n      selectedData\n    } = selections;\n    const {\n      normalDataItems,\n      customDataItems\n    } = selectedData;\n    this._getNormalScorecardData({\n      selectedOrgUnits,\n      selectedPeriods,\n      selectedDataItems: normalDataItems\n    });\n    this._getCustomScorecardData({\n      selectedOrgUnits,\n      selectedPeriods,\n      selectedDataItems: customDataItems\n    });\n  }\n  _getAnalyticsData(selections) {\n    if (!this._cancelled) {\n      var _dx, _ou, _pe, _ou2, _pe2;\n      let dx = [];\n      let ou = [];\n      let pe = [];\n      (selections || []).forEach(selection => {\n        const availableData = this._dataEntities[`${selection.dx}_${selection.ou}_${selection.pe}`];\n        if (!availableData) {\n          dx = [...dx, selection.dx];\n          ou = [...ou, selection.ou];\n          pe = [...pe, selection.pe];\n        }\n      });\n      dx = uniq(dx);\n      ou = uniq(ou);\n      pe = uniq(pe);\n      if (((_dx = dx) === null || _dx === void 0 ? void 0 : _dx.length) === 0 && ((_ou = ou) === null || _ou === void 0 ? void 0 : _ou.length) === 0 && ((_pe = pe) === null || _pe === void 0 ? void 0 : _pe.length) === 0) {\n        return of(null).toPromise();\n      }\n      return new Fn.Analytics().setOrgUnit((_ou2 = ou) === null || _ou2 === void 0 ? void 0 : _ou2.join(\";\")).setPeriod((_pe2 = pe) === null || _pe2 === void 0 ? void 0 : _pe2.join(\";\")).setData(dx.join(\";\")).postProcess(analytics => {\n        this._updateDataEntities(analytics === null || analytics === void 0 ? void 0 : analytics.rows);\n      }).get();\n    }\n    return of(null).toPromise();\n  }\n  _getCustomAnalyticsData(selections) {\n    if (!this._cancelled) {\n      var _dx2, _ou3, _pe3;\n      let dx = [];\n      let ou = [];\n      let pe = [];\n      (selections || []).forEach(selection => {\n        const availableData = this._dataEntities[`${selection.dx}_${selection.ou}_${selection.pe}`];\n        if (!availableData) {\n          dx = [...dx, selection.dx];\n          ou = [...ou, selection.ou];\n          pe = [...pe, selection.pe];\n        }\n      });\n      dx = uniq(dx);\n      ou = uniq(ou);\n      pe = uniq(pe);\n      if (((_dx2 = dx) === null || _dx2 === void 0 ? void 0 : _dx2.length) === 0 && ((_ou3 = ou) === null || _ou3 === void 0 ? void 0 : _ou3.length) === 0 && ((_pe3 = pe) === null || _pe3 === void 0 ? void 0 : _pe3.length) === 0) {\n        return of(null).toPromise();\n      }\n      return getCustomFunctionAnalytics(this.engine, {\n        functions: dx,\n        orgUnits: ou,\n        periods: pe\n      });\n    }\n    return of(null).toPromise();\n  }\n  _getNormalScorecardData(selections) {\n    var _selectionList;\n    const {\n      selectedOrgUnits,\n      selectedPeriods,\n      selectedDataItems\n    } = selections !== null && selections !== void 0 ? selections : {};\n    let selectionList = [];\n    selectedOrgUnits.forEach(orgUnit => {\n      const dataItemList = chunk(selectedDataItems.map(dataItem => {\n        return selectedPeriods.map(period => {\n          return {\n            dx: dataItem.id,\n            ou: orgUnit,\n            pe: period\n          };\n        });\n      }), 2);\n      dataItemList.forEach(selectedDataList => {\n        selectionList = [...selectionList, flatten(selectedDataList)];\n      });\n    });\n    this._totalRequests = (_selectionList = selectionList) === null || _selectionList === void 0 ? void 0 : _selectionList.length;\n    mapLimit(selectionList, 10, (selection, callback) => {\n      this._getAnalyticsData(selection).then(result => {\n        this._progress = this._progress + 1;\n        this._progress$.next(this._progress);\n        callback(null, result);\n      }).catch(error => {\n        callback(error, null);\n      });\n    }, (totalErr, totalRes) => {\n      this._loading$.next(false);\n    });\n  }\n  _getCustomScorecardData(selections) {\n    window.$ = $;\n    const {\n      selectedOrgUnits,\n      selectedPeriods,\n      selectedDataItems\n    } = selections !== null && selections !== void 0 ? selections : {};\n    if ((selectedDataItems === null || selectedDataItems === void 0 ? void 0 : selectedDataItems.length) === 0) {\n      return new Promise(resolve => resolve(null));\n    }\n    let selectionList = [];\n    selectedOrgUnits.forEach(orgUnit => {\n      const dataItemList = chunk(selectedDataItems.map(dataItem => {\n        return selectedPeriods.map(period => {\n          return {\n            dx: dataItem.id,\n            ou: orgUnit,\n            pe: period\n          };\n        });\n      }), 2);\n      dataItemList.forEach(selectedDataList => {\n        selectionList = [...selectionList, flatten(selectedDataList)];\n      });\n    });\n    mapLimit(selectionList, 10, (selection, callback) => {\n      this._getCustomAnalyticsData(selection).then(result => {\n        var _result$rows$map, _result$rows;\n        this._updateDataEntities((_result$rows$map = result === null || result === void 0 ? void 0 : (_result$rows = result.rows) === null || _result$rows === void 0 ? void 0 : _result$rows.map(_ref20 => {\n          let [dx, pe, ou, value] = _ref20;\n          return fromPairs([[\"dx\", {\n            id: dx\n          }], [\"pe\", {\n            id: pe\n          }], [\"ou\", {\n            id: ou\n          }], [\"value\", `${value}`]]);\n        })) !== null && _result$rows$map !== void 0 ? _result$rows$map : []);\n        this._progress = this._progress + 1;\n        this._progress$.next(this._progress);\n        callback(null, result);\n      }).catch(error => {\n        callback(error, null);\n      });\n    });\n  }\n  _getSelectedPeriods(periods, periodType) {\n    if ((periods === null || periods === void 0 ? void 0 : periods.length) > 0) {\n      return periods;\n    }\n    try {\n      var _Period, _Period$setPreference, _Period$setPreference2;\n      const periods = (_Period = new Period()) === null || _Period === void 0 ? void 0 : (_Period$setPreference = _Period.setPreferences({\n        allowFuturePeriods: true\n      }).setType(periodType)) === null || _Period$setPreference === void 0 ? void 0 : (_Period$setPreference2 = _Period$setPreference.get()) === null || _Period$setPreference2 === void 0 ? void 0 : _Period$setPreference2.list();\n      const currentPeriod = periods ? periods[0] : null;\n      return [currentPeriod, ...(currentPeriod !== null && currentPeriod !== void 0 && currentPeriod.lastPeriod ? [currentPeriod === null || currentPeriod === void 0 ? void 0 : currentPeriod.lastPeriod] : [])];\n    } catch (e) {\n      console.warn(e);\n      return null;\n    }\n  }\n  _getSelectedData(dataGroups) {\n    const selectedItems = flatten((dataGroups || []).map(dataGroup => flatten(((dataGroup === null || dataGroup === void 0 ? void 0 : dataGroup.dataHolders) || []).map(dataHolder => dataHolder.dataSources))));\n    return {\n      normalDataItems: selectedItems.filter(selectedItem => selectedItem.type !== \"customFunction\"),\n      customDataItems: selectedItems.filter(selectedItem => selectedItem.type === \"customFunction\")\n    };\n  }\n}","import DataModel from \"./base\";\nimport { uid } from \"../utils\";\nexport default class ScorecardIndicator extends DataModel {\n  get defaults() {\n    return {\n      id: uid(),\n      type: \"\",\n      label: \"\",\n      name: \"\",\n      weight: 100,\n      effectiveGap: 5,\n      displayArrows: true,\n      highIsGood: true,\n      showColors: true,\n      legends: [],\n      specificTargets: [],\n      specificTargetsSet: false\n    };\n  }\n}","import DataModel from \"./base\";\nimport ScorecardIndicator from \"./scorecardIndicator\";\nimport { uid } from \"../utils\";\nexport default class ScorecardIndicatorHolder extends DataModel {\n  constructor(attributes) {\n    super(attributes);\n  }\n  get defaults() {\n    return {\n      id: uid(),\n      dataSources: []\n    };\n  }\n  static linkDataSource() {\n    let holder = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new ScorecardIndicatorHolder();\n    let scorecardIndicator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new ScorecardIndicator();\n    return ScorecardIndicatorHolder.set(holder, \"dataSources\", [...holder.dataSources, scorecardIndicator]);\n  }\n}","import DataModel from \"./base\";\nimport { uid } from \"../utils\";\nexport default class ScorecardLegend extends DataModel {\n  get defaults() {\n    return {\n      id: uid(),\n      legendDefinitionId: \"\",\n      startValue: null,\n      endValue: null\n    };\n  }\n}","import DataModel from \"./base\";\nimport { uid } from \"../utils\";\nexport default class ScorecardIndicatorGroup extends DataModel {\n  constructor(attributes) {\n    super(attributes);\n  }\n  get defaults() {\n    return {\n      id: uid(),\n      title: \"\",\n      dataHolders: [],\n      style: {\n        backgroundColor: \"#FFFFFF\",\n        color: \"#000000\"\n      }\n    };\n  }\n}","const generateCustomFunctionQuery = function () {\n  let keys = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  const query = {};\n  for (const key of keys) {\n    query[key] = {\n      resource: `dataStore/functions/${key}`\n    };\n  }\n  return query;\n};\nexport default async function getCustomFunctions() {\n  let keys = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let engine = arguments.length > 1 ? arguments[1] : undefined;\n  const query = generateCustomFunctionQuery(keys);\n  return await engine.query(query);\n}","import { Fn } from \"@iapps/function-analytics\";\nimport { Period } from \"@iapps/period-utilities\";\nimport { uniq } from \"lodash\";\nexport default async function getScorecardCellData(_ref) {\n  let {\n    orgUnit,\n    periods,\n    dataSources\n  } = _ref;\n  try {\n    const previousPeriods = periods === null || periods === void 0 ? void 0 : periods.map(id => {\n      var _period$lastPeriod;\n      const period = new Period().setPreferences({\n        allowFuturePeriods: true\n      }).getById(id);\n      return period === null || period === void 0 ? void 0 : (_period$lastPeriod = period.lastPeriod) === null || _period$lastPeriod === void 0 ? void 0 : _period$lastPeriod.id;\n    });\n    const allPeriods = uniq([...periods, ...previousPeriods]);\n    return await new Fn.Analytics().setOrgUnit(orgUnit).setPeriod(allPeriods === null || allPeriods === void 0 ? void 0 : allPeriods.join(\";\")).setData(dataSources.join(\";\")).get();\n  } catch (e) {\n    console.error(e);\n  }\n}\nexport async function getHighlightedIndicatorsData(_ref2) {\n  let {\n    orgUnits,\n    periods,\n    highlightedIndicators\n  } = _ref2;\n  try {\n    return await new Fn.Analytics().setOrgUnit(orgUnits === null || orgUnits === void 0 ? void 0 : orgUnits.join(\";\")).setPeriod(periods === null || periods === void 0 ? void 0 : periods.join(\";\")).setData(highlightedIndicators === null || highlightedIndicators === void 0 ? void 0 : highlightedIndicators.join(\";\")).get();\n  } catch (e) {\n    console.error(e);\n  }\n}","import { Fn } from \"@iapps/function-analytics\";\nimport { Period } from \"@iapps/period-utilities\";\nimport { flatten } from \"lodash\";\nexport default async function getScorecardData(scorecard) {\n  const selectedOrgUnits = _getSelectedOrgUnits(scorecard.orgUnitSelection);\n  const {\n    currentPeriods,\n    previousPeriods\n  } = _getSelectedPeriods(scorecard.periodSelection, scorecard.periodType);\n  const selectedData = _getSelectedData(scorecard.dataSelection);\n  return Promise.all([_getScorecardData({\n    selectedOrgUnits,\n    selectedPeriods: currentPeriods,\n    selectedData\n  }), _getScorecardData({\n    selectedOrgUnits,\n    selectedPeriods: previousPeriods,\n    selectedData\n  })]);\n}\nfunction _getScorecardData(selections) {\n  const {\n    selectedOrgUnits,\n    selectedPeriods,\n    selectedData\n  } = selections;\n  const {\n    normalDataItems,\n    customDataItems\n  } = selectedData;\n  return new Promise((resolve, reject) => {\n    Promise.all([_getNormalScorecardData({\n      selectedOrgUnits,\n      selectedPeriods,\n      selectedDataItems: normalDataItems\n    }), _getCustomScorecardData({\n      selectedOrgUnits,\n      selectedPeriods,\n      selectedDataItems: customDataItems\n    })]).then(res => {\n      resolve(res);\n    }).catch(error => {\n      reject(error);\n    });\n  });\n}\nfunction _getNormalScorecardData(selections) {\n  const {\n    selectedOrgUnits,\n    selectedPeriods,\n    selectedDataItems\n  } = selections;\n  return new Fn.Analytics().setOrgUnit(selectedOrgUnits === null || selectedOrgUnits === void 0 ? void 0 : selectedOrgUnits.join(\";\")).setPeriod(selectedPeriods === null || selectedPeriods === void 0 ? void 0 : selectedPeriods.join(\";\")).setData(selectedDataItems.map(dataItem => dataItem.id).join(\";\")).get();\n}\nfunction _getCustomScorecardData(selections) {\n  const {\n    selectedOrgUnits,\n    selectedPeriods,\n    selectedDataItems\n  } = selections;\n  if ((selectedDataItems === null || selectedDataItems === void 0 ? void 0 : selectedDataItems.length) === 0) {\n    return new Promise(resolve => resolve(null));\n  }\n\n  // TODO Add implementation when there is custom indicator\n  new Promise(resolve => resolve(null));\n}\n\n// TODO Derive selected period from period selection if supplied\nfunction _getSelectedPeriods(periodSelection, periodType) {\n  try {\n    var _Period$setPreference, _Period$setPreference2, _Period$setPreference3, _currentPeriod$lastPe;\n    const periods = (_Period$setPreference = new Period().setPreferences({\n      allowFuturePeriods: true\n    })) === null || _Period$setPreference === void 0 ? void 0 : (_Period$setPreference2 = _Period$setPreference.setType(periodType)) === null || _Period$setPreference2 === void 0 ? void 0 : (_Period$setPreference3 = _Period$setPreference2.get()) === null || _Period$setPreference3 === void 0 ? void 0 : _Period$setPreference3.list();\n    const currentPeriod = periods ? periods[0] : null;\n    return {\n      currentPeriods: currentPeriod ? [currentPeriod.id] : [],\n      previousPeriods: currentPeriod !== null && currentPeriod !== void 0 && currentPeriod.lastPeriod ? [(_currentPeriod$lastPe = currentPeriod.lastPeriod) === null || _currentPeriod$lastPe === void 0 ? void 0 : _currentPeriod$lastPe.id] : []\n    };\n  } catch (e) {\n    console.warn(e);\n    return null;\n  }\n}\nfunction _getSelectedOrgUnits(orgUnitSelection) {\n  var _orgUnitSelection$org;\n  let orgUnitString = [];\n  if (orgUnitSelection.userOrgUnit) {\n    orgUnitString = [\"USER_ORGUNIT\"];\n  }\n  if (orgUnitSelection.userSubUnit) {\n    orgUnitString = [...orgUnitString, \"USER_ORGUNIT_CHILDREN\"];\n  }\n  if (orgUnitSelection.userSubX2Unit) {\n    orgUnitString = [...orgUnitString, \"USER_ORGUNIT_GRANDCHILDREN\"];\n  }\n  if ((orgUnitSelection === null || orgUnitSelection === void 0 ? void 0 : (_orgUnitSelection$org = orgUnitSelection.orgUnitIds) === null || _orgUnitSelection$org === void 0 ? void 0 : _orgUnitSelection$org.length) > 0) {\n    orgUnitString = orgUnitSelection === null || orgUnitSelection === void 0 ? void 0 : orgUnitSelection.orgUnitIds;\n  }\n  return orgUnitString;\n}\nfunction _getSelectedData(dataSelection) {\n  const selectedItems = flatten(dataSelection === null || dataSelection === void 0 ? void 0 : dataSelection.dataGroups.map(dataGroup => flatten(((dataGroup === null || dataGroup === void 0 ? void 0 : dataGroup.dataHolders) || []).map(dataHolder => dataHolder.dataSources))));\n  return {\n    normalDataItems: selectedItems.filter(selectedItem => selectedItem.type !== \"functionRule\"),\n    customDataItems: selectedItems.filter(selectedItem => selectedItem.type === \"functionRule\")\n  };\n}","import { omitBy } from \"lodash\";\nexport function getOrgUnitsFromAnalytics(analytics) {\n  var _dimensions$ou;\n  const {\n    metaData\n  } = analytics !== null && analytics !== void 0 ? analytics : {};\n  const {\n    ouHierarchy,\n    items,\n    ouNameHierarchy,\n    dimensions\n  } = metaData !== null && metaData !== void 0 ? metaData : {};\n  const cleanedOuHierarchy = omitBy(ouHierarchy, ou => !ou);\n  return dimensions === null || dimensions === void 0 ? void 0 : (_dimensions$ou = dimensions.ou) === null || _dimensions$ou === void 0 ? void 0 : _dimensions$ou.map(ou => {\n    var _cleanedOuHierarchy$o, _items$ou, _cleanedOuHierarchy$o2, _cleanedOuHierarchy$o3, _cleanedOuHierarchy$o4, _ouNameHierarchy$ou;\n    const path = `${(_cleanedOuHierarchy$o = cleanedOuHierarchy === null || cleanedOuHierarchy === void 0 ? void 0 : cleanedOuHierarchy[ou]) !== null && _cleanedOuHierarchy$o !== void 0 ? _cleanedOuHierarchy$o : \"\"}/${ou}`;\n    return {\n      id: ou,\n      displayName: items === null || items === void 0 ? void 0 : (_items$ou = items[ou]) === null || _items$ou === void 0 ? void 0 : _items$ou.name,\n      path: path.startsWith(\"/\") ? path : `/${path}`,\n      level: ((_cleanedOuHierarchy$o2 = cleanedOuHierarchy === null || cleanedOuHierarchy === void 0 ? void 0 : (_cleanedOuHierarchy$o3 = cleanedOuHierarchy[ou]) === null || _cleanedOuHierarchy$o3 === void 0 ? void 0 : (_cleanedOuHierarchy$o4 = _cleanedOuHierarchy$o3.split(\"/\")) === null || _cleanedOuHierarchy$o4 === void 0 ? void 0 : _cleanedOuHierarchy$o4.length) !== null && _cleanedOuHierarchy$o2 !== void 0 ? _cleanedOuHierarchy$o2 : 0) + 1,\n      hierarchy: ouNameHierarchy === null || ouNameHierarchy === void 0 ? void 0 : (_ouNameHierarchy$ou = ouNameHierarchy[ou]) === null || _ouNameHierarchy$ou === void 0 ? void 0 : _ouNameHierarchy$ou.replace(\"/\", \"\")\n    };\n  });\n}\nexport function isOrgUnitId(id) {\n  return !id.match(/(LEVEL-)|(USER_)|(OU_GROUP-)\\w+/);\n}","const systemSettingsKeys = [\"keyCalendar\"];\nconst systemSettingsQuery = {\n  system: {\n    resource: \"systemSettings\",\n    params: _ref => {\n      let {\n        keys\n      } = _ref;\n      return {\n        keys: keys === null || keys === void 0 ? void 0 : keys.map(key => `key=${key}`)\n      };\n    }\n  }\n};\nexport default async function getSystemSettings(engine) {\n  const {\n    system\n  } = await engine.query(systemSettingsQuery, {\n    variables: {\n      keys: systemSettingsKeys\n    }\n  });\n  const {\n    keyCalendar\n  } = system !== null && system !== void 0 ? system : {};\n  return {\n    calendar: keyCalendar\n  };\n}","import { compact } from \"lodash\";\nimport { DATASTORE_ENDPOINT } from \"../constants\";\nimport { OrgUnitSelection } from \"../models\";\nconst query = {\n  scorecard: {\n    resource: DATASTORE_ENDPOINT,\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    }\n  }\n};\nexport default async function getScorecard() {\n  let id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  let engine = arguments.length > 1 ? arguments[1] : undefined;\n  if (id) {\n    try {\n      const response = await engine.query(query, {\n        variables: {\n          id\n        }\n      });\n      const sanitizedScorecard = sanitizeDataSelection(response === null || response === void 0 ? void 0 : response.scorecard);\n      return {\n        scorecard: sanitizedScorecard\n      };\n    } catch (e) {\n      return {\n        error: e\n      };\n    }\n  }\n  return {\n    error: \"not found\"\n  };\n}\nfunction sanitizeDataSelection(scorecard) {\n  var _scorecard$dataSelect;\n  const {\n    dataGroups\n  } = (_scorecard$dataSelect = scorecard['dataSelection']) !== null && _scorecard$dataSelect !== void 0 ? _scorecard$dataSelect : {};\n  const sanitizedGroups = dataGroups.map(group => ({\n    ...group,\n    dataHolders: compact(group === null || group === void 0 ? void 0 : group.dataHolders)\n  }));\n  return {\n    ...scorecard,\n    dataSelection: {\n      dataGroups: sanitizedGroups\n    }\n  };\n}\nconst orgUnitQuery = {\n  orgUnits: {\n    resource: \"organisationUnits\",\n    params: _ref2 => {\n      let {\n        orgUnits\n      } = _ref2;\n      return {\n        filter: [`id:in:[${orgUnits === null || orgUnits === void 0 ? void 0 : orgUnits.join(\",\")}]`],\n        fields: [\"path\", \"displayName\", \"level\", \"id\"]\n      };\n    }\n  }\n};\nexport async function getOrgUnitSelection(_ref3, engine) {\n  var _orgUnitsIds$map;\n  let {\n    orgUnitSelection\n  } = _ref3;\n  const {\n    orgUnits: orgUnitsIds\n  } = orgUnitSelection !== null && orgUnitSelection !== void 0 ? orgUnitSelection : {};\n  const {\n    orgUnits: resolvedOrgUnits\n  } = await engine.query(orgUnitQuery, {\n    variables: {\n      orgUnits: (_orgUnitsIds$map = orgUnitsIds === null || orgUnitsIds === void 0 ? void 0 : orgUnitsIds.map(_ref4 => {\n        let {\n          id\n        } = _ref4;\n        return id;\n      })) !== null && _orgUnitsIds$map !== void 0 ? _orgUnitsIds$map : []\n    }\n  });\n  return new OrgUnitSelection({\n    ...orgUnitSelection,\n    orgUnits: resolvedOrgUnits === null || resolvedOrgUnits === void 0 ? void 0 : resolvedOrgUnits.organisationUnits\n  });\n}","import { compact, filter, isEmpty } from \"lodash\";\nimport { DATASTORE_ENDPOINT, DATASTORE_SCORECARD_SUMMARY_KEY } from \"../constants\";\nimport { generateScorecardSummary } from \"../utils\";\nconst query = {\n  summary: {\n    resource: DATASTORE_ENDPOINT,\n    id: DATASTORE_SCORECARD_SUMMARY_KEY\n  }\n};\nconst addMutation = {\n  type: \"create\",\n  resource: `${DATASTORE_ENDPOINT}/${DATASTORE_SCORECARD_SUMMARY_KEY}`,\n  data: _ref => {\n    let {\n      data\n    } = _ref;\n    return data;\n  }\n};\nasync function initializeKey(engine) {\n  return await engine.mutate(addMutation, {\n    variables: {\n      data: []\n    }\n  });\n}\nexport default async function getScorecardSummary(engine) {\n  try {\n    const response = await engine.query(query);\n    return {\n      summary: response === null || response === void 0 ? void 0 : response.summary\n    };\n  } catch (e) {\n    var _e$details;\n    if ((e === null || e === void 0 ? void 0 : (_e$details = e.details) === null || _e$details === void 0 ? void 0 : _e$details.httpStatusCode) === 404) {\n      await initializeKey(engine);\n      return getScorecardSummary(engine);\n    }\n    return {\n      error: e\n    };\n  }\n}\nconst restoreQuery = {\n  scorecards: {\n    resource: DATASTORE_ENDPOINT\n  }\n};\nconst restoreMutation = {\n  type: \"update\",\n  resource: DATASTORE_ENDPOINT,\n  id: DATASTORE_SCORECARD_SUMMARY_KEY,\n  data: _ref2 => {\n    let {\n      data\n    } = _ref2;\n    return data;\n  }\n};\nconst singleScorecardQuery = {\n  scorecard: {\n    resource: DATASTORE_ENDPOINT,\n    id: _ref3 => {\n      let {\n        id\n      } = _ref3;\n      return id;\n    }\n  }\n};\nexport const restoreScorecardSummary = async engine => {\n  const {\n    summary,\n    error\n  } = await getScorecardSummary(engine);\n  if (!error) {\n    const {\n      scorecards: allKeys\n    } = await engine.query(restoreQuery);\n    const scorecards = filter(allKeys, key => key !== \"settings\" && key !== \"savedObjects\");\n    if (!isEmpty(scorecards)) {\n      const scorecardsToRestore = filter(scorecards, key => {\n        var _summary$map;\n        return !(summary !== null && summary !== void 0 && (_summary$map = summary.map(_ref4 => {\n          let {\n            id\n          } = _ref4;\n          return id;\n        })) !== null && _summary$map !== void 0 && _summary$map.includes(key));\n      });\n      if (!isEmpty(scorecardsToRestore)) {\n        const updatedSummary = [...summary];\n        for (const scorecardId of scorecardsToRestore) {\n          const {\n            scorecard\n          } = await engine.query(singleScorecardQuery, {\n            variables: {\n              id: scorecardId\n            }\n          });\n          const scorecardSummary = generateScorecardSummary(scorecard);\n          updatedSummary.push(scorecardSummary);\n        }\n        await engine.mutate(restoreMutation, {\n          variables: {\n            data: updatedSummary.filter(summary => !isEmpty(compact(Object.values(summary))))\n          }\n        });\n      }\n    }\n  }\n};","import { atom } from \"recoil\";\nexport const EngineState = atom({\n  key: \"engineState\",\n  default: {}\n});","import { atom, selector } from \"recoil\";\nimport { EngineState } from \"./engine\";\nconst systemSettingsKeys = [\"keyCalendar\"];\nconst systemSettingsQuery = {\n  system: {\n    resource: \"systemSettings\",\n    params: _ref => {\n      let {\n        keys\n      } = _ref;\n      return {\n        keys: keys === null || keys === void 0 ? void 0 : keys.map(key => `key=${key}`)\n      };\n    }\n  }\n};\nexport const SystemSettingsState = atom({\n  key: \"system-settings-state\",\n  default: selector({\n    key: \"system-settings-selector\",\n    get: async _ref2 => {\n      let {\n        get\n      } = _ref2;\n      const engine = get(EngineState);\n      const {\n        system\n      } = await engine.query(systemSettingsQuery, {\n        variables: {\n          keys: systemSettingsKeys\n        }\n      });\n      const {\n        keyCalendar\n      } = system !== null && system !== void 0 ? system : {};\n      return {\n        calendar: keyCalendar\n      };\n    }\n  })\n});","import { find } from \"lodash\";\nimport { atom, selector, selectorFamily } from \"recoil\";\nimport { EngineState } from \"./engine\";\nimport { ScorecardSummaryState } from \"./scorecard\";\nimport { DefaultAuthority } from \"../constants\";\nimport { getUserAuthority } from \"../utils\";\nconst userQuery = {\n  user: {\n    resource: \"me\",\n    params: {\n      fields: [\"id\", \"displayName\", \"userGroups\", \"authorities\", \"organisationUnits[id,level,displayName]\"]\n    }\n  }\n};\nexport const UserState = atom({\n  key: \"userState\",\n  default: selector({\n    key: \"userStateSelector\",\n    get: async _ref => {\n      let {\n        get\n      } = _ref;\n      try {\n        const engine = get(EngineState);\n        if (engine) {\n          const {\n            user\n          } = await engine.query(userQuery);\n          if (user) {\n            return user;\n          }\n          return null;\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    }\n  })\n});\nexport const UserAuthorityOnScorecard = selectorFamily({\n  key: \"user-scorecard-authority\",\n  get: scorecardId => _ref2 => {\n    var _getUserAuthority;\n    let {\n      get\n    } = _ref2;\n    const scorecardSummary = find(get(ScorecardSummaryState), [\"id\", scorecardId]);\n    const user = get(UserState);\n    return (_getUserAuthority = getUserAuthority(user, scorecardSummary)) !== null && _getUserAuthority !== void 0 ? _getUserAuthority : DefaultAuthority;\n  }\n});","import { atom } from \"recoil\";\nimport { getWindowDimensions } from \"../utils\";\nconst ScreenDimensionState = atom({\n  key: \"screen-dimensions\",\n  default: {},\n  effects_UNSTABLE: [_ref => {\n    let {\n      setSelf\n    } = _ref;\n    function handleResize() {\n      setSelf(getWindowDimensions());\n    }\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }]\n});\nexport { ScreenDimensionState };","import i18n from \"@dhis2/d2-i18n\";\nimport { Period } from \"@iapps/period-utilities\";\nimport { cloneDeep, filter, get as _get, head, isEmpty, set as _set, some } from \"lodash\";\nimport { atom, atomFamily, selector, selectorFamily } from \"recoil\";\nimport { OrgUnitChildren, SelectedOrgUnits } from \"./orgUnit\";\nimport { EngineState } from \"./engine\";\nimport { PeriodResolverState } from \"./period\";\nimport { SystemSettingsState } from \"./system\";\nimport { UserState } from \"./user\";\nimport { ScreenDimensionState } from \"./window\";\nimport { OrgUnitSelection, Scorecard, ScorecardAccess, ScorecardOptions } from \"../models\";\nimport { Orientation, ScorecardAccessType, TableSort } from \"../constants\";\nimport { getOrgUnitSelection, getScorecard, getScorecardSummary, isOrgUnitId, restoreScorecardSummary } from \"../services\";\nimport { getColSpanDataGroups, getColSpanWithOrgUnit, getDataSourcesFromGroups, getHoldersFromGroups, getNameCellWidth, getTableWidthWithDataGroups, getTableWidthWithOrgUnit, getUserAuthority, uid } from \"../utils\";\nconst defaultValue = {\n  legendDefinitions: [{\n    color: \"#D3D3D3\",\n    name: i18n.t(\"N/A\"),\n    isDefault: true,\n    id: \"N/A\"\n  }, {\n    color: \"#FFFFFF\",\n    name: i18n.t(\"No Data\"),\n    isDefault: true,\n    id: \"No Data\"\n  }, {\n    id: uid(),\n    color: \"#008000\",\n    name: i18n.t(\"Target Reached/ On Track\")\n  }, {\n    id: uid(),\n    color: \"#FFFF00\",\n    name: i18n.t(\"Progress, but more effort required\")\n  }, {\n    id: uid(),\n    color: \"#FF0000\",\n    name: i18n.t(\"Not on track\")\n  }],\n  options: new ScorecardOptions(),\n  publicAccess: new ScorecardAccess({\n    id: \"public\",\n    type: \"public\",\n    access: ScorecardAccessType.NO_ACCESS,\n    displayName: \"Public\"\n  }),\n  orgUnitSelection: new OrgUnitSelection(),\n  userGroupAccesses: [],\n  userAccesses: [],\n  highlightedIndicators: []\n};\nconst ScorecardIdState = atom({\n  key: \"scorecard-id\",\n  default: null\n});\nconst AllScorecardsSummaryState = selector({\n  key: \"all-scorecard-summary-state\",\n  get: async _ref => {\n    let {\n      get\n    } = _ref;\n    const engine = get(EngineState);\n    await restoreScorecardSummary(engine);\n    const {\n      summary,\n      error\n    } = await getScorecardSummary(engine);\n    if (error) {\n      throw error;\n    }\n    return summary;\n  }\n});\nconst ScorecardSummaryState = atom({\n  key: \"scorecard-summary\",\n  default: selector({\n    key: \"scorecard-summary-selector\",\n    get: async _ref2 => {\n      let {\n        get\n      } = _ref2;\n      const summary = get(AllScorecardsSummaryState);\n      const user = get(UserState);\n      return filter(summary, scorecardSummary => {\n        var _getUserAuthority;\n        const {\n          read\n        } = (_getUserAuthority = getUserAuthority(user, scorecardSummary)) !== null && _getUserAuthority !== void 0 ? _getUserAuthority : {};\n        return read;\n      });\n    }\n  })\n});\n//This is to force a data re-fetch when a scorecard is updated\nconst ScorecardRequestId = atomFamily({\n  key: \"scorecardForceUpdateState\",\n  default: 0\n});\nconst IsNewScorecardState = atom({\n  key: \"isNewScorecard\",\n  default: undefined\n});\nconst ScorecardConfState = atomFamily({\n  key: \"scorecard-config\",\n  default: selectorFamily({\n    key: \"active-scorecard-config\",\n    get: scorecardId => async _ref3 => {\n      let {\n        get\n      } = _ref3;\n      const engine = get(EngineState);\n      get(ScorecardRequestId(scorecardId));\n      if (scorecardId) {\n        const {\n          scorecard,\n          error\n        } = await getScorecard(scorecardId, engine);\n        if (error) {\n          var _error$details;\n          if ((error === null || error === void 0 ? void 0 : (_error$details = error.details) === null || _error$details === void 0 ? void 0 : _error$details.httpStatusCode) === 404) {\n            throw {\n              ...error,\n              title: i18n.t(\"Scorecard Not Found\"),\n              message: i18n.t(`Scorecard with id ${scorecardId} could not be found.`)\n            };\n          }\n          throw error;\n        }\n        const orgUnitSelection = await getOrgUnitSelection(scorecard, engine);\n        return {\n          ...scorecard,\n          orgUnitSelection\n        };\n      }\n      return new Scorecard(defaultValue);\n    }\n  })\n});\nconst ScorecardConfigDirtyState = atomFamily({\n  key: \"scorecard-config-edit-state\",\n  default: selectorFamily({\n    key: \"scorecard-state-default\",\n    get: path => async _ref4 => {\n      let {\n        get\n      } = _ref4;\n      const scorecardId = get(ScorecardIdState);\n      if (!isEmpty(scorecardId)) {\n        return _get(get(ScorecardConfState(scorecardId)), path);\n      }\n      return _get(new Scorecard(defaultValue), path);\n    }\n  })\n});\nconst ScorecardConfigDirtySelector = selectorFamily({\n  key: \"scorecard-dirty-state-selector\",\n  get: _ref5 => {\n    let {\n      key,\n      path\n    } = _ref5;\n    return _ref6 => {\n      let {\n        get\n      } = _ref6;\n      return _get(get(ScorecardConfigDirtyState(key)), path);\n    };\n  },\n  set: _ref7 => {\n    let {\n      key,\n      path\n    } = _ref7;\n    return (_ref8, newValue) => {\n      let {\n        get,\n        set\n      } = _ref8;\n      const object = get(ScorecardConfigDirtyState(key));\n      const newObject = _set(cloneDeep(object), path, newValue);\n      set(ScorecardConfigDirtyState(key), newObject);\n    };\n  }\n});\nconst ScorecardConfigErrorState = atom({\n  key: \"scorecard-config-error-state\",\n  default: {}\n});\nconst ScorecardConfigErrorSelector = selectorFamily({\n  key: \"scorecard-config-error-selector\",\n  get: path => _ref9 => {\n    let {\n      get\n    } = _ref9;\n    return _get(get(ScorecardConfigErrorState), path);\n  },\n  set: path => (_ref10, newValue) => {\n    let {\n      set\n    } = _ref10;\n    set(ScorecardConfigErrorState, prevValue => _set(prevValue, path, newValue));\n  }\n});\nconst ScorecardConfigEditState = atom({\n  key: \"scorecard-edit-state\",\n  default: {}\n});\nconst RefreshScorecardState = atom({\n  key: \"refresh-scorecard\",\n  default: 0\n});\nconst ScorecardNameSort = atomFamily({\n  key: \"scorecard-name-sort\",\n  default: {\n    orgUnit: TableSort.DEFAULT,\n    data: TableSort.DEFAULT\n  }\n});\nconst ScorecardViewState = atomFamily({\n  key: \"scorecard-view-config\",\n  default: selectorFamily({\n    key: \"scorecardViewStateSelector\",\n    get: key => _ref11 => {\n      var _currentPeriod$get, _currentPeriod$get2;\n      let {\n        get\n      } = _ref11;\n      const scorecardId = get(ScorecardIdState);\n      const {\n        calendar\n      } = get(SystemSettingsState);\n      const configState = get(ScorecardConfState(scorecardId));\n      if (key === \"periodSelection\") {\n        var _configState$periodSe;\n        if (isEmpty(configState === null || configState === void 0 ? void 0 : (_configState$periodSe = configState.periodSelection) === null || _configState$periodSe === void 0 ? void 0 : _configState$periodSe.periods)) {\n          const {\n            periodType\n          } = configState;\n          const currentPeriod = new Period().setCalendar(calendar).setPreferences({\n            allowFuturePeriods: true\n          });\n          if (periodType) {\n            currentPeriod.setType(periodType);\n            switch (periodType) {\n              case \"Yearly\":\n                return {\n                  periods: [currentPeriod === null || currentPeriod === void 0 ? void 0 : (_currentPeriod$get = currentPeriod.get()) === null || _currentPeriod$get === void 0 ? void 0 : _currentPeriod$get.list()[0]],\n                  periodType\n                };\n              default:\n                return {\n                  periods: currentPeriod === null || currentPeriod === void 0 ? void 0 : (_currentPeriod$get2 = currentPeriod.get()) === null || _currentPeriod$get2 === void 0 ? void 0 : _currentPeriod$get2.list(),\n                  periodType\n                };\n            }\n          }\n        }\n      }\n      return configState[key];\n    }\n  })\n});\nconst ScorecardLegendDefinitionSelector = selectorFamily({\n  get: isDefault => _ref12 => {\n    let {\n      get\n    } = _ref12;\n    const legendDefinitions = get(ScorecardViewState(\"legendDefinitions\"));\n    if (isDefault) {\n      return filter(legendDefinitions, _ref13 => {\n        let {\n          isDefault\n        } = _ref13;\n        return isDefault;\n      });\n    }\n    return filter(legendDefinitions, _ref14 => {\n      let {\n        isDefault\n      } = _ref14;\n      return !isDefault;\n    });\n  }\n});\nconst ScorecardTableSortState = atomFamily({\n  key: \"scorecard-table-state\",\n  default: {\n    orgUnit: TableSort.DEFAULT,\n    data: TableSort.DEFAULT\n  }\n});\nconst ScorecardTableOrientationState = selector({\n  key: \"scorecard-table-orientation-default\",\n  get: _ref15 => {\n    var _get2;\n    let {\n      get\n    } = _ref15;\n    const {\n      showDataInRows\n    } = (_get2 = get(ScorecardViewState(\"options\"))) !== null && _get2 !== void 0 ? _get2 : {};\n    if (showDataInRows) {\n      return Orientation.DATA_VS_ORG_UNIT;\n    }\n    return Orientation.ORG_UNIT_VS_DATA;\n  },\n  set: (_ref16, newValue) => {\n    let {\n      set\n    } = _ref16;\n    set(ScorecardViewState(\"options\"), prevValue => {\n      return _set(cloneDeep(prevValue), \"showDataInRows\", newValue === Orientation.DATA_VS_ORG_UNIT);\n    });\n  }\n});\nconst ScorecardTableConfigState = selectorFamily({\n  key: \"scorecard-table-details\",\n  get: orgUnits => _ref17 => {\n    let {\n      get\n    } = _ref17;\n    const orientation = get(ScorecardTableOrientationState);\n    const periods = get(PeriodResolverState);\n    const {\n      dataGroups\n    } = get(ScorecardViewState(\"dataSelection\"));\n    const {\n      averageColumn\n    } = get(ScorecardViewState(\"options\"));\n    const {\n      filteredOrgUnits,\n      childrenOrgUnits\n    } = get(ScorecardOrgUnitState(orgUnits));\n    const {\n      width: screenWidth\n    } = get(ScreenDimensionState);\n    const dataColSpan = getColSpanDataGroups(periods, dataGroups, averageColumn);\n    const dataNameColumnWidth = getNameCellWidth(screenWidth, dataColSpan);\n    const orgUnitColSpan = getColSpanWithOrgUnit(periods, [...filteredOrgUnits, ...childrenOrgUnits], averageColumn);\n    const orgUnitNameColumnWidth = getNameCellWidth(screenWidth, orgUnitColSpan);\n    return orientation === \"orgUnitsVsData\" ? {\n      rows: \"orgUnits\",\n      columns: [\"groups\", \"data\", \"periods\"],\n      tableWidth: getTableWidthWithDataGroups(periods, dataGroups, averageColumn),\n      colSpan: dataColSpan + 2,\n      nameColumnWidth: dataNameColumnWidth\n    } : {\n      rows: \"data\",\n      columns: [\"orgUnits\", \"periods\"],\n      tableWidth: getTableWidthWithOrgUnit(periods, [...filteredOrgUnits, ...childrenOrgUnits], averageColumn),\n      colSpan: orgUnitColSpan + 2,\n      nameColumnWidth: orgUnitNameColumnWidth\n    };\n  }\n});\nconst ScorecardOrgUnitState = atomFamily({\n  key: \"selected-org-unit-state\",\n  default: selectorFamily({\n    key: \"selected-org-units-default\",\n    get: orgUnits => async _ref18 => {\n      var _childrenOrgUnits;\n      let {\n        get\n      } = _ref18;\n      let childrenOrgUnits = [];\n      const filteredOrgUnits = get(SelectedOrgUnits(orgUnits));\n      if (orgUnits.length === 1) {\n        if (isOrgUnitId(head(orgUnits))) {\n          childrenOrgUnits = get(OrgUnitChildren(head(orgUnits)));\n        }\n      }\n      return {\n        childrenOrgUnits,\n        filteredOrgUnits,\n        orgUnitsCount: ((_childrenOrgUnits = childrenOrgUnits) === null || _childrenOrgUnits === void 0 ? void 0 : _childrenOrgUnits.length) + (filteredOrgUnits === null || filteredOrgUnits === void 0 ? void 0 : filteredOrgUnits.length)\n      };\n    }\n  })\n});\nconst ScorecardDataSourceState = atom({\n  key: \"data-source-state\",\n  default: selector({\n    key: \"scorecard-data-sources-default\",\n    get: _ref19 => {\n      var _get3;\n      let {\n        get\n      } = _ref19;\n      const {\n        dataGroups\n      } = (_get3 = get(ScorecardViewState(\"dataSelection\"))) !== null && _get3 !== void 0 ? _get3 : {};\n      return getHoldersFromGroups(dataGroups);\n    }\n  })\n});\nconst ScorecardDataLoadingState = atomFamily({\n  key: \"data-loading-state\"\n});\nconst IsSpecificTargetsSet = selector({\n  key: \"is-specific-targets-set\",\n  get: _ref20 => {\n    let {\n      get\n    } = _ref20;\n    const {\n      dataGroups\n    } = get(ScorecardViewState(\"dataSelection\"));\n    const dataSources = getDataSourcesFromGroups(dataGroups);\n    return some(dataSources, \"specificTargetsSet\");\n  }\n});\nconst ScorecardForceUpdateState = atomFamily({\n  key: \"scorecard-force-update-state\",\n  default: 0\n});\nconst ScorecardInSearchState = atomFamily({\n  key: \"scorecard-in-search-state\",\n  default: false\n});\nexport default ScorecardConfState;\nexport { ScorecardConfigEditState, ScorecardConfigDirtyState, ScorecardIdState, ScorecardSummaryState, ScorecardViewState, ScorecardRequestId, ScorecardConfigDirtySelector, ScorecardConfigErrorSelector, ScorecardConfigErrorState, ScorecardTableOrientationState, ScorecardTableConfigState, ScorecardOrgUnitState, ScorecardTableSortState, ScorecardDataSourceState, ScorecardDataLoadingState, ScorecardLegendDefinitionSelector, AllScorecardsSummaryState, IsNewScorecardState, IsSpecificTargetsSet, RefreshScorecardState, ScorecardNameSort, ScorecardForceUpdateState, ScorecardInSearchState };","import { Period } from \"@iapps/period-utilities\";\nimport { compact, differenceBy, filter, isArray, isEmpty, uniqBy } from \"lodash\";\nimport { selector } from \"recoil\";\nimport { ScorecardViewState } from \"./scorecard\";\nimport { SystemSettingsState } from \"./system\";\nconst PeriodResolverState = selector({\n  key: \"period-resolver\",\n  get: _ref => {\n    var _get, _get2;\n    let {\n      get\n    } = _ref;\n    const {\n      periods\n    } = (_get = get(ScorecardViewState(\"periodSelection\"))) !== null && _get !== void 0 ? _get : {};\n    const {\n      calendar\n    } = (_get2 = get(SystemSettingsState)) !== null && _get2 !== void 0 ? _get2 : {\n      calendar: \"gregorian\"\n    };\n    if (!isEmpty(periods)) {\n      const relativePeriods = filter(periods, _ref2 => {\n        var _period$type;\n        let {\n          id\n        } = _ref2;\n        const period = new Period().setPreferences({\n          allowFuturePeriods: true\n        }).setCalendar(calendar).getById(id);\n        return period === null || period === void 0 ? void 0 : (_period$type = period.type) === null || _period$type === void 0 ? void 0 : _period$type.match(RegExp(\"Relative\"));\n      });\n      let allPeriods = [...differenceBy(periods, relativePeriods, \"id\")];\n      for (const period of relativePeriods) {\n        const periodInstance = new Period().setPreferences({\n          allowFuturePeriods: true\n        }).setCalendar(calendar).getById(period === null || period === void 0 ? void 0 : period.id);\n        const actualPeriods = isArray(periodInstance === null || periodInstance === void 0 ? void 0 : periodInstance.iso) ? periodInstance === null || periodInstance === void 0 ? void 0 : periodInstance.iso : [periodInstance === null || periodInstance === void 0 ? void 0 : periodInstance.iso];\n        allPeriods = allPeriods.concat(actualPeriods);\n      }\n      return uniqBy(compact(allPeriods), \"id\");\n    }\n    return [];\n  }\n});\nexport { PeriodResolverState };","import { chunk, compact, find, flatten, isEmpty, reduce, sortBy, uniqBy } from \"lodash\";\nimport { atom, selector, selectorFamily } from \"recoil\";\nimport { EngineState } from \"./engine\";\nimport { PeriodResolverState } from \"./period\";\nimport { ScorecardViewState } from \"./scorecard\";\nimport { UserState } from \"./user\";\nimport { getHoldersFromGroups } from \"../utils\";\nimport { getOrgUnitsFromAnalytics } from \"../services\";\nconst {\n  atomFamily\n} = require(\"recoil\");\nconst orgUnitQuery = {\n  orgUnit: {\n    resource: \"organisationUnits\",\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    params: {\n      fields: [\"id\", \"displayName\", \"path\", \"level\"]\n    }\n  }\n};\nconst orgUnitChildrenQuery = {\n  analytics: {\n    resource: \"analytics\",\n    params: _ref2 => {\n      let {\n        id,\n        level\n      } = _ref2;\n      return {\n        dimension: [`ou:${id};LEVEL-${level}`, `pe:${new Date().getFullYear()}`],\n        skipData: true,\n        hierarchyMeta: true,\n        showHierarchy: true\n      };\n    }\n  }\n};\nconst selectedOrgUnitsQuery = {\n  analytics: {\n    resource: \"analytics\",\n    params: _ref3 => {\n      let {\n        ou,\n        pe\n      } = _ref3;\n      return {\n        dimension: [`ou:${ou.join(\";\")}`, `pe:${pe}`],\n        skipData: true,\n        hierarchyMeta: true,\n        showHierarchy: true\n      };\n    }\n  }\n};\nconst orgUnitLevelsQuery = {\n  levels: {\n    resource: \"organisationUnitLevels\",\n    params: {\n      fields: [\"id\", \"displayName\", \"level\"]\n    }\n  }\n};\nconst orgUnitGroupsQuery = {\n  groups: {\n    resource: \"organisationUnitGroups\",\n    params: {\n      fields: [\"id\", \"displayName\"]\n    }\n  }\n};\nexport const OrgUnitLevels = atom({\n  key: \"org-unit-levels\",\n  default: selector({\n    key: \"org-unit-levels-default\",\n    get: async _ref4 => {\n      let {\n        get\n      } = _ref4;\n      const engine = get(EngineState);\n      const {\n        levels\n      } = await engine.query(orgUnitLevelsQuery);\n      return levels === null || levels === void 0 ? void 0 : levels.organisationUnitLevels;\n    }\n  })\n});\nexport const OrgUnitGroups = atom({\n  key: \"org-unit-group\",\n  default: selector({\n    key: \"org-unit-group-default\",\n    get: async _ref5 => {\n      let {\n        get\n      } = _ref5;\n      const engine = get(EngineState);\n      const {\n        groups\n      } = await engine.query(orgUnitGroupsQuery);\n      return groups === null || groups === void 0 ? void 0 : groups.organisationUnitGroups;\n    }\n  })\n});\nexport const OrgUnit = selectorFamily({\n  key: \"orgUnitSelector\",\n  get: id => async _ref6 => {\n    let {\n      get\n    } = _ref6;\n    try {\n      const engine = get(EngineState);\n      const {\n        orgUnit\n      } = await engine.query(orgUnitQuery, {\n        variables: {\n          id\n        }\n      });\n      return orgUnit;\n    } catch (e) {\n      return {};\n    }\n  }\n});\nexport const OrgUnitPathState = atomFamily({\n  key: \"orgUnitPath\",\n  default: selectorFamily({\n    key: \"orgUnitPathSelector\",\n    get: function () {\n      let path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      return async _ref7 => {\n        var _sortBy;\n        let {\n          get\n        } = _ref7;\n        const orgUnits = compact(path.split(\"/\"));\n        const orgUnitNames = (_sortBy = sortBy(get(SelectedOrgUnits(orgUnits)), \"level\")) === null || _sortBy === void 0 ? void 0 : _sortBy.map(_ref8 => {\n          let {\n            displayName\n          } = _ref8;\n          return displayName;\n        });\n        return orgUnitNames.join(\"/\");\n      };\n    }\n  })\n});\nexport const OrgUnitChildren = selectorFamily({\n  key: \"org-unit-children\",\n  get: orgUnitId => async _ref9 => {\n    let {\n      get\n    } = _ref9;\n    const engine = get(EngineState);\n    const parentOrgUnit = get(OrgUnit(orgUnitId));\n    if (parentOrgUnit) {\n      var _getOrgUnitsFromAnaly;\n      const {\n        analytics\n      } = await engine.query(orgUnitChildrenQuery, {\n        variables: {\n          id: orgUnitId,\n          level: parentOrgUnit.level + 1\n        }\n      });\n      return (_getOrgUnitsFromAnaly = getOrgUnitsFromAnalytics(analytics)) !== null && _getOrgUnitsFromAnaly !== void 0 ? _getOrgUnitsFromAnaly : [];\n    }\n  }\n});\nexport const LowestOrgUnitLevel = selector({\n  key: \"last-org-unit-level\",\n  get: _ref10 => {\n    let {\n      get\n    } = _ref10;\n    const orgUnitLevels = get(OrgUnitLevels);\n    return reduce(orgUnitLevels, (acc, level) => level.level > acc.level ? level : acc);\n  }\n});\nexport const InitialOrgUnits = selector({\n  key: \"initial-org-units-resolver\",\n  get: async _ref11 => {\n    var _get, _get2, _get3, _getHoldersFromGroups;\n    let {\n      get\n    } = _ref11;\n    const {\n      orgUnits,\n      levels,\n      groups,\n      userOrgUnit,\n      userSubUnit,\n      userSubX2Unit\n    } = (_get = get(ScorecardViewState(\"orgUnitSelection\"))) !== null && _get !== void 0 ? _get : {};\n    const periods = (_get2 = get(PeriodResolverState)) !== null && _get2 !== void 0 ? _get2 : [];\n    const orgUnitLevels = get(OrgUnitLevels);\n    const {\n      dataGroups\n    } = (_get3 = get(ScorecardViewState(\"dataSelection\"))) !== null && _get3 !== void 0 ? _get3 : {};\n    const dataHolders = (_getHoldersFromGroups = getHoldersFromGroups(dataGroups)) !== null && _getHoldersFromGroups !== void 0 ? _getHoldersFromGroups : [];\n    const {\n      organisationUnits\n    } = get(UserState);\n    let resolvedOrgUnits = orgUnits;\n    if (!isEmpty(dataHolders) && !isEmpty(periods)) {\n      if (userSubX2Unit) {\n        resolvedOrgUnits = [...resolvedOrgUnits, {\n          id: \"USER_ORGUNIT_GRANDCHILDREN\"\n        }];\n      }\n      if (userSubUnit) {\n        resolvedOrgUnits = [...resolvedOrgUnits, {\n          id: \"USER_ORGUNIT_CHILDREN\"\n        }];\n      }\n      if (userOrgUnit) {\n        resolvedOrgUnits = [...resolvedOrgUnits, ...organisationUnits];\n      }\n      if (!isEmpty(levels)) {\n        var _levels$map;\n        resolvedOrgUnits = [...resolvedOrgUnits, ...((_levels$map = levels === null || levels === void 0 ? void 0 : levels.map(level => {\n          var _find;\n          return {\n            id: `LEVEL-${(_find = find(orgUnitLevels, {\n              id: level\n            })) === null || _find === void 0 ? void 0 : _find.level}`\n          };\n        })) !== null && _levels$map !== void 0 ? _levels$map : [])];\n      }\n      if (!isEmpty(groups)) {\n        var _groups$map;\n        resolvedOrgUnits = [...resolvedOrgUnits, ...((_groups$map = groups === null || groups === void 0 ? void 0 : groups.map(group => ({\n          id: `OU_GROUP-${group}`\n        }))) !== null && _groups$map !== void 0 ? _groups$map : [])];\n      }\n    }\n    return {\n      orgUnits: uniqBy(resolvedOrgUnits, \"id\")\n    };\n  }\n});\nconst getOrgUnits = async (engine, orgUnitsIds) => {\n  const pe = new Date().getFullYear();\n  const {\n    analytics\n  } = await engine.query(selectedOrgUnitsQuery, {\n    variables: {\n      ou: orgUnitsIds !== null && orgUnitsIds !== void 0 ? orgUnitsIds : [],\n      pe\n    }\n  });\n  return getOrgUnitsFromAnalytics(analytics);\n};\nexport const SelectedOrgUnits = selectorFamily({\n  key: \"selected-org-units-resolver\",\n  get: orgUnitsIds => async _ref12 => {\n    let {\n      get\n    } = _ref12;\n    try {\n      const engine = get(EngineState);\n      const orgUnitsChunks = chunk(orgUnitsIds, 5);\n      const orgUnits = await Promise.all(orgUnitsChunks.map(chunk => getOrgUnits(engine, chunk)));\n      return flatten(orgUnits);\n    } catch (e) {\n      console.error(e);\n      return [];\n    }\n  }\n});","//Validation Selectors\nimport i18n from \"@dhis2/d2-i18n\";\nimport { isEmpty } from \"lodash\";\nimport { atom, selector, selectorFamily, waitForAll } from \"recoil\";\nimport { ScorecardConfigDirtyState } from \"./scorecard\";\nimport { REQUIRED_FIELDS } from \"../constants\";\nimport { validateGroups } from \"../utils\";\nconst ShouldValidate = atom({\n  key: \"should-validate-state\",\n  default: false\n});\nconst FieldErrorState = selectorFamily({\n  key: \"text-fields-error-state\",\n  get: _ref => {\n    let {\n      id,\n      validations\n    } = _ref;\n    return _ref2 => {\n      let {\n        get\n      } = _ref2;\n      const shouldValidate = get(ShouldValidate);\n      if (shouldValidate) {\n        const value = get(ScorecardConfigDirtyState(id));\n        if (validations !== null && validations !== void 0 && validations.mandatory) {\n          if (isEmpty(value)) {\n            return i18n.t(\"This field is required\");\n          }\n        }\n      }\n    };\n  }\n});\nconst ErrorState = selector({\n  key: \"scorecard-error-state\",\n  get: _ref3 => {\n    let {\n      getCallback\n    } = _ref3;\n    return getCallback(_ref4 => {\n      let {\n        snapshot\n      } = _ref4;\n      return () => {\n        return snapshot.getLoadable(waitForAll([...(REQUIRED_FIELDS === null || REQUIRED_FIELDS === void 0 ? void 0 : REQUIRED_FIELDS.map(key => FieldErrorState({\n          id: key,\n          validations: {\n            mandatory: true\n          }\n        }))), DataGroupsErrorState])).contents;\n      };\n    });\n  }\n});\nconst DataGroupsErrorState = selector({\n  key: \"data-groups-error-state\",\n  get: _ref5 => {\n    let {\n      get\n    } = _ref5;\n    const shouldValidate = get(ShouldValidate);\n    if (shouldValidate) {\n      var _get;\n      const dataGroups = (_get = get(ScorecardConfigDirtyState(\"dataSelection\"))) === null || _get === void 0 ? void 0 : _get.dataGroups;\n      return validateGroups(dataGroups) || null;\n    }\n  }\n});\nconst DataGroupErrorState = selectorFamily({\n  key: \"data-groups-validator\",\n  get: groupId => _ref6 => {\n    let {\n      get\n    } = _ref6;\n    const error = get(DataGroupsErrorState);\n    return error === null || error === void 0 ? void 0 : error[groupId];\n  }\n});\nexport { DataGroupErrorState, ShouldValidate, FieldErrorState, ErrorState };","import { atom } from \"recoil\";\nconst RouterState = atom({\n  key: \"router-state\",\n  default: {\n    previous: \"/\"\n  }\n});\nexport default RouterState;","import { atom } from \"recoil\";\nconst HelpState = atom({\n  key: \"help-state\",\n  default: false\n});\nconst HelpSteps = atom({\n  key: \"intro-js-state\",\n  default: []\n});\nconst HelpIndex = atom({\n  key: \"current-step-index\",\n  default: 0\n});\nexport default HelpState;\nexport { HelpSteps, HelpIndex };","import { atom, selector } from \"recoil\";\nimport { EngineState } from \"./engine\";\nimport { getCustomFunctions } from \"../services\";\nconst customFunctionsKeysQuery = {\n  keys: {\n    resource: \"dataStore/functions\"\n  }\n};\nexport const CustomFunctionsKeysState = atom({\n  key: \"customFunctionsKeys\",\n  default: selector({\n    key: \"customFunctionKeysSelector\",\n    get: async _ref => {\n      let {\n        get\n      } = _ref;\n      try {\n        const engine = get(EngineState);\n        const {\n          keys\n        } = await engine.query(customFunctionsKeysQuery);\n        if (keys) {\n          return keys;\n        }\n        return [];\n      } catch (e) {\n        return [];\n      }\n    }\n  })\n});\nexport const CustomFunctionsState = atom({\n  key: \"customFunctions\",\n  default: selector({\n    key: \"customFunctionsSelector\",\n    get: async _ref2 => {\n      let {\n        get\n      } = _ref2;\n      const engine = get(EngineState);\n      const customFunctionKeys = get(CustomFunctionsKeysState);\n      return await getCustomFunctions(customFunctionKeys, engine);\n    }\n  })\n});","import { findIndex, get as _get, isEmpty } from \"lodash\";\nimport { atom, selector, selectorFamily } from \"recoil\";\nimport { InitialOrgUnits } from \"./orgUnit\";\nimport { PeriodResolverState } from \"./period\";\nimport { ScorecardViewState } from \"./scorecard\";\nimport { getHighlightedIndicatorsData } from \"../services\";\nconst HighlightedIndicatorsState = atom({\n  key: \"highlighted-indicators-state\",\n  default: selector({\n    key: \"highlighted-indicators-selector\",\n    get: async _ref => {\n      let {\n        get\n      } = _ref;\n      const {\n        orgUnits\n      } = get(InitialOrgUnits);\n      const periods = get(PeriodResolverState);\n      const highlightedIndicators = get(ScorecardViewState(\"highlightedIndicators\"));\n      if (!isEmpty(orgUnits) && !isEmpty(periods) && !isEmpty(highlightedIndicators)) {\n        var _orgUnits$, _periods$;\n        const data = await getHighlightedIndicatorsData({\n          orgUnits: [(_orgUnits$ = orgUnits[0]) === null || _orgUnits$ === void 0 ? void 0 : _orgUnits$.id],\n          periods: [(_periods$ = periods[0]) === null || _periods$ === void 0 ? void 0 : _periods$.id],\n          highlightedIndicators: highlightedIndicators === null || highlightedIndicators === void 0 ? void 0 : highlightedIndicators.map(_ref2 => {\n            let {\n              id\n            } = _ref2;\n            return id;\n          })\n        });\n        if (!isEmpty(data)) {\n          const {\n            rows,\n            headers\n          } = data._data;\n          const dxIndex = findIndex(headers, [\"name\", \"dx\"]);\n          const valueIndex = findIndex(headers, [\"name\", \"value\"]);\n          const formattedData = {};\n          for (const row of rows) {\n            formattedData[row[dxIndex]] = row[valueIndex];\n          }\n          return formattedData;\n        }\n        return [];\n      }\n    }\n  })\n});\nconst SingleHighlightedIndicatorState = selectorFamily({\n  key: \"highlighted-indicator-single-selector\",\n  get: key => _ref3 => {\n    let {\n      get\n    } = _ref3;\n    return _get(get(HighlightedIndicatorsState), key);\n  }\n});\nexport { HighlightedIndicatorsState, SingleHighlightedIndicatorState };","const identifiableObjectsQuery = {\n  object: {\n    resource: \"identifiableObjects\",\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    }\n  }\n};\nfunction getResourceFromHref(href) {\n  const resource = href.split(\"/\");\n  return resource[resource.length - 2];\n}\nfunction getTypeFromResource(resource) {\n  switch (resource) {\n    case \"indicators\":\n      return \"indicator\";\n    case \"dataElements\":\n      return \"dataElement\";\n    case \"dataSets\":\n      return \"dataSet\";\n    case \"programIndicators\":\n      return \"programIndicator\";\n    case \"eventDataItems\":\n      return \"dataElement\";\n    default:\n      return resource;\n  }\n}\nexport async function getDataSourceDetails(engine, dataSourceId) {\n  try {\n    var _await$engine$query;\n    const {\n      object\n    } = (_await$engine$query = await engine.query(identifiableObjectsQuery, {\n      variables: {\n        id: dataSourceId\n      }\n    })) !== null && _await$engine$query !== void 0 ? _await$engine$query : {};\n    if (object.href) {\n      var _object$displayName;\n      const resource = getResourceFromHref(object.href);\n      return {\n        type: getTypeFromResource(resource),\n        name: (_object$displayName = object.displayName) !== null && _object$displayName !== void 0 ? _object$displayName : object.name\n      };\n    }\n    return null;\n  } catch (e) {\n    return null;\n  }\n}","export function updateListFromDragAndDrop(groups, sourceIndex, destinationIndex) {\n  if (!isNaN(destinationIndex) && !isNaN(sourceIndex)) {\n    const value = groups[sourceIndex];\n    const newGroupList = [...groups];\n    newGroupList.splice(sourceIndex, 1);\n    newGroupList.splice(destinationIndex, 0, value);\n    return newGroupList;\n  }\n  return groups;\n}\nexport function updateListsFromDragAndDrop(_ref, _ref2) {\n  let {\n    sourceList,\n    destinationList\n  } = _ref;\n  let {\n    sourceIndex,\n    destinationIndex\n  } = _ref2;\n  if (!isNaN(destinationIndex) && !isNaN(sourceIndex)) {\n    const value = sourceList[sourceIndex];\n    const newSourceList = [...sourceList];\n    const newDestinationList = [...destinationList];\n    newSourceList.splice(sourceIndex, 1);\n    newDestinationList.splice(destinationIndex, 0, value);\n    return {\n      destinationList: newDestinationList,\n      sourceList: newSourceList\n    };\n  }\n}","import { capitalize, compact, find, flattenDeep, head, intersectionBy, isEmpty, last, reduce, snakeCase, sortBy, truncate, uniqBy } from \"lodash\";\nimport { ScorecardLegend } from \"../models\";\nimport { DefaultAuthority, TableSort } from \"../constants\";\nexport function getWindowDimensions() {\n  const {\n    innerWidth: width,\n    innerHeight: height\n  } = window;\n  return {\n    width: width > 1366 ? width : 1366,\n    height: (height > 763 ? height : 763) - 48 //considering the appbar\n  };\n}\nexport function getDataSourceShortName() {\n  let name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  return snakeCase(name).split(\"_\").map(s => capitalize(s)[0]).join(\"\");\n}\nexport function uid() {\n  const letters = \"abcdefghijklmnopqrstuvwxyz\" + \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n  const allowedChars = \"0123456789\" + letters;\n  const NUMBER_OF_CODEPOINTS = allowedChars.length;\n  const CODESIZE = 11;\n  let uid;\n  uid = letters.charAt(Math.random() * letters.length);\n  for (let i = 1; i < CODESIZE; ++i) {\n    uid += allowedChars.charAt(Math.random() * NUMBER_OF_CODEPOINTS);\n  }\n  return uid;\n}\nexport function generateRandomValues(max) {\n  const maxNo = max || 100;\n  return Math.floor(Math.random() * maxNo);\n}\nexport function generateLegendDefaults() {\n  let legendDefinitions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let weight = arguments.length > 1 ? arguments[1] : undefined;\n  let highIsGood = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  let definitions = legendDefinitions;\n  if (!highIsGood) {\n    definitions = definitions.reverse();\n  }\n  if (!isEmpty(definitions)) {\n    var _definitions;\n    const actualWeight = weight !== null && weight !== void 0 ? weight : 100; //sets 100 as the default weight\n    const range = actualWeight / ((_definitions = definitions) === null || _definitions === void 0 ? void 0 : _definitions.length);\n    const values = [];\n    let legendDefinitionIterator = definitions.length - 1;\n    for (let i = 0; i < actualWeight; i += range) {\n      const {\n        id\n      } = definitions[legendDefinitionIterator];\n      values.push(new ScorecardLegend({\n        startValue: Math.floor(i),\n        endValue: Math.floor(i + range),\n        legendDefinitionId: id\n      }));\n      legendDefinitionIterator--;\n    }\n    return values;\n  }\n  return [];\n}\nexport function reverseLegends(legends) {}\nexport function specificTargetsSet(dataSources) {\n  return reduce(dataSources, (isSet, dataSource) => {\n    return isSet || dataSource.specificTargetsSet;\n  }, false);\n}\nexport function getHoldersFromGroups() {\n  var _dataGroups$map;\n  let dataGroups = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return flattenDeep((_dataGroups$map = dataGroups === null || dataGroups === void 0 ? void 0 : dataGroups.map(_ref => {\n    let {\n      dataHolders\n    } = _ref;\n    return dataHolders;\n  })) !== null && _dataGroups$map !== void 0 ? _dataGroups$map : []);\n}\nexport function getDataSourcesFromGroups(dataGroups) {\n  const dataHolders = compact(getHoldersFromGroups(dataGroups));\n  return flattenDeep(dataHolders === null || dataHolders === void 0 ? void 0 : dataHolders.map(_ref2 => {\n    let {\n      dataSources\n    } = _ref2;\n    return dataSources;\n  }));\n}\nexport function getDataSourcesDisplayName(dataSources) {\n  var _head, _last, _head2;\n  return (dataSources === null || dataSources === void 0 ? void 0 : dataSources.length) > 1 ? `${(_head = head(dataSources)) === null || _head === void 0 ? void 0 : _head.label} / ${(_last = last(dataSources)) === null || _last === void 0 ? void 0 : _last.label}` : `${(_head2 = head(dataSources)) === null || _head2 === void 0 ? void 0 : _head2.label}`;\n}\nexport function updatePager(pager, itemListLength) {\n  const {\n    page,\n    pageSize\n  } = pager;\n  return {\n    page,\n    pageSize,\n    pageCount: Math.ceil(itemListLength / pageSize),\n    total: itemListLength\n  };\n}\nexport function truncateDescription() {\n  let description = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  let maxLength = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100;\n  return truncate(description, {\n    length: maxLength\n  });\n}\nfunction getOrgUnitLevelId(orgUnitLevels, dataOrgUnitLevel) {\n  var _find;\n  return (_find = find(orgUnitLevels, [\"level\", dataOrgUnitLevel])) === null || _find === void 0 ? void 0 : _find.id;\n}\nfunction findLegend(legends, value, _ref3) {\n  var _find2;\n  let {\n    max,\n    legendDefinitions\n  } = _ref3;\n  value = +value;\n  if (value > max) {\n    return find(legendDefinitions, {\n      id: \"N/A\"\n    });\n  }\n  if (isNaN(value)) {\n    return find(legendDefinitions, {\n      id: \"No Data\"\n    });\n  }\n  const {\n    legendDefinitionId\n  } = (_find2 = find(legends, legend => {\n    if (legend) {\n      const {\n        startValue,\n        endValue\n      } = legend;\n      if (+endValue === max) {\n        return +startValue <= value && +endValue >= value;\n      }\n      return +startValue <= value && +endValue > value;\n    }\n    return false;\n  })) !== null && _find2 !== void 0 ? _find2 : {};\n  return find(legendDefinitions, [\"id\", legendDefinitionId]);\n}\nfunction getPeriodSpecificLegends(specificTarget, period) {\n  if (specificTarget.items.includes(period)) {\n    return specificTarget.legends;\n  }\n}\nfunction getOrgUnitSpecificLegends(specificTarget, orgUnit) {\n  if (specificTarget.items.includes(orgUnit)) {\n    return specificTarget.legends;\n  }\n}\nexport function getLegend(value, legends, _ref4) {\n  let {\n    max = 100,\n    orgUnitLevels = [],\n    dataOrgUnitLevel,\n    legendDefinitions,\n    specificTargets,\n    period,\n    orgUnit\n  } = _ref4;\n  if (!isEmpty(specificTargets)) {\n    const specificTarget = head(specificTargets);\n    if (specificTarget) {\n      if (specificTarget.type === \"period\") {\n        var _getPeriodSpecificLeg;\n        const specificLegends = (_getPeriodSpecificLeg = getPeriodSpecificLegends(specificTarget, period)) !== null && _getPeriodSpecificLeg !== void 0 ? _getPeriodSpecificLeg : legends;\n        return findLegend(specificLegends, value, {\n          max,\n          legendDefinitions\n        });\n      }\n      if (specificTarget.type === \"orgUnit\") {\n        var _getOrgUnitSpecificLe;\n        const specificLegends = (_getOrgUnitSpecificLe = getOrgUnitSpecificLegends(specificTarget, orgUnit)) !== null && _getOrgUnitSpecificLe !== void 0 ? _getOrgUnitSpecificLe : legends;\n        return findLegend(specificLegends, value, {\n          max,\n          legendDefinitions\n        });\n      }\n    }\n  }\n  if (Array.isArray(legends)) {\n    const allLegends = [...legends];\n    return findLegend(allLegends, value, {\n      max,\n      legendDefinitions\n    });\n  }\n  if (typeof legends === \"object\") {\n    const orgUnitLevelId = getOrgUnitLevelId(orgUnitLevels, dataOrgUnitLevel);\n    if (orgUnitLevelId) {\n      const orgUnitLegends = legends[orgUnitLevelId];\n      return findLegend(orgUnitLegends, value, {\n        max,\n        legendDefinitions\n      });\n    }\n  }\n}\nexport function sortOrgUnitsBasedOnData(_ref5) {\n  let {\n    orgUnitSort,\n    filteredOrgUnits,\n    childrenOrgUnits\n  } = _ref5;\n  const parentTemp = [];\n  const childrenTemp = [];\n  for (const ou of orgUnitSort) {\n    parentTemp.push(find(filteredOrgUnits, [\"id\", ou]));\n    childrenTemp.push(find(childrenOrgUnits, [\"id\", ou]));\n  }\n  return {\n    parentOrgUnits: uniqBy(compact([...parentTemp, ...filteredOrgUnits]), \"id\"),\n    childOrgUnits: uniqBy(compact([...childrenTemp, ...childrenOrgUnits]), \"id\")\n  };\n}\nexport function sortOrgUnitsBasedOnNames(_ref6) {\n  let {\n    sort,\n    filteredOrgUnits,\n    childrenOrgUnits\n  } = _ref6;\n  let childOrgUnits = childrenOrgUnits;\n  let parentOrgUnits = filteredOrgUnits;\n  if (sort === TableSort.ASC) {\n    childOrgUnits = sortBy(childrenOrgUnits, \"displayName\");\n  }\n  if (sort === TableSort.DESC) {\n    childOrgUnits = sortBy(childrenOrgUnits, \"displayName\").reverse();\n  }\n  if (sort === TableSort.ASC) {\n    parentOrgUnits = sortBy(filteredOrgUnits, \"displayName\");\n  }\n  if (sort === TableSort.DESC) {\n    parentOrgUnits = sortBy(filteredOrgUnits, \"displayName\").reverse();\n  }\n  return {\n    childOrgUnits,\n    parentOrgUnits\n  };\n}\nexport function sortDataSourcesBasedOnData(_ref7) {\n  let {\n    dataSort,\n    dataSources\n  } = _ref7;\n  const temp = [];\n  for (const dx of dataSort) {\n    temp.push(find(dataSources, _ref8 => {\n      let {\n        dataSources\n      } = _ref8;\n      return !!find(dataSources, [\"id\", dx]);\n    }));\n  }\n  return uniqBy(temp, \"id\");\n}\nexport function sortDataSourcesBasedOnNames(_ref9) {\n  let {\n    sort,\n    dataSources\n  } = _ref9;\n  let filteredDataSources = dataSources;\n  if (sort === TableSort.ASC) {\n    filteredDataSources = sortBy(dataSources, \"displayName\");\n  }\n  if (sort === TableSort.DESC) {\n    filteredDataSources = sortBy(dataSources, \"displayName\").reverse();\n  }\n  return filteredDataSources;\n}\nfunction translateAccess() {\n  let access = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  const translatedAccess = {\n    read: false,\n    write: false\n  };\n  if (access.includes(\"r\")) {\n    translatedAccess.read = true;\n  }\n  if (access.includes(\"w\")) {\n    translatedAccess.write = true;\n  }\n  return translatedAccess;\n}\nexport function getUserAuthority(user, scorecardSummary) {\n  const {\n    user: userId,\n    userAccesses,\n    userGroupAccesses,\n    publicAccess\n  } = scorecardSummary !== null && scorecardSummary !== void 0 ? scorecardSummary : {};\n  if ((user === null || user === void 0 ? void 0 : user.id) === userId) {\n    return {\n      ...translateAccess(\"rw-----\"),\n      delete: true\n    };\n  }\n  if (!isEmpty(userAccesses)) {\n    const userAccess = find(userAccesses, [\"id\", user === null || user === void 0 ? void 0 : user.id]);\n    if (userAccess) {\n      return translateAccess(userAccess === null || userAccess === void 0 ? void 0 : userAccess.access);\n    }\n  }\n  if (!isEmpty(userGroupAccesses)) {\n    const userGroups = intersectionBy([...userGroupAccesses], [...user.userGroups], \"id\");\n    if (!isEmpty(userGroups)) {\n      const accesses = userGroups.map(_ref10 => {\n        let {\n          access\n        } = _ref10;\n        return access;\n      });\n      const translatedAccesses = accesses.map(translateAccess);\n      return {\n        read: reduce(translatedAccesses, (acc, value) => acc || value.read, false),\n        write: reduce(translatedAccesses, (acc, value) => acc || value.write, false)\n      };\n    }\n  }\n  if (publicAccess) {\n    return translateAccess(publicAccess === null || publicAccess === void 0 ? void 0 : publicAccess.access);\n  }\n  return DefaultAuthority;\n}\nexport function constructAppUrl(baseUrl, config, serverVersion) {\n  let appUrl = baseUrl;\n  const isModernServer = serverVersion.major >= 2 && serverVersion.minor >= 35;\n  // From core version 2.35, short_name is used instead of the human-readable title to generate the url slug\n  const urlSafeAppSlug = (isModernServer ? config.name : config.title).replace(/[^A-Za-z0-9\\s-]/g, \"\").replace(/\\s+/g, \"-\");\n\n  // From core version 2.35, core apps are hosted at the server root under the /dhis-web-* namespace\n  if (config.coreApp && isModernServer) {\n    appUrl += `/dhis-web-${urlSafeAppSlug}/`;\n  } else {\n    appUrl += `/api/apps/${urlSafeAppSlug}/`;\n  }\n\n  // Prior to core version 2.35, installed applications did not properly serve \"pretty\" urls (`/` vs `/index.html`)\n  if (!isModernServer) {\n    appUrl += \"index.html\";\n  }\n  // Clean up any double slashes\n  const scheme = appUrl.substr(0, appUrl.indexOf(\"://\") + 3);\n  appUrl = scheme + appUrl.substr(scheme.length).replace(/\\/+/g, \"/\");\n  return appUrl;\n}","import { map } from \"async\";\nimport { compact, find, has } from \"lodash\";\nimport { getDataSourceDetails } from \"./dataSource\";\nimport { uid } from \"./utils\";\nexport async function migrateScorecard(oldScorecard, engine) {\n  try {\n    if (oldScorecard) {\n      var _oldScorecard$header, _oldScorecard$header2, _oldScorecard$header3, _oldScorecard$header4, _oldScorecard$user, _oldScorecard$header5, _oldScorecard$header6, _oldScorecard$header7, _oldScorecard$average, _oldScorecard$highlig, _oldScorecard$highlig2;\n      return {\n        id: oldScorecard === null || oldScorecard === void 0 ? void 0 : oldScorecard.id,\n        name: oldScorecard === null || oldScorecard === void 0 ? void 0 : (_oldScorecard$header = oldScorecard.header) === null || _oldScorecard$header === void 0 ? void 0 : _oldScorecard$header.title,\n        title: oldScorecard === null || oldScorecard === void 0 ? void 0 : (_oldScorecard$header2 = oldScorecard.header) === null || _oldScorecard$header2 === void 0 ? void 0 : _oldScorecard$header2.title,\n        subtitle: oldScorecard === null || oldScorecard === void 0 ? void 0 : (_oldScorecard$header3 = oldScorecard.header) === null || _oldScorecard$header3 === void 0 ? void 0 : _oldScorecard$header3.sub_title,\n        description: oldScorecard === null || oldScorecard === void 0 ? void 0 : (_oldScorecard$header4 = oldScorecard.header) === null || _oldScorecard$header4 === void 0 ? void 0 : _oldScorecard$header4.description,\n        user: {\n          id: oldScorecard === null || oldScorecard === void 0 ? void 0 : (_oldScorecard$user = oldScorecard.user) === null || _oldScorecard$user === void 0 ? void 0 : _oldScorecard$user.id\n        },\n        periodType: oldScorecard === null || oldScorecard === void 0 ? void 0 : oldScorecard.periodType,\n        customHeader: oldScorecard === null || oldScorecard === void 0 ? void 0 : (_oldScorecard$header5 = oldScorecard.header) === null || _oldScorecard$header5 === void 0 ? void 0 : (_oldScorecard$header6 = _oldScorecard$header5.template) === null || _oldScorecard$header6 === void 0 ? void 0 : _oldScorecard$header6.content,\n        publicAccess: getScorecardPublicAccess(oldScorecard === null || oldScorecard === void 0 ? void 0 : oldScorecard.user_groups),\n        userAccesses: [],\n        userGroupAccesses: getScorecardUserGroupAccesses(oldScorecard === null || oldScorecard === void 0 ? void 0 : oldScorecard.user_groups),\n        targetOnLevels: false,\n        periodSelection: getScorecardPeriodSelection(oldScorecard.selected_periods, oldScorecard.periodType),\n        orgUnitSelection: getScorecardOrgUnitSelection(oldScorecard.orgunit_settings),\n        dataSelection: await getScorecardDataSelection(oldScorecard.data_settings, engine),\n        additionalLabels: oldScorecard.additional_labels,\n        legendDefinitions: getScorecardLegendDefinitions(oldScorecard === null || oldScorecard === void 0 ? void 0 : oldScorecard.legendset_definitions),\n        options: {\n          title: true,\n          legend: oldScorecard === null || oldScorecard === void 0 ? void 0 : (_oldScorecard$header7 = oldScorecard.header) === null || _oldScorecard$header7 === void 0 ? void 0 : _oldScorecard$header7.show_legend_definition,\n          emptyRows: oldScorecard === null || oldScorecard === void 0 ? void 0 : oldScorecard.empty_rows,\n          averageRow: oldScorecard === null || oldScorecard === void 0 ? void 0 : oldScorecard.show_average_in_row,\n          itemNumber: true,\n          averageColumn: oldScorecard === null || oldScorecard === void 0 ? void 0 : oldScorecard.show_average_in_column,\n          showHierarchy: oldScorecard === null || oldScorecard === void 0 ? void 0 : oldScorecard.show_hierarchy,\n          averageDisplayType: oldScorecard === null || oldScorecard === void 0 ? void 0 : (_oldScorecard$average = oldScorecard.average_selection) === null || _oldScorecard$average === void 0 ? void 0 : _oldScorecard$average.toUpperCase(),\n          highlightedIndicators: oldScorecard === null || oldScorecard === void 0 ? void 0 : (_oldScorecard$highlig = oldScorecard.highlighted_indicators) === null || _oldScorecard$highlig === void 0 ? void 0 : _oldScorecard$highlig.display\n        },\n        highlightedIndicators: await map((oldScorecard === null || oldScorecard === void 0 ? void 0 : (_oldScorecard$highlig2 = oldScorecard.highlighted_indicators) === null || _oldScorecard$highlig2 === void 0 ? void 0 : _oldScorecard$highlig2.definitions) || [], async indicator => await getScorecardDataSource(indicator, engine))\n      };\n    }\n  } catch (e) {\n    console.error(e);\n  }\n}\nfunction getScorecardLegendDefinitions(oldScorecardLegendDefinitions) {\n  return (oldScorecardLegendDefinitions || []).map(legendDefinition => {\n    const hasDefaultProps = has(legendDefinition, \"default\");\n    return hasDefaultProps ? {\n      id: legendDefinition.definition,\n      color: legendDefinition.color,\n      name: legendDefinition.definition,\n      isDefault: legendDefinition.default\n    } : {\n      id: legendDefinition.color,\n      color: legendDefinition.color,\n      name: legendDefinition.definition\n    };\n  });\n}\nfunction getScorecardPeriodSelection(oldScorecardPeriodSelections, periodType) {\n  return {\n    periods: oldScorecardPeriodSelections.map(period => ({\n      id: period.id,\n      name: period.name\n    })),\n    type: periodType\n  };\n}\nasync function getScorecardDataSelection(oldScorecardDataSelections, engine) {\n  return {\n    dataGroups: await map((oldScorecardDataSelections === null || oldScorecardDataSelections === void 0 ? void 0 : oldScorecardDataSelections.indicator_holder_groups) || [], async dataGroup => {\n      return {\n        id: dataGroup === null || dataGroup === void 0 ? void 0 : dataGroup.id,\n        style: {\n          color: \"#000000\",\n          backgroundColor: dataGroup.background_color\n        },\n        title: dataGroup === null || dataGroup === void 0 ? void 0 : dataGroup.name,\n        dataHolders: compact(await map(dataGroup === null || dataGroup === void 0 ? void 0 : dataGroup.indicator_holder_ids, async holderId => {\n          return await getScorecardDataHolder(oldScorecardDataSelections.indicator_holders, holderId, engine);\n        }))\n      };\n    })\n  };\n}\nasync function getScorecardDataHolder(dataHolders, holderId, engine) {\n  var _dataHolder$indicator;\n  const dataHolder = find(dataHolders, [\"holder_id\", holderId]);\n  return dataHolder ? {\n    id: dataHolder.holder_id,\n    dataSources: await map((_dataHolder$indicator = dataHolder.indicators) !== null && _dataHolder$indicator !== void 0 ? _dataHolder$indicator : [], async indicator => {\n      return await getScorecardDataSource(indicator, engine);\n    })\n  } : undefined;\n}\nasync function getScorecardDataSource(indicator, engine) {\n  var _await$getDataSourceD, _indicator$title, _indicator$arrow_sett, _indicator$arrow_sett2;\n  const {\n    name,\n    type\n  } = (_await$getDataSourceD = await getDataSourceDetails(engine, indicator.id)) !== null && _await$getDataSourceD !== void 0 ? _await$getDataSourceD : {};\n  return {\n    id: indicator.id,\n    name: (_indicator$title = indicator.title) !== null && _indicator$title !== void 0 ? _indicator$title : name,\n    type: type !== null && type !== void 0 ? type : \"customFunction\",\n    label: indicator.title,\n    weight: indicator.weight,\n    legends: indicator.legendset.map(legendSet => {\n      return {\n        id: uid(),\n        legendDefinitionId: legendSet === null || legendSet === void 0 ? void 0 : legendSet.color,\n        endValue: typeof (legendSet === null || legendSet === void 0 ? void 0 : legendSet.max) === \"string\" ? parseFloat(legendSet === null || legendSet === void 0 ? void 0 : legendSet.max) : legendSet === null || legendSet === void 0 ? void 0 : legendSet.max,\n        startValue: typeof (legendSet === null || legendSet === void 0 ? void 0 : legendSet.min) === \"string\" ? parseFloat(legendSet === null || legendSet === void 0 ? void 0 : legendSet.min) : legendSet.min\n      };\n    }),\n    highIsGood: indicator === null || indicator === void 0 ? void 0 : indicator.high_is_good,\n    showColors: indicator === null || indicator === void 0 ? void 0 : indicator.legend_display,\n    effectiveGap: (indicator === null || indicator === void 0 ? void 0 : (_indicator$arrow_sett = indicator.arrow_settings) === null || _indicator$arrow_sett === void 0 ? void 0 : _indicator$arrow_sett.effective_gap) || 5,\n    displayArrows: indicator === null || indicator === void 0 ? void 0 : (_indicator$arrow_sett2 = indicator.arrow_settings) === null || _indicator$arrow_sett2 === void 0 ? void 0 : _indicator$arrow_sett2.display\n  };\n}\nfunction getScorecardOrgUnitSelection(oldScorecardOrgUnitSelections) {\n  var _oldScorecardOrgUnitS, _oldScorecardOrgUnitS2, _oldScorecardOrgUnitS3;\n  return {\n    groups: (oldScorecardOrgUnitSelections === null || oldScorecardOrgUnitSelections === void 0 ? void 0 : (_oldScorecardOrgUnitS = oldScorecardOrgUnitSelections.selected_groups) === null || _oldScorecardOrgUnitS === void 0 ? void 0 : _oldScorecardOrgUnitS.map(group => group === null || group === void 0 ? void 0 : group.id)) || [],\n    levels: (oldScorecardOrgUnitSelections === null || oldScorecardOrgUnitSelections === void 0 ? void 0 : (_oldScorecardOrgUnitS2 = oldScorecardOrgUnitSelections.selected_levels) === null || _oldScorecardOrgUnitS2 === void 0 ? void 0 : _oldScorecardOrgUnitS2.map(level => level === null || level === void 0 ? void 0 : level.id)) || [],\n    orgUnits: oldScorecardOrgUnitSelections === null || oldScorecardOrgUnitSelections === void 0 ? void 0 : (_oldScorecardOrgUnitS3 = oldScorecardOrgUnitSelections.selected_orgunits) === null || _oldScorecardOrgUnitS3 === void 0 ? void 0 : _oldScorecardOrgUnitS3.map(selectedOrgUnit => ({\n      id: selectedOrgUnit.id\n    })),\n    userOrgUnit: Boolean(find(oldScorecardOrgUnitSelections === null || oldScorecardOrgUnitSelections === void 0 ? void 0 : oldScorecardOrgUnitSelections.selected_user_orgunit, [\"id\", \"USER_ORGUNIT\"])),\n    userSubUnit: Boolean(find(oldScorecardOrgUnitSelections === null || oldScorecardOrgUnitSelections === void 0 ? void 0 : oldScorecardOrgUnitSelections.selected_user_orgunit, [\"id\", \"USER_ORGUNIT_CHILDREN\"])),\n    userSubX2Unit: Boolean(find(oldScorecardOrgUnitSelections === null || oldScorecardOrgUnitSelections === void 0 ? void 0 : oldScorecardOrgUnitSelections.selected_user_orgunit, [\"id\", \"USER_ORGUNIT_GRANDCHILDREN\"]))\n  };\n}\nfunction getScorecardPublicAccess(oldScorecardUserGroups) {\n  const publicAccess = find(oldScorecardUserGroups, [\"id\", \"all\"]);\n  return {\n    id: \"public\",\n    type: \"public\",\n    access: getScorecardAccess(publicAccess),\n    displayName: \"Public\"\n  };\n}\nfunction getScorecardUserGroupAccesses(oldScorecardUserGroups) {\n  const userGroupsOnly = oldScorecardUserGroups === null || oldScorecardUserGroups === void 0 ? void 0 : oldScorecardUserGroups.filter(userGroup => userGroup.id !== \"all\");\n  return userGroupsOnly === null || userGroupsOnly === void 0 ? void 0 : userGroupsOnly.map(userGroup => {\n    return {\n      id: userGroup === null || userGroup === void 0 ? void 0 : userGroup.id,\n      type: \"userGroup\",\n      access: getScorecardAccess(userGroup),\n      displayName: userGroup === null || userGroup === void 0 ? void 0 : userGroup.name\n    };\n  });\n}\nfunction getScorecardAccess(oldScrocardUserGroup) {\n  if (oldScrocardUserGroup !== null && oldScrocardUserGroup !== void 0 && oldScrocardUserGroup.see) {\n    return \"r-----\";\n  }\n  return \"------\";\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { find, isEmpty } from \"lodash\";\nexport default function getSelectedOrgUnitSelectionDisplay(orgUnitSelection, _ref) {\n  let {\n    orgUnitLevels,\n    orgUnitGroups\n  } = _ref;\n  const {\n    orgUnits,\n    levels,\n    groups,\n    userOrgUnit,\n    userSubUnit,\n    userSubX2Unit\n  } = orgUnitSelection;\n  const display = [...orgUnits];\n  if (userOrgUnit) {\n    display.push({\n      name: i18n.t(\"User Organisation Unit\")\n    });\n  }\n  if (userSubUnit) {\n    display.push({\n      name: i18n.t(\"User Sub-units\")\n    });\n  }\n  if (userSubX2Unit) {\n    display.push({\n      name: i18n.t(\"User Sub-x2-units\")\n    });\n  }\n  if (!isEmpty(levels)) {\n    display.push({\n      name: `Levels: ${levels === null || levels === void 0 ? void 0 : levels.map(level => {\n        var _find;\n        const levelObject = (_find = find(orgUnitLevels, [\"id\", level])) !== null && _find !== void 0 ? _find : {};\n        return levelObject.displayName;\n      })}`\n    });\n  }\n  if (!isEmpty(groups)) {\n    display.push({\n      name: `Groups: ${groups === null || groups === void 0 ? void 0 : groups.map(group => find(orgUnitGroups, [\"id\", group]).displayName)}`\n    });\n  }\n  return display;\n}","import { get } from \"lodash\";\nimport { DATASTORE_ENDPOINT, DATASTORE_SCORECARD_SUMMARY_INCLUDE_KEYS } from \"../constants\";\nexport function generateScorecardSummary(data) {\n  const summary = {};\n  for (const detail of DATASTORE_SCORECARD_SUMMARY_INCLUDE_KEYS) {\n    summary[detail.key] = get(data, detail.path);\n  }\n  return summary;\n}\nexport const generateCreateMutation = id => ({\n  type: \"create\",\n  resource: `${DATASTORE_ENDPOINT}/${id}`,\n  data: _ref => {\n    let {\n      data\n    } = _ref;\n    return data;\n  }\n});","import { compact, find, findIndex, forIn, isEmpty, mergeWith, reduce, set } from \"lodash\";\nconst customFunctionQuery = {\n  function: {\n    resource: \"dataStore/functions\",\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    }\n  }\n};\nexport async function getCustomFunction(engine, id) {\n  return await engine.query(customFunctionQuery, {\n    variables: {\n      id\n    }\n  });\n}\nexport async function runCustomFunction(_ref2) {\n  let {\n    orgUnits,\n    periods,\n    rule,\n    code,\n    progress\n  } = _ref2;\n  const parameters = {\n    ou: orgUnits.join(\";\"),\n    pe: periods.join(\";\"),\n    rule,\n    layout: {\n      rows: [\"dx\"],\n      column: [\"ou\"],\n      filter: [\"pe\"]\n    },\n    progress\n  };\n  return await new Promise((resolve, reject) => {\n    try {\n      const customFunction = Function(\"parameters\", `${code}`);\n      customFunction({\n        ...parameters,\n        success: resolve,\n        error: error => {\n          if (error) {\n            reject(error);\n          } else {\n            reject(\"Unknown error\");\n          }\n        }\n      });\n    } catch (e) {\n      reject(e);\n    }\n    setTimeout(() => {\n      reject(\"Function timed out\");\n    }, 60000);\n  });\n}\nfunction formatData(data, _ref3) {\n  var _updatedData, _updatedData$metaData, _updatedData$rows;\n  let {\n    customFunction,\n    rule\n  } = _ref3;\n  const updatedData = {\n    ...data\n  };\n  const updatedId = `${customFunction.id}.${rule.id}`;\n  const dxIndex = findIndex(updatedData === null || updatedData === void 0 ? void 0 : updatedData.headers, {\n    name: \"dx\"\n  });\n  set(updatedData, \"metaData.dimensions.dx\", [updatedId]);\n  updatedData[`metaData`]['items'][updatedId] = {\n    name: `${customFunction.name} - ${rule.name}`\n  };\n  updatedData[\"metaData\"][\"names\"] = {};\n  forIn(updatedData === null || updatedData === void 0 ? void 0 : (_updatedData = updatedData[`metaData`]) === null || _updatedData === void 0 ? void 0 : _updatedData['items'], (value, key) => {\n    updatedData[`metaData`]['names'][key] = value === null || value === void 0 ? void 0 : value.name;\n  });\n  forIn((_updatedData$metaData = updatedData['metaData']) === null || _updatedData$metaData === void 0 ? void 0 : _updatedData$metaData['dimensions'], (value, key) => {\n    updatedData[\"metaData\"][key] = value;\n  });\n  set(updatedData, \"rows\", updatedData === null || updatedData === void 0 ? void 0 : (_updatedData$rows = updatedData.rows) === null || _updatedData$rows === void 0 ? void 0 : _updatedData$rows.map(row => {\n    const updatedRow = [...row];\n    set(updatedRow, dxIndex, updatedId);\n    return updatedRow;\n  }));\n  return updatedData;\n}\nexport async function evaluateCustomFunction(_ref4) {\n  let {\n    customFunction,\n    ruleId,\n    orgUnits,\n    periods\n  } = _ref4;\n  try {\n    if (customFunction) {\n      const rule = find(customFunction === null || customFunction === void 0 ? void 0 : customFunction.rules, {\n        id: ruleId\n      });\n      if (rule) {\n        var _customFunction$funct;\n        const data = await runCustomFunction({\n          orgUnits,\n          periods,\n          rule: {\n            ...rule,\n            json: typeof rule.json === \"string\" ? JSON.parse(rule.json) : rule.json\n          },\n          code: (_customFunction$funct = customFunction === null || customFunction === void 0 ? void 0 : customFunction.function) !== null && _customFunction$funct !== void 0 ? _customFunction$funct : \"\",\n          progress: () => {}\n        });\n\n        //This is under the assumption a custom function returns analytics object with only one dx value\n        if (data) {\n          return formatData(data, {\n            customFunction,\n            rule\n          });\n        }\n      }\n    }\n  } catch (error) {\n    console.error(error);\n    return null;\n  }\n  return null;\n}\nasync function getCustomFunctionData(item, engine, _ref5) {\n  let {\n    periods,\n    orgUnits\n  } = _ref5;\n  try {\n    if (item) {\n      var _item$split, _await$getCustomFunct;\n      const [functionId, ruleId] = (_item$split = item === null || item === void 0 ? void 0 : item.split(\".\")) !== null && _item$split !== void 0 ? _item$split : [];\n      const {\n        function: customFunction\n      } = (_await$getCustomFunct = await getCustomFunction(engine, functionId)) !== null && _await$getCustomFunct !== void 0 ? _await$getCustomFunct : {};\n      return await evaluateCustomFunction({\n        customFunction,\n        ruleId,\n        periods,\n        orgUnits\n      });\n    }\n  } catch (e) {\n    console.error(e);\n  }\n}\nexport async function getCustomFunctionAnalytics(engine, _ref6) {\n  let {\n    functions,\n    periods,\n    orgUnits\n  } = _ref6;\n  try {\n    if (functions && !isEmpty(functions)) {\n      const responses = compact(await Promise.all(functions.map(customFunction => getCustomFunctionData(customFunction, engine, {\n        periods,\n        orgUnits\n      }))));\n      return reduce(responses, (acc, response) => {\n        return mergeWith(acc, response, (objValue, srcValue) => {\n          if (Array.isArray(objValue)) {\n            return objValue.concat(srcValue);\n          }\n        });\n      }, {});\n    }\n  } catch (e) {\n    console.error(e);\n  }\n}","import { ScorecardTableConstants } from \"../constants\";\nexport function getTableWidthWithDataGroups() {\n  let periods = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let dataGroups = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  let averageColumn = arguments.length > 2 ? arguments[2] : undefined;\n  return getColSpanDataGroups(periods, dataGroups, averageColumn) * 105 + 200; //350 accounts for the static orgUnit and expand icon. 2px is for the border\n}\nexport function getColSpanDataGroups() {\n  let periods = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let dataGroups = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  let averageColumn = arguments.length > 2 ? arguments[2] : undefined;\n  const noOfPeriods = (periods === null || periods === void 0 ? void 0 : periods.length) || 1;\n  const noOfDataSources = dataGroups.reduce((prevValue, currentValue) => {\n    var _currentValue$dataHol;\n    return prevValue + ((_currentValue$dataHol = currentValue.dataHolders) === null || _currentValue$dataHol === void 0 ? void 0 : _currentValue$dataHol.length);\n  }, 0);\n  return noOfDataSources * noOfPeriods + (averageColumn ? 1 : 0); //350 accounts for the static orgUnit and expand icon. 2px is for the border\n}\nexport function getTableWidthWithOrgUnit(periods, orgUnits, averageColumn) {\n  return getColSpanWithOrgUnit(periods, orgUnits, averageColumn) * 105 + 200;\n}\nexport function getColSpanWithOrgUnit(periods, orgUnits, averageColumn) {\n  const noOfPeriods = (periods === null || periods === void 0 ? void 0 : periods.length) || 1;\n  const noOfOrgUnits = orgUnits.length || 1;\n  return noOfOrgUnits * noOfPeriods + (averageColumn ? 1 : 0);\n}\nfunction getDataCellsWidth(screenWidth, colSpan) {\n  return ScorecardTableConstants.CELL_WIDTH * colSpan;\n}\nexport function getNameCellWidth(screenWidth, colSpan) {\n  const dataCellsWidth = getDataCellsWidth(screenWidth, colSpan);\n  const width = 100 - dataCellsWidth / screenWidth * 100;\n  if (width > 30) {\n    return `30%`;\n  }\n  if (width > 10) {\n    return `${Math.abs(width)}%`;\n  }\n  return `${200}px`;\n}\nexport function getIncreasingStatus(current, previous, effectiveGap) {\n  const parsedCurrentValue = parseFloat(current);\n  const parsedPreviousValue = parseFloat(previous);\n  if (Math.abs(parsedCurrentValue - parsedPreviousValue) >= parseInt(effectiveGap)) {\n    if (parsedCurrentValue > parsedPreviousValue) {\n      return \"increasing\";\n    }\n    if (parsedCurrentValue < parsedPreviousValue) {\n      return \"decreasing\";\n    }\n  }\n  return null;\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { forIn, get, isEmpty } from \"lodash\";\nimport { accessPageFields, dataConfigurationPageFields, generalPageFields, highlightedIndicatorPageFields, optionsPageFields, REQUIRED_FIELDS } from \"../constants\";\nfunction validateRequiredFields(scorecard) {\n  let requiredFieldsPath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  const errors = {};\n  forIn(scorecard, (value, key) => {\n    if (requiredFieldsPath.includes(key) && isEmpty(get(scorecard, key))) {\n      errors[`${key}`] = i18n.t(\"This field is required\");\n    }\n  });\n  return errors;\n}\nexport function validateGroups() {\n  let dataGroups = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  const errors = {};\n  for (const group of dataGroups) {\n    if (isEmpty(group.dataHolders)) {\n      errors[group.id] = i18n.t(\"This group does not have any configured data sources\");\n    }\n  }\n  return errors;\n}\nexport default function validateScorecard(scorecard) {\n  var _validateRequiredFiel, _scorecard$dataSelect;\n  return (_validateRequiredFiel = {\n    ...validateRequiredFields(scorecard, REQUIRED_FIELDS),\n    ...validateGroups(scorecard === null || scorecard === void 0 ? void 0 : (_scorecard$dataSelect = scorecard.dataSelection) === null || _scorecard$dataSelect === void 0 ? void 0 : _scorecard$dataSelect.dataGroups)\n  }) !== null && _validateRequiredFiel !== void 0 ? _validateRequiredFiel : {};\n}\nexport function getValidationPageFields(form, activePage) {\n  switch (activePage.id) {\n    case \"general\":\n      return generalPageFields;\n    case \"dataConfiguration\":\n      return dataConfigurationPageFields;\n    case \"highlightedIndicator\":\n      return highlightedIndicatorPageFields;\n    case \"access\":\n      return accessPageFields;\n    case \"options\":\n      return optionsPageFields;\n    default:\n      return [];\n  }\n}"],"names":["CACHE_VERSION","VERSION_PARAM","async","clearCaches","window","cachePromises","caches","keys","filter","name","includes","map","delete","Promise","all","console","log","error","warn","unregisterServiceWorkers","navigator","registrations","serviceWorker","getRegistrations","registration","unregister","initialize","url","URL","location","href","currentVersion","searchParams","get","sessionStorage","setItem","scrollY","set","replace","toString","history","replaceState","getItem","resolve","setTimeout","clearKeys","i","localStorage","length","key","startsWith","push","forEach","removeItem","clear","clearStorages","catch","Main","React","ScorecardManagement","ScorecardView","then","module","default","pages","pathname","component","Router","useRecoilValue","SystemSettingsState","HashRouter","ErrorBoundary","FallbackComponent","FullPageError","Suspense","fallback","FullPageLoader","Switch","_ref","Component","Route","path","Redirect","to","i18n","addResources","enTranslations","MyApp","initializeState","useInitApp","DataStoreProvider","namespace","DATASTORE_NAMESPACE","loadingComponent","CssReset","RecoilRoot","ConfirmDialogProvider","className","Sider","Content","Layout","ME_QUERY","me","resource","params","fields","useEffect","cacheBuster","collapsed","setCollapsed","useState","openKeys","setOpenKeys","loading","data","useDataQuery","firstName","surname","email","userEmail","profileMenu","Menu","Item","icon","SettingOutlined","UserOutlined","LogoutOutlined","adminCentreItems","BarsOutlined","MonitorOutlined","label","TeamOutlined","dataCollectionItems","FormOutlined","FileTextOutlined","DownloadOutlined","style","height","trigger","collapsible","width","collapsedWidth","onCollapse","collapsedState","breakpoint","onBreakpoint","broken","classes","padding","transition","background","borderRight","overflow","display","flexDirection","alignItems","gap","flexShrink","Button","type","MenuOutlined","fontSize","onClick","color","src","process","alt","objectFit","overflowY","overflowX","selectedKeys","onOpenChange","latestOpenKey","find","defaultSelectedKeys","defaultOpenKeys","mode","inlineCollapsed","HomeOutlined","Divider","SubMenu","CheckCircleOutlined","title","ImportOutlined","item","AreaChartOutlined","marginTop","backgroundColor","borderRadius","margin","ErrorDialog","onClose","details","Modal","position","ModalTitle","t","ModalContent","colors","grey050","border","grey300","JSON","stringify","ModalActions","_ref2","_error$title","_error$details","resetErrorBoundary","errorDialogShow","setErrorDialogShow","useHistory","onRefresh","reload","textAlign","CenteredContent","ErrorIcon","grey700","message","ButtonStrip","center","httpStatusCode","primary","onGoToHome","propTypes","PropTypes","isRequired","ModalLoader","CircularLoader","small","IncreasingArrows","x","y","decreasing","d","fill","transform","DecreasingArrows","LegendsView","legends","legendDefinitions","ScorecardViewState","align","legend","legendDefinition","id","legendDefinitionId","startValue","endValue","OrgUnitSpecificTargetView","_orgUnits$map","dataSourceLabel","specificTarget","items","orgUnits","SelectedOrgUnits","maxWidth","grey600","ou","displayName","join","PeriodSpecificTargetView","_ref3","_items$map","pe","_Period$setPreference","Period","setPreferences","allowFuturePeriods","getById","OrgUnitLevelSpecificTargetView","_ref4","levels","OrgUnitLevels","level","_level$displayName","SpecificTargetsLibrary","_specificTargetsDataS","_specificTargetsDataS2","_specificTargetsDataS3","dataGroups","dataSources","useMemo","getDataSourcesFromGroups","specificTargetsDataSourcesByType","dataSourcesWithSpecificTargets","ds","specificTargetsSet","groupBy","isEmpty","specificTargets","_head","head","orgUnit","dataSource","period","orgUnitLevell","orgUnitLevel","SpecificTargetsLibraryModal","open","large","hide","text","AccessDeniedPage","accessType","fontWeight","onHomeClick","EmptyOrgUnitsOrPeriod","HighlightedIndicator","_getLegend","highlightedIndicator","orgUnitLevels","defaultLegendDefinitions","ScorecardLegendDefinitionSelector","weight","value","SingleHighlightedIndicatorState","getLegend","max","defaultLegends","dataOrgUnitLevel","minHeight","justifyContent","HighlightedIndicatorsView","_useRecoilValue","_contents$message","highlightedIndicators","showHighlightedIndicators","state","contents","useRecoilValueLoadable","HighlightedIndicatorsState","size","paddingLeft","DownloadMenu","_Object$values","onDownload","FlyoutMenu","dataTest","Object","values","DownloadTypes","MenuItem","downloadExcelFileTypes","periods","dataHolders","json","orgUnitName","orgUnitId","object","dataSourceId","dataSourceName","_data","periodId","periodName","current","generateExcelJSON","flatten","sheet","xlsx","json_to_sheet","workbook","book_new","book_append_sheet","writeFile","e","getALMAMetadata","_ref6","getAllLegends","Array","isArray","_ref10","_find","min","modifiedLegends","forIn","_ref11","_find2","dimensions","_ref7","_ref8","dx","_ref9","co","getMetadataDimensions","legendSet","getMetadataItems","getALMAData","rows","split","useDownload","downloadRef","dataEngine","orgUnitState","InitialOrgUnits","_orgUnitState$content","orgUnitsIds","filteredOrgUnits","childrenOrgUnits","ScorecardOrgUnitState","ScorecardDataSourceState","allOrgUnits","PeriodResolverState","ScorecardDataLoadingState","setData","show","useAlert","duration","handlePDFDownload","useReactToPrint","content","documentTitle","undefined","subscription","getAllOrgUnitData","subscribe","unsubscribe","downloadFunction","EXCEL","_ref5","downloadExcel","CSV","_ref18","downloadCSV","PDF","_ref12","dataValues","headers","ALMA_HEADERS","metaData","_ref13","blob","Blob","saveAs","downloadALMAData","_ref14","organisationUnits","_ref15","_pathArray","_path$split","pathArray","parent","indicators","_ref16","_ref17","downloadALMAMeta","download","_error$message","Help","helpSteps","setHelpSteps","useSetRecoilState","HelpSteps","prevSteps","newSteps","pullAllWith","isEqual","ScorecardOptionsForm","options","onChange","OPTIONS_HELP_STEPS","CheckboxField","checked","itemNumber","emptyRows","showHierarchy","averageColumn","averageRow","Radio","AverageDisplayType","ALL","averageDisplayType","BELOW_AVERAGE","ABOVE_AVERAGE","arrows","showDataInRows","ScorecardOptionsModal","onSelect","initialValues","setValues","newValue","prevState","_newValue$checked","ScorecardOptions","onUpdateClick","ScorecardActions","downloadAreaRef","widget","setRoute","RouterState","scorecardOptions","setScorecardOptions","useRecoilState","optionsOpen","setOptionsOpen","baseUrl","serverVersion","useConfig","scorecardId","ScorecardIdState","userAuthority","UserAuthorityOnScorecard","writeAccess","write","useRecoilCallback","reset","RefreshScorecardState","prevValue","onEdit","prevRoute","previous","appUrl","constructAppUrl","APP_NAME","APP_TITLE","DropdownButton","ScorecardDataEngine","ScorecardHeader","showTitle","customHeader","subtitle","JsxParser","autoCloseVoidElements","onError","bindings","jsx","_extends","assign","bind","target","arguments","source","prototype","hasOwnProperty","call","apply","this","ITEM_DISPLAY_NO","SelectionWrapper","selectedItems","props","selectText","FilterComponentTypes","PERIOD","itemsToDisplay","chunk","Tooltip","Box","Chip","number","ScorecardViewHeader","helpEnabled","setHelpEnabled","HelpState","calendar","orgUnitGroups","OrgUnitGroups","orgUnitSelection","setOrgUnitSelection","periodSelection","setPeriodSelection","orgUnitSelectionOpen","setOrgUnitSelectionOpen","periodSelectionOpen","setPeriodSelectionOpen","ScorecardConfState","orgUnitSelectionDisplay","getSelectedOrgUnitSelectionDisplay","Steps","STEP_OPTIONS","steps","SCORECARD_VIEW_HELP_STEPS","enabled","initialStep","onExit","onHelpExit","Card","ORG_UNIT","onHome","OrgUnitSelectorModal","showGroups","showLevels","showUserOptions","onUpdate","selected","PeriodSelectorModal","enablePeriodSelector","excludedPeriodTypes","UNSUPPORTED_PERIOD_TYPES","selectedPeriods","PeriodUtility","getPeriodById","defaultProps","ScorecardLegendsView","lazy","ScorecardTable","_orgUnitState$content4","useParams","setScorecardIdState","_orgUnitState$content2","_orgUnitState$content3","read","access","useRef","isSpecificTargetsSet","IsSpecificTargetsSet","initialDataEngine","ScorecardNameSort","ScorecardTableOrientationState","ref","nested","ContainerLoader","SingleCellSvg","cellRef","status","bold","offsetWidth","offsetHeight","points","lengthAdjust","LinkedCellSvg","topValue","bottomValue","topColor","bottomColor","topStatus","bottomStatus","viewBox","strokeWidth","stroke","textLength","FormFieldModel","constructor","attributes","defaultsDeep","defaults","MaterialErrorIcon","grey500","DATASTORE_ENDPOINT","DATASTORE_SCORECARD_SUMMARY_KEY","DATASTORE_SCORECARD_SUMMARY_INCLUDE_KEYS","DATASTORE_OLD_SCORECARD_ENDPOINT","DATASTORE_FUNCTIONS_ENDPOINT","SCORECARD_DOCUMENTATION_URL","column","valueType","hidden","meta","CalendarTypes","ETHIOPIAN","GREGORIAN","CHART_TYPES","description","Column","Dotted","Bar","Area","Pie","DraggableItems","DATA_COLUMN","ORG_UNIT_COLUMN","DATA_ROW","ORG_UNIT_ROW","OU_LAYOUT","DX_LAYOUT","PE_LAYOUT","REQUIRED_FIELDS","DHIS2ValueTypes","INTEGER","formName","TRUE_ONLY","TEXT","NUMBER","DATE","LONG_TEXT","LEGEND_DEFINITION","RICH_TEXT","LEGEND_MIN_MAX","NORMAL_LEGEND_MIN_MAX","LEVEL_LEGEND_MIN_MAX","MULTIPLE_FIELDS","generalPageFields","dataConfigurationPageFields","highlightedIndicatorPageFields","accessPageFields","optionsPageFields","LAYOUTS","DataIcon","OrgUnitIcon","PeriodIcon","DEFAULT_LAYOUT","row","DATA_MIGRATION_CHECK","Orientation","ORG_UNIT_VS_DATA","DATA_VS_ORG_UNIT","PeriodCategories","RELATIVE","FIXED","_defineProperty","obj","arg","input","hint","prim","Symbol","toPrimitive","res","TypeError","String","Number","_toPrimitive","_toPropertyKey","defineProperty","enumerable","configurable","writable","ScorecardAccessType","DefaultAuthority","AccessTypes","USER","USER_GROUP","ACCESS_TYPES","NO_ACCESS","READ_ONLY","READ_WRITE","ScorecardTableConstants","CELL_WIDTH","TableSort","ASC","DESC","DEFAULT","nextLabel","prevLabel","skipLabel","doneLabel","hideNext","hidePrev","showProgress","disableInteraction","tooltipClass","SCORECARD_LIST_HELP_STEPS","intro","element","GENERAL_HELP_STEPS","INTRODUCTION_HELP_STEPS","PREVIEW_TABLE_HELP_STEPS","NO_GROUPS_HELP_STEPS","GROUPS_CONFIG_HELP_STEPS","NO_INDICATORS_HELP_STEPS","INDICATOR_SETUP_HELP_STEPS","DATA_CONFIGURATION_WITH_DATA_HELP_STEPS","INDICATOR_CONFIGURATION_STEPS","DATA_CONFIGURATION_HELP_STEPS","DATA_CONFIGURATION_STEPS_MAP","introduction","start","end","emptyGroups","groupConfig","emptyIndicators","indicatorSetup","indicatorConfiguration","HIGHLIGHTED_INDICATOR_HELP_STEPS","HIGHLIGHTED_TABLE_HELP_STEPS","ACCESS_HELP_STEPS","scorecardManagementTooltips","useOrganisationUnitChildren","setId","OrgUnitChildren","orgUnitSearchQuery","nameQuery","keyword","idQuery","searchOrganisationUnit","engine","query","variables","_data$idQuery$organis","_data$idQuery","_data$nameQuery$organ","_data$nameQuery","idResponse","nameResponse","hierarchy","useSearchOrganisationUnit","setKeyword","refetch","updateKeyword","debounce","trailing","leading","_data$idQuery$organis2","_data$idQuery2","_data$nameQuery$organ2","_data$nameQuery2","getWindowDimensions","innerWidth","innerHeight","useMediaQuery","windowDimensions","setWindowDimensions","useLayoutEffect","handleResize","addEventListener","removeEventListener","updateMutation","useScorecardsSummary","executionError","setExecutionError","summary","setSummary","ScorecardSummaryState","update","updateError","updateLoading","useDataMutation","addSingleScorecardSummary","_cloneDeep","updatedList","cloneDeep","updatedSummary","updateSingleScorecardSummary","useCallback","_cloneDeep2","splice","findIndex","removeSingleScorecardSummary","produce","draft","scorecard","deleteMutation","useDeleteScorecard","removeMutate","removeError","remove","useUpdateScorecard","setScorecardRequestId","ScorecardRequestId","updateMutate","scorecardSummary","generateScorecardSummary","useAddScorecard","useDataEngine","add","mutate","generateCreateMutation","useScorecard","setScorecardState","useAllScorecards","removeLoading","scorecards","useWebVitals","apiVersion","Fn","init","ScreenDimensionState","EngineState","useForceUpdate","setForceUpdateState","ScorecardForceUpdateState","forceUpdate","useSetDataEngine","setEngine","DataModel","updatedObject","setObject","SavableDataModel","save","addFunction","user","newObject","parse","updateFunction","DataSelection","OrgUnitSelection","groups","userSubX2Unit","userSubUnit","userOrgUnit","SelectionItem","selectionItem","PeriodSelection","ScorecardAccess","ScorecardOption","Scorecard","uid","periodType","dataSelection","publicAccess","userGroupAccesses","userAccesses","targetOnLevels","additionalLabels","BehaviorSubject","_dataEntities","_dataEntities$","asObservable","_cancelled","loading$","_loading$","_canLoadData","_this$_selectedOrgUni","_this$_selectedPeriod","_this$_selectedData$n","_this$_selectedData$c","_selectedOrgUnits","_selectedPeriods","_selectedData","normalDataItems","customDataItems","setDataQueryEngine","setPeriodType","_periodType","_getSelectedPeriods","refresh","load","setPeriods","_compact","_differenceBy","previousPeriods","uniqBy","currentPeriod","setCalendar","_calendar","lastPeriod","previousPeriod","compact","_previousPeriods","differenceBy","setDataGroups","_getSelectedData","setOrgUnits","_updateDataEntities","_row$dx","_row$ou","_row$pe","_row$pe2","dataEntityId","previousPeriodRow","previousRow","_previousRow$dx","_row$dx2","_previousRow$ou","_row$ou2","_previousRow$pe","next","_progress","_progress$","_getScorecardData","selectedOrgUnits","selectedData","getProgress","pipe","progress","Math","floor","_totalRequests","isRowEmpty","dataEntities$","dataEntities","orgUnitsData","pickBy","val","match","RegExp","isDataSourcesRowEmpty","_","last","sortOrgUnitsByDataAndPeriod","sortType","take","requiredDataEntities","sortedOrgUnits","sortBy","toPairs","_last","reverse","sortOrgUnitsByData","groupedValues","averageValues","reduce","acc","arr","_last2","sortedValues","_sortedValues$map","sortDataSourceByOrgUnitAndPeriod","_last3","parseInt","sortDataSourceByOrgUnit","_head2","_last4","_sortedValues$map2","getOrgUnitAverage","_compact2","noOfOrgUnits","result","getDataSourceAverage","_compact3","dataSourcesData","_this$_selectedOrgUni2","noOfDataSources","getOrgUnitColumnAverage","_compact4","getDataSourceColumnAverage","_compact5","getOverallAverage","_compact6","selectedDataEntities","noOfDataEntities","_ref19","cancel","selections","_getNormalScorecardData","selectedDataItems","_getCustomScorecardData","_getAnalyticsData","_dx","_ou","_pe","_ou2","_pe2","selection","uniq","of","toPromise","Analytics","setOrgUnit","setPeriod","postProcess","analytics","_getCustomAnalyticsData","_dx2","_ou3","_pe3","getCustomFunctionAnalytics","functions","_selectionList","selectionList","dataItem","selectedDataList","mapLimit","callback","totalErr","totalRes","$","_result$rows$map","_result$rows","_ref20","fromPairs","_Period","_Period$setPreference2","setType","list","dataGroup","dataHolder","selectedItem","ScorecardIndicator","effectiveGap","displayArrows","highIsGood","showColors","ScorecardIndicatorHolder","super","linkDataSource","holder","scorecardIndicator","ScorecardLegend","ScorecardIndicatorGroup","generateCustomFunctionQuery","getCustomFunctions","getScorecardCellData","_period$lastPeriod","allPeriods","getHighlightedIndicatorsData","getScorecardData","_orgUnitSelection$org","orgUnitString","orgUnitIds","_getSelectedOrgUnits","currentPeriods","_Period$setPreference3","_currentPeriod$lastPe","reject","getOrgUnitsFromAnalytics","_dimensions$ou","ouHierarchy","ouNameHierarchy","cleanedOuHierarchy","omitBy","_cleanedOuHierarchy$o","_items$ou","_cleanedOuHierarchy$o2","_cleanedOuHierarchy$o3","_cleanedOuHierarchy$o4","_ouNameHierarchy$ou","isOrgUnitId","systemSettingsKeys","systemSettingsQuery","system","getSystemSettings","keyCalendar","getScorecard","response","_scorecard$dataSelect","sanitizedGroups","group","sanitizeDataSelection","orgUnitQuery","getOrgUnitSelection","_orgUnitsIds$map","resolvedOrgUnits","addMutation","getScorecardSummary","_e$details","initializeKey","restoreQuery","restoreMutation","singleScorecardQuery","restoreScorecardSummary","allKeys","scorecardsToRestore","_summary$map","atom","selector","userQuery","UserState","selectorFamily","_getUserAuthority","getUserAuthority","effects_UNSTABLE","setSelf","defaultValue","isDefault","AllScorecardsSummaryState","atomFamily","IsNewScorecardState","ScorecardConfigDirtyState","_get","ScorecardConfigDirtySelector","_set","ScorecardConfigErrorState","ScorecardConfigErrorSelector","ScorecardConfigEditState","_currentPeriod$get","_currentPeriod$get2","configState","_configState$periodSe","ScorecardTableSortState","_get2","ScorecardTableConfigState","orientation","screenWidth","dataColSpan","getColSpanDataGroups","dataNameColumnWidth","getNameCellWidth","orgUnitColSpan","getColSpanWithOrgUnit","orgUnitNameColumnWidth","columns","tableWidth","getTableWidthWithDataGroups","colSpan","nameColumnWidth","getTableWidthWithOrgUnit","_childrenOrgUnits","orgUnitsCount","_get3","getHoldersFromGroups","some","relativePeriods","_period$type","periodInstance","actualPeriods","iso","concat","require","orgUnitChildrenQuery","dimension","Date","getFullYear","skipData","hierarchyMeta","selectedOrgUnitsQuery","orgUnitLevelsQuery","orgUnitGroupsQuery","organisationUnitLevels","organisationUnitGroups","OrgUnit","OrgUnitPathState","_sortBy","parentOrgUnit","_getOrgUnitsFromAnaly","LowestOrgUnitLevel","_getHoldersFromGroups","_levels$map","_groups$map","orgUnitsChunks","getOrgUnits","ShouldValidate","FieldErrorState","validations","mandatory","ErrorState","getCallback","snapshot","getLoadable","waitForAll","DataGroupsErrorState","validateGroups","DataGroupErrorState","groupId","HelpIndex","customFunctionsKeysQuery","CustomFunctionsKeysState","CustomFunctionsState","customFunctionKeys","_orgUnits$","_periods$","dxIndex","valueIndex","formattedData","identifiableObjectsQuery","getTypeFromResource","getDataSourceDetails","_await$engine$query","_object$displayName","getResourceFromHref","updateListFromDragAndDrop","sourceIndex","destinationIndex","isNaN","newGroupList","updateListsFromDragAndDrop","sourceList","destinationList","newSourceList","newDestinationList","getDataSourceShortName","snakeCase","s","capitalize","letters","allowedChars","NUMBER_OF_CODEPOINTS","charAt","random","generateRandomValues","maxNo","generateLegendDefaults","definitions","_definitions","actualWeight","range","legendDefinitionIterator","reverseLegends","isSet","_dataGroups$map","flattenDeep","getDataSourcesDisplayName","updatePager","pager","itemListLength","page","pageSize","pageCount","ceil","total","truncateDescription","maxLength","truncate","findLegend","_getPeriodSpecificLeg","specificLegends","getPeriodSpecificLegends","_getOrgUnitSpecificLe","getOrgUnitSpecificLegends","orgUnitLevelId","getOrgUnitLevelId","sortOrgUnitsBasedOnData","orgUnitSort","parentTemp","childrenTemp","parentOrgUnits","childOrgUnits","sortOrgUnitsBasedOnNames","sort","sortDataSourcesBasedOnData","dataSort","temp","sortDataSourcesBasedOnNames","filteredDataSources","translateAccess","translatedAccess","userId","userAccess","userGroups","intersectionBy","translatedAccesses","config","isModernServer","major","minor","urlSafeAppSlug","coreApp","scheme","substr","indexOf","migrateScorecard","oldScorecard","_oldScorecard$header","_oldScorecard$header2","_oldScorecard$header3","_oldScorecard$header4","_oldScorecard$user","_oldScorecard$header5","_oldScorecard$header6","_oldScorecard$header7","_oldScorecard$average","_oldScorecard$highlig","_oldScorecard$highlig2","header","sub_title","template","getScorecardPublicAccess","user_groups","getScorecardUserGroupAccesses","oldScorecardPeriodSelections","selected_periods","getScorecardOrgUnitSelection","orgunit_settings","getScorecardDataSelection","data_settings","additional_labels","oldScorecardLegendDefinitions","legendset_definitions","hasDefaultProps","has","definition","show_legend_definition","empty_rows","show_average_in_row","show_average_in_column","show_hierarchy","average_selection","toUpperCase","highlighted_indicators","getScorecardDataSource","indicator","oldScorecardDataSelections","indicator_holder_groups","background_color","indicator_holder_ids","holderId","_dataHolder$indicator","holder_id","getScorecardDataHolder","indicator_holders","_await$getDataSourceD","_indicator$title","_indicator$arrow_sett","_indicator$arrow_sett2","legendset","parseFloat","high_is_good","legend_display","arrow_settings","effective_gap","oldScorecardOrgUnitSelections","_oldScorecardOrgUnitS","_oldScorecardOrgUnitS2","_oldScorecardOrgUnitS3","selected_groups","selected_levels","selected_orgunits","selectedOrgUnit","Boolean","selected_user_orgunit","oldScorecardUserGroups","getScorecardAccess","userGroupsOnly","userGroup","oldScrocardUserGroup","see","detail","customFunctionQuery","function","evaluateCustomFunction","customFunction","ruleId","rule","rules","_customFunction$funct","code","parameters","layout","Function","success","runCustomFunction","_updatedData","_updatedData$metaData","_updatedData$rows","updatedData","updatedId","updatedRow","formatData","getCustomFunctionData","_item$split","_await$getCustomFunct","functionId","getCustomFunction","responses","mergeWith","objValue","srcValue","noOfPeriods","currentValue","_currentValue$dataHol","dataCellsWidth","getDataCellsWidth","abs","getIncreasingStatus","parsedCurrentValue","parsedPreviousValue","validateRequiredFields","requiredFieldsPath","errors","validateScorecard","_validateRequiredFiel","getValidationPageFields","form","activePage"],"sourceRoot":""}