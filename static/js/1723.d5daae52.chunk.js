"use strict";(self.webpackChunk_dhis2_app_shell=self.webpackChunk_dhis2_app_shell||[]).push([[1723],{98981:function(e,t,n){n.d(t,{a:function(){return c},w:function(){return u}});var a=n(48666),l=n(69987),r=n(25435),i=n(55481),o=n(33233),s=n(19511),d=n(62685);const c=(0,r.selector)({key:"cell-analysis-data",get:async e=>{let{get:t}=e;const{orgUnits:n}=t(i.R6),r=t(o.ZU),c=t(u),p=t(s.Gj);if(!(0,l.isEmpty)(n)&&!(0,l.isEmpty)(r)&&!(0,l.isEmpty)(c)){const e=c[0];return"customFunction"===e.type?new a.AnalyticsResult(await(0,d.By)(p,{functions:[e.id],orgUnits:n.map((e=>{let{id:t}=e;return t})),periods:null===r||void 0===r?void 0:r.map((e=>{let{id:t}=e;return t}))})):await(new a.Fn.Analytics).setDimension("ou",`${n.map((e=>{let{id:t}=e;return t})).join(";")}`).setPeriod(null===r||void 0===r||null===(g=r.map((e=>{let{id:t}=e;return t})))||void 0===g?void 0:g.join(";")).setData(null===c||void 0===c||null===(m=c.map((e=>{let{id:t}=e;return t})))||void 0===m?void 0:m.join(";")).get();var g,m}}}),u=(0,r.atom)({key:"cell-analysis-data-source",default:[]})},90140:function(e,t,n){n.d(t,{$:function(){return r}});var a=n(25435),l=n(42622);const r=(0,a.atom)({key:"cell-analysis-layout",default:l.oT})},55481:function(e,t,n){n.d(t,{Ig:function(){return s},PU:function(){return o},R6:function(){return d},Yn:function(){return i}});var a=n(69987),l=n(25435),r=n(19511);const i=(0,l.atom)({key:"cell-analysis-orgUnit-state",default:(0,l.selector)({key:"cell-analysis-orgUnit-selector",get:e=>{let{get:t}=e;return t((0,r.jw)("orgUnitSelection"))}})}),o=(0,l.atom)({key:"orgUnitOptionCell",default:!1}),s=(0,l.selector)({key:"orgUnitOptionCellSelector",get:e=>{let{get:t}=e;return t(o)},set:(e,t)=>{let{set:n}=e;n(o,t)}}),d=(0,l.selector)({key:"cell-analysis-initial-org-units-resolver",get:async e=>{var t,n;let{get:l}=e;const{orgUnits:o,levels:s,groups:d,userOrgUnit:c,userSubUnit:u,userSubX2Unit:p}=l(i),g=null!==(t=l(r.gi))&&void 0!==t?t:[],m=null!==(n=l(r.ip))&&void 0!==n?n:[],{organisationUnits:v}=l(r.aF),f=l(r.Ee);let h=o;if(!(0,a.isEmpty)(m)&&!(0,a.isEmpty)(g)){var y,E;if(p&&(h=[...h,{id:"USER_ORGUNIT_GRANDCHILDREN"}]),u&&(h=[...h,{id:"USER_ORGUNIT_CHILDREN"}]),c&&(h=[...h,...v]),!(0,a.isEmpty)(s))h=[...h,...null!==(y=null===s||void 0===s?void 0:s.map((e=>{var t;return{id:`LEVEL-${null===(t=(0,a.find)(f,{id:e}))||void 0===t?void 0:t.level}`}})))&&void 0!==y?y:[]];if(!(0,a.isEmpty)(d))h=[...h,...null!==(E=null===d||void 0===d?void 0:d.map((e=>({id:`OU_GROUP-${e}`}))))&&void 0!==E?E:[]]}return{orgUnits:(0,a.uniqBy)(h,"id")}}})},33233:function(e,t,n){n.d(t,{Uz:function(){return d},ZU:function(){return c},nK:function(){return o},xl:function(){return s}});var a=n(21386),l=n(69987),r=n(25435),i=n(19511);const o=(0,r.atom)({key:"cell-analysis-period-state",default:(0,r.selector)({key:"cell-analysis-period-selector",get:e=>{let{get:t}=e;return t((0,i.jw)("periodSelection"))}})}),s=(0,r.atom)({key:"cell-period-option-state",default:[]}),d=(0,r.selector)({key:"cell-period-option-selector",get:e=>{let{get:t}=e;return t(s)},set:(e,t)=>{let{set:n}=e;n(s,t)},reset:e=>{let{reset:t}=e;t(s)}}),c=(0,r.selector)({key:"cell-analysis-period-resolver",get:e=>{var t;let{get:n}=e;const{periods:r}=null!==(t=n(o))&&void 0!==t?t:{};if(!(0,l.isEmpty)(r)){const e=(0,l.filter)(n(s).length>0?n(s):r,(e=>{var t;let{id:n}=e;const l=(new a.Period).setPreferences({allowFuturePeriods:!0}).getById(n);return null===l||void 0===l||null===(t=l.type)||void 0===t?void 0:t.match(RegExp("Relative"))}));let t=[...(0,l.differenceBy)(r,e,"id")];t=n(s).length>0?[...(0,l.differenceBy)(e,"id")]:[...(0,l.differenceBy)(r,e,"id")];for(const n of e){const e=(new a.Period).setPreferences({allowFuturePeriods:!0}).getById(null===n||void 0===n?void 0:n.id),r=(0,l.isArray)(null===e||void 0===e?void 0:e.iso)?null===e||void 0===e?void 0:e.iso:[null===e||void 0===e?void 0:e.iso];t=t.concat(r)}return(0,l.uniqBy)((0,l.compact)(t),"id")}return[]}})},11723:function(e,t,n){n.r(t),n.d(t,{default:function(){return ct}});var a=n(10815),l=n(477),r=n.n(l),i=n(81195),o=n(40903),s=n(78273),d=n(25435),c=n(73004),u=n(26874),p=n(10466),g=n(40891),m={"org-unit-header-cell":"scorecardTable_org-unit-header-cell__zyAxQ","holder-header-cell":"scorecardTable_holder-header-cell__Tysy3","data-header-cell":"scorecardTable_data-header-cell__v5Zuf","period-header-cell":"scorecardTable_period-header-cell__9IjVV","child-table-row":"scorecardTable_child-table-row__GI9Cw","parent-table-row":"scorecardTable_parent-table-row__Mz+w5","table-print":"scorecardTable_table-print__BlF6y","average-row":"scorecardTable_average-row__Lc5lf","table-header-row":"scorecardTable_table-header-row__57TP5"},v=n(69987),f=n(74073),h=n(19511),y=n(62685);function E(e){var t;let{cellRef:n,dataSources:a,values:l,bold:r,period:o,orgUnit:s}=e;const[c]=null!==a&&void 0!==a?a:[],u=(0,d.useRecoilValue)((0,h.L4)(!0)),p=(0,d.useRecoilValue)(h.Ee),g=(0,d.useRecoilValue)((0,h.jw)("legendDefinitions")),{color:m}=null!==(t=(0,y.EM)((0,v.head)(l),null===c||void 0===c?void 0:c.legends,{max:null===c||void 0===c?void 0:c.weight,defaultLegends:u,dataOrgUnitLevel:{},orgUnitLevels:p,legendDefinitions:g,specificTargets:null===c||void 0===c?void 0:c.specificTargets,period:o,orgUnit:s}))&&void 0!==t?t:{};return void 0===(0,v.head)(l)?null:i.createElement(f.$T,{cellRef:n,color:m,bold:r,value:void 0!==(0,v.head)(l)?(0,v.round)((0,v.head)(l),2):""})}function b(e){var t,n;let{cellRef:a,dataSources:l,values:r,bold:o,period:s,orgUnit:c}=e;const u=(0,d.useRecoilValue)((0,h.L4)(!0)),p=(0,d.useRecoilValue)(h.Ee),g=(0,d.useRecoilValue)((0,h.jw)("legendDefinitions")),[m,E]=null!==l&&void 0!==l?l:[],{color:b}=null!==(t=(0,y.EM)((0,v.head)(r),null===m||void 0===m?void 0:m.legends,{max:null===m||void 0===m?void 0:m.weight,defaultLegends:u,dataOrgUnitLevel:{},orgUnitLevels:p,legendDefinitions:g,orgUnit:c,period:s,specificTargets:null===m||void 0===m?void 0:m.specificTargets}))&&void 0!==t?t:{},{color:R}=null!==(n=(0,y.EM)((0,v.last)(r),null===E||void 0===E?void 0:E.legends,{max:null===E||void 0===E?void 0:E.weight,defaultLegends:u,dataOrgUnitLevel:{},orgUnitLevels:p,legendDefinitions:g,orgUnit:c,period:s,specificTargets:null===E||void 0===E?void 0:E.specificTargets}))&&void 0!==n?n:{};return i.createElement(f.VB,{cellRef:a,topColor:b,bottomColor:R,bold:o,topValue:(0,v.head)(r)?(0,v.round)(+(0,v.head)(r),2):"",bottomValue:(0,v.last)(r)?(0,v.round)((0,v.last)(r),2):""})}function R(e){let{value:t,bold:n,dataSources:a,period:l,orgUnit:r}=e;const o=Object.values(t),[s,d]=(0,i.useState)();return i.createElement("td",{ref:d,className:"data-cell",align:"center"},o.length>1?i.createElement(b,{cellRef:s,period:l,orgUnit:!0,bold:n,dataSources:a,values:o}):i.createElement(E,{cellRef:s,period:l,orgUnit:r,bold:n,dataSources:a,values:o}))}function w(e){let{value:t,bold:n,dataSources:a,orgUnit:l,period:r}=e;const[o,s]=(0,i.useState)();return void 0===t?null:"number"===typeof t?i.createElement("td",{ref:s,className:"data-cell",align:"center"},i.createElement(f.$T,{cellRef:o,bold:n,value:t?(0,v.round)(t,2):""})):i.createElement(R,{orgUnit:l,period:r,value:t,bold:n,dataSources:a})}E.propTypes={values:r().arrayOf(r().any).isRequired,bold:r().bool,dataSources:r().arrayOf(r().any),orgUnit:r().string,period:r().string},b.propTypes={values:r().arrayOf(r().any).isRequired,bold:r().bool,dataSources:r().arrayOf(r().any),orgUnit:r().string,period:r().string},R.propTypes={value:r().any.isRequired,bold:r().bool,dataSources:r().arrayOf(r().any),orgUnit:r().string,period:r().string},w.propTypes={value:r().any.isRequired,bold:r().bool,dataSources:r().arrayOf(r().any),orgUnit:r().string,period:r().string};var U=n(23985);function x(e){let{period:t,dataSources:n,orgUnit:a,orgUnits:l,dataEngine:r}=e;const[o,s]=(0,i.useState)(),c=(0,d.useRecoilValue)((0,h.Mm)(l)),{childrenOrgUnits:u,filteredOrgUnits:p}=(0,d.useRecoilValue)((0,h.z)(l));return(0,i.useEffect)((function(){if(!c){let l;var e;if((0,v.isEmpty)(n))l=r.getOrgUnitColumnAverage({period:t,orgUnit:a}).subscribe(s);else l=r.getDataSourceColumnAverage({period:t,dataSources:null===n||void 0===n?void 0:n.map((e=>{let{id:t}=e;return t})),orgUnits:null===(e=[...u,...p])||void 0===e?void 0:e.map((e=>{let{id:t}=e;return t}))}).subscribe(s);return()=>{l.unsubscribe()}}}),[c,n,a,t,u,p]),i.createElement(w,{dataSources:n,bold:!0,value:o,period:t})}function S(e){let{orgUnits:t,overallAverage:n,dataEngine:a}=e;const l=(0,d.useRecoilValue)(h.gi),r=(0,d.useRecoilValue)(h.ip),{averageColumn:o,itemNumber:s}=(0,d.useRecoilValue)((0,h.jw)("options"));return i.createElement(p.U,{className:m["average-row"],bordered:!0},i.createElement(g.W,{fixed:!0,left:"0",width:"50px"}),s&&i.createElement(g.W,{className:"extra-table-cell",fixed:!0,left:"50px",width:"50px"}),i.createElement(g.W,{fixed:!0,left:s?"100px":"50px",className:"scorecard-org-unit-cell"},i.createElement("b",null,u.Z.t("Average"))),null===r||void 0===r?void 0:r.map((e=>{let{dataSources:n,id:r}=e;return null===l||void 0===l?void 0:l.map((e=>{let{id:l}=e;return i.createElement(x,{dataEngine:a,orgUnits:t,key:`${r}-${l}-average-cell`,dataSources:n,period:l})}))})),o&&i.createElement(w,{bold:!0,value:n}))}function O(e){var t;let{orgUnits:n,overallAverage:a,dataEngine:l}=e;const r=(0,d.useRecoilValue)(h.gi),{childrenOrgUnits:o,filteredOrgUnits:s}=(0,d.useRecoilValue)((0,h.z)(n)),{averageColumn:c,itemNumber:v}=(0,d.useRecoilValue)((0,h.jw)("options"));return i.createElement(p.U,{className:m["average-row"],bordered:!0},i.createElement(g.W,{fixed:!0,left:"0",width:"50px"}),v&&i.createElement(g.W,{fixed:!0,left:"50px",width:"50px"}),i.createElement(g.W,{fixed:!0,left:v?"100px":"50px",className:"scorecard-org-unit-cell"},i.createElement("b",null,u.Z.t("Average"))),null===(t=[...s,...o])||void 0===t?void 0:t.map((e=>{let{id:t}=e;return null===r||void 0===r?void 0:r.map((e=>{let{id:a}=e;return i.createElement(x,{dataEngine:l,orgUnits:n,key:`${t}-${a}-average`,period:a,orgUnit:t})}))})),c&&i.createElement(w,{bold:!0,value:a}))}x.propTypes={dataEngine:r().instanceOf(U.Oq).isRequired,orgUnits:r().array.isRequired,period:r().string.isRequired,dataSources:r().array,orgUnit:r().string},S.propTypes={dataEngine:r().instanceOf(U.Oq).isRequired,orgUnits:r().array.isRequired,overallAverage:r().number.isRequired},O.propTypes={dataEngine:r().instanceOf(U.Oq).isRequired,orgUnits:r().array.isRequired,overallAverage:r().number.isRequired};var A=n(6997),T=n(22020),V=n(86900),k=n(98914),_=n(13534),N=n(86837),L=n(90511),C=n(27239),D=n(80966),q=n(34601),j=n.n(q),$=n(98981),I=n(90140);function P(e){let t="";switch(e){case"radar":case"dotted":t="line";break;default:t=e}return t}function W(e){const t=P(e.type),n={series:{cursor:"pointer",point:{events:{click:function(){const e=(window.clickedCharts||{})[this.id],t=this.color;e?(window.clickedCharts||{})[this.id]=null:(window.clickedCharts||(window.clickedCharts={}),window.clickedCharts={...window.clickedCharts,[this.id]:{color:this.color}}),this.update({color:e?"#f00"!==t?"#f00":e.color:"#f00"},!0,!1)}}}}};if(t)switch(t){case"solidgauge":case"gauge":n[t]={dataLabels:{y:5,borderWidth:0,useHTML:!0}};break;case"pie":n[t]={borderWidth:0,allowPointSelect:!0,cursor:"pointer",showInLegend:!e.hideLegend};break;default:n[""!==t?t:"series"]={showInLegend:!e.hideLegend,colorByPoint:!0},"stacked_column"!==e.type&&"stacked_bar"!==e.type&&"area"!==e.type||(n[t].stacking=e.percentStackedValues?"percent":"normal"),"dotted"===e.type&&(n.line={lineWidth:0,states:{hover:{enabled:!1}}})}return n}function B(e,t){return e.hideSubtitle?null:{text:(0,v.map)(e.zAxisType,(e=>(0,v.map)(t&&t.metaData&&t.metaData[e]||[],(e=>t&&t.metaData&&t.metaData.names&&t.metaData.names[e]||[])).join(", "))).join(" - "),align:"left",style:{fontWeight:"600",fontSize:"13px"}}}function M(e){return e.hideTitle?null:{text:e.title,align:"left",style:{fontWeight:"500",fontSize:"16px"}}}function G(e){const t=P(e.type);let n={};if(t)switch(t){case"solidgauge":n={enabled:!1};break;case"pie":n={pointFormat:"{series.name}<br/> <b>{point.y}</b> ( {point.percentage:.1f} % )"};break;default:if("stacked_column"===e.type)n={headerFormat:"<b>{point.x}</b><br/>",pointFormat:"{series.name}: {point.y}<br/>Total: {point.stackTotal}"};else n={enabled:!0}}return n}function F(e){const t={renderTo:e.renderId,zoomType:"xy",type:P(e.type)};return"pie"===e.type?(t.plotBackgroundColor=null,t.plotBorderWidth=null,t.plotShadow=!1):"radar"===e.type&&(t.polar=!0),t}function Z(e,t){return t.cumulativeValues?function(e,t,n){const a=(0,v.clone)(e);if(e){const l=e.metadata[n],r=[...(0,v.reverse)([...e.metadata[t]])],i=(0,v.findIndex)(e.headers,(0,v.find)(e.headers,["name",n])),o=(0,v.findIndex)(e.headers,(0,v.find)(e.headers,["name",t])),s=(0,v.findIndex)(e.headers,(0,v.find)(e.headers,["name","value"])),d=[];l.forEach((t=>{let n=0;r.forEach((a=>{e.rows.forEach((e=>{if(e[i]===t&&e[o]===a){n+=parseInt(e[s],10);const t=(0,v.clone)(e);t[s]=n,d.push(t)}}))}))})),a.rows=(0,v.assign)([],d)}return a}(e,t.xAxisType[0],t.yAxisType):e}function z(e,t){const n=(0,v.flatten)((0,v.filter)((0,v.map)(t.dataSelections||[],(e=>e.groups)),(e=>e))),a=(0,v.flatten)((0,v.map)(n,(e=>(0,v.map)(e.members,(t=>`${t.id}_${e.id}`))))),l=(0,v.map)(e.series,(e=>(0,v.filter)((0,v.map)(e.data,((e,t)=>""===e.y||a.length>0&&-1===a.indexOf(e.id)?t:-1)),(e=>-1!==e))));let r=[];(0,v.each)(l,(e=>{r=0===r.length?e:r,r=(0,v.intersection)(r,e)}));const i=(0,v.map)(e.series,(e=>({...e,data:(0,v.filter)((0,v.map)(e.data,(e=>{const t=e.id.split("_"),a=(0,v.find)(n,["id",t[1]]);return(window.clickedCharts||{})[e.id]?{...e,color:"#f00"}:a&&(0,v.some)(a.members,(e=>e.id===t[0]))&&a.color?{...e,color:a.color}:e})),((e,t)=>-1===r.indexOf(t)))})));let o=0;const s=(0,v.map)(e.xAxis.categories,(e=>{if(!e.categories)return e;const t={...e,categories:(0,v.filter)(e.categories,((e,t)=>-1===r.indexOf(t+o)))};return o+=e.categories?e.categories.length:0,t}));return{...e,series:i,xAxis:{...e.xAxis,categories:s},exporting:(d=s,{scale:3,chartOptions:{title:{style:{fontSize:"10px"}},subtitle:{style:{fontSize:"10px"}},xAxis:[{categories:d,labels:{rotation:0,style:{fontSize:"8px",color:"#000000",textAlign:"center",textOverflow:"allow",width:1,paddingBottom:"5px"}}}]},buttons:{contextButton:{enabled:!0}}})};var d}function H(e,t,n){let a=[];const l=e.metaData.names;return null===t||void 0===t||t.forEach(((t,n)=>{var r;const i=null!==(r=e.metaData[t])&&void 0!==r?r:[];if(i)if(n>0){const e=(0,v.assign)([],a);a=[],i.forEach((t=>{e.forEach((e=>{a.push({id:e.id+"_"+t,name:e.name+"_"+l[t].trim()})}))}))}else a=(0,v.map)(i,(e=>({id:e,name:l[e].trim()})))})),a}function K(e){let t={};if("radar"===e)t=(0,v.assign)({},{size:"80%"});else t=(0,v.assign)({},{center:["50%","85%"],size:"140%",startAngle:-90,endAngle:90,background:{backgroundColor:"#EEE",innerRadius:"60%",outerRadius:"100%",shape:"arc"}});return t}function Q(e){let t=null;if("pie"===e.type)t={enabled:e.showData,format:"{point.name}<br/> <b>{point.y}</b> ( {point.percentage:.1f} % )"};else t={enabled:e.showData};return t}function Y(e,t,n,a){const l=[],r=(0,v.findIndex)(e.headers,(0,v.find)(e.headers,["name",t.yAxisType])),i=(0,v.findIndex)(e.headers,(0,v.find)(e.headers,["name","value"])),o=(0,v.map)(t.xAxisType,(t=>(0,v.findIndex)(e.headers,(0,v.find)(e.headers,["name",t])))).join("_");return a&&a.forEach((a=>{const s=function(e,t,n,a,l,r){let i=0;const o=(0,v.map)(e,(e=>{let i=0,o="";if((0,v.forEach)(a.split("_"),(t=>{o+=""!==o?"_":"",o+=e[t]})),e[t]===n&&o===l){const t=parseFloat(e[r]);if(isNaN(t))return e[r];i+=t}return i})).filter((e=>0!==e));if(o){if((0,v.some)(o,(e=>isNaN(e))))return"";const e=(0,v.some)(o,(e=>e.toString().split(".")[1])),t=o.length>0?o.reduce(((e,t)=>parseFloat(e)+parseFloat(t))):0;i=e?t/o.length:t}return 0!==i?i:null}(e.rows,r,n,o,a.id,i);l.push({id:a.id,name:a.name,dataLabels:Q(t),y:s})})),l}function J(e,t,n,a){return n.map(((n,l)=>({name:n.name,id:n.id,index:l,turboThreshold:0,pointPlacement:"radar"===a.type?"on":void 0,data:Y(e,a,n.id,t),type:P(a.type)})))}function X(e){const t=e.axes;let n=[];return n=0==t.length?(0,v.assign)([],[{min:e.rangeAxisMinValue,max:e.rangeAxisMaxValue,title:{text:"",style:{color:"#000000",fontWeight:"normal",fontSize:"14px"}}}]):(0,v.map)(t,(t=>({min:e.rangeAxisMinValue,max:e.rangeAxisMaxValue,title:{text:t.name,style:{color:"#000000",fontWeight:"normal",fontSize:"14px"}},opposite:"left"!==t.orientation}))),(0,v.map)(n,(t=>{switch(e.type){case"radar":t.gridLineInterpolation="polygon",t.lineWidth=0;break;case"solidgauge":t.lineWidth=0,t.labels={y:16},t.max=100;break;case"stacked_column":t.stackLabels={enabled:!1,style:{fontWeight:"bold"}};break;default:t.labels={style:{color:"#000000",fontWeight:"normal",fontSize:"14px"}},t.plotLines=[{color:"#000000",dashStyle:"Solid",value:e.targetLineValue,width:2,zIndex:1e3,label:{text:e.targetLineLabel}},{color:"#000000",dashStyle:"Solid",value:e.baseLineValue,zIndex:1e3,width:2,label:{text:e.baseLineLabel}}]}return t}))}function ee(e){let t=[];return e.forEach((e=>{e.forEach((e=>{const n=(0,v.find)(t,["id",e.id]);if(n){const a=(0,v.findIndex)(t,n),l={...e};l.y+=n.y,t=[...t.slice(0,a),l,...t.slice(a+1)]}else t=[...t,e]}))})),t}function te(e,t){let n=[...e],a=[];const l=[...ee((0,v.map)(e,(e=>e.data)))];return 1===t?(a=(0,v.map)((0,v.reverse)((0,v.sortBy)(l,["y"])),(e=>e.id)),n=(0,v.map)(n,(e=>{const t={...e};return a.length>0&&(t.data=[...(0,v.map)(a,(t=>(0,v.find)(e.data,["id",t])))]),t}))):-1===t&&(a=(0,v.map)((0,v.sortBy)(l,["y"]),(e=>e.id)),n=(0,v.map)(e,(e=>{const t={...e};return a.length>0&&(t.data=[...(0,v.map)(a,(t=>(0,v.find)(e.data,["id",t])))]),t}))),n}function ne(e,t,n){const a=(0,v.clone)(e),l=H(t,n.yAxisType);a.pane=K(n.type),a.yAxis=(0,v.assign)([],X(n));const r=te(J(t,H(t,n.xAxisType),l,n),n.cumulativeValues?-1:n.sortOrder);return{...a,series:r}}function ae(e,t,n){const a=(0,v.clone)(e),l=H(t,n.yAxisType);a.pane=(0,v.assign)({},K(n.type)),a.yAxis=(0,v.assign)([],X(n));const r=te(J(t,H(t,n.xAxisType),l,n),n.cumulativeValues?-1:n.sortOrder);a.series=(0,v.assign)([],r);const i=function(e){return(e?e.xAxisType:[]).map((t=>{const n=(0,v.find)(e?e.dataSelections:[],["dimension","groups"===t?"dx":t]);return n?"groups"===t?n.groups:n.items:[]}))}(n);return a.xAxis=function(e,t){let n={};n="radar"===t.type?(0,v.assign)({},{categories:e,tickmarkPlacement:"on",lineWidth:0}):(0,v.assign)({},{categories:[...null===e||void 0===e?void 0:e.map((e=>e.name))],labels:{rotation:0,useHTML:!0,allowOverlap:!0,style:{color:"#000000",fontWeight:"normal",fontSize:"12px",wordBreak:"break-all",textOverflow:"allow"}}});return n}(function(e,t){const n=(0,v.reverse)(t||[]);let a=[];if(e){const t=(0,v.map)(e,(e=>e.data));if(t){const e=(0,v.map)(t,(e=>(0,v.map)(e,(e=>{const t=e.name.split("_"),a=[];if(t){const e=(0,v.reverse)(t);(0,v.times)(t.length,(t=>{if(0===t){const l=(0,v.find)(n[t]||[],["id",e[t]]);a.push({id:e[t],name:l?l.label||l.name:e[t]})}else{const l=(0,v.find)(a,["id",e[t-1]]);if(l){const r=(0,v.findIndex)(a,l);let i=l.categories?l.categories:[];const o=(0,v.find)(n[t]||[],["id",e[t]]);i=[...i,o?o.label||o.name:e[t]],l.categories=(0,v.assign)([],i),a[r]=l}}}))}return a[0]}))));if(e){const t=(0,v.groupBy)(e[0],"name"),n=(0,v.map)(e[0],(e=>e.name)),l=[];(0,v.forEach)(n,(e=>{const n=(0,v.filter)((0,v.map)(t[e],(e=>e.categories?e.categories[0]:null)),(e=>null!==e));0===n.length?l.push({name:e}):l.push({name:e,categories:n})})),a=(0,v.assign)([],l)}}}return(0,v.uniqBy)(a,"name")}(a.series,i),n),a}function le(e,t){const n=Z(e,t);let a=function(e,t){return{chart:F(t),title:M(t),subtitle:B(t,e),credits:{enabled:!1},colors:["#A9BE3B","#558CC0","#D34957","#FF9F3A","#968F8F","#B7409F","#FFDA64","#4FBDAE","#B78040","#676767","#6A33CF","#4A7833","#434348","#7CB5EC","#F7A35C","#F15C80"],plotOptions:W(t),tooltip:G(t)}}(n,t);switch(t.type){case"radar":a=ae(a,n,t);break;case"solidgauge":a=ne(a,n,t);break;case"gauge":const e=(0,v.clone)(t);e.type="solidgauge",a=ne(a,n,e);break;default:return z(ae(a,n,t),t)}return z(a,t)}function re(e,t){return`${e.title||e.displayName||e.name}${t?` : ${t}`:""}`}var ie=n(42622);const oe=(0,d.atom)({key:"chartTypes-atom",default:ie.CK}),se=(0,d.atom)({key:"chart-update-atom",default:{id:"",type:""}}),de=(0,d.atom)({key:"current-chart-type",default:"column"}),ce=(0,d.selectorFamily)({key:"chart-comfiguration-selector",get:e=>{let{layout:t,currentChartType:n}=e;return()=>{var e,a,l;return a=t,l=[],{renderId:"render-id-unique",type:n,title:re(e={},""),subtitle:e.hasOwnProperty("subtitle")?e.subtitle:"",hideTitle:!e.hasOwnProperty("hideTitle")||e.hideTitle,hideSubtitle:!!e.hasOwnProperty("hideSubtitle")&&e.hideSubtitle,showData:!e.hasOwnProperty("showData")||e.showData,hideEmptyRows:!e.hasOwnProperty("hideEmptyRows")||e.hideEmptyRows,hideLegend:!e.hasOwnProperty("hideLegend")||e.hideLegend,cumulativeValues:!!e.hasOwnProperty("cumulativeValues")&&e.cumulativeValues,targetLineValue:e.targetLineValue?e.targetLineValue:void 0,targetLineLabel:e.targetLineLabel?e.targetLineLabel:"",baseLineValue:e.baseLineValue?e.baseLineValue:void 0,baseLineLabel:e.baseLineLabel?e.baseLineLabel:"",legendAlign:"bottom",categoryRotation:0,reverseLegend:!1,showLabels:!0,axes:e.axes?e.axes:[],rangeAxisMaxValue:90,rangeAxisMinValue:e.rangeAxisMinValue?e.rangeAxisMinValue:void 0,sortOrder:e.hasOwnProperty("sortOrder")?e.sortOrder:0,percentStackedValues:!e.hasOwnProperty("percentStackedValues")||e.percentStackedValues,multiAxisTypes:e.hasOwnProperty("selectedChartTypes")?e.selectedChartTypes:[],xAxisType:a.row,yAxisType:a.column,zAxisType:a.filter,dataSelections:l}}}});function ue(e){let{chartHeight:t}=e;const n=(0,d.useRecoilValue)(oe),a=(0,d.useSetRecoilState)(se),[l,r]=(0,d.useRecoilState)(de),o=(0,d.useRecoilValue)($.a),s=(0,d.useRecoilValue)(I.$),c=(0,d.useRecoilValue)(ce({layout:s,currentChartType:l}));let u="";function p(e,t){if(t&&e){const n=le(e,t);n&&setTimeout((()=>{u=j().chart("renderId",n)}),20)}}return(0,i.useEffect)((()=>{p(o._data,c)}),[o,l,s]),i.createElement("div",{className:"chart-item-container",style:{width:"100%"}},i.createElement("div",{id:"renderId",className:"chart-block",style:{height:"calc("+t+"px-20px",width:"100%"}}),i.createElement("ul",{className:"chart-type-list animated fadeInRight"},null===n||void 0===n?void 0:n.map(((e,t)=>i.createElement("li",{key:"chart-type"+t},i.createElement("button",{onClick:t=>function(e,t){t.stopPropagation(),r(e),p(o._data,{...c,type:e}),a({id:"render-id-unique",type:e.toUpperCase})}(e.type,t),title:e.description,className:l==e.type?"active-chart-type":""},i.createElement("img",{src:e.icon,className:"chart-option-icon",alt:""})))))))}function pe(){return i.createElement("div",{className:"chart-list"},i.createElement(i.Suspense,{fallback:i.createElement("div",null,"Loading .....")},i.createElement(ue,{chartHeight:2e3})))}ue.propTypes={chartHeight:r().string.isRequired};var ge=n(55481),me=n(33233),ve=n(69948),fe=n(81589);const he=i.lazy((()=>Promise.all([n.e(8398),n.e(1109)]).then(n.bind(n,81109)))),ye=i.lazy((()=>Promise.all([n.e(2544),n.e(423)]).then(n.bind(n,50423)))),Ee=i.lazy((()=>n.e(3269).then(n.bind(n,63269)))),be=[{displayName:u.Z.t("Table"),name:"table",icon:i.createElement(D.Z,null),component:Ee},{displayName:u.Z.t("Chart"),name:"chart",icon:i.createElement(C.Z,null),component:function(){return i.createElement("div",{className:"column align-items-center center h-100"},i.createElement(pe,{width:"100%"}))}},{displayName:u.Z.t("Dictionary"),name:"dictionary",icon:i.createElement(L.Z,null),component:he}];function Re(e){let{onClose:t,dataHolder:n,orgUnit:a,period:l}=e;const r=(0,d.useRecoilValueLoadable)($.a),o=(0,d.useRecoilValue)(h.Ee),[s,c]=(0,i.useState)(be[0]),p=null===n||void 0===n?void 0:n.dataSources,g=s.component,m=(0,d.useResetRecoilState)(me.xl),f=(0,d.useSetRecoilState)(ge.Ig),E=(0,d.useRecoilCallback)((e=>{let{set:t,snapshot:n}=e;return()=>{const e=n.getLoadable(ge.Ig).contents,r=n.getLoadable(h.PB).contents;e&&t(I.$,{column:["dx"],row:["ou"],filter:["pe"]}),t($.w,p),t(ge.Yn,function(){const t=new U.v6({orgUnits:[a]});if(e){const e=(0,v.cloneDeep)(t),n=(0,v.get)(t,["orgUnits",0,"level"]);if(!(n<r.level))return t;{const t=(0,v.find)(o,(function(e){return e.level===n+1}));e.levels=[t.id]}return e}return t}()),t(me.nK,{periods:[l]})}}),[p,a,o,l]),b=(0,d.useRecoilCallback)((e=>{let{reset:t}=e;return()=>{t(ge.Yn),t(me.nK),t(I.$),t($.w)}}),[]);return(0,i.useEffect)((()=>(E(),()=>{b(),m(),f(!1)})),[p,a,l]),i.createElement(T.u,{className:"large-modal",position:"middle",onClose:t,large:!0},i.createElement(V.h,null,i.createElement("div",{style:{overflow:"hidden",minHeight:400},className:"h-100 w-100 column"},i.createElement(ye,null),i.createElement("h3",{className:"pt-8"},(0,y.mD)(p)),i.createElement(i.Suspense,{fallback:i.createElement(ve.Z,null)},i.createElement("div",{style:{overflow:"auto",margin:"16px 0",height:"100%"}},"hasError"===r.state&&i.createElement(fe.Z,{error:r.contents}),"loading"===r.state&&i.createElement(ve.Z,null),"hasValue"===r.state&&i.createElement(g,null))))),i.createElement(k.n,null,i.createElement("div",{style:{position:"absolute",bottom:16,left:16,width:"calc(100% - 32px)"},className:"row space-between align-items-end"},i.createElement("div",null,null===be||void 0===be?void 0:be.map((e=>i.createElement(_.A,{selected:(null===e||void 0===e?void 0:e.name)===(null===s||void 0===s?void 0:s.name),onClick:()=>c(e),key:null===e||void 0===e?void 0:e.name,icon:null===e||void 0===e?void 0:e.icon},null===e||void 0===e?void 0:e.displayName)))),i.createElement(N.z,{onClick:t},u.Z.t("Cancel")))))}Re.propTypes={dataHolder:r().object.isRequired,orgUnit:r().object.isRequired,period:r().object.isRequired,onClose:r().func.isRequired};var we=n(13488);function Ue(e){var t;let{cellRef:n,data:a,color:l,indicator:r}=e;const{arrows:o}=null!==(t=(0,d.useRecoilValue)((0,h.jw)("options")))&&void 0!==t?t:{},{current:s,previous:c}=null!==a&&void 0!==a?a:{},u=(0,i.useMemo)((()=>{const{effectiveGap:e,displayArrows:t}=null!==r&&void 0!==r?r:{};return o&&t?(0,y.V3)(s,c,e):null}),[s,c,o,r]);return s?i.createElement(f.$T,{cellRef:n,status:u,value:`${null!==s&&void 0!==s?s:""}`,color:l}):i.createElement("div",{style:{height:47,width:"100%",background:l}})}function xe(e){var t;let{cellRef:n,topData:a,bottomData:l,topColor:r,bottomColor:o,topIndicator:s,bottomIndicator:c}=e;const{current:u,previous:p}=null!==a&&void 0!==a?a:{},{current:g,previous:m}=null!==l&&void 0!==l?l:{},{arrows:v}=null!==(t=(0,d.useRecoilValue)((0,h.jw)("options")))&&void 0!==t?t:{},E=(0,i.useMemo)((()=>{const{effectiveGap:e,displayArrows:t}=null!==s&&void 0!==s?s:{};return v&&t?(0,y.V3)(u,p,e):null}),[u,p,v,s]),b=(0,i.useMemo)((()=>{const{effectiveGap:e,displayArrows:t}=null!==c&&void 0!==c?c:{};return v&&t?(0,y.V3)(g,m,e):null}),[g,m,v,c]);return u||g?i.createElement(f.VB,{cellRef:n,topValue:u,topColor:r,bottomValue:g,bottomColor:o,topStatus:E,bottomStatus:b}):i.createElement("div",{style:{height:"100%",width:"100%",background:we.O.grey100}})}Ue.propTypes={data:r().object.isRequired,indicator:r().any.isRequired,color:r().string},xe.propTypes={bottomData:r().object.isRequired,bottomIndicator:r().any.isRequired,topData:r().object.isRequired,topIndicator:r().any.isRequired,bottomColor:r().string,topColor:r().string};var Se=n(84388),Oe=n(75798),Ae=n(13414),Te=n(85770),Ve=n(77121),ke=n(35422),_e=n(21386),Ne={furtherAnalysisMenu:"FurtherAnalysisMenu_furtherAnalysisMenu__NHa6A"};function Le(e){let{stateActionRef:t,setStateActionRef:n,setAnalysisOpen:a}=e;const[l,r]=(0,i.useState)(!1),o=(0,d.useSetRecoilState)(me.Uz),s=(0,d.useSetRecoilState)(ge.Ig);return i.createElement(i.Fragment,null,i.createElement(Se.J,{onClickOutside:()=>n(void 0),placement:"bottom-start",reference:t},i.createElement(Oe.v,null,i.createElement(Ae.s,{onClick:()=>{n(void 0),a(!0)},label:u.Z.t("Further Analysis"),icon:i.createElement(Te.Z,null)}),i.createElement(Ae.s,{onClick:()=>{s(!0),n(void 0),a(!0)},label:u.Z.t("Lower Organisation Unit Levels"),icon:i.createElement(Ve.Z,null)}),i.createElement(Ae.s,{showSubMenu:l,toggleSubMenu:()=>{r((e=>!e))},label:u.Z.t("Trend Analysis "),icon:i.createElement(ke.Z,null),className:Ne.furtherAnalysisMenu},i.createElement(Ae.s,{onClick:()=>{n(void 0),o([(new _e.Period).setPreferences({allowFuturePeriods:!0}).getById("LAST_3_MONTHS")]),a(!0)},label:u.Z.t("Last 3 Months"),icon:i.createElement(Te.Z,null),className:Ne.furtherAnalysisMenu}),i.createElement(Ae.s,{onClick:()=>{n(void 0),o([(new _e.Period).setPreferences({allowFuturePeriods:!0}).getById("LAST_6_MONTHS")]),a(!0)},label:u.Z.t("Last 6 Months"),icon:i.createElement(Te.Z,null),className:Ne.furtherAnalysisMenu}),i.createElement(Ae.s,{onClick:()=>{n(void 0),o([(new _e.Period).setPreferences({allowFuturePeriods:!0}).getById("LAST_12_MONTHS")]),a(!0)},label:u.Z.t("Last 12 Months"),icon:i.createElement(Te.Z,null),className:Ne.furtherAnalysisMenu}),i.createElement(Ae.s,{onClick:()=>{n(void 0),o([(new _e.Period).setPreferences({allowFuturePeriods:!0}).getById("LAST_4_QUARTERS")]),a(!0)},label:u.Z.t("Last 4 Quarters"),icon:i.createElement(Te.Z,null),className:Ne.furtherAnalysisMenu}),i.createElement(Ae.s,{onClick:()=>{n(void 0),o([(new _e.Period).setPreferences({allowFuturePeriods:!0}).getById("LAST_5_YEARS")]),a(!0)},label:u.Z.t("Last 5 Years"),icon:i.createElement(Te.Z,null),className:Ne.furtherAnalysisMenu})))))}Le.propTypes={setAnalysisOpen:r().func,setStateActionRef:r().func,stateActionRef:r().object};n(22103);function Ce(e){var t,n;let{dataSources:a,orgUnit:l,period:r,dataEngine:o}=e;const s=(0,d.useRecoilValue)(h.Ee),c=(0,d.useRecoilValue)((0,h.jw)("legendDefinitions")),{id:u,level:p}=null!==l&&void 0!==l?l:{},{id:g}=null!==r&&void 0!==r?r:{},[m,v]=(0,i.useState)(!1),[f,E]=(0,i.useState)(),[b,R]=(0,i.useState)(),[w,U]=(0,i.useState)(null),x=(0,d.useResetRecoilState)(me.xl),S=(0,d.useResetRecoilState)(ge.PU),[O,A]=(0,i.useState)(),[T,V]=null!==a&&void 0!==a?a:[],{color:k}=null!==(t=(0,y.EM)(null===f||void 0===f?void 0:f.current,null===T||void 0===T?void 0:T.legends,{max:null===T||void 0===T?void 0:T.weight,dataOrgUnitLevel:p,orgUnitLevels:s,legendDefinitions:c,period:g,orgUnit:u,specificTargets:null===T||void 0===T?void 0:T.specificTargets}))&&void 0!==t?t:{},{color:_}=null!==(n=(0,y.EM)(null===b||void 0===b?void 0:b.current,null===V||void 0===V?void 0:V.legends,{max:null===V||void 0===V?void 0:V.weight,dataOrgUnitLevel:p,orgUnitLevels:s,legendDefinitions:c,period:g,orgUnit:u,specificTargets:null===V||void 0===V?void 0:V.specificTargets}))&&void 0!==n?n:{},N=`${T.id}_${u}_${g}`,L=`${null===V||void 0===V?void 0:V.id}_${u}_${g}`;return(0,i.useEffect)((()=>{const e=o.get(N).subscribe((e=>{E(e)})),t=o.get(L).subscribe(R);return()=>{e.unsubscribe(),t.unsubscribe(),x(),S()}}),[u,g,T,V]),i.createElement("td",{ref:A,className:"data-cell",align:"center","data-test":"data-cell",style:{minWidth:100},onClick:e=>{e.stopPropagation(),v(!0)},onContextMenu:e=>{e.preventDefault(),U(e.target)}},(null===a||void 0===a?void 0:a.length)>1?i.createElement(xe,{cellRef:O,topIndicator:T,bottomIndicator:V,bottomData:b,topData:f,bottomColor:_,topColor:k}):i.createElement(Ue,{cellRef:O,indicator:T,data:f,color:k}),m&&i.createElement(Re,{orgUnit:l,period:r,dataHolder:{dataSources:a},onClose:(e,t)=>{t.stopPropagation(),v(!1)}}),w&&i.createElement(Le,{orgUnit:l,period:r,dataSources:a,analysisOpen:m,setAnalysisOpen:v,stateActionRef:w,setStateActionRef:U}))}var De=Ce;Ce.propTypes={dataEngine:r().instanceOf(U.Oq).isRequired,dataSources:r().array.isRequired,orgUnit:r().object.isRequired,period:r().object.isRequired};var qe=n(84415),je=n(65228),$e=n(35667);function Ie(){const{width:e}=(0,$e.ac)();return i.createElement(p.U,null,i.createElement(g.W,{width:`${e}px`,align:"center"},i.createElement("div",{className:"row center align-items-center",style:{height:400,width:"100%"}},i.createElement(qe.V,{small:!0}))))}function Pe(e){let{dataEngine:t,orgUnits:n}=e;const{width:a}=(0,$e.ac)(),{colSpan:l}=(0,d.useRecoilValue)((0,h.Bo)(n)),r=(0,d.useRecoilValue)((0,h.Mm)(n)),[o,s]=(0,i.useState)(0);return(0,i.useEffect)((()=>{const e=t.getProgress().subscribe(s);return()=>{e.unsubscribe()}}),[n,t]),r?i.createElement(p.U,null,i.createElement("td",{colSpan:l},i.createElement(je.j,{width:`${a}px`,amount:o,margin:0}))):null}Pe.propTypes={dataEngine:r().instanceOf(U.Oq).isRequired,orgUnits:r().array.isRequired};var We=n(81411);function Be(e){let{accept:t,children:n}=e;const a=(0,d.useSetRecoilState)(h.kq),l=(0,i.useRef)((0,v.debounce)(a)),[{canDrop:r},o]=(0,We.L)({accept:t,drop:()=>{l.current((e=>e===ie.i5.ORG_UNIT_VS_DATA?ie.i5.DATA_VS_ORG_UNIT:ie.i5.ORG_UNIT_VS_DATA))},collect:e=>({isOver:!!e.isOver(),canDrop:!!e.canDrop()})});return i.createElement("div",{ref:o,className:"column center align-items-center",style:{border:r&&`2px dashed ${we.O.grey700}`,background:r&&`${we.O.grey100}`,height:r?47:"100%",width:"100%"}},n)}Be.propTypes={accept:r().arrayOf(r().string).isRequired,children:r().node.isRequired};var Me=n(66141);function Ge(){return Ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ge.apply(this,arguments)}function Fe(e){let{label:t,type:n,style:a,...l}=e;const[{isDragging:r},o]=(0,Me.c)((()=>({type:n,collect:e=>({isDragging:!!e.isDragging()})})));return i.createElement("div",Ge({},l,{className:"column center",style:{background:r&&(null===we.O||void 0===we.O?void 0:we.O.grey400),cursor:"move",opacity:r?.5:1,height:"100%",width:"100%",padding:"0 12px",...a},ref:o}),t)}function Ze(e){let{orgUnit:t}=e;const{showHierarchy:n}=(0,d.useRecoilValue)((0,h.jw)("options"));return i.createElement(Fe,{label:n?t.hierarchy:t.displayName,type:ie.aV.ORG_UNIT_ROW,style:{textAlign:"start"}})}function ze(e){var t,n;let{orgUnit:a,expandedOrgUnit:l,onExpand:r,overallAverage:o,dataEngine:s,orgUnits:c,index:v}=e;const{emptyRows:f,averageColumn:y,averageDisplayType:E,itemNumber:b}=(0,d.useRecoilValue)((0,h.jw)("options")),[R,U]=(0,i.useState)(!1),[x,S]=(0,i.useState)(),{id:O}=null!==a&&void 0!==a?a:{},{dataGroups:T}=null!==(t=(0,d.useRecoilValue)((0,h.jw)("dataSelection")))&&void 0!==t?t:{},V=(0,d.useRecoilValue)((0,h.Mm)(c)),k=null!==(n=(0,d.useRecoilValue)(h.gi))&&void 0!==n?n:[];const _=(0,i.useCallback)((()=>{r(O===l?void 0:O)}),[l,O,r]);(0,i.useEffect)((function(){if(void 0!==V&&!V){const e=s.getOrgUnitAverage(O).subscribe(S),t=s.isRowEmpty(O).subscribe(U);return()=>{e.unsubscribe(),t.unsubscribe()}}}),[a,V,O,s]);const N=(f||!R)&&i.createElement(p.U,{dataTest:"orgUnit-children-table-column-cell",className:m["child-table-row"],expanded:O===l,onExpandToggle:_,expandableContent:i.createElement("div",{className:"p-16"},i.createElement(i.Suspense,{fallback:i.createElement(Ie,null)},i.createElement(ct,{nested:!0,orgUnits:[O]}))),key:O,bordered:!0},b&&i.createElement(g.W,{onClick:_,width:"50px",fixed:!0,left:"50px"},v+1),i.createElement(g.W,{dataTest:"orgUnit-parent-table-column-cell",fixed:!0,left:b?"100px":"50px",width:"30%",onClick:_},i.createElement(A.u,{content:u.Z.t("Drag to column headers to change layout")},i.createElement(Be,{accept:[ie.aV.DATA_COLUMN]},i.createElement(Ze,{orgUnit:a})))),null===T||void 0===T?void 0:T.map((e=>{let{id:t,dataHolders:n}=e;return null===n||void 0===n?void 0:n.map((e=>{let{id:n,dataSources:l}=e;return null===k||void 0===k?void 0:k.map((e=>i.createElement(De,{key:`${t}-${n}-${e.id}`,dataEngine:s,orgUnit:a,dataSources:l,period:e})))}))})),y&&i.createElement(w,{bold:!0,value:x}));return E===ie.PG.ALL||E===ie.PG.BELOW_AVERAGE&&o>x||E===ie.PG.ABOVE_AVERAGE&&o<=x?N:null}function He(e){var t,n;let{orgUnits:a,dataSources:l,overallAverage:r,dataEngine:o,index:s}=e;const{emptyRows:c,averageColumn:u,averageDisplayType:f,itemNumber:E}=(0,d.useRecoilValue)((0,h.jw)("options")),[b,R]=(0,i.useState)(!1),[U,x]=(0,i.useState)(),{filteredOrgUnits:S,childrenOrgUnits:O}=(0,d.useRecoilValue)((0,h.z)(a)),A=null!==(t=(0,d.useRecoilValue)(h.gi))&&void 0!==t?t:[];(0,i.useEffect)((()=>{const e=o.isDataSourcesRowEmpty(null===l||void 0===l?void 0:l.map((e=>{let{id:t}=e;return t}))).subscribe(R),t=o.getDataSourceAverage(null===l||void 0===l?void 0:l.map((e=>{let{id:t}=e;return t}))).subscribe(x);return()=>{e.unsubscribe(),t.unsubscribe()}}),[l]);const T=i.createElement(p.U,{bordered:!0,className:m["average-row"]},i.createElement(g.W,{className:"jsx-1369417008",fixed:!0,left:"0",width:"50px"}),E&&i.createElement(g.W,{fixed:!0,left:"50px",width:"50px"},s+1),i.createElement(g.W,{fixed:!0,left:E?"100px":"50px",className:"scorecard-org-unit-cell"},i.createElement(Be,{accept:[ie.aV.ORG_UNIT_COLUMN]},i.createElement(Fe,{label:(0,y.mD)(l),type:ie.aV.DATA_ROW}))),null===(n=[...S,...O])||void 0===n?void 0:n.map((e=>null===A||void 0===A?void 0:A.map((t=>{var n;return i.createElement("td",{className:"data-cell",align:"center",key:`${null===e||void 0===e?void 0:e.id}-${null===(n=(0,v.head)(l))||void 0===n?void 0:n.id}-${null===t||void 0===t?void 0:t.id}`},i.createElement(De,{dataEngine:o,orgUnit:e,dataSources:l,period:t}))})))),u&&i.createElement(w,{dataSources:l,bold:!0,value:U}));return f===ie.PG.ALL||f===ie.PG.BELOW_AVERAGE&&r>U||f===ie.PG.ABOVE_AVERAGE&&r<=U?(c||!b)&&T:null}function Ke(e){var t,n;let{orgUnit:a,overallAverage:l,dataEngine:r,orgUnits:o,index:s}=e;const{emptyRows:c,averageColumn:v,averageDisplayType:f,itemNumber:y}=(0,d.useRecoilValue)((0,h.jw)("options")),[E,b]=(0,i.useState)(!1),[R,U]=(0,i.useState)(),{id:x}=null!==a&&void 0!==a?a:{},{dataGroups:S}=null!==(t=(0,d.useRecoilValue)((0,h.jw)("dataSelection")))&&void 0!==t?t:{},O=(0,d.useRecoilValue)((0,h.Mm)(o)),T=null!==(n=(0,d.useRecoilValue)(h.gi))&&void 0!==n?n:[];(0,i.useEffect)((function(){if(void 0!==O&&!O){const e=r.getOrgUnitAverage(x).subscribe(U),t=r.isRowEmpty(x).subscribe(b);return()=>{e.unsubscribe(),t.unsubscribe()}}}),[a,O,x]);const V=(c||!E)&&i.createElement(p.U,{className:m["parent-table-row"],key:x,bordered:!0},i.createElement(g.W,{fixed:!0,left:"0",width:"50px"}),y&&i.createElement(g.W,{width:"50px",fixed:!0,left:"50px"},s+1),i.createElement(g.W,{dataTest:"orgUnit-parent-table-column-cell",fixed:!0,left:y?"100px":"50px",width:"30%",className:"scorecard-org-unit-cell parent-org-unit-cell"},i.createElement(A.u,{content:u.Z.t("Drag to the column headers to change layout")},i.createElement(Be,{accept:[ie.aV.DATA_COLUMN]},i.createElement(Ze,{orgUnit:a})))),null===S||void 0===S?void 0:S.map((e=>{let{id:t,dataHolders:n}=e;return null===n||void 0===n?void 0:n.map((e=>{let{id:n,dataSources:l}=e;return null===T||void 0===T?void 0:T.map((e=>i.createElement(De,{key:`${t}-${n}-${e.id}`,dataEngine:r,orgUnit:a,dataSources:l,period:e})))}))})),v&&i.createElement(w,{bold:!0,value:R}));return f===ie.PG.ALL||f===ie.PG.BELOW_AVERAGE&&l>R||f===ie.PG.ABOVE_AVERAGE&&l<=R?V:null}Fe.propTypes={label:r().string.isRequired,type:r().oneOf(Object.values(ie.aV)).isRequired,style:r().object},Ze.propTypes={orgUnit:r().object.isRequired},ze.propTypes={dataEngine:r().instanceOf(U.Oq).isRequired,index:r().number.isRequired,orgUnit:r().object.isRequired,orgUnits:r().array.isRequired,overallAverage:r().number.isRequired,onExpand:r().func.isRequired,expandedOrgUnit:r().string},He.propTypes={dataEngine:r().instanceOf(U.Oq).isRequired,dataSources:r().arrayOf(r().object).isRequired,index:r().number.isRequired,orgUnits:r().arrayOf(r().object).isRequired,overallAverage:r().number.isRequired},Ke.propTypes={dataEngine:r().instanceOf(U.Oq).isRequired,index:r().number.isRequired,orgUnit:r().object.isRequired,orgUnits:r().array.isRequired,overallAverage:r().number.isRequired};var Qe=n(7105);function Ye(e,t,n){const{loading:a}=function(e,t,n){const[a,l]=(0,i.useState)(!1),r=(0,Qe.bQ)(),o=(0,d.useSetRecoilState)((0,h.z)(t)),s=(0,d.useRecoilValue)((0,h.jw)("orgUnitSearchKeyword")),{orgUnit:c}=(0,d.useRecoilValue)((0,h.Gs)(t)),u=(0,d.useRecoilValue)((0,h.oT)(t)),p=(0,d.useRecoilValue)(h.gi),g=(0,d.useRecoilValue)(h.kq),[m,f]=(0,i.useState)(),E=(0,d.useRecoilCallback)((e=>{let{reset:n}=e;return()=>{n((0,h.z)(t))}}));return(0,i.useEffect)((()=>{(0,v.isEmpty)(s)||n?E():(l(!0),async function(){const e=await(0,$e.B9)(s,r);o((t=>({...t,filteredOrgUnits:e,childrenOrgUnits:[]})))}().catch((e=>console.error(e))).finally((()=>l(!1))))}),[s]),(0,i.useEffect)((()=>{u&&function(){if(g===ie.i5.ORG_UNIT_VS_DATA){if("period"===u.type){var t;const[n,a]=null===(t=u.name)||void 0===t?void 0:t.split("-");e.sortOrgUnitsByDataAndPeriod({dataSource:n,period:a,sortType:null===u||void 0===u?void 0:u.direction}).subscribe(f)}if("data"===u.type){const t=null===u||void 0===u?void 0:u.name;e.sortOrgUnitsByData({dataSource:t,periods:null===p||void 0===p?void 0:p.map((e=>{let{id:t}=e;return t})),sortType:null===u||void 0===u?void 0:u.direction}).subscribe(f)}}}()}),[c,u,g,e,p]),(0,i.useEffect)((()=>{(0,v.isEmpty)(m)&&c===ie.BQ.DEFAULT?E():(0,v.isEmpty)(m)&&!c||((0,v.isEmpty)(m)?o((e=>{let{childrenOrgUnits:t,filteredOrgUnits:n}=e;const{parentOrgUnits:a,childOrgUnits:l}=(0,y.eL)({sort:c,childrenOrgUnits:t,filteredOrgUnits:n});return{filteredOrgUnits:a,childrenOrgUnits:l}})):o((e=>{let{childrenOrgUnits:t,filteredOrgUnits:n}=e;const{parentOrgUnits:a,childOrgUnits:l}=(0,y.t7)({orgUnitSort:m,childrenOrgUnits:t,filteredOrgUnits:n});return{filteredOrgUnits:a,childrenOrgUnits:l}})))}),[m,c]),{loading:a}}(e,t,n),{loading:l}=function(e,t){const n=(0,d.useSetRecoilState)(h.ip),a=(0,d.useRecoilValue)((0,h.jw)("dataSearchKeyword")),{data:l}=(0,d.useRecoilValue)((0,h.Gs)(t)),r=(0,d.useResetRecoilState)(h.ip),o=(0,d.useRecoilValue)((0,h.oT)(t)),s=(0,d.useRecoilValue)(h.gi),c=(0,d.useRecoilValue)(h.kq);return(0,i.useEffect)((()=>{a?n((e=>(0,v.filter)(e,(e=>{var t;return(0,v.flatten)(null===(t=e.dataSources)||void 0===t?void 0:t.map((e=>{let{id:t,displayName:n}=e;return`${t}-${n}`}))).join("_").toLowerCase().match(RegExp(a.toLowerCase()))})))):r()}),[a]),(0,i.useEffect)((()=>{l&&function t(){let a=[];if(!(0,v.isEmpty)(o)&&c===ie.i5.DATA_VS_ORG_UNIT&&("orgUnit"===o.type&&e.sortDataSourceByOrgUnit({periods:null===s||void 0===s?void 0:s.map((e=>{let{id:t}=e;return t})),orgUnit:null===o||void 0===o?void 0:o.name,sortType:null===o||void 0===o?void 0:o.direction}).subscribe((e=>a=e)),"period"===o.type)){const[t,n]=o.name.split("-");e.sortDataSourceByOrgUnitAndPeriod({period:n,orgUnit:t,sortType:null===o||void 0===o?void 0:o.direction}).subscribe((e=>a=e))}(0,v.isEmpty)(a)?n((e=>(0,y.A$)({sort:t,dataSources:e}))):n((e=>(0,y.i5)({dataSort:a,dataSources:e})))}()}),[e,o,c,s,l]),{loading:!1}}(e,t);return function(e,t){const n=(0,d.useSetRecoilState)((0,h.Mm)(t));(0,i.useEffect)((()=>{const t=e.loading$.subscribe(n);return()=>{t.unsubscribe()}}),[t,e])}(e,t),{loading:a||l}}function Je(e){var t,n;let{orgUnits:a,dataEngine:l,nested:r}=e;const{loading:o}=Ye(l,a,r),[s,u]=(0,i.useState)(),p=(0,Qe.bQ)(),{calendar:g}=(0,d.useRecoilValue)(h.tU),m=(0,d.useRecoilValue)(h.kq),v=(0,d.useRecoilValue)(h.PB),{dataGroups:f}=null!==(t=(0,d.useRecoilValue)((0,h.jw)("dataSelection")))&&void 0!==t?t:{},{averageRow:y}=null!==(n=(0,d.useRecoilValue)((0,h.jw)("options")))&&void 0!==n?n:{},E=(0,d.useRecoilValue)(h.ip),b=(0,d.useRecoilValue)((0,h.Mm)(a)),R=(0,d.useRecoilValue)(h.gi),{periodType:w}=(0,d.useRecoilValue)((0,h.jw)("periodSelection")),{childrenOrgUnits:U,filteredOrgUnits:x}=(0,d.useRecoilValue)((0,h.z)(a)),A=(0,d.useRecoilValue)(h.Do),T=(0,d.useResetRecoilState)(h.Do),[V,k]=(0,i.useState)();return(0,i.useEffect)((()=>{var e;void 0===b||b||l.getOverallAverage(null===(e=[...U,...x])||void 0===e?void 0:e.map((e=>{let{id:t}=e;return t}))).subscribe(k)}),[U,x,b]),(0,i.useEffect)((()=>(l.setDataQueryEngine(p).setDataGroups(f).setPeriods(R).setOrgUnits([...null!==x&&void 0!==x?x:[],...null!==U&&void 0!==U?U:[]]).setPeriodType(w).setCalendar(g).load(),()=>{T()})),[f,x,U,w,R,l,g]),(0,i.useEffect)((()=>{0!==A&&l.refresh()}),[l,A]),o?i.createElement("div",null):i.createElement(c.R,null,i.createElement(i.Fragment,null,m===ie.i5.ORG_UNIT_VS_DATA?i.createElement(i.Fragment,null,null===x||void 0===x?void 0:x.map(((e,t)=>i.createElement(i.Fragment,null,i.createElement("div",{className:"page-break"}),e.level===v.level||function(e,t){return t.some((t=>t.level===e.level+1))}(e,U)?i.createElement(Ke,{index:t,dataEngine:l,key:`${null===e||void 0===e?void 0:e.id}-row`,orgUnit:e,overallAverage:V,orgUnits:a}):i.createElement(ze,{index:t,dataEngine:l,key:`${null===e||void 0===e?void 0:e.id}-row`,onExpand:u,orgUnit:e,expandedOrgUnit:s,overallAverage:V,orgUnits:a})))),null===U||void 0===U?void 0:U.map(((e,t)=>e.level===v.level?i.createElement(i.Fragment,null,i.createElement("div",{className:"page-break"}),i.createElement(Ke,{index:t+1,dataEngine:l,key:`${null===e||void 0===e?void 0:e.id}-row`,orgUnit:e,overallAverage:V,orgUnits:a})):i.createElement(i.Fragment,null,i.createElement("div",{className:"page-break"}),i.createElement(ze,{index:t+1,dataEngine:l,key:`${null===e||void 0===e?void 0:e.id}-row`,onExpand:u,orgUnit:e,expandedOrgUnit:s,overallAverage:V,orgUnits:a}))))):null===E||void 0===E?void 0:E.map(((e,t)=>{let{id:n,dataSources:r}=e;return i.createElement(i.Fragment,null,i.createElement("div",{className:"page-break"}),i.createElement(He,{index:t,dataEngine:l,orgUnits:a,dataSources:r,key:`${n}-row`,overallAverage:V}))})),y&&(m===ie.i5.ORG_UNIT_VS_DATA?i.createElement(i.Fragment,null,i.createElement("div",{className:"page-break"}),i.createElement(S,{dataEngine:l,orgUnits:a,overallAverage:V})):i.createElement(i.Fragment,null,i.createElement("div",{className:"page-break"}),i.createElement(O,{dataEngine:l,orgUnits:a,overallAverage:V})))))}Je.propTypes={dataEngine:r().instanceOf(U.Oq).isRequired,orgUnits:r().arrayOf(r().object).isRequired};var Xe=n(93010),et=n(77986),tt=n(70464);function nt(e){var t;let{orgUnits:n,nested:a}=e;const[l,r]=(0,d.useRecoilState)((0,h.jw)("orgUnitSearchKeyword")),[o,s]=(0,i.useState)(l),{itemNumber:c}=null!==(t=(0,d.useRecoilValue)((0,h.jw)("options")))&&void 0!==t?t:{},[p,f]=(0,d.useRecoilState)((0,h.Gs)(n)),y=(0,i.useRef)((0,v.debounce)(r,1e3,{trailing:!0,leading:!1}));return(0,i.useEffect)((()=>{y.current(o)}),[o]),i.createElement(i.Fragment,null,i.createElement(g.W,{rowSpan:"3",fixed:!0,left:"0",width:"50px"}),c&&i.createElement(g.W,{rowSpan:"3",fixed:!0,left:"50px",width:"50px"}),i.createElement(et.p,{align:"center",name:"orgUnit",onSortIconClick:e=>{let{direction:t}=e;f((e=>({...e,orgUnit:t})))},sortDirection:null===p||void 0===p?void 0:p.orgUnit,fixed:!0,top:"0",left:c?"100px":"50px",bordered:!0,width:"200px",className:m["org-unit-header-cell"],rowSpan:"3"},!a&&i.createElement(tt.U,{dataTest:"org-unit-search",className:"print-hide w-100 org-unit-search",value:o,onChange:e=>{let{value:t}=e;return s(t)},placeholder:u.Z.t("Search Organisation Unit")}),i.createElement("h4",{className:"print-show hide"},u.Z.t("Organisation Unit(s)"))))}function at(e){var t,n,a;let{nested:l,orgUnits:r}=e;const{dataGroups:o}=null!==(t=(0,d.useRecoilValue)((0,h.jw)("dataSelection")))&&void 0!==t?t:{},{averageColumn:s}=null!==(n=(0,d.useRecoilValue)((0,h.jw)("options")))&&void 0!==n?n:{},c=null!==(a=(0,d.useRecoilValue)(h.gi))&&void 0!==a?a:[];return!(1===o.length)&&i.createElement(p.U,{className:m["table-header-row"]},i.createElement(nt,{orgUnits:r,nested:l}),null===o||void 0===o?void 0:o.map(((e,t)=>{var n,a,l,r;let{title:o,id:s,dataHolders:d}=e;return i.createElement(g.W,{fixed:!0,className:"scorecard-table-header header",align:"center",bordered:!0,width:(null!==(n=null===d||void 0===d?void 0:d.length)&&void 0!==n?n:1)*(null!==(a=null===c||void 0===c?void 0:c.length)&&void 0!==a?a:1)*ie.jl.CELL_WIDTH+"px",top:"0",colSpan:""+(null!==(l=null===d||void 0===d?void 0:d.length)&&void 0!==l?l:1)*(null!==(r=null===c||void 0===c?void 0:c.length)&&void 0!==r?r:1),key:s},o)})),s&&i.createElement(g.W,{width:`${ie.jl.CELL_WIDTH}px`,fixed:!0,align:"center",bordered:!0,className:"scorecard-table-header header",rowSpan:"3"},u.Z.t("Average")))}function lt(e){var t,n,a;let{orgUnits:l,nested:r}=e;const{dataGroups:o}=null!==(t=(0,d.useRecoilValue)((0,h.jw)("dataSelection")))&&void 0!==t?t:{},[{name:s,direction:c},f]=(0,d.useRecoilState)((0,h.oT)(l)),{averageColumn:E}=null!==(n=(0,d.useRecoilValue)((0,h.jw)("options")))&&void 0!==n?n:{},b=null!==(a=(0,d.useRecoilValue)(h.gi))&&void 0!==a?a:[],R=e=>{f({...e,type:"data"})},w=1===o.length;return i.createElement(p.U,{className:m["table-header-row"]},w&&i.createElement(nt,{nested:r,orgUnits:l}),null===o||void 0===o?void 0:o.map((e=>{let{dataHolders:t}=e;return null===t||void 0===t?void 0:t.map(((e,t)=>{var n,a;let{id:l,dataSources:r}=e;return i.createElement(et.p,{onSortIconClick:R,sortDirection:s===`${null===(n=(0,v.head)(r))||void 0===n?void 0:n.id}`?c:"default",className:m["holder-header-cell"],dataTest:"indicator-table-header-cell",width:(null===b||void 0===b?void 0:b.length)*ie.jl.CELL_WIDTH+"px",top:"0",fixed:!0,colSpan:`${null===b||void 0===b?void 0:b.length}`,bordered:!0,align:"center",key:`${l}-column-header`,name:`${null===(a=(0,v.head)(r))||void 0===a?void 0:a.id}`},i.createElement("div",{style:{height:"100%",width:"100%"}},i.createElement(A.u,{className:"m-auto",content:u.Z.t("Drag to row headers to change layout")},i.createElement(Be,{accept:[ie.aV.ORG_UNIT_ROW]},i.createElement(Fe,{label:(0,y.mD)(r),type:ie.aV.DATA_COLUMN})))))}))})),E&&w?i.createElement(g.W,{width:`${ie.jl.CELL_WIDTH}px`,fixed:!0,align:"center",bordered:!0,className:"scorecard-table-header header",rowSpan:"3"},u.Z.t("Average")):null)}function rt(e){var t,n;let{orgUnits:a,nested:l}=e;const{averageColumn:r,itemNumber:o}=(0,d.useRecoilValue)((0,h.jw)("options")),{filteredOrgUnits:s,childrenOrgUnits:c}=(0,d.useRecoilValue)((0,h.z)(a)),f=null!==(t=(0,d.useRecoilValue)(h.gi))&&void 0!==t?t:[],[y,E]=(0,d.useRecoilState)((0,h.jw)("dataSearchKeyword")),[b,R]=(0,i.useState)(y),[w,U]=(0,d.useRecoilState)((0,h.Gs)(a)),[{name:x,direction:S},O]=(0,d.useRecoilState)((0,h.oT)(a)),T=(0,i.useRef)((0,v.debounce)(E,1e3,{trailing:!0,leading:!1})),{nameColumnWidth:V}=(0,d.useRecoilValue)((0,h.Bo)(a));(0,i.useEffect)((()=>{T.current(b)}),[b]);const k=e=>{O({...e,type:"orgUnit"})};return i.createElement(p.U,{className:m["table-header-row"]},i.createElement(g.W,{rowSpan:"2",fixed:!0,left:"0",width:"50px"}),o&&i.createElement(g.W,{rowSpan:"2",fixed:!0,left:"50px",width:"50px"}),i.createElement(et.p,{onSortIconClick:e=>{let{direction:t}=e;U((e=>({...e,data:t})))},sortDirection:null===w||void 0===w?void 0:w.data,align:"center",fixed:!0,top:"0",left:o?"100px":"50px",width:V,bordered:!0,className:m["org-unit-header-cell"],rowSpan:"2"},!l&&i.createElement(tt.U,{className:"print-hide w-100 data-search",value:b,onChange:e=>{let{value:t}=e;return R(t)},placeholder:u.Z.t("Search Data")}),i.createElement("h3",{className:"print-show hide"},u.Z.t("Data"))),null===(n=[...s,...c])||void 0===n?void 0:n.map((e=>{var t;let{displayName:n,id:a}=e;return i.createElement(et.p,{name:`${a}`,sortDirection:x===a?S:"default",onSortIconClick:k,fixed:!0,className:m["data-header-cell"],align:"center",bordered:!0,width:(null===f||void 0===f?void 0:f.length)*ie.jl.CELL_WIDTH+"px",colSpan:`${null!==(t=null===f||void 0===f?void 0:f.length)&&void 0!==t?t:1}`,key:a},i.createElement("div",{style:{height:"100%",width:"100%"}},i.createElement(A.u,{className:"m-auto",content:u.Z.t("Drag to row headers to change layout ")},i.createElement(Be,{accept:[ie.aV.DATA_ROW]},i.createElement(Fe,{label:n,type:ie.aV.ORG_UNIT_COLUMN})))))})),r&&i.createElement(g.W,{width:`${ie.jl.CELL_WIDTH}px`,fixed:!0,align:"center",bordered:!0,className:m["data-header-cell"],rowSpan:"2"},u.Z.t("Average")))}function it(e){var t,n,a,l;let{orgUnits:r}=e;const{dataGroups:o}=null!==(t=(0,d.useRecoilValue)((0,h.jw)("dataSelection")))&&void 0!==t?t:{},{filteredOrgUnits:s,childrenOrgUnits:c}=null!==(n=(0,d.useRecoilValue)((0,h.z)(r)))&&void 0!==n?n:{},u=(0,d.useRecoilValue)(h.kq),g=null!==(a=(0,d.useRecoilValue)(h.gi))&&void 0!==a?a:[],[{name:f,direction:y},E]=(0,d.useRecoilState)((0,h.oT)(r)),b=e=>{E({...e,type:"period"})};return g.length>1?i.createElement(p.U,null,u===ie.i5.ORG_UNIT_VS_DATA?null===o||void 0===o?void 0:o.map((e=>{let{dataHolders:t}=e;return null===t||void 0===t?void 0:t.map((e=>{let{id:t,dataSources:n}=e;return null===g||void 0===g?void 0:g.map((e=>{var a,l;let{name:r,id:o}=e;return i.createElement(et.p,{dataTest:"test-period-table-scorecard",fixed:!0,top:"0",onSortIconClick:b,sortDirection:f===`${null===(a=(0,v.head)(n))||void 0===a?void 0:a.id}-${o}`?y:"default",width:"100px",bordered:!0,align:"center",key:`${t}-${o}`,className:m["period-header-cell"],name:`${null===(l=(0,v.head)(n))||void 0===l?void 0:l.id}-${o}`},r)}))}))})):null===(l=[...s,...c])||void 0===l?void 0:l.map((e=>{let{id:t}=e;return null===g||void 0===g?void 0:g.map((e=>{let{name:n,id:a}=e;return i.createElement(et.p,{dataTest:"test-period-table-scorecard",fixed:!0,top:"0",onSortIconClick:b,sortDirection:f===`${t}-${a}`?y:"default",width:"100px",bordered:!0,align:"center",key:`${t}-${a}`,className:"scorecard-table-cell header",name:`${t}-${a}`},n)}))}))):null}function ot(e){switch(e){case"groups":return at;case"data":return lt;case"periods":return it;case"orgUnits":return rt;default:return null}}function st(e){let{orgUnits:t,nested:n}=e;const{columns:a}=(0,d.useRecoilValue)((0,h.Bo)(t)),l=(0,i.useMemo)((()=>null===a||void 0===a?void 0:a.map(ot)),[a]);return i.createElement(Xe.s,null,null===l||void 0===l?void 0:l.map(((e,l)=>i.createElement(e,{orgUnits:t,nested:n,key:`${a[l]}-header-row`}))))}function dt(e){let{orgUnits:t}=e;const{nameColumnWidth:n}=(0,d.useRecoilValue)((0,h.Bo)(t));return i.createElement("colgroup",null,i.createElement("col",{width:"50px"}),i.createElement("col",{width:"50px"}),i.createElement("col",{width:`${n}`}))}function ct(e){let{orgUnits:t,nested:n,initialDataEngine:l}=e;const r=(0,i.useMemo)((()=>null!==l&&void 0!==l?l:new U.Oq),[l]),{width:c}=(0,d.useRecoilValue)(h.EE),{tableWidth:u}=(0,d.useRecoilValue)((0,h.Bo)(t)),p=(0,d.useRecoilCallback)((e=>{let{reset:n}=e;return()=>{n((0,h.Mm)(t)),r.reset(!0)}}));return(0,i.useEffect)((()=>()=>{p()}),[]),i.createElement("div",{className:"w-100 pb-32 flex-1 print-area scorecard-table overflow-hidden"},i.createElement(o.W,{backend:s.PD},i.createElement(a.w,{className:m["table-print"],layout:"fixed",scrollWidth:null!==u&&void 0!==u?u:c},i.createElement(dt,{orgUnits:t}),i.createElement(st,{width:c,orgUnits:t,nested:n}),i.createElement(Pe,{orgUnits:t,dataEngine:r}),i.createElement(i.Suspense,{fallback:i.createElement(Ie,{orgUnits:t})},i.createElement(Je,{dataEngine:r,orgUnits:t})))))}nt.propTypes={nested:r().bool,orgUnits:r().array},at.propTypes={nested:r().bool.isRequired,orgUnits:r().array.isRequired},lt.propTypes={nested:r().bool,orgUnits:r().array},rt.propTypes={nested:r().bool.isRequired,orgUnits:r().arrayOf(r().object).isRequired},it.propTypes={orgUnits:r().arrayOf(r().object).isRequired},st.propTypes={nested:r().bool.isRequired,orgUnits:r().arrayOf(r().object).isRequired},ct.propTypes={nested:r().bool.isRequired,orgUnits:r().arrayOf(r().object).isRequired,initialDataEngine:r().instanceOf(U.Oq)}}}]);
//# sourceMappingURL=1723.d5daae52.chunk.js.map