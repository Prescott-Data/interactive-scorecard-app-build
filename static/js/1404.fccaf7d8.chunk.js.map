{"version":3,"file":"static/js/1404.fccaf7d8.chunk.js","mappings":"wYAiBe,SAASA,IACtB,MAAM,SACJC,EAAQ,MACRC,EAAK,SACLC,EAAQ,UACRC,IACEC,EAAAA,EAAAA,MACJF,EAAS,mBAAoB,CAC3BG,SAAU,CACRC,kBAAmBC,KAnBzB,UAA4B,OAC1BC,EAAM,OACNC,EAAM,SACNC,EAAQ,YACRC,EAAW,YACXC,EAAW,cACXC,IAEA,OAAOA,GAAiBD,GAAeD,GAAeH,EAAOM,OAAS,GAAKL,EAAOK,OAAS,GAAKJ,EAASI,OAAS,CACpH,CAWYC,CAAmBR,IAGhBS,EAAAA,EAAKC,EAAE,mDAIpB,MAAMC,EAAmBjB,EAAM,oBACzBkB,GAAsBC,EAAAA,EAAAA,aAAYC,IACtCrB,EAAS,mBAAoBqB,IAC5B,CAACrB,IAIEsB,GAAQC,EAAAA,EAAAA,KAAIpB,EAAUqB,OAAQ,oBACpC,OAAoBC,EAAAA,cAAoB,MAAO,CAC7CC,UAAW,gBACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,eACGD,EAAAA,cAAoB,KAAM,KAAMT,EAAAA,EAAKC,EAAE,uBAAwBK,GAAsBG,EAAAA,cAAoB,MAAO,CAC9HE,MAAO,CACLC,QAAS,OACTC,IAAK,EACLC,WAAY,SACZC,QAAS,QACTC,MAAOC,EAAAA,EAAOC,SAEFT,EAAAA,cAAoBU,EAAAA,EAAa,MAAiB,OAAVb,QAA4B,IAAVA,OAAmB,EAASA,EAAMc,SAAuBX,EAAAA,cAAoB,MAAO,CAC5JE,MAAO,CACLU,UAAW,KAEbX,UAAW,gCACGD,EAAAA,cAAoBa,EAAAA,SAAU,CAC5CC,SAAuBd,EAAAA,cAAoBe,EAAAA,gBAAiB,CAC1DC,OAAQ,OAEIhB,EAAAA,cAAoBiB,EAAAA,GAAiB,CACnDC,YAAY,EACZC,YAAY,EACZC,iBAAiB,EACjBC,SA7BmBC,IACnB5B,EAAoB6B,EAAAA,iBAAiBC,UAAU/B,EAAkB6B,KA6BjExC,MAAOW,MAEX,C,0BChEe,SAASgC,IACtB,MAAM,MACJjD,EAAK,SACLD,IACEI,EAAAA,EAAAA,MACE+C,EAAelD,EAAM,gBACrBmD,GAAkBhC,EAAAA,EAAAA,aAAYiC,IAClCrD,EAAS,eAAgBqD,IACxB,CAACrD,IACEsD,EAAoBrD,EAAM,qBAC1BsD,GAAuBnC,EAAAA,EAAAA,aAAYiC,IACvCrD,EAAS,oBAAqBqD,IAC7B,CAACrD,IACEwD,EAAevD,EAAM,gBACrBwD,GAAkBrC,EAAAA,EAAAA,aAAYiC,IAClCrD,EAAS,eAAgBqD,IACxB,CAACrD,IACE0D,GAA2BC,EAAAA,EAAAA,SAAQ,IAAM,IAAKH,GAAgB,MAASF,GAAqB,IAAM,CAACE,EAAcF,IACjHM,GAAuBxC,EAAAA,EAAAA,aAAYb,IACvC6C,EAAgB7C,IACf,CAAC6C,IACES,GAAWzC,EAAAA,EAAAA,aAAY0C,IAC3B,MAAM,KACJC,GACED,GAAU,CAAC,EACf,GAAa,SAATC,EAAiB,CACnB,MAAMC,GAAcC,EAAAA,EAAAA,WAAUT,GAG9B,OAFAU,EAAAA,EAAAA,QAAOF,EAAa,CAAC,KAAiB,OAAXF,QAA8B,IAAXA,OAAoB,EAASA,EAAOK,UAClFV,EAAgBO,EAElB,CACA,MAAMA,GAAcC,EAAAA,EAAAA,WAAUX,IAC9BY,EAAAA,EAAAA,QAAOF,EAAa,CAAC,KAAiB,OAAXF,QAA8B,IAAXA,OAAoB,EAASA,EAAOK,KAClFZ,EAAqBS,IACpB,CAACP,EAAiBF,EAAsBC,EAAcF,IACnDR,GAAW1B,EAAAA,EAAAA,aAAYgD,IAC3B,MAAM,KACJL,GACEK,GAAiB,CAAC,EACtB,GAAIL,IAASM,EAAAA,YAAYC,KAAM,CAC7B,MAAMC,GAAQC,EAAAA,EAAAA,WAAUhB,EAAc,CAAC,KAAwB,OAAlBY,QAA4C,IAAlBA,OAA2B,EAASA,EAAcD,KACzHV,GAAgBgB,EAAAA,EAAAA,IAAQjB,EAAckB,KACpCC,EAAAA,EAAAA,KAAID,EAAO,CAACH,GAAQH,KAExB,CACA,MAAMG,GAAQC,EAAAA,EAAAA,WAAUlB,EAAmB,CAAC,KAAwB,OAAlBc,QAA4C,IAAlBA,OAA2B,EAASA,EAAcD,KAC9HZ,GAAqBkB,EAAAA,EAAAA,IAAQnB,EAAmBoB,KAC9CC,EAAAA,EAAAA,KAAID,EAAO,CAACH,GAAQH,OAErB,CAACX,EAAiBF,EAAsBC,EAAcF,IAoBzD,MAAO,CACLsB,OApBYxD,EAAAA,EAAAA,aAAY,CAACyD,EAAgBC,KACrCD,GAAkBC,IACmF,UAA5E,OAAtBA,QAAoD,IAAtBA,OAA+B,EAASA,EAAkBf,MAC3FN,EAAgB,IAAsB,OAAjBD,QAA0C,IAAjBA,EAA0BA,EAAe,GAAK,IAAIuB,EAAAA,gBAAgB,CAC9GZ,GAA0B,OAAtBW,QAAoD,IAAtBA,OAA+B,EAASA,EAAkBX,GAC5Fa,YAAmC,OAAtBF,QAAoD,IAAtBA,OAA+B,EAASA,EAAkBE,YACrGjB,KAAM,OACND,OAAQe,MAGVtB,EAAqB,IAA2B,OAAtBD,QAAoD,IAAtBA,EAA+BA,EAAoB,GAAK,IAAIyB,EAAAA,gBAAgB,CAClIZ,GAA0B,OAAtBW,QAAoD,IAAtBA,OAA+B,EAASA,EAAkBX,GAC5Fa,YAAmC,OAAtBF,QAAoD,IAAtBA,OAA+B,EAASA,EAAkBE,YACrGjB,KAAM,YACND,OAAQe,QAIb,CAACpB,EAAiBF,EAAsBC,EAAcF,IAGvDH,eACAS,uBACAF,2BACAG,WACAf,WAEJ,C,sEC7EO,SAASmC,EAAcnB,EAAS,IACrC,OAAQA,GACN,KAAKoB,EAAAA,oBAAoBC,UACvB,OAAOnE,EAAAA,EAAKC,EAAE,aAChB,KAAKiE,EAAAA,oBAAoBE,UACvB,OAAOpE,EAAAA,EAAKC,EAAE,YAChB,KAAKiE,EAAAA,oBAAoBG,WACvB,OAAOrE,EAAAA,EAAKC,EAAE,sBAEpB,CACO,SAASqE,EAAcvB,EAAO,IACnC,OAAQA,GACN,IAAK,SACH,OAAoBtC,EAAAA,cAAoB8D,EAAAA,EAAY,MACtD,IAAK,OACH,OAAoB9D,EAAAA,cAAoB+D,EAAAA,EAAU,MACpD,IAAK,YACH,OAAoB/D,EAAAA,cAAoBgE,EAAAA,EAAe,MAE7D,C,gDCnBe,SAASC,GAAY,UAClCC,EAAS,QACTC,EAAO,eACPf,EAAc,eACdgB,IAEA,OAAoBpE,EAAAA,cAAoBqE,EAAAA,EAAO,CAC7CC,QAASH,GACKnE,EAAAA,cAAoBuE,EAAAA,EAAQ,CAC1CL,UAAWA,EACXM,UAAW,gBACGxE,EAAAA,cAAoByE,EAAAA,EAAY,KAAuB,OAAjBC,EAAAA,mBAA0C,IAAjBA,EAAAA,kBAA0B,EAASA,EAAAA,aAAaC,IAAIC,GAA2B5E,EAAAA,cAAoB6E,EAAAA,SAAU,CAC1LC,IAAKF,GACS5E,EAAAA,cAAoB+E,EAAAA,EAAU,CAC5CT,QAASA,IAAMF,EAAeQ,GAC9BI,OAAQ5B,IAAmBwB,EAC3BK,MAAOzB,EAAcoB,GACrBM,KAAM9B,IAAmBwB,GAA2B5E,EAAAA,cAAoBmF,EAAAA,EAAW,YAEvF,CCfe,SAASC,GAAuB,OAC7C/C,EAAM,SACND,EAAQ,eACRgC,IAEA,MACE/B,OAAQe,EAAc,KACtBd,EAAI,YACJiB,GACElB,GACGgD,EAAKC,IAAUC,EAAAA,EAAAA,YAOtB,OAAoBvF,EAAAA,cAAoB+E,EAAAA,EAAU,CAChDG,KAAMrB,EAAcvB,GACpB2C,MAAoBjF,EAAAA,cAAoB,MAAO,CAC7CC,UAAW,wCACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,UACGD,EAAAA,cAAoB,IAAK,CACvCE,MAAO,CACLsF,OAAQ,EACRC,SAAU,KAEXlC,GAA2BvD,EAAAA,cAAoB,IAAK,CACrDE,MAAO,CACLK,MAAOC,EAAAA,EAAOkF,QACdD,SAAU,GACVD,OAAQ,IAEThC,EAAcJ,KAAgCpD,EAAAA,cAAoB,MAAO,CAC1EC,UAAW,0BACGD,EAAAA,cAAoB2F,EAAAA,EAAa,CAC/C1F,UAAW,sBACGD,EAAAA,cAAoB4F,EAAAA,EAAQ,CAC1CtB,QAASA,CAACuB,EAAGC,IAAMR,EAAOQ,EAAEC,eAC5Bb,KAAmBlF,EAAAA,cAAoBgG,EAAAA,EAAU,OAChDzG,EAAAA,EAAKC,EAAE,SAAUyG,QAAQ7D,IAA0BpC,EAAAA,cAAoB4F,EAAAA,EAAQ,CAChFtB,QAASA,KACPlC,EAASC,IAEX6C,KAAmBlF,EAAAA,cAAoBkG,EAAAA,EAAY,OAClD3G,EAAAA,EAAKC,EAAE,aAAc6F,GAAoBrF,EAAAA,cAAoBiE,EAAa,CAC3EC,UAAWmB,EACXlB,QAASA,IAAMmB,OAAOa,GACtB/C,eAAgBA,EAChBgB,eAvCagC,IACf,MAAMzD,GAAgBH,EAAAA,EAAAA,WAAUH,IAChCa,EAAAA,EAAAA,KAAIP,EAAe,CAAC,UAAWyD,GAC/BhC,EAAezB,GACf2C,OAAOa,QAsCX,CC3De,SAASE,IACtB,MAAM,aACJ3E,EAAY,qBACZS,EAAoB,yBACpBF,EAAwB,SACxBZ,EAAQ,SACRe,GACEX,IACJ,OAAoBzB,EAAAA,cAAoB,MAAO,KAAmBA,EAAAA,cAAoBsG,EAAAA,EAAM,CAC1FC,OAAO,GACOvG,EAAAA,cAAoBoF,EAAwB,CAC1DhB,eAAgBjC,EAChBE,OAAQX,IACO1B,EAAAA,cAAoBwG,EAAAA,EAAa,MAAoC,OAA7BvE,QAAkE,IAA7BA,OAAsC,EAASA,EAAyB0C,IAAItC,GAAuBrC,EAAAA,cAAoB6E,EAAAA,SAAU,CAC7NC,IAAgB,OAAXzC,QAA8B,IAAXA,OAAoB,EAASA,EAAOK,IAC9C1C,EAAAA,cAAoBoF,EAAwB,CAC1DhB,eAAgB/C,EAChBgB,OAAQA,EACRD,SAAUA,IACKpC,EAAAA,cAAoBwG,EAAAA,EAAa,SACpD,C,gDCtBA,MAAMC,EAAQ,CACZC,MAAO,CACLC,SAAU,QACVC,OAAQA,EACNC,cACD,CACCC,OAAQ,CAAC,qBAAqBD,KAC9BE,OAAQ,CAAC,KAAM,eACfC,MAAO,cAGXC,WAAY,CACVN,SAAU,aACVC,OAAQA,EACNC,cACD,CACCC,OAAQD,EAAU,CAAC,qBAAqBA,UAAaV,EACrDY,OAAQ,CAAC,KAAM,OAAQ,eACvBC,MAAO,eCdb,SAASE,GAAsB,KAC7BC,EAAI,SACJC,EAAQ,UACRlD,EAAS,QACTC,IAMA,OAAOD,EAAyBlE,EAAAA,cAAoBuE,EAAAA,EAAQ,CAC1DtE,UAAW,UACXiE,UAAWA,EACXM,UAAW,gBACGxE,EAAAA,cAAoByE,EAAAA,EAAY,CAC9C4C,UAAW,SACD,OAATF,QAA0B,IAATA,OAAkB,EAASA,EAAKxC,IAAI2C,GAAwBtH,EAAAA,cAAoB+E,EAAAA,EAAU,CAC5GD,IAAiB,OAAZwC,QAAgC,IAAZA,OAAqB,EAASA,EAAQ5E,GAC/D4B,QAASA,KAXT8C,EAW+BE,QAV/BnD,KAWAc,MAAmB,OAAZqC,QAAgC,IAAZA,OAAqB,EAASA,EAAQ/D,YACjE2B,KAAMrB,EAA0B,OAAZyD,QAAgC,IAAZA,OAAqB,EAASA,EAAQhF,WACxE,IACV,CAOe,SAASiF,GAAyB,SAC/CC,EAAQ,SACRC,EAAQ,aACRC,EAAe,KAEf,MAAO5I,EAAOP,IAAYgH,EAAAA,EAAAA,UAAsB,OAAbiC,QAAkC,IAAbA,OAAsB,EAASA,EAASjE,cAC1F,KACJ4D,EAAI,QACJQ,EAAO,MACP9H,EAAK,WACL+H,GDrBW,SAAmCC,GAChD,MAAOhB,EAASe,IAAcrC,EAAAA,EAAAA,UAASsC,IACjC,KACJV,EAAI,OACJpH,EAAM,QACN4H,EAAO,QACPG,IACEC,EAAAA,EAAAA,IAAatB,EAAO,CACtBuB,UAAW,CACTnB,WAEFoB,MAAM,IAwBR,OAtBAC,EAAAA,EAAAA,WAAU,KAEFrB,GACFiB,EAAQ,CACNjB,aAKL,CAACA,IAaG,CACLM,MAbwBjF,EAAAA,EAAAA,SAAQ,KAChC,IAAIiG,EAAaC,EAAmBC,EAAkBC,EAStD,MAAO,KARiB,OAATnB,QAA0B,IAATA,GAA0D,QAA9BgB,EAAchB,EAAKT,aAAmC,IAAhByB,GAA8E,QAA3CC,EAAoBD,EAAYzB,aAAyC,IAAtB0B,OAAtI,EAA8KA,EAAkBzD,IAAI4D,IAAI,IACrPA,EACHjG,KAAM,YACA,OACqB,OAAT6E,QAA0B,IAATA,GAAoE,QAAxCkB,EAAmBlB,EAAKF,kBAA6C,IAArBoB,GAAiG,QAAzDC,EAAwBD,EAAiBpB,kBAAkD,IAA1BqB,OAAnK,EAA+MA,EAAsB3D,IAAI6D,IAAS,IACpSA,EACHlG,KAAM,iBACA,KAEP,CAAU,OAAT6E,QAA0B,IAATA,OAAkB,EAASA,EAAKT,MAAgB,OAATS,QAA0B,IAATA,OAAkB,EAASA,EAAKF,aAG3GlH,SACA4H,UACAC,aAEJ,CCnBMa,CAA0B3J,GACxBoF,GAAYwE,EAAAA,EAAAA,WACXC,EAAgBC,IAAqBrD,EAAAA,EAAAA,YACtCsD,GAAWC,EAAAA,EAAAA,UAAS,KACxBlB,EAAqB,OAAV9I,QAA4B,IAAVA,OAAmB,EAASA,EAAMiK,SAC9D,MAGHb,EAAAA,EAAAA,WAAU,KACHV,GACHjJ,OAAS4H,IAEV,CAACqB,IAYJ,OAAoBxH,EAAAA,cAAoB6E,EAAAA,SAAU,KAAmB7E,EAAAA,cAAoB,MAAO,CAC9FqF,IAAKnB,GACSlE,EAAAA,cAAoBgJ,EAAAA,EAAY,CAC9CrB,QAASA,EACT9H,MAAOA,EACPoJ,eAA0B,OAAVpJ,QAA4B,IAAVA,OAAmB,EAASA,EAAMc,QACpEsE,MAAO,4BACPnG,MAAOA,EACP2I,SAnBsByB,EACtBpK,MAAO+H,GACNsC,KACD5K,EAASsI,GACT+B,EAA4B,OAAVO,QAA4B,IAAVA,OAAmB,EAASA,EAAMC,QACtEP,QAeGF,KAAmBU,EAAAA,EAAAA,SAAQlC,IAAsBnH,EAAAA,cAAoBkH,EAAuB,CAC/F/C,QAASA,IAAMyE,OAAkBzC,GACjCjC,UAAWyE,EACXvB,SAhBoBkC,IACpB/K,EAA2B,OAAlB+K,QAA4C,IAAlBA,OAA2B,EAASA,EAAc/F,aACrFkE,EAAS6B,IAeTnC,MAAML,EAAAA,EAAAA,QAAOK,EAAM,EACjBzE,UACuB,OAAjBgF,QAA0C,IAAjBA,GAA2BA,EAAa6B,SAAS7G,OAEtF,CC/Ee,SAAS8G,IACtB,MAAM,yBACJvH,EAAwB,MACxBkB,GACE1B,KACG4B,EAAmBoG,IAAwBlE,EAAAA,EAAAA,aAC3CnC,EAAgBsG,IAAqBnE,EAAAA,EAAAA,YACtCmC,EAAezF,EAMrB,OAAoBjC,EAAAA,cAAoB,MAAO,CAC7CC,UAAW,0CACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,6BACXC,MAAO,CACLyJ,MAAO,QAEK3J,EAAAA,cAAoBuH,EAA0B,CAC5DG,aAA+B,OAAjBA,QAA0C,IAAjBA,OAA0B,EAASA,EAAa/C,IAAI,EACzFjC,QACIA,GACN8E,SAAUnE,EACVoE,SAAUgC,KACMzJ,EAAAA,cAAoB,MAAO,CAC3CC,UAAW,eACXC,MAAO,CACLyJ,MAAO,QAEK3J,EAAAA,cAAoB4J,EAAAA,EAAmB,CACrD3J,UAAW,kBACX4J,UAAU,EACVrC,SAAUpE,EACVqE,SAAUA,EACRD,eAEAkC,EAAkBlC,IAEpBvC,MAAO1F,EAAAA,EAAKC,EAAE,kBACI,OAAjBkF,EAAAA,mBAA0C,IAAjBA,EAAAA,kBAA0B,EAASA,EAAAA,aAAaC,IAAIC,GAA2B5E,EAAAA,cAAoB8J,EAAAA,EAAoB,CACjJhL,MAAO8F,EACPE,IAAKF,EACLK,MAAOzB,EAAcoB,QACH5E,EAAAA,cAAoB,MAAO,CAC7CC,UAAW,SACXC,MAAO,CACLyJ,MAAO,QAEK3J,EAAAA,cAAoB4F,EAAAA,EAAQ,CAC1C3F,UAAW,oBACXqE,QA5CiByF,KACjB5G,EAAMC,EAAgBC,GACtBqG,OAAkBvD,GAClBsD,OAAqBtD,IA0CrBjB,KAAmBlF,EAAAA,cAAoBgK,EAAAA,EAAS,OAC/CzK,EAAAA,EAAKC,EAAE,SACZ,CC3De,SAASyK,IACtB,OAAoBjK,EAAAA,cAAoB,MAAO,CAC7CC,UAAW,cACGD,EAAAA,cAAoB,MAAO,KAAmBA,EAAAA,cAAoB,KAAM,KAAMT,EAAAA,EAAKC,EAAE,aAA2BQ,EAAAA,cAAoB,MAAO,KAAmBA,EAAAA,cAAoB,IAAK,CACrME,MAAO,CACLuF,SAAU,KAEXlG,EAAAA,EAAKC,EAAE,iBAA+BQ,EAAAA,cAAoB,MAAO,CAClEC,UAAW,gBACGD,EAAAA,cAAoBqG,EAAa,OAAqBrG,EAAAA,cAAoB,MAAO,CAC/FC,UAAW,SACGD,EAAAA,cAAoB,IAAK,CACvCE,MAAO,CACLuF,SAAU,KAEXlG,EAAAA,EAAKC,EAAE,gBAA8BQ,EAAAA,cAAoB,MAAO,KAAmBA,EAAAA,cAAoBwJ,EAAkB,OAC9H,CCjBe,SAASU,IACtB,OAAoBlK,EAAAA,cAAoB,MAAO,CAC7CC,UAAW,SACXC,MAAO,CACLc,OAAQ,SAEIhB,EAAAA,cAAoB,MAAO,CACzCC,UAAW,cACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,YACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,UACGD,EAAAA,cAAoB,KAAM,CACxCC,UAAW,kBACVV,EAAAA,EAAKC,EAAE,2BAAyCQ,EAAAA,cAAoB,KAAM,CAC3EC,UAAW,iBACGD,EAAAA,cAAoB,KAAM,KAAMT,EAAAA,EAAKC,EAAE,4BAA0CQ,EAAAA,cAAoB,KAAM,KAAMT,EAAAA,EAAKC,EAAE,0BAAwCQ,EAAAA,cAAoB,KAAM,KAAMT,EAAAA,EAAKC,EAAE,0CAAwDQ,EAAAA,cAAoB,KAAM,KAAMT,EAAAA,EAAKC,EAAE,2CAAyDQ,EAAAA,cAAoB,KAAM,KAAMT,EAAAA,EAAKC,EAAE,oDACxZ,CACO,SAAS2K,IACd,OAAoBnK,EAAAA,cAAoB,MAAO,CAC7CC,UAAW,SACXC,MAAO,CACLc,OAAQ,SAEIhB,EAAAA,cAAoB,MAAO,CACzCC,UAAW,iCACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,YACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,UACGD,EAAAA,cAAoB,IAAK,CACvCE,MAAO,CACLuF,SAAU,GACVlF,MAAOC,EAAAA,EAAO4J,QACdC,WAAY,SAEb9K,EAAAA,EAAKC,EAAE,yCACZ,C,2BCjBO,SAAS8K,GAA+BC,GAC7C,IAAIC,EACJ,OAAqL,QAA7KA,EAA8C,OAAtBD,QAAoD,IAAtBA,OAA+B,EAASA,EAAkBzD,OAAO2D,IAAqBA,EAAiBC,kBAAkD,IAA1BF,EAAmCA,EAAwB,EAC1P,C,mDCFe,SAASG,IAAa,MACnC7L,EAAK,SACL2I,EAAQ,kBACR8C,EAAiB,WACjBK,IAEA,OAAoB5K,EAAAA,cAAoB6K,EAAAA,GAAgB,CACtD/L,MAAOA,EACPyL,kBAAmBA,EACnBK,WAAYA,EACZE,UAAW,uBACXC,KAAM,uBACNtD,SAAUA,GAEd,CCtCA,SAASuD,KAAa,OAAOA,GAAWC,OAAOC,OAASD,OAAOC,OAAOC,OAAS,SAAUC,GAAK,IAAK,IAAItF,EAAI,EAAGA,EAAIuF,UAAUhM,OAAQyG,IAAK,CAAE,IAAItG,EAAI6L,UAAUvF,GAAI,IAAK,IAAIwF,KAAK9L,GAAG,CAAG,GAAE+L,eAAeC,KAAKhM,EAAG8L,KAAOF,EAAEE,GAAK9L,EAAE8L,GAAK,CAAE,OAAOF,CAAG,EAAGJ,GAASS,MAAM,KAAMJ,UAAY,CAcpQ,SAASK,IAAkB,KACxCX,EACAjM,MAAO6M,EAAe,GAAE,SACxBlE,EAAQ,eACRmE,EAAc,OACdC,EAAM,WACNjB,KACGkB,IAEH,IAAIC,EACJ,MAAMC,GAAgBC,EAAAA,EAAAA,gBAAeC,EAAAA,gBAC/B,MACJ1N,IACEG,EAAAA,EAAAA,OACGwN,EAAUC,IAAe7G,EAAAA,EAAAA,UAA2C,QAAjCwG,GAAQM,EAAAA,EAAAA,MAAKL,UAAsC,IAAVD,OAAmB,EAASA,EAAMrJ,IAC/G6H,EAAoBD,GAA+B9L,EAAM,sBAIzDM,GAAQoD,EAAAA,EAAAA,SAAQ,KACpB,IAAIoK,EACJ,OAAQC,MAAMC,QAAQb,IAA+Bc,EAAAA,EAAAA,WAAU,IAEc,QAFRH,EAAuC,OAAlBN,QAA4C,IAAlBA,OAA2B,EAASA,EAAcrH,IAAI,EACxKjC,QACI,CAACA,GAAIgK,EAAAA,EAAAA,wBAAuBd,EAAgBC,EAAQjB,YAAkD,IAAvB0B,EAAgCA,EAAqB,KAFpGX,GAGrC,CAACf,EAAYe,EAAcC,EAAgBI,EAAeH,IACvDc,EAAgBA,CAACC,EAAUC,KAC/BpF,EAAS,CACP3I,OAAOkE,EAAAA,EAAAA,IAAQlE,EAAOmE,IACbC,EAAAA,EAAAA,KAAID,EAAO,CAAC4J,GAAQD,OAWjC,OAPA1E,EAAAA,EAAAA,WAAU,KACJqE,MAAMC,QAAQb,IAChBlE,EAAS,CACP3I,WAGH,CAACA,EAAO6M,IACS3L,EAAAA,cAAoB8M,GAAAA,EAAO9B,GAAS,CACtDD,KAAMA,GACLe,GAA0B,OAAlBE,QAA4C,IAAlBA,OAA2B,EAASA,EAAcrH,IAAI,EACzFjC,KACAa,kBAEA,IAAIwJ,EA7BeC,EA8BnB,OAAoBhN,EAAAA,cAAoBiN,GAAAA,EAAW,CACjDd,SAAUA,IAAazJ,EACvBoC,IAAKpC,EACL+E,UAjCiBuF,EAiCMtK,EAjCG,CAACyG,EAAO+D,KACpCd,IAAYc,GAAaF,MAiCThN,EAAAA,cAAoBmN,GAAAA,EAAkB,CACpDjN,MAAO,CACLkN,WAAY5M,EAAAA,EAAO6M,UAEpB9J,GAA2BvD,EAAAA,cAAoBsN,GAAAA,EAAkB,KAAmBtN,EAAAA,cAAoB,MAAO,CAChHC,UAAW,gBACGD,EAAAA,cAAoB2K,GAAc,CAChDC,WAAYA,EACZL,kBAAmBA,EACnBzL,MAAmC,QAA3BiO,GAAOjN,EAAAA,EAAAA,KAAIhB,EAAO4D,UAA0B,IAATqK,EAAkBA,EAAO,GACpEtF,SAAU3I,GAAS6N,EAAc7N,EAAO4D,UAG9C,CCtEe,SAAS6K,IAA4B,KAClDC,IAEA,MAAM,MACJhP,EAAK,SACLD,IACEI,EAAAA,EAAAA,MACE4L,EAAoBD,GAA+B9L,EAAM,sBACzDqN,EAASrN,EAAM,GAAGgP,YAClB5C,EAAapM,EAAM,GAAGgP,gBACtBC,EAAiBjP,EAAM,GAAGgP,aAChC,OAAoBxN,EAAAA,cAAoB0L,GAAmB,CACzDE,eAAsC,OAAtBrB,QAAoD,IAAtBA,OAA+B,EAASA,EAAkB5F,IAAI+I,GAAU,IAAIC,EAAAA,eAAe,CACvIjL,GAAIgL,EAAOhL,GACXkL,WAAW,EACX7C,KAAM2C,EAAO3C,KACbN,iBAAkBiD,EAClB5C,UAAW+C,EAAAA,gBAAgBC,eAAe/C,QAE5CjM,MAAO2O,EACPhG,SAAUA,EACR3I,YAEAP,EAAS,GAAGiP,YAAgB1O,IAE9BiP,QAASN,EACT7C,WAAYA,EACZiB,OAAQA,EACR2B,KAAMA,EACNzC,KAAM,WAEV,C,mDC3BA,SAAS9J,IAAgB,OACvBmI,EAAM,UACN4E,IAEA,IAAIC,EACJ,MAAOC,EAAoBC,IAAyB5I,EAAAA,EAAAA,WAAS8D,EAAAA,EAAAA,SAAQD,EAAOgF,QACtEnP,GAAWgN,EAAAA,EAAAA,iBAAeoC,EAAAA,EAAAA,kBAAiBjF,EAAOgF,QACxD,OAAoBpO,EAAAA,cAAoBA,EAAAA,SAAgB,KAAmBA,EAAAA,cAAoB,MAAO,CACpGC,UAAW,oCACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,iBACGD,EAAAA,cAAoBgJ,EAAAA,EAAY,CAC9CsF,WAAW,EACXrJ,MAAO1F,EAAAA,EAAKC,EAAE,wBACd+O,UAAU,EACVzP,MAAoB,OAAbG,QAAkC,IAAbA,GAAgI,QAAhGgP,EAAgBhP,EAAS0F,IAAI6J,GAAa,OAAPA,QAAsB,IAAPA,OAAgB,EAASA,EAAGjL,oBAA4C,IAAlB0K,OAAlH,EAAsJA,EAAcQ,KAAK,SAC3MzO,EAAAA,cAAoB,MAAO,CAC3CC,UAAW,QACGD,EAAAA,cAAoB4F,EAAAA,EAAQ,CAC1CtB,QAASA,IAAM6J,GAAsB,IACpC5O,EAAAA,EAAKC,EAAE,aAAc0O,GAAmClO,EAAAA,cAAoB0O,EAAAA,GAAsB,CACnG5P,MAAO,CACLG,SAAuB,OAAbA,QAAkC,IAAbA,EAAsBA,EAAW,IAElEkF,QAASA,IAAMgK,GAAsB,GACrCQ,MAAOT,EACP7M,SAAUA,EACRpC,eAEA+O,EAAUY,IACD,IACFA,EACHR,MAAoB,OAAbnP,QAAkC,IAAbA,OAAsB,EAASA,EAAS0F,IAAIkK,GAAWA,EAAQnM,OAG/FyL,GAAsB,MAG5B,CAKe,SAASW,IAA4B,KAClDC,EAAI,QACJ5K,EAAO,SACP9C,EAAQ,eACR2N,EAAc,eACdvB,EAAc,uBACdwB,EAAsB,KACtBzB,IAEA,MAAM,MACJhP,IACEG,EAAAA,EAAAA,OACGyK,EAAQ4E,IAAazI,EAAAA,EAAAA,UAASyJ,GAC/BzE,EAAoBD,GAA+B9L,EAAM,sBACzDoM,EAAapM,EAAM,GAAGgP,gBACtB0B,GAAgBvP,EAAAA,EAAAA,aAAY,KAChC0B,EAAS,IACJ+H,IAELjF,KACC,CAACA,EAAS9C,EAAU+H,IACvB,OAAoBpJ,EAAAA,cAAoBmP,GAAAA,EAAO,CAC7ChL,QAASA,EACTwK,MAAOI,EACPK,SAAU,UACIpP,EAAAA,cAAoBqP,GAAAA,EAAY,KAAM9P,EAAAA,EAAKC,EAAE,uCAAqDQ,EAAAA,cAAoBsP,GAAAA,EAAc,KAAmBtP,EAAAA,cAAoBa,EAAAA,SAAU,CACnMC,SAAuBd,EAAAA,cAAoB,MAAO,CAChDC,UAAW,mDACXC,MAAO,CACLc,OAAQ,IACR2I,MAAO,SAEK3J,EAAAA,cAAoBuP,EAAAA,EAAgB,CAClDC,OAAO,MAEKxP,EAAAA,cAAoB,MAAO,CACzCC,UAAW,uBACGD,EAAAA,cAAoBiB,GAAiB,CACnDmI,OAAQA,EACR4E,UAAWA,IACIhO,EAAAA,cAAoB,MAAO,CAC1CC,UAAW,OACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,qCACGD,EAAAA,cAAoB2K,GAAc,CAChDC,WAAYA,EACZL,kBAAmBA,EACnBzL,MAAOsK,EAAO2E,QACdtG,SAAUsG,IACRC,EAAUY,IACD,IACFA,EACHb,kBAIW/N,EAAAA,cAAoB,MAAO,CAC5CC,UAAW,OACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,qCACGD,EAAAA,cAAoB,IAAK,KAAMT,EAAAA,EAAKC,EAAE,kBAAgCQ,EAAAA,cAAoB2K,GAAc,CACtHC,WAAYA,EACZL,kBAAmBA,EACnBzL,MAAO2O,EACPhG,SAAUwH,SACUjP,EAAAA,cAAoByP,GAAAA,EAAc,KAAmBzP,EAAAA,cAAoB2F,EAAAA,EAAa,KAAmB3F,EAAAA,cAAoB4F,EAAAA,EAAQ,CACzJtB,QAASH,GACR5E,EAAAA,EAAKC,EAAE,WAAyBQ,EAAAA,cAAoB4F,EAAAA,EAAQ,CAC7DtB,QAAS4K,EACTQ,SAAS,GACRnQ,EAAAA,EAAKC,EAAE,aACZ,C,eCjHe,SAASmQ,IAA2B,KACjDZ,EAAI,QACJ5K,EAAO,SACP9C,EAAQ,eACR2N,EAAc,eACdvB,EAAc,uBACdwB,EAAsB,KACtBzB,IAEA,IAAIoC,EAAeC,EAAmBC,EAAoBC,EAC1D,MAAM,MACJvR,IACEG,EAAAA,EAAAA,OACGyK,EAAQ4E,IAAazI,EAAAA,EAAAA,UAASyJ,IAC/B,SACJgB,IACE/D,EAAAA,EAAAA,gBAAegE,EAAAA,qBACb1F,EAAoBD,GAA+B9L,EAAM,sBACzDoM,EAAapM,EAAM,GAAGgP,iBACrBU,EAAoBC,IAAyB5I,EAAAA,EAAAA,WAAS8D,EAAAA,EAAAA,SAAQD,EAAOgF,QACtEc,GAAgBvP,EAAAA,EAAAA,aAAY,KAChC0B,EAAS,IACJ+H,IAELjF,KACC,CAACA,EAAS9C,EAAU+H,IACvB,OAAoBpJ,EAAAA,cAAoBmP,GAAAA,EAAO,CAC7ChL,QAASA,EACTwK,MAAOI,EACPK,SAAU,UACIpP,EAAAA,cAAoBqP,GAAAA,EAAY,KAAM9P,EAAAA,EAAKC,EAAE,4BAA0CQ,EAAAA,cAAoBsP,GAAAA,EAAc,KAAmBtP,EAAAA,cAAoB,MAAO,CACrLC,UAAW,uBACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,oCACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,iBACGD,EAAAA,cAAoBgJ,EAAAA,EAAY,CAC9CsF,WAAW,EACXrJ,MAAO1F,EAAAA,EAAKC,EAAE,UACd+O,UAAU,EACVzP,MAAkB,OAAXsK,QAA8B,IAAXA,GAAgE,QAAlCwG,EAAgBxG,EAAOgF,aAAqC,IAAlBwB,GAO1F,QAP+HC,EAAoBD,EAAcjL,IAAIuL,IAEzK,IAAIC,EADN,GAAID,EAEF,OAE4C,QAFpCC,GAAwB,IAAIC,GAAAA,IAASC,eAAe,CAC1DC,oBAAoB,IACnBC,YAAYP,GAAUQ,QAAQN,UAA6C,IAA1BC,OAAmC,EAASA,EAAsBpF,cAEpF,IAAtB8E,OAP8B,EAOUA,EAAkBpB,KAAK,SAC/DzO,EAAAA,cAAoB,MAAO,CAC3CC,UAAW,QACGD,EAAAA,cAAoB4F,EAAAA,EAAQ,CAC1CtB,QAASA,IAAM6J,GAAsB,IACpC5O,EAAAA,EAAKC,EAAE,oBAAqB0O,GAAmClO,EAAAA,cAAoByQ,EAAAA,GAAqB,CACzGC,sBAAsB,EACtBC,wBAAwB,EACxBC,iBAAiB,EACjBC,iBAAiBC,EAAAA,EAAAA,SAAQ,IAIjB,QAJuBhB,EAAyD,QAAnCC,EAAiB3G,EAAOgF,aAAsC,IAAnB2B,OAA4B,EAASA,EAAepL,IAAIuL,IACtJ,GAAIA,EACF,OAAOA,WAE4B,IAAvBJ,EAAgCA,EAAqB,KACrE3L,QAASA,IAAMgK,GAAsB,GACrCQ,MAAOT,EACP7M,SAAU0P,IACR/C,EAAUY,IACR,IAAIoC,EACJ,MAAO,IACFpC,EACHR,MAAO,CAA8B,QAA5B4C,EAAYD,EAAQ,UAA8B,IAAdC,OAAuB,EAASA,EAAUtO,OAG3FyL,GAAsB,MAETnO,EAAAA,cAAoB,MAAO,CAC1CC,UAAW,OACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,qCACGD,EAAAA,cAAoB2K,GAAc,CAChDC,WAAYA,EACZL,kBAAmBA,EACnBzL,MAAOsK,EAAO2E,QACdtG,SAAUsG,IACRC,EAAUY,IACD,IACFA,EACHb,kBAIW/N,EAAAA,cAAoB,MAAO,CAC5CC,UAAW,OACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,qCACGD,EAAAA,cAAoB,IAAK,KAAMT,EAAAA,EAAKC,EAAE,kBAAgCQ,EAAAA,cAAoB2K,GAAc,CACtHC,WAAYA,EACZL,kBAAmBA,EACnBzL,MAAO2O,EACPhG,SAAUwH,QACSjP,EAAAA,cAAoByP,GAAAA,EAAc,KAAmBzP,EAAAA,cAAoB2F,EAAAA,EAAa,KAAmB3F,EAAAA,cAAoB4F,EAAAA,EAAQ,CACxJtB,QAASH,GACR5E,EAAAA,EAAKC,EAAE,WAAyBQ,EAAAA,cAAoB4F,EAAAA,EAAQ,CAC7DtB,QAAS4K,EACTQ,SAAS,GACRnQ,EAAAA,EAAKC,EAAE,aACZ,C,gBC5GA,SAASyR,IAAY,QACnBlD,EAAO,kBACPxD,IAEA,OAAoBvK,EAAAA,cAAoB,MAAO,CAC7CC,UAAW,2BACE,OAAZ8N,QAAgC,IAAZA,OAAqB,EAASA,EAAQpJ,IAAI,CAAC+I,EAAQ5K,KACxE,IAAIoO,EACJ,MAAM,mBACJC,EAAkB,WAClBC,EAAU,SACVC,GACa,OAAX3D,QAA8B,IAAXA,EAAoBA,EAAS,CAAC,EAC/CjD,EAEE,QAFkByG,GAAQI,EAAAA,EAAAA,MAAK/G,EAAmB,CACxD7H,GAAIyO,WACoB,IAAVD,EAAmBA,EAAQ,CAAC,EAC5C,OAAoBlR,EAAAA,cAAoB,MAAO,CAC7CC,UAAW,+BACX6E,IAAKhC,GACS9C,EAAAA,cAAoB,MAAO,CACzCE,MAAO,CACLc,OAAQ,GACR2I,MAAO,GACPyD,WAAY3C,EAAiBlK,SAEhBP,EAAAA,cAAoB,MAAO,KAAM,GAAGqR,OAAcD,QAEvE,CAKA,SAASG,GAAajP,GACpB,OAAQA,GACN,IAAK,SACH,OAAO/C,EAAAA,EAAKC,EAAE,UAChB,IAAK,UACH,OAAOD,EAAAA,EAAKC,EAAE,wBAChB,IAAK,eACH,OAAOD,EAAAA,EAAKC,EAAE,4BAEpB,CACO,SAASgS,IAA0B,eACxCxC,EAAc,kBACdzE,EAAiB,SACjBlJ,EAAQ,eACRoM,IAEA,MAAM,QACJM,EAAO,MACPK,GACqB,OAAnBY,QAA8C,IAAnBA,EAA4BA,EAAiB,CAAC,EACvE/P,GAAWgN,EAAAA,EAAAA,iBAAeoC,EAAAA,EAAAA,kBAAiBD,IACjD,OAAoBpO,EAAAA,cAAoB,MAAO,CAC7CE,MAAO,CACLuR,OAAQ,aAAajR,EAAAA,EAAOkR,UAC5BC,aAAc,EACdrR,QAAS,GAEXL,UAAW,0BACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,0BACGD,EAAAA,cAAoB,IAAK,KAAMT,EAAAA,EAAKC,EAAE,yBAAuCQ,EAAAA,cAAoB,MAAO,CACtHC,UAAW,uBACG,OAAbhB,QAAkC,IAAbA,OAAsB,EAASA,EAAS0F,IAAIuL,GAC9ClQ,EAAAA,cAAoB4R,GAAAA,EAAK,CAC3C9M,IAAK,GAAGoL,SACPA,EAAK3M,gBACSvD,EAAAA,cAAoB,MAAO,KAAmBA,EAAAA,cAAoB,IAAK,KAAMT,EAAAA,EAAKC,EAAE,YAA0BQ,EAAAA,cAAoBiR,GAAa,CAChKlD,QAASA,EACTxD,kBAAmBA,KACHvK,EAAAA,cAAoB,MAAO,KAAmBA,EAAAA,cAAoB,IAAK,KAAMT,EAAAA,EAAKC,EAAE,6BAA2CQ,EAAAA,cAAoBiR,GAAa,CAChLlD,QAASN,EACTlD,kBAAmBA,KACHvK,EAAAA,cAAoB,MAAO,CAC3CC,UAAW,iCACGD,EAAAA,cAAoB4F,EAAAA,EAAQ,CAC1CtB,QAASjD,GACR9B,EAAAA,EAAKC,EAAE,YACZ,CACO,SAASqS,IAAyB,eACvC7C,EAAc,kBACdzE,EAAiB,SACjBlJ,EAAQ,eACRoM,IAEA,MAAM,QACJM,EAAO,KACPzL,EAAI,MACJ8L,GACqB,OAAnBY,QAA8C,IAAnBA,EAA4BA,EAAiB,CAAC,GACvE,SACJgB,IACE/D,EAAAA,EAAAA,gBAAegE,EAAAA,qBACnB,OAAoBjQ,EAAAA,cAAoB,MAAO,CAC7CE,MAAO,CACLuR,OAAQ,aAAajR,EAAAA,EAAOkR,UAC5BC,aAAc,EACdrR,QAAS,GAEXL,UAAW,0BACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,0BACGD,EAAAA,cAAoB,IAAK,KAAMuR,GAAajP,IAAqBtC,EAAAA,cAAoB,MAAO,CAC1GC,UAAW,uBACA,OAAVmO,QAA4B,IAAVA,OAAmB,EAASA,EAAMzJ,IAAIuL,IACzD,IAAIC,EACJ,OAAoBnQ,EAAAA,cAAoB4R,GAAAA,EAAK,CAC3C9M,IAAK,GAAGoL,SAGkC,QAFxCC,GAAwB,IAAIC,GAAAA,IAASC,eAAe,CACtDC,oBAAoB,IACnBC,YAAYP,GAAUQ,QAAQN,UAA6C,IAA1BC,OAAmC,EAASA,EAAsBpF,UACrG/K,EAAAA,cAAoB,MAAO,KAAmBA,EAAAA,cAAoB,IAAK,KAAMT,EAAAA,EAAKC,EAAE,YAA0BQ,EAAAA,cAAoBiR,GAAa,CAChKlD,QAASA,EACTxD,kBAAmBA,KACHvK,EAAAA,cAAoB,MAAO,KAAmBA,EAAAA,cAAoB,IAAK,KAAMT,EAAAA,EAAKC,EAAE,SAAS+R,GAAajP,OAAwBtC,EAAAA,cAAoBiR,GAAa,CACnLlD,QAASN,EACTlD,kBAAmBA,KACHvK,EAAAA,cAAoB,MAAO,CAC3CC,UAAW,iCACGD,EAAAA,cAAoB4F,EAAAA,EAAQ,CAC1CtB,QAASjD,GACR9B,EAAAA,EAAKC,EAAE,YACZ,CChIe,SAASsS,GAAahG,GACnC,MAAM,KACJf,EAAI,KACJyC,GACY,OAAV1B,QAA4B,IAAVA,EAAmBA,EAAQ,CAAC,GAC3CvB,EAAmBK,IAAcmH,EAAAA,EAAAA,IAAS,CAC/ChH,KAAM,CAAC,oBAAqB,GAAGyC,kBAE3BwE,GAA8B9P,EAAAA,EAAAA,SAAQ,IAAMqI,EAAkBzD,OAAO2D,IAAqBA,EAAiBC,WAAY,CAACH,IAC9H,OAAoBvK,EAAAA,cAAoBiS,EAAAA,GAAmB,CACzDlH,KAAMA,EACND,UAAW,uBACXF,YAAaA,EACbL,kBAAmByH,GAEvB,CCMe,SAASE,IAAY,KAClC1E,IAEA,MAAM,SACJjP,IACEI,EAAAA,EAAAA,OACGwT,EAAsBC,EAAuBC,EAAiB5E,EAAgB5B,EAAQjB,IAAcmH,EAAAA,EAAAA,IAAS,CAClHhH,KAAM,CAAC,oBAAqB,GAAGyC,uBAA2B,GAAGA,oBAAwB,GAAGA,YAAgB,GAAGA,WAAe,GAAGA,kBAEzHjD,EAAoBD,GAA+B6H,IAClDG,EAAkBC,IAAuBhN,EAAAA,EAAAA,WAAS,IAClDiN,EAAcC,IAAmBlN,EAAAA,EAAAA,UArB1C,SAAyB8M,EAAiBK,GAEtC,IAAI3G,EADN,QAAK1C,EAAAA,EAAAA,SAAQgJ,IAAoBK,EAEY,QAAnC3G,GAAQM,EAAAA,EAAAA,MAAKgG,UAAwC,IAAVtG,OAAmB,EAASA,EAAMzJ,KAEnFoQ,EACK,eAEF,IACT,CAYmDC,CAAgBN,EAAiBD,IAalF,OAZAlK,EAAAA,EAAAA,WAAU,KACHkK,IAA0B/I,EAAAA,EAAAA,SAAQgJ,KACrCI,EAAgB,MAChBlU,EAAS,GAAGiP,oBAAwB,MAErC,CAAC4E,EAAuBC,EAAiB9T,EAAUiP,KACtDtF,EAAAA,EAAAA,WAAU,KACR,IAAI0K,EACAJ,IAAgBnJ,EAAAA,EAAAA,SAAqD,QAA5CuJ,EAAoBP,EAAgB,UAAsC,IAAtBO,OAA+B,EAASA,EAAkBxE,QACzImE,GAAoB,IAErB,CAACC,EAAcH,IACErS,EAAAA,cAAoB,MAAO,CAC7CC,UAAW,iBACGD,EAAAA,cAAoBiS,EAAAA,GAAmB,CACrDnH,UAAW+C,EAAAA,gBAAgBgF,UAAU9H,KACrC9F,MAAO1F,EAAAA,EAAKC,EAAE,wBACduL,KAAM,GAAGyC,yBACP4E,EAAqCpS,EAAAA,cAAoB,MAAO,CAClEC,UAAW,iBACGD,EAAAA,cAAoB4J,EAAAA,EAAmB,CACrD3E,MAAO1F,EAAAA,EAAKC,EAAE,wBACdgI,SAAUgL,EACV/K,SAAUA,EACRD,eAEA,GAAiB,iBAAbA,EAIF,OAHAiL,EAAgBjL,GAChBjJ,EAAS,GAAGiP,YAAgB,SAC5BjP,EAAS,GAAGiP,oBAAwB,IAGtCiF,EAAgBjL,GAChBjJ,EAAS,GAAGiP,aAAgBd,EAAAA,EAAAA,wBAAuBnC,EAAmBsB,EAAQjB,IAC9ErM,EAAS,GAAGiP,oBAAwB,CAAC,CACnC9K,IAAIoQ,EAAAA,EAAAA,OACJxQ,KAAMkF,EACN4G,MAAO,GACPL,SAASrB,EAAAA,EAAAA,wBAAuBnC,EAAmBsB,EAAQjB,QAGjD5K,EAAAA,cAAoB8J,EAAAA,EAAoB,CACtDhL,MAAO,SACPmG,MAAO1F,EAAAA,EAAKC,EAAE,YACCQ,EAAAA,cAAoB8J,EAAAA,EAAoB,CACvDhL,MAAO,UACPmG,MAAO1F,EAAAA,EAAKC,EAAE,uBACCQ,EAAAA,cAAoB8J,EAAAA,EAAoB,CACvDhL,MAAO,eACPmG,MAAO1F,EAAAA,EAAKC,EAAE,8BACEQ,EAAAA,cAAoB,MAAO,CAC3CC,UAAW,gBACGD,EAAAA,cAAoBa,EAAAA,SAAU,CAC5CC,SAAuBd,EAAAA,cAAoB,MAAO,CAChDC,UAAW,mDACXC,MAAO,CACLc,OAAQ,IACR2I,MAAO,SAEK3J,EAAAA,cAAoBuP,EAAAA,EAAgB,CAClDC,OAAO,MAES,iBAAjBgD,IAAwD,OAApBH,QAAgD,IAApBA,OAA6B,EAASA,EAAgB1N,IAAIyE,GAA2B,WAAjBoJ,EAAyCxS,EAAAA,cAAoB6R,GAA0B,CAC5NpE,eAAgBA,EAChBrL,SAAUA,KACR7D,EAAS,GAAGiP,oBAAwB,KAEtCjD,kBAAmBA,EACnBlJ,SAAUA,IAAMkR,GAAoB,GACpCzN,IAAK,GAAGsE,EAAO1G,UACfsM,eAAgB5F,IACApJ,EAAAA,cAAoBwR,GAA2B,CAC/D/D,eAAgBA,EAChBrL,SAAUA,KACR7D,EAAS,GAAGiP,oBAAwB,KAEtCjD,kBAAmBA,EACnBlJ,SAAUA,IAAMkR,GAAoB,GACpCzN,IAAK,GAAGsE,EAAO1G,UACfsM,eAAgB5F,QACO,WAAjBoJ,GAA6BF,KAAqBjJ,EAAAA,EAAAA,SAAQgJ,GAAgCrS,EAAAA,cAAoB2P,GAA4B,CAChJnC,KAAMA,EACNC,eAAgBA,EAChBwB,uBAAwBlB,GAAWxP,EAAS,GAAGiP,YAAgBO,GAC/DiB,eAAgBqD,EAAgB,GAChClO,QAASA,IAAMoO,GAAoB,GACnCxD,KAAMuD,EACNjR,SAAU+H,IACRmJ,GAAoB,GACpBhU,EAAS,GAAGiP,oBAAwB,CAACpE,OAEpC,KAAuB,YAAjBoJ,GAA8BF,KAAqBjJ,EAAAA,EAAAA,SAAQgJ,GAAgCrS,EAAAA,cAAoB8O,GAA6B,CACrJtB,KAAMA,EACNC,eAAgBA,EAChBwB,uBAAwBlB,GAAWxP,EAAS,GAAGiP,YAAgBO,GAC/DiB,eAAgBqD,EAAgB,GAChClO,QAASA,IAAMoO,GAAoB,GACnCxD,KAAMuD,EACNjR,SAAU+H,IACRmJ,GAAoB,GACpBhU,EAAS,GAAGiP,oBAAwB,CAACpE,OAEpC,KAAuB,iBAAjBoJ,GAAgDxS,EAAAA,cAAoBuN,GAA6B,CAC1GC,KAAMA,KACWxN,EAAAA,cAAoB,MAAO,CAC5CC,UAAW,OACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,qCACGD,EAAAA,cAAoB8R,GAAc,CAChD/G,KAAM,GAAGyC,YACTA,KAAMA,MAEV,CC5Ie,SAASuF,IAA4B,KAClDvF,IAEA,MAAM,MACJhP,EAAK,SACLD,IACEI,EAAAA,EAAAA,MAMJ,OALAuJ,EAAAA,EAAAA,WAAU,KACJsF,GACFjP,EAASiP,EAAMhP,EAAMgP,KAEtB,CAAChP,EAAOgP,EAAMjP,IACGyB,EAAAA,cAAoB,MAAO,CAC7CC,UAAW,6CACGD,EAAAA,cAAoB,MAAO,CACzCE,MAAO,CACLE,IAAK,IAEPH,UAAW,UACGD,EAAAA,cAAoBiS,EAAAA,GAAmB,CACrD1D,UAAU,EACVX,WAAW,EACX9C,UAAW+C,EAAAA,gBAAgBmF,KAAKjI,KAChC9F,MAAO1F,EAAAA,EAAKC,EAAE,QACduL,KAAM,GAAGyC,WACMxN,EAAAA,cAAoBiS,EAAAA,GAAmB,CACtDrE,WAAW,EACX9C,UAAW+C,EAAAA,gBAAgBmF,KAAKjI,KAChC9F,MAAO1F,EAAAA,EAAKC,EAAE,SACduL,KAAM,GAAGyC,UACTyF,YAAa,CACXpJ,SAAUtK,EAAAA,EAAKC,EAAE,wBAEJQ,EAAAA,cAAoBiS,EAAAA,GAAmB,CACtDnH,UAAW+C,EAAAA,gBAAgBqF,OAAOnI,KAClC9F,MAAO1F,EAAAA,EAAKC,EAAE,UACduL,KAAM,GAAGyC,aACMxN,EAAAA,cAAoB,MAAO,CAC1CC,UAAW,qBACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,uCACGD,EAAAA,cAAoBiS,EAAAA,GAAmB,CACrDnH,UAAW+C,EAAAA,gBAAgBqF,OAAOnI,KAClC9F,MAAO1F,EAAAA,EAAKC,EAAE,iBACduL,KAAM,GAAGyC,oBACOxN,EAAAA,cAAoB,MAAO,CAC3CC,UAAW,gDACGD,EAAAA,cAAoBiS,EAAAA,GAAmB,CACrDkB,kBAAkB,EAClBrI,UAAW,UACX7F,MAAO1F,EAAAA,EAAKC,EAAE,kBACduL,KAAM,GAAGyC,oBACMxN,EAAAA,cAAoBiS,EAAAA,GAAmB,CACtDkB,kBAAkB,EAClBrI,UAAW,UACX7F,MAAO1F,EAAAA,EAAKC,EAAE,gBACduL,KAAM,GAAGyC,iBACMxN,EAAAA,cAAoBiS,EAAAA,GAAmB,CACtDkB,kBAAkB,EAClBrI,UAAW,UACX7F,MAAO1F,EAAAA,EAAKC,EAAE,eACduL,KAAM,GAAGyC,mBACQxN,EAAAA,cAAoBoT,GAAAA,EAAS,MAAoBpT,EAAAA,cAAoBkS,GAAa,CACnG1E,KAAMA,KAEV,CCnEe,SAAS6F,KACtB,IAAIC,EAAMC,EACV,MAAM,MACJ/U,IACEG,EAAAA,EAAAA,MACE6U,GAAqBvH,EAAAA,EAAAA,gBAAewH,EAAAA,0BAGpCjG,EAAgH,QAAxG8F,EAAO,CAAC,gBAAiB,aAFW,OAAvBE,QAAsD,IAAvBA,OAAgC,EAASA,EAAmBE,mBAE7C,cADlB,OAAvBF,QAAsD,IAAvBA,OAAgC,EAASA,EAAmBG,gCACY,IAATL,OAAkB,EAASA,EAAK7E,KAAK,KAC7JmF,EAAqBpV,EAAMgP,GACjC,OAAoBxN,EAAAA,cAAoB,MAAO,CAC7CC,UAAW,2BACc,OAAvB2T,QAAsD,IAAvBA,GAAsG,QAA5DL,EAAwBK,EAAmBC,mBAAmD,IAA1BN,OAA9E,EAA0HA,EAAsB5O,IAAI,CAACmP,EAAYhR,KAClO,MAAMiR,EAAiB,GAAGvG,iBAAoB1K,IAC9C,OAAoB9C,EAAAA,cAAoB,MAAO,CAC7C8E,IAAKgP,EAAWpR,GAChBxC,MAAO,CACL8T,SAAU,IACVC,SAAU,KAEZhU,UAAW,eACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,4BACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,UACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,QACGD,EAAAA,cAAoBa,EAAAA,SAAU,CAC5CC,SAAuBd,EAAAA,cAAoB,MAAO,CAChDC,UAAW,yCACGD,EAAAA,cAAoBuP,EAAAA,EAAgB,CAClDC,OAAO,MAEKxP,EAAAA,cAAoB+S,GAA6B,CAC/DvF,KAAMuG,aAEH,KACT,CCrCe,SAASG,KACtB,MAAM,wBACJP,IACE1H,EAAAA,EAAAA,gBAAewH,EAAAA,0BACnB,OAAoBzT,EAAAA,cAAoB,MAAO,KAAmBA,EAAAA,cAAoBa,EAAAA,SAAU,CAC9FC,SAAuBd,EAAAA,cAAoBe,EAAAA,gBAAiB,OAC1DoT,MAAMR,GAAsH3T,EAAAA,cAAoB,MAAO,CACzJC,UAAW,iCACGD,EAAAA,cAAoBmK,EAAwB,OAFVnK,EAAAA,cAAoBqT,GAAqC,OAG7G,CCVe,SAASe,IAAgB,WACtCC,IAEA,OAAoBrU,EAAAA,cAAoB,MAAO,CAC7CE,MAAO,CACLsF,OAAQ,SAEIxF,EAAAA,cAAoB4F,EAAAA,EAAQ,CAC1CtB,QAAS+P,EACTnP,KAAmBlF,EAAAA,cAAoBgK,EAAAA,EAAS,MAChD/J,UAAW,6BACXqU,SAAU,8BACT/U,EAAAA,EAAKC,EAAE,cACZ,C,+DCbe,SAAS+U,IAAiB,IACvCC,EAAG,OACHC,EAAM,QACN5F,EAAO,OACP6F,IAEA,IAAIC,EAAYC,EAChB,MACE7G,QAAS8G,EACTC,WAAYC,EACZC,cAAeC,EACfpJ,OAAQqJ,EACR7C,gBAAiB8C,GACP,OAARX,QAAwB,IAARA,EAAiBA,EAAM,CAAC,GAE1CzG,QAASqH,EACTN,WAAYO,EACZL,cAAeM,EACfzJ,OAAQ0J,EACRlD,gBAAiBmD,GACJ,OAAXf,QAA8B,IAAXA,EAAoBA,EAAS,CAAC,GAC/C,MACJjW,IACEG,EAAAA,EAAAA,MACE4L,EAAoB/L,EAAM,qBAC1BiX,GAAWvT,EAAAA,EAAAA,SAAQwT,EAAAA,qBAAsB,IACzCC,GAAczT,EAAAA,EAAAA,SAAQwT,EAAAA,qBAAsB,KAEhDnV,MAAOqV,GAOD,QANHjB,GAAakB,EAAAA,EAAAA,WAAUJ,EAAUZ,EAAY,CAChDiB,IAAKZ,EACL7C,gBAAiB8C,EACjBtG,UACA6F,SACAnK,6BAC6B,IAAfoK,EAAwBA,EAAa,CAAC,GAEpDpU,MAAOwV,GAOD,QANHnB,GAAciB,EAAAA,EAAAA,WAAUF,EAAaP,EAAe,CACvDU,IAAKP,EACLlD,gBAAiBmD,EACjB3G,UACA6F,SACAnK,6BAC8B,IAAhBqK,EAAyBA,EAAc,CAAC,EACxD,OAAoB5U,EAAAA,cAAoB,KAAM,CAC5CC,UAAW,aACGD,EAAAA,cAAoBgW,EAAAA,cAAe,CACjDC,UAAWhB,GAAoB,aAC/BiB,aAAcZ,GAAuB,aACrCM,SAAUb,EAAgBa,OAAWzP,EACrC4P,YAAaV,EAAmBU,OAAc5P,EAC9CwP,YAAaA,EACbF,SAAUA,IAEd,CCnDe,SAASU,IAAkB,OACxCC,IAEA,IAAIC,EAAqBC,EAAsBvK,EAC/C,MAAM,MACJvN,IACEG,EAAAA,EAAAA,MACEqN,GAAgBC,EAAAA,EAAAA,gBAAeC,EAAAA,gBAC/B,kBACJqK,IACEtK,EAAAA,EAAAA,gBAAeuK,EAAAA,WACbjM,EAAoB/L,EAAM,qBAC1BiY,GAAwB,OAAXL,QAA8B,IAAXA,GAA4E,QAA9CC,EAAsBD,EAAOvC,mBAAiD,IAAxBwC,OAAhE,EAA0GA,EAAoBhX,QAAU,GAC3LmV,EAAKC,GAA0G,QAA/F6B,EAAkC,OAAXF,QAA8B,IAAXA,OAAoB,EAASA,EAAOvC,mBAAkD,IAAzByC,EAAkCA,EAAuB,IACjL,QACJvI,EAAO,WACP+G,EAAU,GACVpS,EAAE,cACFsS,EAAa,OACbnJ,EAAM,gBACNwG,GACU,OAARmC,QAAwB,IAARA,EAAiBA,EAAM,CAAC,EACtC1V,GAAQoD,EAAAA,EAAAA,SAAQwT,EAAAA,qBAAsB,IACtC7G,EAAgD,QAArC9C,GAAQM,EAAAA,EAAAA,MAAKkK,UAA0C,IAAVxK,OAAmB,EAASA,EAAMrJ,GAC1FgS,GAAS,IAAIgC,MAAOC,cACpBjJ,GAASmI,EAAAA,EAAAA,WAAU/W,EAAOiP,EAAS,CACvC+H,IAAKjK,EACLG,gBACA4K,iBAAkB,EAClBrM,oBACA8H,kBACAxD,UACA6F,WAEF,OAAO+B,EAAyBzW,EAAAA,cAAoBuU,GAAkB,CACpE1F,QAASA,EACT6F,OAAQA,EACRD,OAAQA,EACRD,IAAKA,EACLnC,gBAAiBA,IACDrS,EAAAA,cAAoB,KAAM,CAC1C2J,MAAO,QACP1J,UAAW,YACX4W,MAAO,SACP/R,IAAK,GAAGpC,SACRA,GAAIA,GACU1C,EAAAA,cAAoB8W,EAAAA,cAAe,CACjDC,OAAQ/B,GAAiB,aACzBzU,MAAOuU,EAAwB,OAAXpH,QAA8B,IAAXA,OAAoB,EAASA,EAAOnN,WAAQ4F,EACnFrH,MAAOA,IAEX,CCpDe,SAASkY,KACtB,IAAIC,EAAQlL,EACZ,MAAM,MACJvN,IACEG,EAAAA,EAAAA,OACE,kBACJ4X,IACEtK,EAAAA,EAAAA,gBAAeuK,EAAAA,YACb,WACJU,GACwC,QAArCD,EAASzY,EAAM,wBAAyC,IAAXyY,EAAoBA,EAAS,CAAC,EAC1EE,GAAUjV,EAAAA,EAAAA,SAAQ,IAAM,IAAIgV,GAAa,CAACA,IAChD,OAAoBlX,EAAAA,cAAoB,MAAO,CAC7CC,UAAW,SACXC,MAAO,CACLyJ,MAAO,OACPyN,UAAW,SAECpX,EAAAA,cAAoBqX,GAAAA,EAAW,CAC7CC,UAAU,EACV3N,MAAO,QACO3J,EAAAA,cAAoBuX,GAAAA,EAAe,KAAmBvX,EAAAA,cAAoBwX,GAAAA,EAAc,KAAmBxX,EAAAA,cAAoByX,GAAAA,EAAe,CAC5JC,OAAO,EACPb,MAAO,SACP5W,UAAW,sCACXqX,UAAU,EACVK,QAAS,KACRpY,EAAAA,EAAKC,EAAE,sBAAmC,OAAZ2X,QAAgC,IAAZA,OAAqB,EAASA,EAAQxS,IAAIiT,IAC7F,IAAIC,EACJ,OAAoB7X,EAAAA,cAAoByX,GAAAA,EAAe,CACrDC,OAAO,EACPb,MAAO,SACP5W,UAAW,sCACXqX,UAAU,EACVQ,QAAoB,OAAXF,QAA8B,IAAXA,GAA4E,QAA9CC,EAAsBD,EAAOG,mBAAiD,IAAxBF,OAAhE,EAA0GA,EAAoBxY,OAC9KyF,IAAgB,OAAX8S,QAA8B,IAAXA,OAAoB,EAASA,EAAOlV,IAChD,OAAXkV,QAA8B,IAAXA,OAAoB,EAASA,EAAOI,UAC1ChY,EAAAA,cAAoBwX,GAAAA,EAAc,KAAqB,OAAfN,QAAsC,IAAfA,OAAwB,EAASA,EAAWvS,IAAIsT,IAC/H,IAAIC,EAAoBC,EAAqBC,EAC7C,OAAoBpY,EAAAA,cAAoB,KAAM,CAC5C2J,MAAsI,KAA9E,QAA5CuO,EAAqBD,EAAMF,mBAAgD,IAAvBG,OAAgC,EAASA,EAAmB7Y,QAArH,KACPyF,IAAKmT,EAAMvV,GACXoV,SAAwD,QAA7CK,EAAsBF,EAAMF,mBAAiD,IAAxBI,OAAiC,EAASA,EAAoB9Y,SAAW,GAC3HW,EAAAA,cAAoB,QAAS,CAC3CE,MAAO,CACLmY,cAAe,EACfrX,OAAQ,SAEIhB,EAAAA,cAAoB,KAAM,KAAgB,OAAViY,QAA4B,IAAVA,GAA0E,QAA7CG,EAAsBH,EAAMF,mBAAiD,IAAxBK,OAA/D,EAAyGA,EAAoBzT,IAAI,EACpNkP,kBAEA,IAAIyE,EAAeC,EAAgBC,EAAgBC,EACnD,OAAoBzY,EAAAA,cAAoByX,GAAAA,EAAe,CACrD9N,MAAO,QACP+N,OAAO,EACPJ,UAAU,EACVxS,IAA0C,QAApCwT,EAAgBzE,EAAY,UAAkC,IAAlByE,OAA2B,EAASA,EAAc5V,GACpGA,GAA0C,QAArC6V,EAAiB1E,EAAY,UAAmC,IAAnB0E,OAA4B,EAASA,EAAe7V,IAC/D,QAArC8V,EAAiB3E,EAAY,UAAmC,IAAnB2E,OAA4B,EAASA,EAAevT,MAAO,IAAK4O,EAAYxU,OAAS,GAAK,IAAoB,OAAhBwU,QAAwC,IAAhBA,GAAwE,QAArC4E,EAAiB5E,EAAY,UAAmC,IAAnB4E,OAAvD,EAA4FA,EAAexT,kBAE5RjF,EAAAA,cAAoB0Y,GAAAA,EAAe,KAAmB1Y,EAAAA,cAAoBwX,GAAAA,EAAc,CACzGF,UAAU,GACItX,EAAAA,cAAoByX,GAAAA,EAAe,CACjD9N,MAAO,OACP1J,UAAW,gBACXyX,OAAO,EACPiB,IAAK,KACLrB,UAAU,GAC6B,QAArCvL,GAAQM,EAAAA,EAAAA,MAAKkK,UAA0C,IAAVxK,OAAmB,EAASA,EAAMxI,aAA6B,OAAf2T,QAAsC,IAAfA,OAAwB,EAASA,EAAWvS,IAAIsT,IACtK,IAAIW,EAAqBC,EAAqBC,EAC9C,OAAoB9Y,EAAAA,cAAoB,KAAM,CAC5CC,UAAW,UACX0J,MAAyI,KAAhF,QAA7CiP,EAAsBX,EAAMF,mBAAiD,IAAxBa,OAAiC,EAASA,EAAoBvZ,QAAxH,KACPa,MAAO,CACLc,OAAQ,IAEV8D,IAAKmT,EAAMvV,GACXoV,SAAwD,QAA7Ce,EAAsBZ,EAAMF,mBAAiD,IAAxBc,OAAiC,EAASA,EAAoBxZ,SAAW,GAC3HW,EAAAA,cAAoB,QAAS,CAC3CE,MAAO,CACL6Y,QAAS,OACTV,cAAe,IAEHrY,EAAAA,cAAoBwX,GAAAA,EAAc,KAAgB,OAAVS,QAA4B,IAAVA,GAA0E,QAA7Ca,EAAsBb,EAAMF,mBAAiD,IAAxBe,OAA/D,EAAyGA,EAAoBnU,IAAIyR,GAAuBpW,EAAAA,cAAoBmW,GAAmB,CAC1RrR,IAAKsR,EAAO1T,GACZ0T,OAAQA,aAGd,C,wCCxFe,SAAS4C,IAAwB,QAC9C7U,EAAO,KACP4K,EAAI,SACJ3H,EAAQ,SACRmH,IAEA,MAAO0K,EAAeC,IAAoB3T,EAAAA,EAAAA,UAAS,IACnD,OAAoBvF,EAAAA,cAAoBmP,GAAAA,EAAO,CAC7ChL,QAASA,EACTiL,SAAU,SACV+J,OAAO,EACPxK,MAAOI,GACO/O,EAAAA,cAAoBqP,GAAAA,EAAY,KAAM9P,EAAAA,EAAKC,EAAE,oBAAkCQ,EAAAA,cAAoBsP,GAAAA,EAAc,KAAmBtP,EAAAA,cAAoB,MAAO,CAC7KC,UAAW,SACGD,EAAAA,cAAoBoZ,EAAAA,GAAoB,CACtDvF,YAAa,CAAC,YAAa,cAAe,UAAW,mBAAoB,kBACzErM,SAAUyR,EACV1K,SAAUA,EACVnH,SAAU8R,MACOlZ,EAAAA,cAAoByP,GAAAA,EAAc,KAAmBzP,EAAAA,cAAoB2F,EAAAA,EAAa,CACvG0T,KAAK,GACSrZ,EAAAA,cAAoB4F,EAAAA,EAAQ,CAC1CtB,QAASH,GACR5E,EAAAA,EAAKC,EAAE,WAAyBQ,EAAAA,cAAoB4F,EAAAA,EAAQ,CAC7D0O,SAAU,4BACV5E,SAAS,EACTpL,QAASA,KACP8C,EAAS6R,GACT9U,MAED5E,EAAAA,EAAKC,EAAE,UACZ,C,gBCnCA,MAAMyN,IAAYqM,EAAAA,GAAAA,GAAW,CAC3BC,KAAM,CACJ9H,OAAQ,gCACR+H,UAAW,OACX,qBAAsB,CACpBC,aAAc,GAEhB,WAAY,CACVtZ,QAAS,QAEX,aAAc,CACZqF,OAAQ,SAGZ2G,SAAU,CAAC,GAdKmN,CAefI,GAAAA,GACGvM,IAAmBmM,EAAAA,GAAAA,GAAW,CAClCC,KAAM,CACJnM,WAAY,UACZqM,aAAc,gCACdE,cAAe,EACf/Y,UAAW,GACX,aAAc,CACZA,UAAW,KAGfgZ,QAAS,CACP,aAAc,CACZpU,OAAQ,WAGZ2G,SAAU,CAAC,GAfYmN,CAgBtBO,GAAAA,GACGvM,IAAmBgM,EAAAA,GAAAA,GAAWQ,IAAK,CACvCP,KAAM,CACJjZ,QAASwZ,EAAMC,QAAQ,MAFFT,CAIrBU,GAAAA,GCrCW,SAASC,IAAU,eAChCC,EAAc,kBACdC,EAAiB,MACjBnC,EAAK,QACL7T,EAAO,kBACPiW,IAEA,OAAoBpa,EAAAA,cAAoB,MAAO,CAC7CC,UAAW,2BACGD,EAAAA,cAAoB,MAAO,CACzCsE,QAAS6E,GAASA,EAAMkR,kBACxBpa,UAAW,UACGD,EAAAA,cAAoBsa,GAAAA,EAAO,CACzCC,cAAc,EACdzb,MAAOob,EACPzS,SAAUA,EACR3I,WACIqb,EAAkBrb,MACRkB,EAAAA,cAAoB,MAAO,CAC3CC,UAAW,WACGD,EAAAA,cAAoB2F,EAAAA,EAAa,CAC/C0T,KAAK,GACSrZ,EAAAA,cAAoB4F,EAAAA,EAAQ,CAC1CtB,QAAS8V,GACR7a,EAAAA,EAAKC,EAAE,SAAuBQ,EAAAA,cAAoB4F,EAAAA,EAAQ,CAC3DtB,QAASA,CAACuB,EAAGsD,KACXA,EAAMkR,kBACNlW,GAAQ,GACRgW,EAAkBnC,KAEnBzY,EAAAA,EAAKC,EAAE,aACZ,C,gBC3Be,SAASgb,IAAW,iBACjCC,EAAgB,MAChBzC,EAAK,MACLnY,EAAK,SACLuC,EAAQ,GACRM,IAEA,OAAoB1C,EAAAA,cAAoB,MAAO,CAC7CC,UAAW,wCACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,qDACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,iBACGD,EAAAA,cAAoB,IAAK,CACvC0a,cAAevR,IACbA,EAAMkR,kBACNI,GAAiB,IAEnBnW,QAAS6E,GAASA,EAAMkR,kBACxBpa,UAAW,mCACV+X,GAAQnY,GAAsBG,EAAAA,cAAoB,IAAK,CACxDE,MAAO,CACLuF,SAAU,GACVD,OAAQ,EACRjF,MAAO,YAEE,OAAVV,QAA4B,IAAVA,OAAmB,EAASA,EAAMc,UAAwBX,EAAAA,cAAoB2a,GAAAA,EAAY,CAC7GrW,QAAS6E,IACPA,EAAMkR,kBACNI,GAAiB,IAEnBG,KAAM,QACN3a,UAAW,wBACGD,EAAAA,cAAoBgG,EAAAA,EAAU,QAAsBhG,EAAAA,cAAoB,MAAO,CAC7FC,WAAW,GACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,0BACGD,EAAAA,cAAoB4F,EAAAA,EAAQ,CAC1C3F,UAAW,oBACXqE,QAASA,CAACuB,EAAGsD,KACXA,EAAMkR,kBACFjY,GACFA,EAASM,IAGbwC,KAAmBlF,EAAAA,cAAoBkG,EAAAA,EAAY,OAClD3G,EAAAA,EAAKC,EAAE,WAAYK,GAAsBG,EAAAA,cAAoB,MAAO,CACrEE,MAAO,CACL2a,YAAa,KAED7a,EAAAA,cAAoB8a,EAAAA,UAAW,CAC7Cva,MAAO,UACPqa,KAAM,QAEV,C,4CCtDe,SAASG,IAAW,WACjCjH,EAAU,MACVhR,EAAK,SACLV,IAEA,MAAM,MACJ6C,EAAK,KACL3C,GACiB,OAAfwR,QAAsC,IAAfA,EAAwBA,EAAa,IAAIkH,EAAAA,mBACpE,OAAoBhb,EAAAA,cAAoB,MAAO,KAAmBA,EAAAA,cAAoB,MAAO,CAC3FC,UAAW,4CACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,wCACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,2BACGD,EAAAA,cAAoBib,GAAAA,EAAQ,CAC1Chb,UAAW,uBACVib,EAAAA,EAAAA,wBAAuB5Y,IAAqBtC,EAAAA,cAAoB,IAAK,CACtEC,UAAW,oBACVgF,EAAO,MAAoBjF,EAAAA,cAAoB,MAAO,KAAmBA,EAAAA,cAAoB4F,EAAAA,EAAQ,CACtG3F,UAAW,yBACXuP,OAAO,EACPlL,QAASA,CAACuB,EAAGsD,KACXA,EAAMkR,kBACNjY,EAASU,IAEXoC,KAAmBlF,EAAAA,cAAoBkG,EAAAA,EAAY,OAClD3G,EAAAA,EAAKC,EAAE,cACZ,CCpCA,SAASwL,KAAa,OAAOA,GAAWC,OAAOC,OAASD,OAAOC,OAAOC,OAAS,SAAUC,GAAK,IAAK,IAAItF,EAAI,EAAGA,EAAIuF,UAAUhM,OAAQyG,IAAK,CAAE,IAAItG,EAAI6L,UAAUvF,GAAI,IAAK,IAAIwF,KAAK9L,GAAG,CAAG,GAAE+L,eAAeC,KAAKhM,EAAG8L,KAAOF,EAAEE,GAAK9L,EAAE8L,GAAK,CAAE,OAAOF,CAAG,EAAGJ,GAASS,MAAM,KAAMJ,UAAY,CAUpQ,SAAS8P,IAAiB,WACvCC,EAAU,GACV1Y,EAAE,MACFI,EAAK,SACLV,IAEA,MAAM,YACJyR,GACiB,OAAfuH,QAAsC,IAAfA,EAAwBA,EAAa,IAAIC,EAAAA,0BAC9D,QACJC,IACE3c,EAAAA,EAAAA,OACG6U,EAAoB+H,IAAyBC,EAAAA,EAAAA,gBAAe/H,EAAAA,0BAC7DjG,EAAO,CAAC,aAAcgG,EAAmBE,mBAAoB,cAAe5Q,GAC5E2Y,GAAmBC,EAAAA,EAAAA,oBAAkBC,EAAAA,EAAAA,8BAA6B,CACtE7W,IAAK,gBACL0I,UAEIhG,EAAWgM,EAAmBG,0BAA4B7Q,EAC1D2T,GAA6B,OAAhB5C,QAAwC,IAAhBA,OAAyB,EAASA,EAAYxU,QAAU,EAC7Fuc,EAAqBC,IACzB,GAAIpF,EAAW,CACb,MAAMqF,EAAqB,IAAIjI,GAG/B,OAFAiI,EAAmBC,OAAOF,EAAgB,QAC1CJ,EAAiB7M,GAAayM,EAAAA,yBAAyBnY,IAAI0L,EAAW,cAAekN,GAEvF,CACA1Z,EAASU,IAEX,OAAoB9C,EAAAA,cAAoBgc,GAAAA,GAAW,CACjDC,YAAa,GAAGvZ,IAChBI,MAAOA,GACNoZ,GAAyBlc,EAAAA,cAAoB,MAAOgL,GAAS,CAAC,EAAGkR,EAASC,eAAgBD,EAASE,gBAAiB,CACrH/W,IAAK6W,EAASG,WACCrc,EAAAA,cAAoB,MAAO,CAC1CC,UAAW,0BACGD,EAAAA,cAAoB,MAAO,CACzCsE,QAASgY,UACH5Z,SACQ4Y,KACRC,EAAsB3M,IAAS,IAC1BA,EACH+E,wBAAyB7Q,MAKjC7C,UAAW,gBACXC,MAAO,CACLuR,OAAQgF,GAAa,aAAajW,EAAAA,EAAO+b,UACzCnP,WAAY5F,GAAY,GAAGhH,EAAAA,EAAOgc,UAClClc,QAASmW,GAAa,EACtBkD,aAAc,IAEC,OAAhB9F,QAAwC,IAAhBA,OAAyB,EAASA,EAAYlP,IAAI,CAAC8X,EAAW3Z,IACnE9C,EAAAA,cAAoB,MAAO,CAC7CC,UAAW,cACX6E,IAAK2X,EAAU/Z,GACfxC,MAAO,CACLsF,OAAQ,UAEIxF,EAAAA,cAAoB+a,GAAY,CAC9CtE,UAAWA,EACX3C,WAAY2I,EACZ3X,IAAK2X,EAAU/Z,GACfN,SAAUwZ,EACV9Y,MAAOA,SAGb,CCrEe,SAAS4Z,IAAiB,MACvCC,EAAK,mBACLf,EAAkB,OAClBgB,EAAM,SACNC,EAAQ,YACR9E,IAEA,MAAM,SACJ+E,EAAQ,QACRC,EAAO,YACPC,EAAW,SACXC,EAAQ,cACRC,GCpBW,UAAuB,OACpCN,EAAM,SACNC,EAAQ,YACR9E,EAAW,MACX4E,IAEA,IAAI5Q,EAAOoR,EACX,MAAML,EAAWH,EAAMtd,OAAS,EAC1B0d,GAAqC,QAAzBhR,GAAQM,EAAAA,EAAAA,MAAKsQ,UAA8B,IAAV5Q,GAAwE,QAA3CoR,EAAoBpR,EAAM8H,mBAA+C,IAAtBsJ,OAA7D,EAAqGA,EAAkB9d,QAAU,EACjM4d,GAAWtd,EAAAA,EAAAA,aAAY+C,IACpBK,EAAAA,EAAAA,WAAUgV,EAAa,CAAC,KAAMrV,IACpC,CAACqV,IACEqF,EAAcA,KAClB,IAAIC,EAAQC,EACZ,MAAMC,EAAsBN,EAAoC,QAA1BI,GAAShR,EAAAA,EAAAA,MAAKsQ,UAA+B,IAAXU,OAAoB,EAASA,EAAO3a,IACtG8a,EAAuBP,EAAmC,QAAzBK,GAAQG,EAAAA,EAAAA,MAAKd,UAA8B,IAAVW,OAAmB,EAASA,EAAM5a,IAC1Gka,EAAOW,EAAqBC,IAExBN,EAAgBA,KACpBL,GAASxQ,EAAAA,EAAAA,MAAKsQ,GAAOja,KAKvB,MAAO,CACLoa,WACAC,UACAC,YANkBA,KAClBD,EAAUG,IAAkBE,KAM5BA,cACAF,gBACAD,WAEJ,CDXMS,CAAc,CAChBd,SACAC,WACA9E,cACA4E,UAEF,OAAoB3c,EAAAA,cAAoB,MAAO,CAC7CC,UAAW,qBACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,0BACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,UACA,OAAV0c,QAA4B,IAAVA,OAAmB,EAASA,EAAMhY,IAAIgZ,GAAuB3d,EAAAA,cAAoB4d,EAAAA,EAAS,CAC7GhE,QAASra,EAAAA,EAAKC,EAAE,yCAChBsF,IAAK6Y,EAAOjb,IACE1C,EAAAA,cAAoBmb,GAAkB,CACpD0B,SAAUK,EACV9B,WAAYuC,EACZvb,SAAUwZ,EACV9W,IAAK6Y,EAAOjb,GACZA,GAAIib,EAAOjb,GACXI,MAAOma,EAASU,EAAOjb,SACL1C,EAAAA,cAAoB,MAAO,CAC7CC,UAAW,yBACGD,EAAAA,cAAoB4d,EAAAA,EAAS,CAC3ChE,QAASra,EAAAA,EAAKC,EAAE,0BAA2B,CACzCqe,WAAYd,EAAUxd,EAAAA,EAAKC,EAAE,UAAYD,EAAAA,EAAKC,EAAE,WAEpCQ,EAAAA,cAAoB2a,GAAAA,EAAY,CAC9CrW,QAAS0Y,EACTzO,UAAWuO,IAAaC,IACtBD,GAAYC,KAAaA,EAAuB/c,EAAAA,cAAoB8d,GAAAA,EAAY,CAClF7d,UAAW,gBACKD,EAAAA,cAAoB+d,GAAAA,EAAU,CAC9C9d,UAAW,qBAEf,CE3DA,SAAS+K,KAAa,OAAOA,GAAWC,OAAOC,OAASD,OAAOC,OAAOC,OAAS,SAAUC,GAAK,IAAK,IAAItF,EAAI,EAAGA,EAAIuF,UAAUhM,OAAQyG,IAAK,CAAE,IAAItG,EAAI6L,UAAUvF,GAAI,IAAK,IAAIwF,KAAK9L,GAAG,CAAG,GAAE+L,eAAeC,KAAKhM,EAAG8L,KAAOF,EAAEE,GAAK9L,EAAE8L,GAAK,CAAE,OAAOF,CAAG,EAAGJ,GAASS,MAAM,KAAMJ,UAAY,CAkBnR,SAAS2S,IAAU,sBACjBC,EAAqB,SACrB9R,EAAQ,MACRrJ,EAAK,SACLV,EAAQ,MACRvC,GACCwF,GACD,MAAM,mBACJuW,EAAkB,gBAClBsC,EAAe,kBACf9D,EAAiB,eACjBF,EAAc,cACdiE,EAAa,iBACb1D,EAAgB,kBAChBN,EAAiB,MACjBlC,GC1BW,UAA4B,MACzCnV,EAAK,SACLqJ,IAEA,MAAM,MACJ3N,EAAK,SACLD,IACEI,EAAAA,EAAAA,MACEqN,GAAgBC,EAAAA,EAAAA,gBAAeC,EAAAA,eAC/BkS,GAAiBnS,EAAAA,EAAAA,iBAAeoS,EAAAA,EAAAA,2BAA0B,oBACzDC,EAAsBC,IAA2B/C,EAAAA,EAAAA,gBAAe/H,EAAAA,0BACjEjG,GAAOtL,EAAAA,EAAAA,SAAQ,IAAM,CAAC,gBAAiB,aAAcY,GAAO2L,KAAK,KAAM,CAAC3L,IACxEmV,EAAQzZ,EAAMgP,GACdgR,GAAW7e,EAAAA,EAAAA,aAAY8e,IAC3B,IACElgB,EAASiP,EAAMiR,EACjB,CAAE,MAAO3Y,GACP4Y,QAAQ7e,MAAMiG,EAChB,GACC,CAAC0H,EAAMjP,IACJgM,EAAoB/L,EAAM,qBAC1BmgB,GAA4Bzc,EAAAA,EAAAA,SAAQ,KAAM4E,EAAAA,EAAAA,QAAOyD,EAAmB,EACxEG,gBACKA,GAAY,CAACH,KACd,MACJyN,EAAK,GACLtV,EAAE,YACFqV,GACY,OAAVE,QAA4B,IAAVA,EAAmBA,EAAQ,IAAI2G,EAAAA,yBAC9CT,EAAe1D,IAAoBlV,EAAAA,EAAAA,WAAS,IAC5C2U,EAAgBC,IAAqB5U,EAAAA,EAAAA,UAASyS,GA4DrD,OAvBA9P,EAAAA,EAAAA,WAAU,KACJiE,IAAazJ,GACf6b,EAAwB3P,IACf,IACFA,EACH+E,6BAAyBxN,EACzBuN,mBAAoB5Q,MAIzB,CAACqJ,IAaG,CACLyP,mBAzCyBiD,IACzB,IACMP,EAAqB3K,0BAA4BkL,GACnDN,EAAwB3P,IAAS,IAC5BA,EACH+E,6BAAyBxN,KAG7B,MAAM2V,GAAqBtZ,EAAAA,EAAAA,WAAUuV,IAAgB,IAChD1O,EAAAA,EAAAA,SAAQyS,KACXA,EAAmBC,OAAO8C,EAAwB,GAClDL,EAASI,EAAAA,wBAAwB1b,IAAI+U,EAAO,cAAe6D,IAE/D,CAAE,MAAOhW,GACP4Y,QAAQ7e,MAAMiG,EAChB,GA2BAoY,gBA7DsBY,IAEtB,MAAMC,EAAsC,OAArBD,QAAkD,IAArBA,OAA8B,EAASA,EAAiBna,IAAImP,IAC9G,IAAIxH,EACJ,OAAO,IAAI+O,EAAAA,yBAAyB,CAClC3Y,IAAIoQ,EAAAA,EAAAA,OACJe,YAAa,CAAC,IAAImH,EAAAA,mBAAmB,IAChClH,EACH7O,MAAO6O,EAAWvQ,YAClBwH,KAAM+I,EAAWvQ,YACjBwK,QAASqQ,GAAiB3R,EAAAA,EAAAA,WAAU,IAE2C,QAFrCH,EAAuC,OAAlBN,QAA4C,IAAlBA,OAA2B,EAASA,EAAcrH,IAAI,EAC7IjC,QACI,CAACA,GAAIgK,EAAAA,EAAAA,wBAAuBiS,EAA2B,KAAK,YAA4C,IAAvBrS,EAAgCA,EAAqB,MAAQI,EAAAA,EAAAA,wBAAuBiS,EAA2B,KAAK,UAI3M7C,EAAqB,IAAI/D,KAAgBgH,GAC/CP,EAASI,EAAAA,wBAAwB1b,IAAI+U,EAAO,cAAe6D,KA6C3D1B,kBAbwBA,CAACvU,EAAGsD,KAC5BA,EAAMkR,mBACFhR,EAAAA,EAAAA,SAAQ6Q,EAAenR,SACzBoR,EAAkBnC,GAClByC,GAAiB,KAEjB+D,EAASI,EAAAA,wBAAwB1b,IAAI+U,EAAO,QAASiC,IACrDO,GAAiB,KAOnB0D,gBACAjE,iBACAC,oBACAM,mBACAxC,QAEJ,CDzEM+G,CAAmB,CACrBlc,QACAqJ,cAEI,OACJyQ,EAAM,SACNC,EAAQ,UACRoC,EAAS,SACTC,GEnCW,UAA4B,sBACzCjB,EAAqB,MACrBnb,IAEA,MAAM,MACJtE,EAAK,SACLD,IACEI,EAAAA,EAAAA,MACE6O,GAAOtL,EAAAA,EAAAA,SAAQ,IAAM,CAAC,gBAAiB,aAAcY,GAAO2L,KAAK,KAAM,CAAC3L,IACxEmV,EAAQzZ,EAAMgP,IACd,GACJ9K,EAAE,YACFqV,GACY,OAAVE,QAA4B,IAAVA,EAAmBA,EAAQ,IAAI2G,EAAAA,wBAC/CJ,GAAW7e,EAAAA,EAAAA,aAAY8e,IAC3BlgB,EAASiP,EAAMiR,IACd,CAACjR,EAAMjP,IACJqe,GAASuC,EAAAA,EAAAA,mBAAkB,EAC/BC,WACAlc,SACI,CAACqa,EAAqB8B,KAC1B,IAAIC,EAAuBC,EAC3B,MAAMC,GAAmBnT,EAAAA,EAAAA,MAAwE,QAAlEiT,EAAwBvH,EAAYsH,UAAgE,IAA1BC,OAAmC,EAASA,EAAsBzL,aACrK4L,EAAepE,EAAAA,yBAAyBqE,eAAe3H,EAAYwF,GAAsBiC,GACzFG,EAAoB,IAAI5H,GAC9B4H,EAAkB5D,OAAOwB,EAAqB,EAAGkC,GACjDE,EAAkB5D,OAAOsD,EAAyB,GAClD,MAAM1L,EAAgH,QAArF4L,EAAwBH,EAASQ,YAAYnM,EAAAA,0BAA0BoM,gBAAgD,IAA1BN,OAAmC,EAASA,EAAsB5L,wBAC5LA,IAA4B4J,GAAuB5J,IAA4B0L,GACjFnc,EAAIuQ,EAAAA,yBAA0B7E,IACrB,IACFA,EACH+E,wBAAyB4J,KAI/BiB,EAASI,EAAAA,wBAAwB1b,IAAI+U,EAAO,cAAe0H,KAC1D,CAAC5H,EAAaE,EAAOuG,IAClB3B,GAAWsC,EAAAA,EAAAA,mBAAkB,EACjCjc,IAAK4c,KACDpd,IACJ,IAAIqd,EAEJ,MAAM3E,GAAa9J,EAAAA,EAAAA,MAAKyG,EAAa,CAAC,KAAMrV,IACtCsd,GAAkBjd,EAAAA,EAAAA,WAAUgV,EAAa,CAAC,KAAMrV,IAEhDud,EAAgB,IAAI5E,EAAAA,yBAAyB,CACjDxH,YAAa,EAAC4J,EAAAA,EAAAA,MAAoB,OAAfrC,QAAsC,IAAfA,OAAwB,EAASA,EAAWvH,gBAElFqM,GAAqB1d,EAAAA,EAAAA,WAAU4Y,GAC/B+E,EAAqB9E,EAAAA,yBAAyBnY,IAAIgd,EAAoB,cAAsC,OAAvBA,QAAsD,IAAvBA,GAAsG,QAA5DH,EAAwBG,EAAmBrM,mBAAmD,IAA1BkM,OAA9E,EAA0HA,EAAsBhE,OAAO,EAAG,IAC9S4D,EAAoB,IAAI5H,IAC9B7U,EAAAA,EAAAA,KAAIyc,EAAmB,CAACK,GAAkBG,GAC1CR,EAAkB5D,OAAOiE,EAAiB,EAAGC,GAC7CzB,EAASI,EAAAA,wBAAwB1b,IAAI+U,EAAO,cAAe0H,IAC3DG,EAASrM,EAAAA,yBAA0B7E,IAC1B,IACFA,EACH+E,6BAAyBxN,OAyB/B,MAAO,CACLyW,SACAC,WACAoC,WAxBgBE,EAAAA,EAAAA,mBAAkB,EAClCjc,SACIkd,IACJ,MAAM,YACJC,EAAW,OACX1C,GACEyC,GAAU,CAAC,EACf5B,EAASI,EAAAA,wBAAwB1b,IAAI+U,EAAO,eAAeqI,EAAAA,EAAAA,2BAAoC,OAAVrI,QAA4B,IAAVA,OAAmB,EAASA,EAAMF,YAAwB,OAAX4F,QAA8B,IAAXA,OAAoB,EAASA,EAAO7a,MAAuB,OAAhBud,QAAwC,IAAhBA,OAAyB,EAASA,EAAYvd,SAC1RI,EAAIuQ,EAAAA,yBAA0B7E,GACxBA,EAAU+E,2BAAwC,OAAXgK,QAA8B,IAAXA,OAAoB,EAASA,EAAO7a,OACzF,IACF8L,EACH+E,wBAAyC,OAAhB0M,QAAwC,IAAhBA,OAAyB,EAASA,EAAYvd,OAG5F8L,KAUTsQ,SAPeA,CAAC/V,EAAOoX,KACvBtC,EAAsBvb,EAAtBub,CAA0B9U,EAAOoX,IAQrC,CFrDMC,CAAmB,CACrBvC,wBACAnb,WAEI,iBACJ2d,EAAgB,uBAChBC,GG5CW,UAAwB,MACrC5d,IAEA,IAAI6d,EACJ,MAAM,MACJniB,IACEG,EAAAA,EAAAA,MAEEsZ,EAAQzZ,GADD0D,EAAAA,EAAAA,SAAQ,IAAM,CAAC,gBAAiB,aAAcY,GAAO2L,KAAK,KAAM,CAAC3L,MAExE,YACJiV,GACY,OAAVE,QAA4B,IAAVA,EAAmBA,EAAQ,IAAI2G,EAAAA,wBAOrD,MAAO,CACL6B,iBCrBG,SAAqBG,EAAO,IACjC,MAAMC,EAAS,GACTC,EAAe,IAAIF,GAEzB,KAAOE,EAAazhB,OAAS,GAAG,CAC9B,IAAI0hB,EAAiBC,EAAkBC,EAAuBC,EAAeC,GAChC,QAAvCJ,EAAkBD,EAHhB,UAGiE,IAApBC,OAA6B,EAASA,EAAgBlN,aAAe,EACxHgN,EAAOO,KAAKN,EAAa/E,OAJnB,EAI6B,KAGS,QAAxCiF,EAAmBF,EAPjB,UAOmE,IAArBE,GAAkG,QAA1DC,EAAwBD,EAAiBnN,mBAAmD,IAA1BoN,OAA5E,EAAwHA,EAAsB5hB,QAAU,IAAgD,QAAzC6hB,EAAgBJ,EAAaO,UAAsC,IAAlBH,GAA4F,QAAvDC,EAAwBD,EAAcrN,mBAAmD,IAA1BsN,OAAzE,EAAqHA,EAAsB9hB,QAAU,EACldwhB,EAAOO,KAAKN,EAAa/E,OARnB,EAQ6B,IAGrC8E,EAAOO,KAAKN,EAAa/E,OAXjB,EAW2B,GACrC,CACA,OAAO8E,CACT,CDH2BS,CAAYvJ,GAQnC2I,uBALuB,QAFOC,GAAeY,EAAAA,EAAAA,aAA4B,OAAhBxJ,QAAwC,IAAhBA,OAAyB,EAASA,EAAYpT,IAAI,EACnIkP,iBACIA,WAA4C,IAAjB8M,OAA0B,EAASA,EAAahc,IAAI,EACnFjC,QACIA,GAKR,CHuBM8e,CAAe,CACjB1e,WAEI,MACJkV,EAAK,GACLtV,EAAE,YACFqV,GACY,OAAVE,QAA4B,IAAVA,EAAmBA,EAAQ,IAAI2G,EAAAA,yBAC9C6C,EAASC,IAAcnc,EAAAA,EAAAA,WAAS,GACjCoc,GAAajZ,EAAAA,EAAAA,UACnB,OAAoB1I,EAAAA,cAAoBgc,GAAAA,GAAW,CACjD3W,IAAKA,EACLvC,MAAOA,EACPmZ,YAAavZ,GACZwZ,GAAyBlc,EAAAA,cAAoBiN,GAAW,CACzDoP,SAAUH,EAASG,SACnB3B,cAAevR,GAASA,EAAMkR,kBAC9BuH,WAAyB5hB,EAAAA,cAAoB6hB,GAAAA,EAAgB,MAC7DC,QAAQ,EACR3V,SAAUA,IAAazJ,EACvB+E,SAAUyX,GACIlf,EAAAA,cAAoB4d,EAAAA,EAAS,CAC3ChE,QAASra,EAAAA,EAAKC,EAAE,yCAA0C,CACxDuiB,OAAQ5V,IAAazJ,EAAKnD,EAAAA,EAAKC,EAAE,YAAcD,EAAAA,EAAKC,EAAE,aAE1CQ,EAAAA,cAAoBmN,GAAkBnC,GAAS,CAC7DqR,SAAUsF,EACVrd,QAAS6E,GAASA,EAAMkR,mBACvB6B,EAASC,eAAgBD,EAASE,gBAAiB,CACpDwF,WAAyB5hB,EAAAA,cAAoB6hB,GAAAA,EAAgB,CAC3D5hB,UAAW,oBACXqU,SAAU,2BAEZ,gBAAiB,GAAG5R,aACpBA,GAAI,GAAGA,aACP4R,SAAU,yBACR6J,EAA6Bne,EAAAA,cAAoBia,GAAW,CAC9DG,kBAAmBA,EACnBF,eAAgBA,EAChB/V,QAASsW,EACTzC,MAAOA,EACPmC,kBAAmBA,IACHna,EAAAA,cAAoBwa,GAAY,CAChDxC,MAAOA,EACP5V,SAAUA,EACVqY,iBAAkBA,EAClB/X,GAAIA,EACJ7C,MAAOA,MACUG,EAAAA,cAAoBsN,GAAkB,KAAmBtN,EAAAA,cAAoB,MAAO,CACrGC,UAAW,6BACVoJ,EAAAA,EAAAA,SAAQ0O,GAA4B/X,EAAAA,cAAoB,MAAO,CAChEC,UAAW,kCACXC,MAAO,CACLc,OAAQ,MAEIhB,EAAAA,cAAoB,IAAK,CACvCE,MAAO,CACLK,MAAOC,EAAAA,EAAO4J,UAEf7K,EAAAA,EAAKC,EAAE,uBAAsCQ,EAAAA,cAAoBgiB,GAAAA,GAAiB,CACnF/C,UAAWA,GACGjf,EAAAA,cAAoBiiB,GAAAA,GAAW,CAC7CC,YAAa,GAAGxf,KACfwZ,GAAyBlc,EAAAA,cAAoB,MAAOgL,GAAS,CAC9D/K,UAAW,UACVic,EAASiG,eAAgB,CAC1B9c,IAAK6W,EAASG,WACS,OAArBoE,QAAkD,IAArBA,OAA8B,EAASA,EAAiB9b,IAAI,CAACgY,EAAO0E,IAAmBrhB,EAAAA,cAAoB0c,GAAkB,CAC5J3E,YAAaA,EACb8E,SAAUA,EACVD,OAAQA,EACRD,MAAOA,EACPyF,WAAYf,EACZzF,mBAAoBA,EACpB9W,IAAK,GAAGuc,uBAAiC,OAAVpJ,QAA4B,IAAVA,OAAmB,EAASA,EAAMvV,QAChFwZ,EAASmG,eAA6BriB,EAAAA,cAAoB,MAAO,KAAmBA,EAAAA,cAAoB4F,EAAAA,EAAQ,CACnH3F,UAAW,0BACXqU,SAAU,0BACVhQ,QAASA,IAAMod,GAAW,GAC1Bxc,KAAmBlF,EAAAA,cAAoBgK,EAAAA,EAAS,OAC/CzK,EAAAA,EAAKC,EAAE,eAAgBiiB,GAAwBzhB,EAAAA,cAAoBgZ,GAAyB,CAC7FzK,SAAUmS,EACVtZ,SAAU8W,EACV/Z,QAASA,IAAMud,GAAW,GAC1B3S,KAAM0S,MAEV,CACA,QAA4Ba,EAAAA,EAAAA,YAAWtE,IKzIvC,SAAShT,KAAa,OAAOA,GAAWC,OAAOC,OAASD,OAAOC,OAAOC,OAAS,SAAUC,GAAK,IAAK,IAAItF,EAAI,EAAGA,EAAIuF,UAAUhM,OAAQyG,IAAK,CAAE,IAAItG,EAAI6L,UAAUvF,GAAI,IAAK,IAAIwF,KAAK9L,GAAG,CAAG,GAAE+L,eAAeC,KAAKhM,EAAG8L,KAAOF,EAAEE,GAAK9L,EAAE8L,GAAK,CAAE,OAAOF,CAAG,EAAGJ,GAASS,MAAM,KAAMJ,UAAY,CAWpQ,SAASkX,KACtB,IAAIjF,EACJ,MAAM,SACJ/e,EAAQ,MACRC,IACEG,EAAAA,EAAAA,MACE6jB,EAAgBhkB,EAAM,iBACtBikB,GAAiBxW,EAAAA,EAAAA,gBAAeyW,IAChCC,GAAsBhjB,EAAAA,EAAAA,aAAYijB,IACtCrkB,EAAS,gBAAiBqkB,IACzB,CAACrkB,IACEskB,GAAiBC,EAAAA,EAAAA,qBAAoBrP,EAAAA,2BAEzCyD,WAAYnY,GACVyjB,GAAiB,IAAIO,EAAAA,eAClB5W,EAAUC,IAAe7G,EAAAA,EAAAA,UAAoC,QAA1B+X,GAAQG,EAAAA,EAAAA,MAAK1e,UAA+B,IAAVue,OAAmB,EAASA,EAAM5a,IACxGub,EAAwBjR,GAAS,CAAC7D,EAAOoX,KAC7CnU,IAAYmU,GAAcvT,IAEtBgW,EAAgBtgB,IACpB,MAAMugB,EAAmB,IAAIlkB,IAC7B0D,EAAAA,EAAAA,QAAOwgB,EAAkB,CAAC,KAAMvgB,IAChCigB,EAAoBI,EAAAA,cAAc7f,IAAIsf,EAAe,aAAcS,IACnEJ,KAEIK,EAAgBA,CAACpgB,EAAOqgB,KAC5B,MAAMF,EAAmB,IAAIlkB,IAC7BmE,EAAAA,EAAAA,KAAI+f,EAAkB,CAACngB,GAAQqgB,GAC/BR,EAAoBI,EAAAA,cAAc7f,IAAIsf,EAAe,aAAcS,KAE/DG,GAAiBlhB,EAAAA,EAAAA,SAAQ,KACzBmH,EAAAA,EAAAA,SAAQoZ,GACH1jB,GAEA+H,EAAAA,EAAAA,QAAO/H,EAAQ,EACpB2D,QACI+f,EAAelZ,SAAS7G,IAE/B,CAAC+f,EAAgB1jB,IAKpB,OAJAmJ,EAAAA,EAAAA,WAAU,KACR,IAAImb,EACJjX,EAAgD,QAAnCiX,GAAS5F,EAAAA,EAAAA,MAAK2F,UAAwC,IAAXC,OAAoB,EAASA,EAAO3gB,KAC3F,CAAC0gB,EAAgBA,EAAe/jB,SACfW,EAAAA,cAAoBiiB,GAAAA,GAAW,CACjDC,YAAa,cACZhG,GAAyBlc,EAAAA,cAAoB,MAAOgL,GAAS,CAAC,EAAGkR,EAASiG,eAAgB,CAC3F9c,IAAK6W,EAASG,WACCrc,EAAAA,cAAoB,MAAO,KAAyB,OAAnBojB,QAA8C,IAAnBA,OAA4B,EAASA,EAAeze,IAAIsT,IACnI,MAAMqL,GAAavgB,EAAAA,EAAAA,WAAUhE,EAAQ,CAAC,KAAMkZ,EAAMvV,KAClD,OAAoB1C,EAAAA,cAAoBujB,EAAAA,GAAY,CAClDze,IAAKmT,EAAMvV,GACXA,GAAIuV,EAAMvV,GACV8gB,MAAO,CACL5kB,SAAU,CACR6kB,WAAY3kB,KAAUuK,EAAAA,EAAAA,SAAkB,OAAVvK,QAA4B,IAAVA,OAAmB,EAASA,EAAMiZ,cAAgBxY,EAAAA,EAAKC,EAAE,2DAG7GuL,KAAM,4BAA4BuY,IAClCI,OAAQA,EACNC,QACAC,gBACiB5jB,EAAAA,cAAoBge,GAAWhT,GAAS,CAAC,EAAG2Y,EAAO,CACpE9jB,MAAO+jB,EAAW/jB,MAClBqjB,cAAeA,EACf9gB,SAAU4gB,EACVlgB,MAAOwgB,EACPrL,MAAOA,EACP9L,SAAUA,EACV8R,sBAAuBA,SAGzB/B,EAASmG,cACf,CCxEO,MAAMK,IAAsBmB,EAAAA,EAAAA,MAAK,CACtC/e,IAAK,0BACLgf,QAAS,KAEI,SAASC,IAAc,WACpC1P,IAEA,MAAM,SACJ9V,EAAQ,MACRC,IACEG,EAAAA,EAAAA,MACE6jB,EAAgBhkB,EAAM,kBACrBqI,EAASe,IAAcrC,EAAAA,EAAAA,UAAS,IACjCye,GAAoBtI,EAAAA,EAAAA,mBAAkBgH,IACtC7Z,GAAWH,EAAAA,EAAAA,SAAOI,EAAAA,EAAAA,UAASjC,IAC/Bmd,EAAkB,KAEd,IAAIC,EADN,OAAIpd,EAEuB,OAAlB2b,QAA4C,IAAlBA,GAOzB,QAP8DyB,EAAwBzB,EAActL,WAAWpQ,OAAOod,IACrH5S,EAAAA,EAAAA,MAAyB,OAApB4S,QAAgD,IAApBA,OAA6B,EAASA,EAAgBnM,YAAaoM,IAClG7S,EAAAA,EAAAA,MAA6B,OAAxB6S,QAAwD,IAAxBA,OAAiC,EAASA,EAAoBtQ,YAAauQ,GACjG,GAAGA,EAA8BrZ,QAAQqZ,EAA8Bnf,QAAQof,cAChFC,MAAM,IAAIC,OAAO1d,EAAQwd,0BAGR,IAA1BJ,OAP4C,EAOAA,EAAsBtf,IAAI,EACpFjC,QACIA,GAEC,MAGV,MACGuc,GAAYE,EAAAA,EAAAA,mBAAkB,EAClCjc,SACIkd,IACJ,MAAM,YACJC,EAAW,OACX1C,GACa,OAAXyC,QAA8B,IAAXA,EAAoBA,EAAS,CAAC,EACrD7hB,EAAS,gBAAiBwkB,EAAAA,cAAc7f,IAAIsf,EAAe,aAAc,KAAIlC,EAAAA,EAAAA,2BAA4C,OAAlBkC,QAA4C,IAAlBA,OAA2B,EAASA,EAActL,WAAuB,OAAXyG,QAA8B,IAAXA,OAAoB,EAASA,EAAO7a,MAAuB,OAAhBud,QAAwC,IAAhBA,OAAyB,EAASA,EAAYvd,UACnUI,EAAIuQ,EAAAA,yBAA0B7E,GACxBA,EAAU8E,sBAAmC,OAAXiK,QAA8B,IAAXA,OAAoB,EAASA,EAAO7a,OACpF,IACF8L,EACH8E,mBAAoC,OAAhB2M,QAAwC,IAAhBA,OAAyB,EAASA,EAAYvd,OAGvF8L,IAER,CAAC4T,EAAejkB,IACnB,OAAoByB,EAAAA,cAAoB,MAAO,CAC7CC,UAAW,gBACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,QACGD,EAAAA,cAAoBsa,GAAAA,EAAO,CACzCxb,MAAO+H,EACPkE,KAAM,GACNtD,SAAUA,EACR3I,YAEA8I,EAAW9I,GACG,KAAVA,QAA0BqH,IAAVrH,EAClB+J,EAAS2b,QAAQ1lB,GAEjBklB,EAAkB,KAGtB3B,YAAa9iB,EAAAA,EAAKC,EAAE,2BACJQ,EAAAA,cAAoB,KAAM,CAC1CC,UAAW,SACVV,EAAAA,EAAKC,EAAE,WAAyBQ,EAAAA,cAAoB,MAAO,CAC5DE,MAAO,CACLmH,UAAW,OACXod,UAAW,OACXC,KAAM,IAEM1kB,EAAAA,cAAoBgiB,GAAAA,GAAiB,CACnD/C,UAAWA,GACGjf,EAAAA,cAAoBuiB,GAAY,QAAsBviB,EAAAA,cAAoB,MAAO,CAC/FC,UAAW,aACXC,MAAO,CACLG,WAAY,UAEAL,EAAAA,cAAoB4F,EAAAA,EAAQ,CAC1CtB,QAAS+P,EACTnP,KAAmBlF,EAAAA,cAAoBgK,EAAAA,EAAS,MAChDsK,SAAU,6BACVrU,UAAW,8BACVV,EAAAA,EAAKC,EAAE,eACZ,CClGO,SAASmlB,GAAqB5lB,GACnC,OAAO,IAAI6f,EAAAA,wBAAwB,CACjC5G,MAAO,UAAqB,OAAXjZ,QAA8B,IAAXA,OAAoB,EAASA,EAAOM,QAAU,GAAK,KAE3F,CCNA,QAAgB,KAAO,kCAAkC,iBAAiB,6CCEnE,SAASulB,KACd,MAAM,MACJpmB,EAAK,SACLD,IACEI,EAAAA,EAAAA,MACEuY,EAAa1Y,EAAM,4BACnBqmB,EAAe3N,EAAW7X,OAAS,EAKzC,MAAO,CACLylB,gBALqBnlB,EAAAA,EAAAA,aAAYolB,IACjC,MAAMC,EjCRH,SAAsBjmB,EAAQwL,GACnC,MAAMya,GAAYxiB,EAAAA,EAAAA,WAAUzD,GAiB5B,OAhBIimB,IACY,OAAdA,QAAoC,IAAdA,GAAgCA,EAAUC,QAAQhN,IACtE,IAAIC,EACM,OAAVD,QAA4B,IAAVA,GAAyE,QAA5CC,EAAqBD,EAAMF,mBAAgD,IAAvBG,GAAyCA,EAAmB+M,QAAQ7J,IACrK,IAAI8J,EACW,OAAf9J,QAAsC,IAAfA,GAAsF,QAApD8J,EAAwB9J,EAAWvH,mBAAmD,IAA1BqR,GAA4CA,EAAsBD,QAAQnR,KAC7L5Q,EAAAA,EAAAA,KAAI4Q,EAAY,WAAWpH,EAAAA,EAAAA,wBAAuBpC,GAA+BC,MAC5ElB,EAAAA,EAAAA,SAAQyK,EAAWzB,kBACtByB,EAAWzB,gBAAgB4S,QAAQjW,KACjC9L,EAAAA,EAAAA,KAAI8L,EAAgB,WAAWtC,EAAAA,EAAAA,wBAAuBpC,GAA+BC,cAO1Fya,CACT,CiCXsBG,CAAajO,EAAY6N,GAC3CxmB,EAAS,2BAA4BymB,IACpC,CAAC9N,EAAY3Y,IAGdsmB,eAEJ,CCde,SAASO,KACtB,MAAM,aACJP,EAAY,eACZC,GACEF,KACJ,OAAoB5kB,EAAAA,cAAoBiS,EAAAA,GAAmB,CACzDhN,MAAO1F,EAAAA,EAAKC,EAAE,sBACdslB,eAAgBA,EAChBD,aAAcA,EACd/Z,UAAW,qBACXC,KAAM,oBACN6C,WAAW,GAEf,C,eCXe,SAASyX,KACtB,MAAM,UACJC,IACE3mB,EAAAA,EAAAA,MACE4mB,GAAcrjB,EAAAA,EAAAA,SAAQ,KAC1B,MAAMwS,GAASrI,EAAAA,EAAAA,MAAKiZ,EAAU,4BAC9B,OAAI5Q,EACK8Q,GAAAA,GAAcC,cAAyB,OAAX/Q,QAA8B,IAAXA,OAAoB,EAASA,EAAOhS,IAAIgjB,MAAMC,MAE/F,IAAIjP,MAAOC,eACjB,CAAC2O,KACGK,EAAMC,IAAWrgB,EAAAA,EAAAA,UAAyB,OAAhBggB,QAAwC,IAAhBA,EAAyBA,GAAc,IAAI7O,MAAOC,eACrGkP,GAAa9T,EAAAA,EAAAA,IAAS,CAC1BhH,KAAM,eAEF+a,GAAU5jB,EAAAA,EAAAA,SAAQ,KACtB,IAAI6jB,EACJ,IAAKF,EACH,MAAO,GAET,MAIMvjB,EAJUkjB,GAAAA,GAAcQ,WAAW,CACvCL,OACAM,SAAUC,GAAAA,GAAmBC,QAEVC,cAAcP,EAAWQ,eAC9C,OAAgB,OAAT/jB,QAA0B,IAATA,GAA8D,QAAlCyjB,EAAgBzjB,EAAKyO,eAAuC,IAAlBgV,OAApD,EAAwFA,EAAcphB,IAAI,EAClJjC,KACAqI,WACD,CACCA,KAAMA,EACNub,KAAM5jB,MAEP,CAACmjB,EAAYF,IACVY,GAAQrkB,EAAAA,EAAAA,SAAQ,IAAM,IAAIqK,MAAM,IAAIia,KAAK,IAAI7hB,IAAI,CAACkB,EAAG/C,KAAK,CAC9DwjB,OAAO,IAAI5P,MAAOC,cAAgB7T,GAAO2jB,WACzC1b,MAAM,IAAI2L,MAAOC,cAAgB7T,KAC/B4jB,UAAW,IACf,OAAoB1mB,EAAAA,cAAoBujB,EAAAA,GAAY,CAClDG,OAAQA,EACNC,YAEA,IAAI5X,EAAO4a,EACX,MASMC,EAA6K,QAAlK7a,GAAQM,EAAAA,EAAAA,MAAe,OAAVsX,QAA4B,IAAVA,GAA6D,QAAhCgD,EAAehD,EAAM7kB,aAAoC,IAAjB6nB,OAAlD,EAAqFA,EAAa5V,gBAAgC,IAAVhF,OAAmB,EAASA,EAAMrJ,GACvN5D,GAAQwS,EAAAA,EAAAA,MAAKwU,EAAS,CAAC,OAAQc,IAAYA,OAAUzgB,EAC3D,OAAoBnG,EAAAA,cAAoB,MAAO,CAC7CE,MAAO,CACLC,QAAS,OACTC,IAAK,GACLuJ,MAAO,SAEK3J,EAAAA,cAAoB6mB,EAAAA,GAAmB,CACrDvY,WAAW,EACXrJ,MAAO1F,EAAAA,EAAKC,EAAE,QACdV,MAAO6mB,EAAKc,WACZK,UAAW,CACThB,QAASS,GAEXxb,KAAM,OACNtD,SAAUme,IACK5lB,EAAAA,cAAoB6mB,EAAAA,GAAmB,CACtDvY,WAAW,EACXrJ,MAAO1F,EAAAA,EAAKC,EAAE,UACdV,MAAOA,EACPgoB,UAAW,CACThB,WAEF/a,KAAM,kBACNtD,SAlCe6e,IACf,MAAM5R,EAAS8Q,GAAAA,GAAcC,cAAca,GAC3C3C,EAAMlc,SAAS,CACbsJ,QAAS,CAAC,CACRhG,KAAM2J,EAAO3J,KACbrI,GAAe,OAAXgS,QAA8B,IAAXA,OAAoB,EAASA,EAAOhS,YAgCnEqI,KAAM,mBAEV,CCtFA,OAAgC,0CCDhC,SAASC,KAAa,OAAOA,GAAWC,OAAOC,OAASD,OAAOC,OAAOC,OAAS,SAAUC,GAAK,IAAK,IAAItF,EAAI,EAAGA,EAAIuF,UAAUhM,OAAQyG,IAAK,CAAE,IAAItG,EAAI6L,UAAUvF,GAAI,IAAK,IAAIwF,KAAK9L,GAAG,CAAG,GAAE+L,eAAeC,KAAKhM,EAAG8L,KAAOF,EAAEE,GAAK9L,EAAE8L,GAAK,CAAE,OAAOF,CAAG,EAAGJ,GAASS,MAAM,KAAMJ,UAAY,CAQpQ,SAAS0b,IAAmB,MACzC9hB,EAAK,KACL8F,IAEA,MAAMic,GAAmB9kB,EAAAA,EAAAA,SAAQ,KAAM,IAAIsjB,GAAAA,IAAgByB,YAAYf,GAAAA,GAAmBC,OAAOe,YAAa,IACxGC,GAAsBjlB,EAAAA,EAAAA,SAAQ,KAAM,IAAIsjB,GAAAA,IAAgByB,YAAYf,GAAAA,GAAmBkB,UAAUF,YAAa,IACpH,OAAoBlnB,EAAAA,cAAoBujB,EAAAA,GAAY,CAClDxY,KAAMA,EACNyY,MAAO,CACL3Z,SAAUtK,EAAAA,EAAKC,EAAE,4BAEnBkkB,OAAQA,EACNC,QACAC,iBAEA,IAAIyD,EACJ,OAAoBrnB,EAAAA,cAAoB4J,EAAAA,EAAmBoB,GAAS,CAAC,EAAG2Y,EAAO,CAC7E1e,MAAOA,EACP4E,UAAU,EACVyd,YAAY,EACZ9f,SAAUmc,EAAM7kB,MAChB2I,SAAUA,EACRD,cACImc,EAAMlc,SAASD,GACrByB,eAA2D,QAA1Coe,EAAoBzD,EAAW/jB,aAAyC,IAAtBwnB,OAA+B,EAASA,EAAkB1mB,QAC7Hd,QAAS+jB,EAAW/jB,QACLG,EAAAA,cAAoB8J,EAAAA,EAAoB,CACvDhL,MAAO,WACPyP,UAAU,EACVtO,UAAWsnB,GACXtiB,MAAO1F,EAAAA,EAAKC,EAAE,mBACS,OAArBwnB,QAAkD,IAArBA,OAA8B,EAASA,EAAiBriB,IAAIkhB,GACvE7lB,EAAAA,cAAoB8J,EAAAA,EAAoB,CAC1DhF,IAAK+gB,EAAWnjB,GAChB5D,MAAO+mB,EAAWnjB,GAClBuC,MAAO4gB,EAAWzP,OAAOrL,QAEZ/K,EAAAA,cAAoB8J,EAAAA,EAAoB,CACvDhL,MAAO,WACPyP,UAAU,EACVtO,UAAWsnB,GACXtiB,MAAO1F,EAAAA,EAAKC,EAAE,sBACY,OAAxB2nB,QAAwD,IAAxBA,OAAiC,EAASA,EAAoBxiB,IAAIkhB,GAChF7lB,EAAAA,cAAoB8J,EAAAA,EAAoB,CAC1DhF,IAAK+gB,EAAWnjB,GAChB5D,MAAO+mB,EAAWnjB,GAClBuC,MAAO4gB,EAAWzP,OAAOrL,WAKnC,CChDe,SAASyc,KACtB,MAAM,GACJ9kB,IACE+kB,EAAAA,EAAAA,KACEC,GAASC,EAAAA,EAAAA,MACf,OAAoB3nB,EAAAA,cAAoB,MAAO,CAC7CE,MAAO,CACLE,IAAK,GACLD,QAAS,OACTynB,cAAe,UAEjB3nB,UAAW,UACGD,EAAAA,cAAoB,MAAO,CACzCE,MAAO,CACLC,QAAS,OACTynB,cAAe,SACfxnB,IAAK,IAEPH,UAAW,2BACGD,EAAAA,cAAoB6nB,EAAAA,GAAgB,CAClD/c,UAAW+C,EAAAA,gBAAgBmF,KAAKjI,KAChCA,KAAM,QACN9F,MAAO1F,EAAAA,EAAKC,EAAE,SACdqK,UAAU,EACVoJ,YAAa,CACXpJ,SAAUtK,EAAAA,EAAKC,EAAE,qBACjBZ,SAAU0d,etCNTA,eAAiCoL,EAAQhlB,EAAIsV,GAClD,MAAM,QACJ8P,SACQC,EAAAA,EAAAA,qBAAoBL,GAC9B,IAAIre,EAAAA,EAAAA,SAAQye,GACV,OAAO,EAET,MAAME,GAAY1W,EAAAA,EAAAA,MAAKwW,EAAS,CAC9B9P,UAEF,OAAIgQ,EACKA,EAAUtlB,KAAOA,GAElBslB,CACV,CsCPsBC,CAAkBP,EAAQhlB,EAAI5D,IAAWS,EAAAA,EAAKC,EAAE,qFAAsF,CAClJV,aAISkB,EAAAA,cAAoB6nB,EAAAA,GAAgB,CACnD/c,UAAW+C,EAAAA,gBAAgBmF,KAAKjI,KAChCA,KAAM,WACN9F,MAAO1F,EAAAA,EAAKC,EAAE,YACdsW,IAAK,SACW9V,EAAAA,cAAoB,MAAO,CAC3CC,UAAW,wBACGD,EAAAA,cAAoB6nB,EAAAA,GAAgB,CAClD9c,KAAM,cACND,UAAW+C,EAAAA,gBAAgBqa,UAAUnd,KACrC9F,MAAO1F,EAAAA,EAAKC,EAAE,kBACEQ,EAAAA,cAAoB,MAAO,CAC3CC,UAAW,yBACXC,MAAO,CACLE,IAAK,KAEOJ,EAAAA,cAAoB,MAAO,CACzCC,UAAW,iCACGD,EAAAA,cAAoB+mB,GAAoB,CACtD9hB,MAAO1F,EAAAA,EAAKC,EAAE,eACduL,KAAM,gBACU/K,EAAAA,cAAoB,MAAO,CAC3CC,UAAW,gCACGD,EAAAA,cAAoBqlB,GAAgB,QAAsBrlB,EAAAA,cAAoB,MAAO,CACnGC,UAAW,0BACGD,EAAAA,cAAoB6nB,EAAAA,GAAgB,CAClD9c,KAAM,eACN9F,MAAO1F,EAAAA,EAAKC,EAAE,iBACdsL,UAAW+C,EAAAA,gBAAgBsa,UAAUpd,QACrB/K,EAAAA,cAAoB,MAAO,CAC3CC,UAAW,uDACGD,EAAAA,cAAoBolB,GAA2B,OAAqBplB,EAAAA,cAAoB,MAAO,CAC7GC,UAAW,gDACGD,EAAAA,cAAoB6nB,EAAAA,GAAgB,CAClDO,SAAS,EACTC,WAAW,EACXtd,KAAM,mBACND,UAAW+C,EAAAA,gBAAgBya,gBAAgBvd,KAC3C9F,MAAO1F,EAAAA,EAAKC,EAAE,4BACd+oB,cAAe,CACbxd,KAAM,QACND,UAAW+C,EAAAA,gBAAgBmF,KAAKjI,SAGtC,CCjFe,SAASyd,KACtB,IAAIC,EACJ,MAAM,kCACJC,GACmE,QAAhED,GAAkBxc,EAAAA,EAAAA,gBAAewH,EAAAA,iCAA2D,IAApBgV,EAA6BA,EAAkB,CAAC,EACvHjb,EAAO,yBAAyBkb,IACtC,OAAQvU,MAAMuU,GAMR,KAN0D1oB,EAAAA,cAAoB,MAAO,CACzFC,UAAW,sBACGD,EAAAA,cAAoB2oB,EAAAA,KAAM,CACxCC,UAAWC,EAAAA,gCACI7oB,EAAAA,cAAoB+S,GAA6B,CAChEvF,KAAMA,IAEV,C,4BCTA,MAAM2J,GAAU,CAAC,CACflS,MAAO,OACPuI,KAAM,eACL,CACDvI,MAAO,QACPuI,KAAM,UAEO,SAASsb,KACtB,MAAM,MACJtqB,EAAK,SACLD,EAAQ,QACR+c,IACE3c,EAAAA,EAAAA,MACEoqB,EAAwBvqB,EAAM,yBAC9BwqB,GAA2BrpB,EAAAA,EAAAA,aAAYopB,IAC3CxqB,EAAS,wBAAyBwqB,IACjC,CAACxqB,KACGiV,EAAoB+K,IAA2B/C,EAAAA,EAAAA,gBAAe/H,EAAAA,0BAS/DwV,GAAWtpB,EAAAA,EAAAA,aAAY+C,KACvBK,EAAAA,EAAAA,WAAUgmB,EAAuB,CAAC,KAAMrmB,MAAS8Q,EAAmBkV,mCACtEnK,EAAwB3P,IAAS,IAC5BA,EACH8Z,uCAAmCviB,KAGvC,MAAM5D,GAAcC,EAAAA,EAAAA,WAAUumB,IAC9BtmB,EAAAA,EAAAA,QAAOF,EAAa,CAAC,KAAMG,IAC3BsmB,EAAyBzmB,IACxB,CAACwmB,EAAuBvV,EAAmBkV,kCAAmCM,EAA0BzK,IAC3G,OAAQlV,EAAAA,EAAAA,SAAQ0f,GA+Ba,KA/ByB/oB,EAAAA,cAAoB6E,EAAAA,SAAU,KAAmB7E,EAAAA,cAAoB2oB,EAAAA,KAAM,CAC/HC,UAAWM,EAAAA,+BACIlpB,EAAAA,cAAoBqX,GAAAA,EAAW,CAC9CK,OAAO,EACPyR,aAAc,QACAnpB,EAAAA,cAAoBuX,GAAAA,EAAe,KAAmBvX,EAAAA,cAAoBwX,GAAAA,EAAc,KAAkB,OAAZL,SAAgC,IAAZA,QAAqB,EAASA,GAAQxS,IAAI,EAC1KM,QACAuI,UACiBxN,EAAAA,cAAoBopB,GAAAA,EAAuB,CAC5D1R,OAAO,EACPlD,IAAK,IACL1P,IAAK,GAAG0I,YACPvI,IAAsBjF,EAAAA,cAAoBopB,GAAAA,EAAuB,CAClE1R,OAAO,EACPlD,IAAK,QACYxU,EAAAA,cAAoBqpB,GAAAA,EAAW,KAAgC,OAA1BN,QAA4D,IAA1BA,OAAmC,EAASA,EAAsBpkB,IAAI,CAACwC,EAAMrE,IAAuB9C,EAAAA,cAAoBwX,GAAAA,EAAc,CAC9NhQ,UAAkC,OAAvBgM,QAAsD,IAAvBA,OAAgC,EAASA,EAAmBkV,qCAAuC5lB,EAC7IgC,IAAK,GAAY,OAATqC,QAA0B,IAATA,OAAkB,EAASA,EAAKzE,MAC5C,OAAZyU,SAAgC,IAAZA,QAAqB,EAASA,GAAQxS,IAAI,EAC/D6I,UACiBxN,EAAAA,cAAoByX,GAAAA,EAAe,CACpDnT,QAASA,IAxCQgY,iBACPhB,KACRiD,EAAwB3P,IAAS,IAC5BA,EACH8Z,kCAAmC5lB,MAoCxBwmB,CAAWxmB,GAC1BgC,IAAK,GAAY,OAATqC,QAA0B,IAATA,OAAkB,EAASA,EAAKzE,MAAM8K,MAC9D1N,EAAAA,EAAAA,KAAIqH,EAAMqG,KAAsBxN,EAAAA,cAAoByX,GAAAA,EAAe,CACpEZ,MAAO,UACO7W,EAAAA,cAAoB4F,EAAAA,EAAQ,CAC1CtB,QAASA,CAACxF,EAAOgH,KACfA,EAAEuU,kBACF4O,EAAkB,OAAT9hB,QAA0B,IAATA,OAAkB,EAASA,EAAKzE,KAE5DwC,KAAmBlF,EAAAA,cAAoBkG,EAAAA,EAAY,OAClD3G,EAAAA,EAAKC,EAAE,gBACZ,CCtEO,MAAM+pB,GAAQ,CAAC,CACpBtkB,MAAO1F,EAAAA,EAAKC,EAAE,WACdgqB,UCPa,WACb,OAAoBxpB,EAAAA,cAAoB,MAAO,CAC7CC,UAAW,aACGD,EAAAA,cAAoB2oB,EAAAA,KAAM,CACxCC,UAAWa,EAAAA,qBACIzpB,EAAAA,cAAoB,MAAO,CAC1CC,UAAW,wBACGD,EAAAA,cAAoBwnB,GAAa,OACnD,EDAEoB,UAAWa,EAAAA,mBACXC,QAASC,EAAAA,4BAA4B,GAAY,QACjDjnB,GAAI,WACH,CACDuC,MAAO1F,EAAAA,EAAKC,EAAE,sBACdgqB,UELa,WACb,MAAM,SACJjrB,EAAQ,MACRC,EAAK,SACLC,IACEE,EAAAA,EAAAA,MACJF,EAAS,iBACT,MAAM+jB,EAAgBhkB,EAAM,iBACtBmkB,GAAsBhjB,EAAAA,EAAAA,aAAYijB,IACtCrkB,EAAS,gBAAiBqkB,IACzB,CAACrkB,KAEF2Y,WAAYnY,GACQ,OAAlByjB,QAA4C,IAAlBA,EAA2BA,EAAgB,IAAIO,EAAAA,cACvE6F,ECpBO,SAAiB7pB,GAC9B,MAAO6pB,EAAWgB,IAAgBrkB,EAAAA,EAAAA,UAASskB,EAAAA,0BACrC,wBACJlW,IACE1H,EAAAA,EAAAA,gBAAewH,EAAAA,0BAsBnB,OArBAvL,EAAAA,EAAAA,WAAU,KACR0hB,EAAaE,IACX,IAAIP,EAAQ,IAAIO,GAgBhB,OAfKzgB,EAAAA,EAAAA,SAAQtK,KACXwqB,EAAQ,IAAIM,EAAAA,2BAA4BE,EAAAA,4BAA6BC,EAAAA,4BAEnE3gB,EAAAA,EAAAA,SAAQtK,KACVwqB,EAAQ,IAAIM,EAAAA,2BAA4BI,EAAAA,yBAErC5gB,EAAAA,EAAAA,SAAQtK,KAAWsK,EAAAA,EAAAA,UAAQ6gB,EAAAA,EAAAA,sBAAqBnrB,MACnDwqB,EAAQ,IAAIA,KAAUY,EAAAA,4BAEnB9gB,EAAAA,EAAAA,UAAQ6gB,EAAAA,EAAAA,sBAAqBnrB,MAChCwqB,EAAQ,IAAIA,KAAUa,EAAAA,6BAEnBjW,MAAMR,KACT4V,EAAQ,IAAIA,KAAUV,EAAAA,iCAEjBwB,EAAAA,EAAAA,QAAOd,EAAO,cAEtB,CAACxqB,EAAQ4U,IACLiV,CACT,CDPoB0B,CAAQvrB,GACpBsV,GAAa1U,EAAAA,EAAAA,aAAY,KAC7B,IAAIskB,EACJtB,EAAoBI,EAAAA,cAAc7f,IAAIsf,EAAe,aAAc,IAA0H,QAApHyB,EAA0C,OAAlBzB,QAA4C,IAAlBA,OAA2B,EAASA,EAActL,kBAAkD,IAA1B+M,EAAmCA,EAAwB,GAAKU,GAAqB5lB,OACzR,CAACyjB,EAAezjB,EAAQ4jB,IAC3B,OAAoB3iB,EAAAA,cAAoB,MAAO,CAC7CC,UAAW,MACXC,MAAO,CACLc,OAAQ,SAEIhB,EAAAA,cAAoB2oB,EAAAA,KAAM,CACxCC,UAAWA,IACI5oB,EAAAA,cAAoB,MAAO,CAC1CC,UAAW,oDACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,6BACXC,MAAO,CACLU,UAAW,OACXI,OAAQ,SAEIhB,EAAAA,cAAoBa,EAAAA,SAAU,CAC5CC,SAAuBd,EAAAA,cAAoBe,EAAAA,gBAAiB,QAC3DsI,EAAAA,EAAAA,SAAQtK,GAAuBiB,EAAAA,cAAoBoU,GAAiB,CACrEC,WAAYA,IACIrU,EAAAA,cAAoB+jB,GAAe,CACnD1P,WAAYA,OACMrU,EAAAA,cAAoB,MAAO,CAC7CC,UAAW,yBACToJ,EAAAA,EAAAA,SAAQtK,IAAwBiB,EAAAA,cAAoB,MAAO,CAC7DC,UAAW,aACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,6BACGD,EAAAA,cAAoBgX,GAAuB,QAAsBhX,EAAAA,cAAoB,MAAO,CAC1GC,UAAW,iBACVoJ,EAAAA,EAAAA,SAAQtK,GAAuBiB,EAAAA,cAAoB,MAAO,CAC3DE,MAAO,CACLsF,OAAQ,SAEIxF,EAAAA,cAAoBkK,EAAc,OAAsBlK,EAAAA,cAAoBkU,GAAyB,QACvH,EF/CE0U,UAAW2B,EAAAA,8BACXb,QAASC,EAAAA,4BAA4B,GAAY,QACjDjnB,GAAI,qBACH,CACDuC,MAAO1F,EAAAA,EAAKC,EAAE,0BACdgqB,UIPa,WACb,MAAM,MACJhrB,EAAK,SACLD,EAAQ,SACRE,IACEE,EAAAA,EAAAA,MACJF,EAAS,yBACT,MAAMsqB,EAAwBvqB,EAAM,yBAC9BwqB,GAA2BrpB,EAAAA,EAAAA,aAAYopB,IAC3CxqB,EAAS,wBAAyBwqB,IACjC,CAACxqB,IACEgM,EAAoBD,GAA+B9L,EAAM,sBACzD+f,GAA0B7C,EAAAA,EAAAA,mBAAkBjI,EAAAA,2BAC3C+W,EAASC,IAAcllB,EAAAA,EAAAA,WAAS,GACjCwE,EAAaA,KACjB0gB,GAAW,IAEPtnB,GAAQxD,EAAAA,EAAAA,aAAYkU,IACxB,MAAM6W,GAAiBhe,EAAAA,EAAAA,wBAAuBnC,EAAmB,KAAK,GAChEwU,EAAiC,OAAhBlL,QAAwC,IAAhBA,OAAyB,EAASA,EAAYlP,IAAIgZ,GAAU,IAAI3C,EAAAA,mBAAmB,IAC7H2C,EACH1Y,MAAkB,OAAX0Y,QAA8B,IAAXA,OAAoB,EAASA,EAAOpa,YAC9DwK,QAAS2c,KAEX1B,EAAyB,IAA+B,OAA1BD,QAA4D,IAA1BA,EAAmCA,EAAwB,MAA4B,OAAnBhK,QAA8C,IAAnBA,EAA4BA,EAAiB,MACvM1V,EAAAA,EAAAA,SAAQwK,IACX0K,EAAwB3P,IAAS,IAC5BA,EACH8Z,kCAAmC,MAGtC,CAACK,EAAuBxe,EAAmBye,EAA0BzK,IACxE,OAAoBve,EAAAA,cAAoB,MAAO,CAC7CC,UAAW,SACXC,MAAO,CACLc,OAAQ,SAEIhB,EAAAA,cAAoB2oB,EAAAA,KAAM,CACxCC,UAAW+B,EAAAA,mCACI3qB,EAAAA,cAAoB,KAAM,KAAMT,EAAAA,EAAKC,EAAE,4BAA6B6J,EAAAA,EAAAA,SAAQ0f,GAcQ/oB,EAAAA,cAAoB,MAAO,CAC9HC,UAAW,wCACGD,EAAAA,cAAoB4F,EAAAA,EAAQ,CAC1C3F,UAAW,mCACXqE,QAASyF,EACT7E,KAAmBlF,EAAAA,cAAoBgK,EAAAA,EAAS,OAC/CzK,EAAAA,EAAKC,EAAE,+BApByHQ,EAAAA,cAAoB6E,EAAAA,SAAU,KAAmB7E,EAAAA,cAAoB,MAAO,CAC7MC,UAAW,aACGD,EAAAA,cAAoB4F,EAAAA,EAAQ,CAC1C3F,UAAW,mCACXqE,QAASyF,EACT7E,KAAmBlF,EAAAA,cAAoBgK,EAAAA,EAAS,OAC/CzK,EAAAA,EAAKC,EAAE,SAAuBQ,EAAAA,cAAoB,MAAO,CAC1DC,UAAW,OACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,mBACGD,EAAAA,cAAoB8oB,GAA4B,OAAqB9oB,EAAAA,cAAoB,MAAO,CAC9GC,UAAW,YACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,eACGD,EAAAA,cAAoBwoB,GAAwC,UAMlCgC,GAAwBxqB,EAAAA,cAAoBgZ,GAAyB,CAC7GjK,KAAMyb,EACNpjB,SAAUjE,EACVoL,SAAoC,OAA1Bwa,QAA4D,IAA1BA,OAAmC,EAASA,EAAsBpkB,IAAI,EAChHjC,QACIA,GACNyB,QAASA,IAAMsmB,GAAW,KAE9B,EJ3DE7B,UAAW,GACXc,QAASC,EAAAA,4BAA4B,GAAY,QACjDjnB,GAAI,yBACH,CACDuC,MAAO1F,EAAAA,EAAKC,EAAE,UACdgqB,UKxBa,WACb,OAAoBxpB,EAAAA,cAAoB,MAAO,CAC7CE,MAAO,CACLU,UAAW,OACXI,OAAQ,QAEVf,UAAW,kBACGD,EAAAA,cAAoB2oB,EAAAA,KAAM,CACxCC,UAAWgC,EAAAA,oBACI5qB,EAAAA,cAAoB,MAAO,CAC1CC,UAAW,OACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,UACGD,EAAAA,cAAoB1B,EAAS,OAAqB0B,EAAAA,cAAoB,MAAO,CAC3FC,UAAW,UACGD,EAAAA,cAAoBiK,EAAS,QAC/C,ELSE2e,UAAW,GACXc,QAASC,EAAAA,4BAA4B,GAAY,QACjDjnB,GAAI,UACH,CACDuC,MAAO1F,EAAAA,EAAKC,EAAE,WACdgqB,UMhCa,WACb,MAAM,iBACJqB,EAAgB,SAChBpjB,EAAQ,gBACRqjB,GCJW,WACb,MAAM,MACJtsB,EAAK,SACLD,IACEI,EAAAA,EAAAA,MACEksB,EAAmBrsB,EAAM,WACzBusB,GAAsBprB,EAAAA,EAAAA,aAAYqrB,IACtCzsB,EAAS,UAAWysB,IACnB,CAACzsB,IAQJ,MAAO,CACLusB,gBAJsBhsB,IACtBisB,EAAoBE,EAAAA,iBAAiB/nB,IAAI2nB,EAAkB,qBAAsB/rB,KAIjF2I,SATe3C,GAAO8H,IACtB,IAAIse,EACJH,EAAoBE,EAAAA,iBAAiB/nB,IAAI2nB,EAAkB/lB,EAAoG,QAA9FomB,EAAiC,OAAbte,QAAkC,IAAbA,OAAsB,EAASA,EAASue,eAA2C,IAAtBD,EAA+BA,EAAoBte,KAQ1Nie,mBAEJ,CDhBMO,GACJ,OAAoBprB,EAAAA,cAAoB,MAAO,CAC7CE,MAAO,CACLc,OAAQ,SAEIhB,EAAAA,cAAoBqrB,EAAAA,qBAAsB,CACxDvF,QAAS+E,EACTpjB,SAAUA,EACVqjB,gBAAiBA,IAErB,ENkBElC,UAAW,GACXc,QAASC,EAAAA,4BAA4B,GAAY,QACjDjnB,GAAI,YAEO4oB,IAAkBzH,EAAAA,EAAAA,MAAK,CAClC/e,IAAK,kBACLgf,QAASyF,GAAM,KAEJgC,IAAuBC,EAAAA,EAAAA,UAAS,CAC3C1mB,IAAK,uBACLhF,IAAKA,EACHA,UAEA,MAAM2rB,EAAa3rB,EAAIwrB,IACvB,OAAOvoB,EAAAA,EAAAA,WAAUwmB,GAAOmC,GAAQA,EAAKhpB,KAAO+oB,EAAW/oB,OQrC5C,SAASipB,KACtB,MAAMC,GAAUC,EAAAA,EAAAA,OAEdnpB,GAAIopB,IACFrE,EAAAA,EAAAA,KACEsE,GAAWrQ,EAAAA,EAAAA,mBAAkBsQ,EAAAA,qBAC7BC,GAAkBhgB,EAAAA,EAAAA,gBAAesf,IACjChjB,GAAO0D,EAAAA,EAAAA,gBAAeuK,EAAAA,YACrB0V,EAAOC,IAAY3Q,EAAAA,EAAAA,gBAAe4Q,EAAAA,cACnC,OACJC,IACEC,EAAAA,EAAAA,oBAAmBR,GACjBS,GAAgBtgB,EAAAA,EAAAA,iBAAeugB,EAAAA,EAAAA,oBAAmBV,KACjDW,EAAQC,IAAannB,EAAAA,EAAAA,WAAS,IAC9BonB,EAAmBC,IAAwBrnB,EAAAA,EAAAA,WAAS,GACrDyiB,GAAYxlB,EAAAA,EAAAA,WAAU+pB,GACtBM,GAAOC,EAAAA,EAAAA,IAAQ,CACnBC,kBAAkB,EAClBC,cAAe,IACVhF,GAELiF,eAAgB,aAEZC,GAAgBxR,EAAAA,EAAAA,mBAAkB4P,KAClC,IACJ6B,IACEC,EAAAA,EAAAA,oBACE,KACJC,IACEC,EAAAA,EAAAA,IAAS,EACX3sB,aACIA,EAAS,EACb2B,WACD,IACIA,EACHirB,SAAU,OAENC,GAAkBrO,EAAAA,EAAAA,mBAAkB,EACxCsO,WACI,KACJA,EAAMha,EAAAA,0BACNga,EAAMC,EAAAA,2BACND,EAAME,EAAAA,gBACNF,EAAMzB,EAAAA,qBACNyB,EAAMnC,MAEFsC,GAAuBzO,EAAAA,EAAAA,mBAAkB,EAC7CsO,WACI,KACJA,GAAMjB,EAAAA,EAAAA,oBAAmBV,IACzB2B,EAAMI,EAAAA,qBAER3lB,EAAAA,EAAAA,WAAU,IACD,KACLslB,IACAI,KAED,IACH,MAAME,EAAaA,KACjB3B,EAAS4B,IAAS,IACbA,EACHC,SAAU,SAASlC,OAErBF,EAAQqC,QAAkB,OAAV/B,QAA4B,IAAVA,OAAmB,EAASA,EAAM8B,WAEhEE,EAAqB5R,gBACnB6R,EAAAA,UAAUC,KAAKC,EAAkBlB,EAAK5kB,IAExC+lB,EAAahS,gBACX6R,EAAAA,UAAU9B,OAAOgC,EAAkBhC,IAErCkC,GAASpP,EAAAA,EAAAA,mBAAkB,IAAM7C,UACrCoQ,GAAU,GACV,IACE,GAAIZ,QACIwC,EAAWD,GACjBhB,EAAK,CACH1sB,QAASpB,EAAAA,EAAKC,EAAE,kCAChB8C,KAAM,CACJksB,SAAS,SAGR,CACL,MAAM9rB,GAAKoQ,EAAAA,EAAAA,OACL2b,GAAczrB,EAAAA,EAAAA,KAAQR,EAAAA,EAAAA,WAAU6rB,GAAmBprB,KACvDC,EAAAA,EAAAA,KAAID,EAAO,KAAMP,WAEbwrB,GAAmB1rB,EAAAA,EAAAA,WAAUisB,IACnCpB,EAAK,CACH1sB,QAASpB,EAAAA,EAAKC,EAAE,gCAChB8C,KAAM,CACJksB,SAAS,IAGf,CACAV,GACF,CAAE,MAAOhoB,GACP4Y,QAAQ7e,MAAMiG,GACdunB,EAAK,CACH1sB,QAASpB,EAAAA,EAAKC,EAAE,kCAA+C,OAANsG,QAAoB,IAANA,OAAe,EAASA,EAAEnF,UACjG2B,KAAM,CACJosB,MAAM,IAGZ,CACAhC,GAAU,KAENiC,GAAoBxP,EAAAA,EAAAA,mBAAkB,IAAM7C,UAChDsQ,GAAqB,GACrB,IACE,GAAId,QACIwC,EAAWD,GACjBnB,EAAc0B,IACZ,MAAMC,GAAgB9rB,EAAAA,EAAAA,WAAUwmB,GAAO,CACrC7mB,GAAIksB,EAASlsB,KAEf,GAAImsB,IAAkBtF,GAAMlqB,OAAS,EACnC,OAAOkqB,GAAMsF,EAAgB,SAG5B,CACL,MAAMnsB,GAAKoQ,EAAAA,EAAAA,OACL2b,GAAczrB,EAAAA,EAAAA,IAAQqrB,EAAkBprB,KAC5CC,EAAAA,EAAAA,KAAID,EAAO,KAAMP,WAEbwrB,EAAmBO,GACzB1C,EAAS,CACP+C,cAAe7C,EAAkB,IAEnCL,EAAQqC,QAAQ,QAAQvrB,aAC1B,CACF,CAAE,MAAOoD,GACP4Y,QAAQ7e,MAAMiG,GACdunB,EAAK,CACH1sB,QAASpB,EAAAA,EAAKC,EAAE,kCAA+C,OAANsG,QAAoB,IAANA,OAAe,EAASA,EAAEnF,UACjG2B,KAAM,CACJosB,MAAM,IAGZ,CACA9B,GAAqB,KAEvB,MAAO,CACLC,OACAW,kBACAI,uBACAnB,SACA8B,SACAT,aACAa,oBACAhC,oBAEJ,CC5Je,SAASoC,IAA4B,KAClDlC,EAAI,OACJ0B,EAAM,WACNT,IAEA,MAAOkB,EAAeC,IAAoBzT,EAAAA,EAAAA,gBAAe0T,EAAAA,YAClDzD,EAAYyB,IAAiB1R,EAAAA,EAAAA,gBAAe8P,KAC7C,OACJ6D,IACEC,EAAAA,EAAAA,MACEC,GAAgBvM,EAAAA,EAAAA,qBAAoBkJ,EAAAA,qBACpCsD,EAAY7D,EAAWjC,WACvB,KACJ6D,IACEC,EAAAA,EAAAA,IAAS,EACX3sB,aACIA,EAAS,EACb2B,WACD,IACIA,EACHirB,SAAU,QAEZrlB,EAAAA,EAAAA,WAAU,KACa,IAAIqnB,gBAAgBJ,GACdrvB,IAAI,QAE7BotB,EAAc0B,GAES,KADA7rB,EAAAA,EAAAA,WAAUwmB,GAAO,CAAC,KAAMqF,EAASlsB,KAE7C6mB,GAAM,GAENqF,IAIZ,CAACS,EAAeF,EAAQjC,IAC3B,MAAMsC,GAActtB,EAAAA,EAAAA,SAAQ,KAAMa,EAAAA,EAAAA,WAAUwmB,GAAO,CAAC,KAAMkC,EAAW/oB,OAAS6mB,GAAMlqB,OAAS,EAAG,CAACosB,IAC3FgE,GAAkBvtB,EAAAA,EAAAA,SAAQ,KAAMa,EAAAA,EAAAA,WAAUwmB,GAAO,CAAC,KAAMkC,EAAW/oB,KAAO,EAAG,CAAC+oB,IAC9EiE,GAAextB,EAAAA,EAAAA,SAAQ,KAAMa,EAAAA,EAAAA,WAAUwmB,GAAO,CAAC,KAAMkC,EAAW/oB,KAAM,CAAC+oB,IAqBvEkE,GAAehwB,EAAAA,EAAAA,aAAY2c,gBACnBuQ,EAAKvR,SAAQsU,EAAAA,EAAAA,yBAAwB/C,EAAMpB,KAGvDyB,EAAcxB,IACb,CAACD,EAAYoB,IAWhB,MAAO,CACLyC,YACA7D,aACAoE,WAvCiBvT,UACjB,IAAKkT,EAEH,kBADM3C,EAAKiD,aAAavB,EAAlB1B,GAGR,UAAYA,EAAKvR,UAOf,YANA+R,EAAK,CACH1sB,QAASpB,EAAAA,EAAKC,EAAE,sCAChB8C,KAAM,CACJosB,MAAM,KAKZ,MAAM5rB,GAAQC,EAAAA,EAAAA,WAAUwmB,GAAO,CAAC,KAAMkC,EAAW/oB,KAC7CI,IAAUymB,GAAMlqB,OAAS,IAC3B6tB,EAAc3D,GAAMzmB,EAAQ,IAC5BmsB,EAAiB,KAuBnBc,eAdqBA,KACrB,MAAMjtB,GAAQC,EAAAA,EAAAA,WAAUwmB,GAAO,CAAC,KAAMkC,EAAW/oB,KACnC,IAAVI,IACFoqB,EAAc3D,GAAMzmB,EAAQ,IAC5BmsB,EAAiB,KAWnBe,SAReA,KACflC,KAQAkB,gBACAC,mBACAO,cACAC,kBACAC,eACAnG,MAAK,GACLoG,eAEJ,CCrFe,SAASM,KACtB,IAAIC,EAAcC,EAAQC,EAC1B,MAAOC,EAAaC,IAAkB9U,EAAAA,EAAAA,gBAAe+U,EAAAA,WAC/C3H,GAAY3c,EAAAA,EAAAA,gBAAeukB,EAAAA,YAE/B9tB,GAAIopB,IACFrE,EAAAA,EAAAA,MAEFgJ,MAAOC,IACLzkB,EAAAA,EAAAA,iBAAe0kB,EAAAA,EAAAA,0BAAyB7E,KACtC,OACJ9qB,IACE4vB,EAAAA,EAAAA,kBACE,KACJ/D,EAAI,OACJ0B,EAAM,OACN9B,EAAM,WACNqB,EAAU,kBACVa,EAAiB,kBACjBhC,GACEhB,MACE,UACJ2D,EAAS,WACT7D,EAAU,cACVuD,EAAa,SACbgB,EAAQ,WACRH,EAAU,eACVE,EAAc,iBACdd,EAAgB,MAChB1F,EAAK,aACLmG,EAAY,gBACZD,EAAe,YACfD,EAAW,aACXG,GACEZ,GAA4B,CAC9BlC,OACA0B,SACAT,eAEF,OAAK4C,GAAe5E,EACE9rB,EAAAA,cAAoB6wB,EAAAA,iBAAkB,CACxDjsB,WAAY,SAII5E,EAAAA,cAAoB8wB,EAAAA,GAAcjE,EAAmB7sB,EAAAA,cAAoBa,EAAAA,SAAU,CACrGC,SAAuBd,EAAAA,cAAoB+wB,EAAAA,eAAgB,OAC7C/wB,EAAAA,cAAoB,MAAO,CACzCC,UAAWsnB,GAAQ,mBACLvnB,EAAAA,cAAoBgxB,EAAAA,GAAO,CACzCC,QAASZ,EACTvK,QAASoL,EAAAA,aACT3H,MAAOX,EACPuI,YAAanC,EACboC,eAAgBC,IACdpC,EAAiBoC,IAEnBC,OAAQA,KACNhB,GAAe,MAEFtwB,EAAAA,cAAoB,MAAO,CAC1CC,UAAW,UACGD,EAAAA,cAAoB,MAAO,KAAmBA,EAAAA,cAAoBuxB,EAAAA,EAAS,KAAgB,OAAVhI,QAA4B,IAAVA,OAAmB,EAASA,EAAM5kB,IAAI+mB,GAAqB1rB,EAAAA,cAAoBwxB,EAAAA,EAAM,CACtMtxB,MAAOwrB,IAASD,EAAa,CAC3Bre,WAAY,gBACVjH,EACJnB,OAAQ0mB,IAASD,EACjBnnB,QAASA,IAAMqrB,EAAajE,GAC5B5mB,IAAK,GAAG4mB,EAAKhpB,WACC1C,EAAAA,cAAoByxB,EAAAA,EAAW,KAAmBzxB,EAAAA,cAAoB4d,EAAAA,EAAS,CAC7FhE,QAAS8R,EAAKhC,QACd5kB,IAAK,GAAG4mB,EAAKhpB,WACZgpB,EAAKzmB,YAA0BjF,EAAAA,cAAoB,MAAO,CAC3DC,UAAW,OACGD,EAAAA,cAAoB,MAAO,CACzCC,UAAW,gBACXC,MAAO,CACLwkB,KAAM,IAEM1kB,EAAAA,cAAoB,MAAO,CACzCC,UAAW,uDACXC,MAAO,CACLyJ,MAAO,OACP3I,OAAQ,OACRJ,UAAoB,GAATI,IAEChB,EAAAA,cAAoB,MAAO,CACzCC,UAAW,MACXC,MAAO,CACLc,OAAQ,SAEIhB,EAAAA,cAAoB,MAAO,CACzCC,UAAW,cACXC,MAAO,CACLc,OAAQ,OACR0wB,eAAgB,kBAEJ1xB,EAAAA,cAAoB,MAAO,CACzCC,UAAW,8BACGD,EAAAA,cAAoB4F,EAAAA,EAAQ,CAC1CV,KAAmBlF,EAAAA,cAAoB2xB,EAAAA,EAAU,MACjDrtB,QAASA,KACP2qB,EAAiB,GACjBqB,GAAe,KAEhB/wB,EAAAA,EAAKC,EAAE,UAAwBQ,EAAAA,cAAoB,MAAO,CAC3DE,MAAO,CACLc,OAAQ,OACRV,QAAS,KAEGN,EAAAA,cAAoBa,EAAAA,SAAU,CAC5CC,SAAuBd,EAAAA,cAAoB+wB,EAAAA,eAAgB,CACzDvhB,OAAO,KAEKxP,EAAAA,cAAoBsvB,EAAW,CAC7CO,WAAYA,EACZE,eAAgBA,MACC/vB,EAAAA,cAAoB2F,EAAAA,EAAa,CAClD+f,OAAO,GACO1lB,EAAAA,cAAoB4F,EAAAA,EAAQ,CAC1C2I,UAAWkhB,EACXnrB,QAASyrB,GACRxwB,EAAAA,EAAKC,EAAE,aAA2H,QAA7G0wB,EAAsD,QAAtCC,EAAS5G,EAAMmG,EAAe,UAA2B,IAAXS,OAAoB,EAASA,EAAOlrB,aAAoC,IAAjBirB,EAA0BA,EAAe,OAAqBlwB,EAAAA,cAAoB4F,EAAAA,EAAQ,CACrO+B,QAAS8kB,EACT/c,SAAS,EACTnB,SAAUke,EACVnoB,QAASurB,EACT5vB,UAAW,uBACXqU,SAAU,+BACRkb,EAAmEjwB,EAAAA,EAAKC,EAAE,SAAiD,QAAvC4wB,EAAU7G,EAAMmG,EAAe,UAA4B,IAAZU,OAAqB,EAASA,EAAQnrB,SAA3JwnB,EAAS,GAAGltB,EAAAA,EAAKC,EAAE,eAAiBD,EAAAA,EAAKC,EAAE,eAA8IQ,EAAAA,cAAoB,MAAO,CACpOC,UAAW,mBACGD,EAAAA,cAAoB2F,EAAAA,EAAa,CAC/CisB,QAAQ,GACM5xB,EAAAA,cAAoB4F,EAAAA,EAAQ,CAC1C+B,QAAS8kB,EACTnY,SAAU,wBACV/F,SAAUke,EACVnoB,QAASuoB,EAAKiD,aAAavB,IAC1B9B,EAAS,GAAGltB,EAAAA,EAAKC,EAAE,eAAiBD,EAAAA,EAAKC,EAAE,kBAAmBgwB,GAA4BxvB,EAAAA,cAAoB4F,EAAAA,EAAQ,CACvH+B,QAASglB,EACTrY,SAAU,qCACV/F,SAAUoe,EACVroB,QAASuoB,EAAKiD,aAAanB,IAC1BhC,EAAoB,GAAGptB,EAAAA,EAAKC,EAAE,eAAiBD,EAAAA,EAAKC,EAAE,sBAAoCQ,EAAAA,cAAoB4F,EAAAA,EAAQ,CACvHtB,QAAS0rB,GACRzwB,EAAAA,EAAKC,EAAE,6BACZ,C","sources":["D2App/modules/Main/Components/ScoreCardManagement/Components/Access/Components/OrgUnitFilter/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/Access/hooks/useAccessManage.js","D2App/modules/Main/Components/ScoreCardManagement/Components/Access/Components/Sharing/utils.js","D2App/modules/Main/Components/ScoreCardManagement/Components/Access/Components/Sharing/Components/SharingList/Components/SharingMenu.js","D2App/modules/Main/Components/ScoreCardManagement/Components/Access/Components/Sharing/Components/SharingList/Components/SingleSharingComponent.js","D2App/modules/Main/Components/ScoreCardManagement/Components/Access/Components/Sharing/Components/SharingList/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/Access/Components/Sharing/Components/UserAndUserGroupSelector/hooks/useSearch.js","D2App/modules/Main/Components/ScoreCardManagement/Components/Access/Components/Sharing/Components/UserAndUserGroupSelector/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/Access/Components/Sharing/Components/SharingList/Components/AddSharingAccess.js","D2App/modules/Main/Components/ScoreCardManagement/Components/Access/Components/Sharing/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/Instructions.js","D2App/modules/Main/Components/ScoreCardManagement/Components/General/utils/utils.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSourceConfiguration/Components/TargetsArea/components/LegendsField.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSourceConfiguration/Components/TargetsArea/components/LevelTargetsField.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSourceConfiguration/Components/OrgUnitLevelSpecificTargetsModal/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSourceConfiguration/Components/OrgUnitSpecificTargetsModal/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSourceConfiguration/Components/PeriodSpecificTargetsModal/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSourceConfiguration/Components/TargetsArea/components/SpecificTargetView.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSourceConfiguration/Components/TargetsArea/components/TargetsField.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSourceConfiguration/Components/TargetsArea/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataSourceConfigurationForm/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSourceConfiguration/Components/Form/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSourceConfiguration/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/EmptyDataGroups.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/PreviewScorecardTable/Components/CustomLinkedCell.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/PreviewScorecardTable/Components/PreviewCustomCell.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/PreviewScorecardTable/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSourceSelectorModal/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataGroup/Components/Accordions.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataGroup/Components/EditTitle.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataGroup/Components/GroupTitle.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSource/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataSourceHolder/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataGroup/Components/LinkingContainer.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/hooks/useLinkManage.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataGroup/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/hooks/useDataGroupManage.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/hooks/useDataGroupLayout.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/hooks/useDataHolders.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/Components/DataGroup/utils.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/Components/DataGroups/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/DataGroupArea.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/utils.js","webpack://@dhis2/app-shell/./src/D2App/modules/Main/Components/ScoreCardManagement/ScorecardManagement.module.css?4a6b","D2App/modules/Main/Components/ScoreCardManagement/Components/General/Components/LegendDefinitionFormField/hooks/useResetLegends.js","D2App/modules/Main/Components/ScoreCardManagement/Components/General/Components/LegendDefinitionFormField/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/General/Components/PeriodSelector.js","webpack://@dhis2/app-shell/./src/D2App/modules/Main/Components/ScoreCardManagement/Components/General/styles/PeriodTypeSelector.module.css?9c7e","D2App/modules/Main/Components/ScoreCardManagement/Components/General/Components/PeriodTypeSelector.js","D2App/modules/Main/Components/ScoreCardManagement/Components/General/Components/GeneralForm.js","D2App/modules/Main/Components/ScoreCardManagement/Components/HighlightedIndicators/HighlightedDataSourceConfigurationForm/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/HighlightedIndicators/Table/index.js","D2App/modules/Main/Components/ScoreCardManagement/state/pages.js","D2App/modules/Main/Components/ScoreCardManagement/Components/General/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/DataConfiguration/hooks/useHelp.js","D2App/modules/Main/Components/ScoreCardManagement/Components/HighlightedIndicators/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/Access/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/Options/index.js","D2App/modules/Main/Components/ScoreCardManagement/Components/Options/hooks/useOptionsManage.js","D2App/modules/Main/Components/ScoreCardManagement/hooks/useScorecardManage.js","D2App/modules/Main/Components/ScoreCardManagement/hooks/useScorecardManagerNavigate.js","D2App/modules/Main/Components/ScoreCardManagement/index.js"],"sourcesContent":["import i18n from \"@dhis2/d2-i18n\";\nimport { colors, IconError24 } from '@dhis2/ui';\nimport { OrgUnitSelector } from '@hisptz/dhis2-ui';\nimport { ContainerLoader, OrgUnitSelection } from \"@scorecard/shared\";\nimport { get } from 'lodash';\nimport React, { Suspense, useCallback } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nfunction anyOrgUnitSelected({\n  groups,\n  levels,\n  orgUnits,\n  userOrgUnit,\n  userSubUnit,\n  userSubX2Unit\n}) {\n  return userSubX2Unit || userSubUnit || userOrgUnit || groups.length > 0 || levels.length > 0 || orgUnits.length > 0;\n}\nexport default function OrgUnit() {\n  const {\n    setValue,\n    watch,\n    register,\n    formState\n  } = useFormContext();\n  register(\"orgUnitSelection\", {\n    validate: {\n      atLeastOneOrgUnit: value => {\n        if (anyOrgUnitSelected(value)) {\n          return true;\n        }\n        return i18n.t(\"Please select at least one organisation unit\");\n      }\n    }\n  });\n  const organisationUnit = watch(\"orgUnitSelection\");\n  const setOrganisationUnit = useCallback(updatedOrgUnitSelection => {\n    setValue(\"orgUnitSelection\", updatedOrgUnitSelection);\n  }, [setValue]);\n  const onSetOrgUnit = values => {\n    setOrganisationUnit(OrgUnitSelection.setObject(organisationUnit, values));\n  };\n  const error = get(formState.errors, \"orgUnitSelection\");\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column h-100\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pt-16 pb-16\"\n  }, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Organisation Unit\"))), error && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      gap: 8,\n      alignItems: \"center\",\n      padding: \"8px 0\",\n      color: colors.red500\n    }\n  }, /*#__PURE__*/React.createElement(IconError24, null), error === null || error === void 0 ? void 0 : error.message), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      minHeight: 400\n    },\n    className: \"access-org-unit-filter h-100\"\n  }, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(ContainerLoader, {\n      height: 400\n    })\n  }, /*#__PURE__*/React.createElement(OrgUnitSelector, {\n    showGroups: true,\n    showLevels: true,\n    showUserOptions: true,\n    onUpdate: onSetOrgUnit,\n    value: organisationUnit\n  }))));\n}","import { AccessTypes } from \"@scorecard/shared\";\nimport { ScorecardAccess } from \"@scorecard/shared\";\nimport produce from \"immer\";\nimport { cloneDeep, findIndex, remove, set } from \"lodash\";\nimport { useCallback, useMemo } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nexport default function useAccessManage() {\n  const {\n    watch,\n    setValue\n  } = useFormContext();\n  const publicAccess = watch(\"publicAccess\");\n  const setPublicAccess = useCallback(updatedValue => {\n    setValue(\"publicAccess\", updatedValue);\n  }, [setValue]);\n  const userGroupAccesses = watch(\"userGroupAccesses\");\n  const setUserGroupAccesses = useCallback(updatedValue => {\n    setValue(\"userGroupAccesses\", updatedValue);\n  }, [setValue]);\n  const userAccesses = watch(\"userAccesses\");\n  const setUserAccesses = useCallback(updatedValue => {\n    setValue(\"userAccesses\", updatedValue);\n  }, [setValue]);\n  const userAndUserGroupAccesses = useMemo(() => [...(userAccesses || []), ...(userGroupAccesses || [])], [userAccesses, userGroupAccesses]);\n  const onPublicAccessChange = useCallback(value => {\n    setPublicAccess(value);\n  }, [setPublicAccess]);\n  const onDelete = useCallback(access => {\n    const {\n      type\n    } = access || {};\n    if (type === \"user\") {\n      const updatedList = cloneDeep(userAccesses);\n      remove(updatedList, [\"id\", access === null || access === void 0 ? void 0 : access.id]);\n      setUserAccesses(updatedList);\n      return;\n    }\n    const updatedList = cloneDeep(userGroupAccesses);\n    remove(updatedList, [\"id\", access === null || access === void 0 ? void 0 : access.id]);\n    setUserGroupAccesses(updatedList);\n  }, [setUserAccesses, setUserGroupAccesses, userAccesses, userGroupAccesses]);\n  const onUpdate = useCallback(updatedAccess => {\n    const {\n      type\n    } = updatedAccess || {};\n    if (type === AccessTypes.USER) {\n      const index = findIndex(userAccesses, [\"id\", updatedAccess === null || updatedAccess === void 0 ? void 0 : updatedAccess.id]);\n      setUserAccesses(produce(userAccesses, draft => {\n        set(draft, [index], updatedAccess);\n      }));\n    }\n    const index = findIndex(userGroupAccesses, [\"id\", updatedAccess === null || updatedAccess === void 0 ? void 0 : updatedAccess.id]);\n    setUserGroupAccesses(produce(userGroupAccesses, draft => {\n      set(draft, [index], updatedAccess);\n    }));\n  }, [setUserAccesses, setUserGroupAccesses, userAccesses, userGroupAccesses]);\n  const onAdd = useCallback((selectedAccess, selectedUserGroup) => {\n    if (selectedAccess && selectedUserGroup) {\n      if ((selectedUserGroup === null || selectedUserGroup === void 0 ? void 0 : selectedUserGroup.type) === \"user\") {\n        setUserAccesses([...(userAccesses !== null && userAccesses !== void 0 ? userAccesses : []), new ScorecardAccess({\n          id: selectedUserGroup === null || selectedUserGroup === void 0 ? void 0 : selectedUserGroup.id,\n          displayName: selectedUserGroup === null || selectedUserGroup === void 0 ? void 0 : selectedUserGroup.displayName,\n          type: \"user\",\n          access: selectedAccess\n        })]);\n      } else {\n        setUserGroupAccesses([...(userGroupAccesses !== null && userGroupAccesses !== void 0 ? userGroupAccesses : []), new ScorecardAccess({\n          id: selectedUserGroup === null || selectedUserGroup === void 0 ? void 0 : selectedUserGroup.id,\n          displayName: selectedUserGroup === null || selectedUserGroup === void 0 ? void 0 : selectedUserGroup.displayName,\n          type: \"userGroup\",\n          access: selectedAccess\n        })]);\n      }\n    }\n  }, [setUserAccesses, setUserGroupAccesses, userAccesses, userGroupAccesses]);\n  return {\n    onAdd,\n    publicAccess,\n    onPublicAccessChange,\n    userAndUserGroupAccesses,\n    onDelete,\n    onUpdate\n  };\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { ScorecardAccessType } from \"@scorecard/shared\";\nimport UserGroupIcon from \"@material-ui/icons/People\";\nimport UserIcon from \"@material-ui/icons/Person\";\nimport PublicIcon from \"@material-ui/icons/Public\";\nimport React from \"react\";\nexport function getAccessName(access = \"\") {\n  switch (access) {\n    case ScorecardAccessType.NO_ACCESS:\n      return i18n.t(\"No Access\");\n    case ScorecardAccessType.READ_ONLY:\n      return i18n.t(\"Can Read\");\n    case ScorecardAccessType.READ_WRITE:\n      return i18n.t(\"Can Read and Write\");\n  }\n}\nexport function getAccessIcon(type = \"\") {\n  switch (type) {\n    case \"public\":\n      return /*#__PURE__*/React.createElement(PublicIcon, null);\n    case \"user\":\n      return /*#__PURE__*/React.createElement(UserIcon, null);\n    case \"userGroup\":\n      return /*#__PURE__*/React.createElement(UserGroupIcon, null);\n  }\n}","import { FlyoutMenu, Layer, MenuItem, Popper } from \"@dhis2/ui\";\nimport { ACCESS_TYPES } from \"@scorecard/shared\";\nimport CheckIcon from \"@material-ui/icons/Check\";\nimport PropTypes from \"prop-types\";\nimport React, { Fragment } from \"react\";\nimport { getAccessName } from \"../../../utils\";\nexport default function SharingMenu({\n  reference,\n  onClose,\n  selectedAccess,\n  onAccessChange\n}) {\n  return /*#__PURE__*/React.createElement(Layer, {\n    onClick: onClose\n  }, /*#__PURE__*/React.createElement(Popper, {\n    reference: reference,\n    placement: \"bottom-start\"\n  }, /*#__PURE__*/React.createElement(FlyoutMenu, null, ACCESS_TYPES === null || ACCESS_TYPES === void 0 ? void 0 : ACCESS_TYPES.map(accessType => /*#__PURE__*/React.createElement(Fragment, {\n    key: accessType\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    onClick: () => onAccessChange(accessType),\n    active: selectedAccess === accessType,\n    label: getAccessName(accessType),\n    icon: selectedAccess === accessType && /*#__PURE__*/React.createElement(CheckIcon, null)\n  }))))));\n}\nSharingMenu.propTypes = {\n  reference: PropTypes.object.isRequired,\n  selectedAccess: PropTypes.string.isRequired,\n  onAccessChange: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { Button, ButtonStrip, colors, MenuItem } from \"@dhis2/ui\";\nimport { ScorecardAccess } from \"@scorecard/shared\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport { cloneDeep, set } from \"lodash\";\nimport PropTypes from \"prop-types\";\nimport React, { useState } from \"react\";\nimport { getAccessIcon, getAccessName } from \"../../../utils\";\nimport SharingMenu from \"./SharingMenu\";\nexport default function SingleSharingComponent({\n  access,\n  onDelete,\n  onAccessChange\n}) {\n  const {\n    access: selectedAccess,\n    type,\n    displayName\n  } = access;\n  const [ref, setRef] = useState();\n  const onChange = newAccess => {\n    const updatedAccess = cloneDeep(access);\n    set(updatedAccess, [\"access\"], newAccess);\n    onAccessChange(updatedAccess);\n    setRef(undefined);\n  };\n  return /*#__PURE__*/React.createElement(MenuItem, {\n    icon: getAccessIcon(type),\n    label: /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row space-between align-items-center\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column\"\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        margin: 2,\n        fontSize: 16\n      }\n    }, displayName), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        color: colors.grey700,\n        fontSize: 14,\n        margin: 0\n      }\n    }, getAccessName(selectedAccess))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column align-items-end\"\n    }, /*#__PURE__*/React.createElement(ButtonStrip, {\n      className: \"edit-delete-access\"\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: (_, e) => setRef(e.currentTarget),\n      icon: /*#__PURE__*/React.createElement(EditIcon, null)\n    }, i18n.t(\"Edit\")), Boolean(onDelete) && /*#__PURE__*/React.createElement(Button, {\n      onClick: () => {\n        onDelete(access);\n      },\n      icon: /*#__PURE__*/React.createElement(DeleteIcon, null)\n    }, i18n.t(\"Delete\")))), ref && /*#__PURE__*/React.createElement(SharingMenu, {\n      reference: ref,\n      onClose: () => setRef(undefined),\n      selectedAccess: selectedAccess,\n      onAccessChange: onChange\n    }))\n  });\n}\nSingleSharingComponent.propTypes = {\n  access: PropTypes.instanceOf(ScorecardAccess).isRequired,\n  onAccessChange: PropTypes.func.isRequired,\n  onDelete: PropTypes.func\n};","import { Menu, MenuDivider } from \"@dhis2/ui\";\nimport React, { Fragment } from \"react\";\nimport useAccessManage from \"../../../../hooks/useAccessManage\";\nimport SingleSharingComponent from \"./Components/SingleSharingComponent\";\nexport default function SharingList() {\n  const {\n    publicAccess,\n    onPublicAccessChange,\n    userAndUserGroupAccesses,\n    onUpdate,\n    onDelete\n  } = useAccessManage();\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Menu, {\n    dense: true\n  }, /*#__PURE__*/React.createElement(SingleSharingComponent, {\n    onAccessChange: onPublicAccessChange,\n    access: publicAccess\n  }), /*#__PURE__*/React.createElement(MenuDivider, null), userAndUserGroupAccesses === null || userAndUserGroupAccesses === void 0 ? void 0 : userAndUserGroupAccesses.map(access => /*#__PURE__*/React.createElement(Fragment, {\n    key: access === null || access === void 0 ? void 0 : access.id\n  }, /*#__PURE__*/React.createElement(SingleSharingComponent, {\n    onAccessChange: onUpdate,\n    access: access,\n    onDelete: onDelete\n  }), /*#__PURE__*/React.createElement(MenuDivider, null)))));\n}","import { useDataQuery } from \"@dhis2/app-runtime\";\nimport { useEffect, useMemo, useState } from \"react\";\nconst query = {\n  users: {\n    resource: \"users\",\n    params: ({\n      keyword\n    }) => ({\n      filter: [`displayName:ilike:${keyword}`],\n      fields: [\"id\", \"displayName\"],\n      order: \"name:asc\"\n    })\n  },\n  userGroups: {\n    resource: \"userGroups\",\n    params: ({\n      keyword\n    }) => ({\n      filter: keyword ? [`displayName:ilike:${keyword}`] : undefined,\n      fields: [\"id\", \"name\", \"displayName\"],\n      order: \"name:asc\"\n    })\n  }\n};\nexport default function useSearchUserAndUserGroup(initialKeyword) {\n  const [keyword, setKeyword] = useState(initialKeyword);\n  const {\n    data,\n    errors,\n    loading,\n    refetch\n  } = useDataQuery(query, {\n    variables: {\n      keyword\n    },\n    lazy: true\n  });\n  useEffect(() => {\n    function search() {\n      if (keyword) {\n        refetch({\n          keyword\n        });\n      }\n    }\n    search();\n  }, [keyword]);\n  const userAndUserGroups = useMemo(() => {\n    var _data$users, _data$users$users, _data$userGroups, _data$userGroups$user;\n    const users = (data === null || data === void 0 ? void 0 : (_data$users = data.users) === null || _data$users === void 0 ? void 0 : (_data$users$users = _data$users.users) === null || _data$users$users === void 0 ? void 0 : _data$users$users.map(user => ({\n      ...user,\n      type: \"user\"\n    }))) || [];\n    const userGroups = (data === null || data === void 0 ? void 0 : (_data$userGroups = data.userGroups) === null || _data$userGroups === void 0 ? void 0 : (_data$userGroups$user = _data$userGroups.userGroups) === null || _data$userGroups$user === void 0 ? void 0 : _data$userGroups$user.map(userGroup => ({\n      ...userGroup,\n      type: \"userGroup\"\n    }))) || [];\n    return [...users, ...userGroups];\n  }, [data === null || data === void 0 ? void 0 : data.users, data === null || data === void 0 ? void 0 : data.userGroups]);\n  return {\n    data: userAndUserGroups,\n    errors,\n    loading,\n    setKeyword\n  };\n}","import { FlyoutMenu, InputField, MenuItem, Popper } from \"@dhis2/ui\";\nimport { debounce, filter, isEmpty } from \"lodash\";\nimport PropTypes from \"prop-types\";\nimport React, { Fragment, useEffect, useRef, useState } from \"react\";\nimport { getAccessIcon } from \"../../utils\";\nimport useSearchUserAndUserGroup from \"./hooks/useSearch\";\nfunction UserAndUserGroupsMenu({\n  data,\n  onSelect,\n  reference,\n  onClose\n}) {\n  const onSelectElement = selected => {\n    onSelect(selected);\n    onClose();\n  };\n  return reference ? /*#__PURE__*/React.createElement(Popper, {\n    className: \"layer-1\",\n    reference: reference,\n    placement: \"bottom-start\"\n  }, /*#__PURE__*/React.createElement(FlyoutMenu, {\n    maxHeight: \"400px\"\n  }, data === null || data === void 0 ? void 0 : data.map(element => /*#__PURE__*/React.createElement(MenuItem, {\n    key: element === null || element === void 0 ? void 0 : element.id,\n    onClick: () => onSelectElement(element),\n    label: element === null || element === void 0 ? void 0 : element.displayName,\n    icon: getAccessIcon(element === null || element === void 0 ? void 0 : element.type)\n  })))) : null;\n}\nUserAndUserGroupsMenu.propTypes = {\n  data: PropTypes.arrayOf(PropTypes.object).isRequired,\n  reference: PropTypes.any.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onSelect: PropTypes.func.isRequired\n};\nexport default function UserAndUserGroupSelector({\n  selected,\n  onChange,\n  selectedList = []\n}) {\n  const [value, setValue] = useState(selected === null || selected === void 0 ? void 0 : selected.displayName);\n  const {\n    data,\n    loading,\n    error,\n    setKeyword\n  } = useSearchUserAndUserGroup(value);\n  const reference = useRef();\n  const [inputReference, setInputReference] = useState();\n  const onSearch = debounce(() => {\n    setKeyword(value === null || value === void 0 ? void 0 : value.trim());\n  }, 1000);\n\n  //Clears the field on submit\n  useEffect(() => {\n    if (!selected) {\n      setValue(undefined);\n    }\n  }, [selected]);\n  const onKeywordChange = ({\n    value: keyword\n  }, event) => {\n    setValue(keyword);\n    setInputReference(event === null || event === void 0 ? void 0 : event.target);\n    onSearch();\n  };\n  const onValueSelect = selectedValue => {\n    setValue(selectedValue === null || selectedValue === void 0 ? void 0 : selectedValue.displayName);\n    onChange(selectedValue);\n  };\n  return /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: reference\n  }, /*#__PURE__*/React.createElement(InputField, {\n    loading: loading,\n    error: error,\n    validationText: error === null || error === void 0 ? void 0 : error.message,\n    label: \"Select User or User Group\",\n    value: value,\n    onChange: onKeywordChange\n  })), inputReference && !isEmpty(data) && /*#__PURE__*/React.createElement(UserAndUserGroupsMenu, {\n    onClose: () => setInputReference(undefined),\n    reference: inputReference,\n    onSelect: onValueSelect,\n    data: filter(data, ({\n      id\n    }) => !(selectedList !== null && selectedList !== void 0 && selectedList.includes(id)))\n  }));\n}\nUserAndUserGroupSelector.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  selected: PropTypes.object,\n  selectedList: PropTypes.arrayOf(PropTypes.string)\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { Button, SingleSelectField, SingleSelectOption } from \"@dhis2/ui\";\nimport { ACCESS_TYPES } from \"@scorecard/shared\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport React, { useState } from \"react\";\nimport useAccessManage from \"../../../../../hooks/useAccessManage\";\nimport { getAccessName } from \"../../../utils\";\nimport UserAndUserGroupSelector from \"../../UserAndUserGroupSelector\";\nexport default function AddSharingAccess() {\n  const {\n    userAndUserGroupAccesses,\n    onAdd\n  } = useAccessManage();\n  const [selectedUserGroup, setSelectedUserGroup] = useState();\n  const [selectedAccess, setSelectedAccess] = useState();\n  const selectedList = userAndUserGroupAccesses;\n  const onAddClick = () => {\n    onAdd(selectedAccess, selectedUserGroup);\n    setSelectedAccess(undefined);\n    setSelectedUserGroup(undefined);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row align-items-end add-sharing-access\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column pr-16 user-selector\",\n    style: {\n      width: \"50%\"\n    }\n  }, /*#__PURE__*/React.createElement(UserAndUserGroupSelector, {\n    selectedList: selectedList === null || selectedList === void 0 ? void 0 : selectedList.map(({\n      id\n    }) => id),\n    selected: selectedUserGroup,\n    onChange: setSelectedUserGroup\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column pr-16\",\n    style: {\n      width: \"30%\"\n    }\n  }, /*#__PURE__*/React.createElement(SingleSelectField, {\n    className: \"access-selector\",\n    required: true,\n    selected: selectedAccess,\n    onChange: ({\n      selected\n    }) => {\n      setSelectedAccess(selected);\n    },\n    label: i18n.t(\"Select Access\")\n  }, ACCESS_TYPES === null || ACCESS_TYPES === void 0 ? void 0 : ACCESS_TYPES.map(accessType => /*#__PURE__*/React.createElement(SingleSelectOption, {\n    value: accessType,\n    key: accessType,\n    label: getAccessName(accessType)\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\",\n    style: {\n      width: \"20%\"\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"add-access-button\",\n    onClick: onAddClick,\n    icon: /*#__PURE__*/React.createElement(AddIcon, null)\n  }, i18n.t(\"Add\"))));\n}","import i18n from \"@dhis2/d2-i18n\";\nimport React from \"react\";\nimport SharingList from \"./Components/SharingList\";\nimport AddSharingAccess from \"./Components/SharingList/Components/AddSharingAccess\";\nexport default function Sharing() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-16 pl-32\"\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Sharing\"))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      fontSize: 18\n    }\n  }, i18n.t(\"Shared With\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sharing-list\"\n  }, /*#__PURE__*/React.createElement(SharingList, null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pt-32\"\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      fontSize: 18\n    }\n  }, i18n.t(\"Add Access\"))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(AddSharingAccess, null)));\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { colors } from \"@dhis2/ui\";\nimport React from \"react\";\nexport default function Instructions() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12\",\n    style: {\n      height: \"100%\"\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row center\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"info-box\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\"\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"info-box-title\"\n  }, i18n.t(\"Configure Data Sources\")), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"info-box-list\"\n  }, /*#__PURE__*/React.createElement(\"li\", null, i18n.t(\"Add a data source group\")), /*#__PURE__*/React.createElement(\"li\", null, i18n.t(\"Modify the group name\")), /*#__PURE__*/React.createElement(\"li\", null, i18n.t(\"Add different data sources to a group\")), /*#__PURE__*/React.createElement(\"li\", null, i18n.t(\"Click on a data source to configure it\")), /*#__PURE__*/React.createElement(\"li\", null, i18n.t(\"View the changes on the preview panel above\")))))));\n}\nexport function DataSourceInstructions() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12\",\n    style: {\n      height: \"100%\"\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row center align-items-center\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"info-box\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\"\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      fontSize: 18,\n      color: colors.grey600,\n      fontWeight: \"bold\"\n    }\n  }, i18n.t(\"Select a data source to configure\"))))));\n}","import { getScorecardSummary } from \"@scorecard/shared\";\nimport { generateLegendDefaults } from \"@scorecard/shared\";\nimport { cloneDeep, find, isEmpty, set } from \"lodash\";\nexport function resetLegends(groups, legendDefinitions) {\n  const newGroups = cloneDeep(groups);\n  if (newGroups) {\n    newGroups === null || newGroups === void 0 ? void 0 : newGroups.forEach(group => {\n      var _group$dataHolders;\n      group === null || group === void 0 ? void 0 : (_group$dataHolders = group.dataHolders) === null || _group$dataHolders === void 0 ? void 0 : _group$dataHolders.forEach(dataHolder => {\n        var _dataHolder$dataSourc;\n        dataHolder === null || dataHolder === void 0 ? void 0 : (_dataHolder$dataSourc = dataHolder.dataSources) === null || _dataHolder$dataSourc === void 0 ? void 0 : _dataHolder$dataSourc.forEach(dataSource => {\n          set(dataSource, \"legends\", generateLegendDefaults(getNonDefaultLegendDefinitions(legendDefinitions)));\n          if (!isEmpty(dataSource.specificTargets)) {\n            dataSource.specificTargets.forEach(specificTarget => {\n              set(specificTarget, \"legends\", generateLegendDefaults(getNonDefaultLegendDefinitions(legendDefinitions)));\n            });\n          }\n        });\n      });\n    });\n  }\n  return newGroups;\n}\nexport function getNonDefaultLegendDefinitions(legendDefinitions) {\n  var _legendDefinitions$fi;\n  return (_legendDefinitions$fi = legendDefinitions === null || legendDefinitions === void 0 ? void 0 : legendDefinitions.filter(legendDefinition => !legendDefinition.isDefault)) !== null && _legendDefinitions$fi !== void 0 ? _legendDefinitions$fi : [];\n}\nexport function getDefaultLegendDefinitions(legendDefinitions) {\n  var _legendDefinitions$fi2;\n  return (_legendDefinitions$fi2 = legendDefinitions === null || legendDefinitions === void 0 ? void 0 : legendDefinitions.filter(legendDefinition => legendDefinition.isDefault)) !== null && _legendDefinitions$fi2 !== void 0 ? _legendDefinitions$fi2 : [];\n}\nexport async function titleDoesNotExist(engine, id, title) {\n  const {\n    summary\n  } = await getScorecardSummary(engine);\n  if (isEmpty(summary)) {\n    return true;\n  }\n  const scorecard = find(summary, {\n    title\n  });\n  if (scorecard) {\n    return scorecard.id === id;\n  }\n  return !scorecard;\n}","import { DHIS2FormField } from \"@hisptz/dhis2-ui\";\nimport { set } from \"lodash\";\nimport React from \"react\";\nfunction autoSetAdjacentValues(data, index, highIsGood) {\n  const newData = [...data];\n  const updatedValue = newData[index];\n  const previousValueIndex = highIsGood ? index - 1 : index + 1;\n  const nextValueIndex = highIsGood ? index + 1 : index - 1;\n  if (previousValueIndex >= 0) {\n    set(newData, `${previousValueIndex}.startValue`, updatedValue === null || updatedValue === void 0 ? void 0 : updatedValue.endValue);\n  }\n  if (nextValueIndex < newData.length) {\n    set(newData, `${nextValueIndex}.endValue`, updatedValue === null || updatedValue === void 0 ? void 0 : updatedValue.startValue);\n  }\n  return newData;\n}\nfunction editAtIndex(index, value, {\n  data,\n  highIsGood\n}) {\n  const newData = [...data];\n  set(newData, index, value);\n  return autoSetAdjacentValues(newData, index, highIsGood);\n}\nexport default function LegendsField({\n  value,\n  onChange,\n  legendDefinitions,\n  highIsGood\n}) {\n  return /*#__PURE__*/React.createElement(DHIS2FormField, {\n    value: value,\n    legendDefinitions: legendDefinitions,\n    highIsGood: highIsGood,\n    valueType: \"LEGEND_MIN_MAX_GROUP\",\n    name: \"legend-min-max-group\",\n    onChange: onChange\n  });\n}","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport { colors, Field } from \"@dhis2/ui\";\nimport { FormFieldModel } from \"@scorecard/shared\";\nimport { OrgUnitLevels } from \"@scorecard/shared\";\nimport { generateLegendDefaults } from \"@scorecard/shared\";\nimport { Accordion, AccordionDetails, AccordionSummary } from \"@material-ui/core\";\nimport produce from \"immer\";\nimport { fromPairs, get, head, set } from \"lodash\";\nimport PropTypes from \"prop-types\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport { useRecoilValue } from \"recoil\";\nimport { getNonDefaultLegendDefinitions } from \"../../../../../../../../General/utils/utils\";\nimport LegendsField from \"./LegendsField\";\nexport default function LevelTargetsField({\n  name,\n  value: initialValue = [],\n  onChange,\n  multipleFields,\n  weight,\n  highIsGood,\n  ...props\n}) {\n  var _head;\n  const orgUnitLevels = useRecoilValue(OrgUnitLevels);\n  const {\n    watch\n  } = useFormContext();\n  const [expanded, setExpanded] = useState((_head = head(orgUnitLevels)) === null || _head === void 0 ? void 0 : _head.id);\n  const legendDefinitions = getNonDefaultLegendDefinitions(watch(\"legendDefinitions\"));\n  const handleChange = panel => (event, isExpanded) => {\n    setExpanded(isExpanded ? panel : false);\n  };\n  const value = useMemo(() => {\n    var _orgUnitLevels$map;\n    return !Array.isArray(initialValue) ? initialValue : fromPairs([...((_orgUnitLevels$map = orgUnitLevels === null || orgUnitLevels === void 0 ? void 0 : orgUnitLevels.map(({\n      id\n    }) => [id, generateLegendDefaults(multipleFields, weight, highIsGood)])) !== null && _orgUnitLevels$map !== void 0 ? _orgUnitLevels$map : [])]);\n  }, [highIsGood, initialValue, multipleFields, orgUnitLevels, weight]);\n  const onFieldChange = (newValue, level) => {\n    onChange({\n      value: produce(value, draft => {\n        return set(draft, [level], newValue);\n      })\n    });\n  };\n  useEffect(() => {\n    if (Array.isArray(initialValue)) {\n      onChange({\n        value\n      });\n    }\n  }, [value, initialValue]);\n  return /*#__PURE__*/React.createElement(Field, _extends({\n    name: name\n  }, props), orgUnitLevels === null || orgUnitLevels === void 0 ? void 0 : orgUnitLevels.map(({\n    id,\n    displayName\n  }) => {\n    var _get;\n    return /*#__PURE__*/React.createElement(Accordion, {\n      expanded: expanded === id,\n      key: id,\n      onChange: handleChange(id)\n    }, /*#__PURE__*/React.createElement(AccordionSummary, {\n      style: {\n        background: colors.grey200\n      }\n    }, displayName), /*#__PURE__*/React.createElement(AccordionDetails, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column w-100\"\n    }, /*#__PURE__*/React.createElement(LegendsField, {\n      highIsGood: highIsGood,\n      legendDefinitions: legendDefinitions,\n      value: (_get = get(value, id)) !== null && _get !== void 0 ? _get : [],\n      onChange: value => onFieldChange(value, id)\n    }))));\n  }));\n}\nLevelTargetsField.propTypes = {\n  highIsGood: PropTypes.bool.isRequired,\n  multipleFields: PropTypes.arrayOf(PropTypes.instanceOf(FormFieldModel)).isRequired,\n  name: PropTypes.string.isRequired,\n  weight: PropTypes.number.isRequired,\n  onChange: PropTypes.func.isRequired,\n  value: PropTypes.any\n};","import { FormFieldModel } from \"@scorecard/shared\";\nimport { DHIS2ValueTypes } from \"@scorecard/shared\";\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useFormContext } from \"react-hook-form\";\nimport { getNonDefaultLegendDefinitions } from \"../../../../../../../General/utils/utils\";\nimport LevelTargetsField from \"../TargetsArea/components/LevelTargetsField\";\nexport default function OrgUnitLevelSpecificTargets({\n  path\n}) {\n  const {\n    watch,\n    setValue\n  } = useFormContext();\n  const legendDefinitions = getNonDefaultLegendDefinitions(watch(\"legendDefinitions\"));\n  const weight = watch(`${path}.weight`);\n  const highIsGood = watch(`${path}.highIsGood`);\n  const defaultLegends = watch(`${path}.legends`);\n  return /*#__PURE__*/React.createElement(LevelTargetsField, {\n    multipleFields: legendDefinitions === null || legendDefinitions === void 0 ? void 0 : legendDefinitions.map(legend => new FormFieldModel({\n      id: legend.id,\n      mandatory: false,\n      name: legend.name,\n      legendDefinition: legend,\n      valueType: DHIS2ValueTypes.LEGEND_MIN_MAX.name\n    })),\n    value: defaultLegends,\n    onChange: ({\n      value\n    }) => {\n      setValue(`${path}.legends`, value);\n    },\n    legends: defaultLegends,\n    highIsGood: highIsGood,\n    weight: weight,\n    path: path,\n    name: \"legends\"\n  });\n}\nOrgUnitLevelSpecificTargets.propTypes = {\n  path: PropTypes.string.isRequired\n};","import i18n from '@dhis2/d2-i18n';\nimport { Button, ButtonStrip, CircularLoader, InputField, Modal, ModalActions, ModalContent, ModalTitle } from '@dhis2/ui';\nimport { OrgUnitSelectorModal } from \"@hisptz/dhis2-ui\";\nimport { SelectedOrgUnits } from \"@scorecard/shared\";\nimport { isEmpty } from \"lodash\";\nimport PropTypes from 'prop-types';\nimport React, { Suspense, useCallback, useState } from 'react';\nimport { useFormContext } from \"react-hook-form\";\nimport { useRecoilValue } from \"recoil\";\nimport { getNonDefaultLegendDefinitions } from \"../../../../../../../General/utils/utils\";\nimport LegendsField from \"../TargetsArea/components/LegendsField\";\nfunction OrgUnitSelector({\n  target,\n  setTarget\n}) {\n  var _orgUnits$map;\n  const [periodSelectorOpen, setPeriodSelectorOpen] = useState(isEmpty(target.items));\n  const orgUnits = useRecoilValue(SelectedOrgUnits(target.items));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \" align-items-end row gap-8 w-100\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column flex-1\"\n  }, /*#__PURE__*/React.createElement(InputField, {\n    fullWidth: true,\n    label: i18n.t(\"Organisation Unit(s)\"),\n    disabled: true,\n    value: orgUnits === null || orgUnits === void 0 ? void 0 : (_orgUnits$map = orgUnits.map(ou => ou === null || ou === void 0 ? void 0 : ou.displayName)) === null || _orgUnits$map === void 0 ? void 0 : _orgUnits$map.join(\", \")\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-25\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => setPeriodSelectorOpen(true)\n  }, i18n.t(\"Change\")))), periodSelectorOpen && /*#__PURE__*/React.createElement(OrgUnitSelectorModal, {\n    value: {\n      orgUnits: orgUnits !== null && orgUnits !== void 0 ? orgUnits : []\n    },\n    onClose: () => setPeriodSelectorOpen(false),\n    hide: !periodSelectorOpen,\n    onUpdate: ({\n      orgUnits\n    }) => {\n      setTarget(prevState => {\n        return {\n          ...prevState,\n          items: orgUnits === null || orgUnits === void 0 ? void 0 : orgUnits.map(orgUnit => orgUnit.id)\n        };\n      });\n      setPeriodSelectorOpen(false);\n    }\n  }));\n}\nOrgUnitSelector.propTypes = {\n  setTarget: PropTypes.func,\n  target: PropTypes.object\n};\nexport default function OrgUnitSpecificTargetsModal({\n  open,\n  onClose,\n  onUpdate,\n  specificTarget,\n  defaultLegends,\n  onChangeDefaultLegends,\n  path\n}) {\n  const {\n    watch\n  } = useFormContext();\n  const [target, setTarget] = useState(specificTarget);\n  const legendDefinitions = getNonDefaultLegendDefinitions(watch(\"legendDefinitions\"));\n  const highIsGood = watch(`${path}.highIsGood`);\n  const onUpdateClick = useCallback(() => {\n    onUpdate({\n      ...target\n    });\n    onClose();\n  }, [onClose, onUpdate, target]);\n  return /*#__PURE__*/React.createElement(Modal, {\n    onClose: onClose,\n    hide: !open,\n    position: \"middle\"\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t(\"Organisation Unit Specific Targets\")), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column align-items-center justify-content-center\",\n      style: {\n        height: 100,\n        width: \"100%\"\n      }\n    }, /*#__PURE__*/React.createElement(CircularLoader, {\n      small: true\n    }))\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column w-100 gap-16\"\n  }, /*#__PURE__*/React.createElement(OrgUnitSelector, {\n    target: target,\n    setTarget: setTarget\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column w-100 legend-settings-area\"\n  }, /*#__PURE__*/React.createElement(LegendsField, {\n    highIsGood: highIsGood,\n    legendDefinitions: legendDefinitions,\n    value: target.legends,\n    onChange: legends => {\n      setTarget(prevState => {\n        return {\n          ...prevState,\n          legends\n        };\n      });\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column w-100 legend-settings-area\"\n  }, /*#__PURE__*/React.createElement(\"p\", null, i18n.t(\"Other Periods\")), /*#__PURE__*/React.createElement(LegendsField, {\n    highIsGood: highIsGood,\n    legendDefinitions: legendDefinitions,\n    value: defaultLegends,\n    onChange: onChangeDefaultLegends\n  })))))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(Button, {\n    onClick: onClose\n  }, i18n.t(\"Cancel\")), /*#__PURE__*/React.createElement(Button, {\n    onClick: onUpdateClick,\n    primary: true\n  }, i18n.t(\"Update\")))));\n}\nOrgUnitSpecificTargetsModal.propTypes = {\n  defaultLegends: PropTypes.array.isRequired,\n  path: PropTypes.string.isRequired,\n  specificTarget: PropTypes.object.isRequired,\n  onChangeDefaultLegends: PropTypes.func.isRequired,\n  open: PropTypes.bool,\n  onClose: PropTypes.func,\n  onUpdate: PropTypes.func\n};","import i18n from '@dhis2/d2-i18n';\nimport { Button, ButtonStrip, InputField, Modal, ModalActions, ModalContent, ModalTitle } from '@dhis2/ui';\nimport { PeriodSelectorModal } from \"@hisptz/dhis2-ui\";\nimport { Period } from \"@iapps/period-utilities\";\nimport { SystemSettingsState } from \"@scorecard/shared\";\nimport { compact, isEmpty } from \"lodash\";\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useState } from 'react';\nimport { useFormContext } from \"react-hook-form\";\nimport { useRecoilValue } from \"recoil\";\nimport { getNonDefaultLegendDefinitions } from \"../../../../../../../General/utils/utils\";\nimport LegendsField from \"../TargetsArea/components/LegendsField\";\nexport default function PeriodSpecificTargetsModal({\n  open,\n  onClose,\n  onUpdate,\n  specificTarget,\n  defaultLegends,\n  onChangeDefaultLegends,\n  path\n}) {\n  var _target$items, _target$items$map, _target$items$map2, _target$items2;\n  const {\n    watch\n  } = useFormContext();\n  const [target, setTarget] = useState(specificTarget);\n  const {\n    calendar\n  } = useRecoilValue(SystemSettingsState);\n  const legendDefinitions = getNonDefaultLegendDefinitions(watch(\"legendDefinitions\"));\n  const highIsGood = watch(`${path}.highIsGood`);\n  const [periodSelectorOpen, setPeriodSelectorOpen] = useState(isEmpty(target.items));\n  const onUpdateClick = useCallback(() => {\n    onUpdate({\n      ...target\n    });\n    onClose();\n  }, [onClose, onUpdate, target]);\n  return /*#__PURE__*/React.createElement(Modal, {\n    onClose: onClose,\n    hide: !open,\n    position: \"middle\"\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t(\"Period Specific Targets\")), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column w-100 gap-16\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \" align-items-end row gap-8 w-100\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column flex-1\"\n  }, /*#__PURE__*/React.createElement(InputField, {\n    fullWidth: true,\n    label: i18n.t(\"Period\"),\n    disabled: true,\n    value: target === null || target === void 0 ? void 0 : (_target$items = target.items) === null || _target$items === void 0 ? void 0 : (_target$items$map = _target$items.map(item => {\n      if (item) {\n        var _Period$setPreference;\n        return (_Period$setPreference = new Period().setPreferences({\n          allowFuturePeriods: true\n        }).setCalendar(calendar).getById(item)) === null || _Period$setPreference === void 0 ? void 0 : _Period$setPreference.name;\n      }\n    })) === null || _target$items$map === void 0 ? void 0 : _target$items$map.join(\", \")\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-25\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => setPeriodSelectorOpen(true)\n  }, i18n.t(\"Change Period\")))), periodSelectorOpen && /*#__PURE__*/React.createElement(PeriodSelectorModal, {\n    enablePeriodSelector: true,\n    excludeRelativePeriods: true,\n    singleSelection: true,\n    selectedPeriods: compact([...((_target$items$map2 = (_target$items2 = target.items) === null || _target$items2 === void 0 ? void 0 : _target$items2.map(item => {\n      if (item) {\n        return item;\n      }\n    })) !== null && _target$items$map2 !== void 0 ? _target$items$map2 : [])]),\n    onClose: () => setPeriodSelectorOpen(false),\n    hide: !periodSelectorOpen,\n    onUpdate: periods => {\n      setTarget(prevState => {\n        var _periods$;\n        return {\n          ...prevState,\n          items: [(_periods$ = periods[0]) === null || _periods$ === void 0 ? void 0 : _periods$.id]\n        };\n      });\n      setPeriodSelectorOpen(false);\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column w-100 legend-settings-area\"\n  }, /*#__PURE__*/React.createElement(LegendsField, {\n    highIsGood: highIsGood,\n    legendDefinitions: legendDefinitions,\n    value: target.legends,\n    onChange: legends => {\n      setTarget(prevState => {\n        return {\n          ...prevState,\n          legends\n        };\n      });\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column w-100 legend-settings-area\"\n  }, /*#__PURE__*/React.createElement(\"p\", null, i18n.t(\"Other Periods\")), /*#__PURE__*/React.createElement(LegendsField, {\n    highIsGood: highIsGood,\n    legendDefinitions: legendDefinitions,\n    value: defaultLegends,\n    onChange: onChangeDefaultLegends\n  }))))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(Button, {\n    onClick: onClose\n  }, i18n.t(\"Cancel\")), /*#__PURE__*/React.createElement(Button, {\n    onClick: onUpdateClick,\n    primary: true\n  }, i18n.t(\"Update\")))));\n}\nPeriodSpecificTargetsModal.propTypes = {\n  path: PropTypes.string.isRequired,\n  specificTarget: PropTypes.object.isRequired,\n  defaultLegends: PropTypes.any,\n  open: PropTypes.bool,\n  onChangeDefaultLegends: PropTypes.func,\n  onClose: PropTypes.func,\n  onUpdate: PropTypes.func\n};","import i18n from '@dhis2/d2-i18n';\nimport { Button, colors, Tag } from '@dhis2/ui';\nimport { Period } from \"@iapps/period-utilities\";\nimport { SelectedOrgUnits, SystemSettingsState } from \"@scorecard/shared\";\nimport { find } from \"lodash\";\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useRecoilValue } from \"recoil\";\nfunction LegendsView({\n  legends,\n  legendDefinitions\n}) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row gap-16 space-evenly\"\n  }, legends === null || legends === void 0 ? void 0 : legends.map((legend, index) => {\n    var _find;\n    const {\n      legendDefinitionId,\n      startValue,\n      endValue\n    } = legend !== null && legend !== void 0 ? legend : {};\n    const legendDefinition = (_find = find(legendDefinitions, {\n      id: legendDefinitionId\n    })) !== null && _find !== void 0 ? _find : {};\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row gap-8 align-items-center\",\n      key: index\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        height: 32,\n        width: 48,\n        background: legendDefinition.color\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", null, `${endValue} - ${startValue}`));\n  }));\n}\nLegendsView.propTypes = {\n  legendDefinitions: PropTypes.array,\n  legends: PropTypes.array\n};\nfunction getTypeLabel(type) {\n  switch (type) {\n    case \"period\":\n      return i18n.t('Period');\n    case \"orgUnit\":\n      return i18n.t('Organisation unit(s)');\n    case \"orgUnitLevel\":\n      return i18n.t('Organisation unit levels');\n  }\n}\nexport function OrgUnitSpecificTargetView({\n  specificTarget,\n  legendDefinitions,\n  onUpdate,\n  defaultLegends\n}) {\n  const {\n    legends,\n    items\n  } = specificTarget !== null && specificTarget !== void 0 ? specificTarget : {};\n  const orgUnits = useRecoilValue(SelectedOrgUnits(items));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      border: `1px solid ${colors.grey500}`,\n      borderRadius: 4,\n      padding: 8\n    },\n    className: \"column gap-8 flex-wrap\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column gap-8 flex-wrap\"\n  }, /*#__PURE__*/React.createElement(\"b\", null, i18n.t(\"Organisation Unit(s)\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row gap-8 flex-wrap\"\n  }, orgUnits === null || orgUnits === void 0 ? void 0 : orgUnits.map(item => {\n    return /*#__PURE__*/React.createElement(Tag, {\n      key: `${item}-tag`\n    }, item.displayName);\n  }))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"p\", null, i18n.t(\"Legends\")), /*#__PURE__*/React.createElement(LegendsView, {\n    legends: legends,\n    legendDefinitions: legendDefinitions\n  })), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"p\", null, i18n.t(`Other Organisation Units`)), /*#__PURE__*/React.createElement(LegendsView, {\n    legends: defaultLegends,\n    legendDefinitions: legendDefinitions\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row gap-8 justify-content-end\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: onUpdate\n  }, i18n.t(\"Update\"))));\n}\nexport function PeriodSpecificTargetView({\n  specificTarget,\n  legendDefinitions,\n  onUpdate,\n  defaultLegends\n}) {\n  const {\n    legends,\n    type,\n    items\n  } = specificTarget !== null && specificTarget !== void 0 ? specificTarget : {};\n  const {\n    calendar\n  } = useRecoilValue(SystemSettingsState);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      border: `1px solid ${colors.grey500}`,\n      borderRadius: 4,\n      padding: 8\n    },\n    className: \"column gap-8 flex-wrap\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column gap-8 flex-wrap\"\n  }, /*#__PURE__*/React.createElement(\"b\", null, getTypeLabel(type)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row gap-8 flex-wrap\"\n  }, items === null || items === void 0 ? void 0 : items.map(item => {\n    var _Period$setPreference;\n    return /*#__PURE__*/React.createElement(Tag, {\n      key: `${item}-tag`\n    }, (_Period$setPreference = new Period().setPreferences({\n      allowFuturePeriods: true\n    }).setCalendar(calendar).getById(item)) === null || _Period$setPreference === void 0 ? void 0 : _Period$setPreference.name);\n  }))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"p\", null, i18n.t(\"Legends\")), /*#__PURE__*/React.createElement(LegendsView, {\n    legends: legends,\n    legendDefinitions: legendDefinitions\n  })), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"p\", null, i18n.t(`Other ${getTypeLabel(type)}`)), /*#__PURE__*/React.createElement(LegendsView, {\n    legends: defaultLegends,\n    legendDefinitions: legendDefinitions\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row gap-8 justify-content-end\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: onUpdate\n  }, i18n.t(\"Update\"))));\n}\nOrgUnitSpecificTargetView.propTypes = {\n  defaultLegends: PropTypes.array,\n  legendDefinitions: PropTypes.array,\n  specificTarget: PropTypes.object,\n  onDelete: PropTypes.func,\n  onUpdate: PropTypes.func\n};\nPeriodSpecificTargetView.propTypes = {\n  defaultLegends: PropTypes.array,\n  legendDefinitions: PropTypes.array,\n  specificTarget: PropTypes.object,\n  onDelete: PropTypes.func,\n  onUpdate: PropTypes.func\n};","import { RHFDHIS2FormField } from \"@hisptz/dhis2-ui\";\nimport React, { useMemo } from \"react\";\nimport { useWatch } from \"react-hook-form\";\nexport default function TargetsField(props) {\n  const {\n    name,\n    path\n  } = props !== null && props !== void 0 ? props : {};\n  const [legendDefinitions, highIsGood] = useWatch({\n    name: [`legendDefinitions`, `${path}.highIsGood`]\n  });\n  const nonDefaultLegendDefinitions = useMemo(() => legendDefinitions.filter(legendDefinition => !legendDefinition.isDefault), [legendDefinitions]);\n  return /*#__PURE__*/React.createElement(RHFDHIS2FormField, {\n    name: name,\n    valueType: 'LEGEND_MIN_MAX_GROUP',\n    highIsGood: !highIsGood,\n    legendDefinitions: nonDefaultLegendDefinitions\n  });\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { CircularLoader, SingleSelectField, SingleSelectOption } from '@dhis2/ui';\nimport { RHFDHIS2FormField } from \"@hisptz/dhis2-ui\";\nimport { DHIS2ValueTypes, generateLegendDefaults, uid } from \"@scorecard/shared\";\nimport { head, isEmpty } from \"lodash\";\nimport PropTypes from 'prop-types';\nimport React, { Suspense, useEffect, useState } from \"react\";\nimport { useFormContext, useWatch } from \"react-hook-form\";\nimport { getNonDefaultLegendDefinitions } from \"../../../../../../../General/utils/utils\";\nimport OrgUnitLevelSpecificTargets from \"../OrgUnitLevelSpecificTargetsModal\";\nimport OrgUnitSpecificTargetsModal from \"../OrgUnitSpecificTargetsModal\";\nimport PeriodSpecificTargetsModal from \"../PeriodSpecificTargetsModal\";\nimport { OrgUnitSpecificTargetView, PeriodSpecificTargetView } from \"./components/SpecificTargetView\";\nimport TargetsField from \"./components/TargetsField\";\nfunction getSelectedType(specificTargets, specificTargetsSet) {\n  if (!isEmpty(specificTargets) && specificTargetsSet) {\n    var _head;\n    return (_head = head(specificTargets)) === null || _head === void 0 ? void 0 : _head.type;\n  }\n  if (specificTargetsSet) {\n    return \"orgUnitLevel\";\n  }\n  return null;\n}\nexport default function TargetsArea({\n  path\n}) {\n  const {\n    setValue\n  } = useFormContext();\n  const [allLegendDefinitions, areSpecificTargetsSet, specificTargets, defaultLegends, weight, highIsGood] = useWatch({\n    name: [\"legendDefinitions\", `${path}.specificTargetsSet`, `${path}.specificTargets`, `${path}.legends`, `${path}.weight`, `${path}.highIsGood`]\n  });\n  const legendDefinitions = getNonDefaultLegendDefinitions(allLegendDefinitions);\n  const [openConfigDialog, setOpenConfigDialog] = useState(false);\n  const [selectedType, setSelectedType] = useState(getSelectedType(specificTargets, areSpecificTargetsSet));\n  useEffect(() => {\n    if (!areSpecificTargetsSet && !isEmpty(specificTargets)) {\n      setSelectedType(null);\n      setValue(`${path}.specificTargets`, []);\n    }\n  }, [areSpecificTargetsSet, specificTargets, setValue, path]);\n  useEffect(() => {\n    var _specificTargets$;\n    if (selectedType && isEmpty((_specificTargets$ = specificTargets[0]) === null || _specificTargets$ === void 0 ? void 0 : _specificTargets$.items)) {\n      setOpenConfigDialog(true);\n    }\n  }, [selectedType, specificTargets]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column gap-16\"\n  }, /*#__PURE__*/React.createElement(RHFDHIS2FormField, {\n    valueType: DHIS2ValueTypes.TRUE_ONLY.name,\n    label: i18n.t(\"Set Specific Targets\"),\n    name: `${path}.specificTargetsSet`\n  }), areSpecificTargetsSet ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column gap-16\"\n  }, /*#__PURE__*/React.createElement(SingleSelectField, {\n    label: i18n.t(\"Specific target type\"),\n    selected: selectedType,\n    onChange: ({\n      selected\n    }) => {\n      if (selected === \"orgUnitLevel\") {\n        setSelectedType(selected);\n        setValue(`${path}.legends`, []);\n        setValue(`${path}.specificTargets`, []);\n        return;\n      }\n      setSelectedType(selected);\n      setValue(`${path}.legends`, generateLegendDefaults(legendDefinitions, weight, highIsGood));\n      setValue(`${path}.specificTargets`, [{\n        id: uid(),\n        type: selected,\n        items: [],\n        legends: generateLegendDefaults(legendDefinitions, weight, highIsGood)\n      }]);\n    }\n  }, /*#__PURE__*/React.createElement(SingleSelectOption, {\n    value: \"period\",\n    label: i18n.t(\"Period\")\n  }), /*#__PURE__*/React.createElement(SingleSelectOption, {\n    value: \"orgUnit\",\n    label: i18n.t(\"Organisation Unit\")\n  }), /*#__PURE__*/React.createElement(SingleSelectOption, {\n    value: \"orgUnitLevel\",\n    label: i18n.t(\"Organisation Unit Level\")\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column gap-8\"\n  }, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column align-items-center justify-content-center\",\n      style: {\n        height: 100,\n        width: \"100%\"\n      }\n    }, /*#__PURE__*/React.createElement(CircularLoader, {\n      small: true\n    }))\n  }, selectedType !== \"orgUnitLevel\" && (specificTargets === null || specificTargets === void 0 ? void 0 : specificTargets.map(target => selectedType === \"period\" ? /*#__PURE__*/React.createElement(PeriodSpecificTargetView, {\n    defaultLegends: defaultLegends,\n    onDelete: () => {\n      setValue(`${path}.specificTargets`, []);\n    },\n    legendDefinitions: legendDefinitions,\n    onUpdate: () => setOpenConfigDialog(true),\n    key: `${target.id}-view`,\n    specificTarget: target\n  }) : /*#__PURE__*/React.createElement(OrgUnitSpecificTargetView, {\n    defaultLegends: defaultLegends,\n    onDelete: () => {\n      setValue(`${path}.specificTargets`, []);\n    },\n    legendDefinitions: legendDefinitions,\n    onUpdate: () => setOpenConfigDialog(true),\n    key: `${target.id}-view`,\n    specificTarget: target\n  }))))), selectedType === \"period\" && openConfigDialog && !isEmpty(specificTargets) ? /*#__PURE__*/React.createElement(PeriodSpecificTargetsModal, {\n    path: path,\n    defaultLegends: defaultLegends,\n    onChangeDefaultLegends: legends => setValue(`${path}.legends`, legends),\n    specificTarget: specificTargets[0],\n    onClose: () => setOpenConfigDialog(false),\n    open: openConfigDialog,\n    onUpdate: target => {\n      setOpenConfigDialog(false);\n      setValue(`${path}.specificTargets`, [target]);\n    }\n  }) : null, selectedType === \"orgUnit\" && openConfigDialog && !isEmpty(specificTargets) ? /*#__PURE__*/React.createElement(OrgUnitSpecificTargetsModal, {\n    path: path,\n    defaultLegends: defaultLegends,\n    onChangeDefaultLegends: legends => setValue(`${path}.legends`, legends),\n    specificTarget: specificTargets[0],\n    onClose: () => setOpenConfigDialog(false),\n    open: openConfigDialog,\n    onUpdate: target => {\n      setOpenConfigDialog(false);\n      setValue(`${path}.specificTargets`, [target]);\n    }\n  }) : null, selectedType === \"orgUnitLevel\" && /*#__PURE__*/React.createElement(OrgUnitLevelSpecificTargets, {\n    path: path\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column w-100 legend-settings-area\"\n  }, /*#__PURE__*/React.createElement(TargetsField, {\n    name: `${path}.legends`,\n    path: path\n  }))));\n}\nTargetsArea.propTypes = {\n  path: PropTypes.string.isRequired\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { Divider } from \"@dhis2/ui\";\nimport { RHFDHIS2FormField } from \"@hisptz/dhis2-ui\";\nimport { DHIS2ValueTypes } from \"@scorecard/shared\";\nimport PropTypes from \"prop-types\";\nimport React, { useEffect } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport TargetsArea from \"../DataConfiguration/Components/DataGroups/Components/DataSourceConfiguration/Components/TargetsArea\";\nexport default function DataSourceConfigurationForm({\n  path\n}) {\n  const {\n    watch,\n    setValue\n  } = useFormContext();\n  useEffect(() => {\n    if (path) {\n      setValue(path, watch(path));\n    }\n  }, [watch, path, setValue]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container p-16 data-source-form-container\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      gap: 16\n    },\n    className: \"column\"\n  }, /*#__PURE__*/React.createElement(RHFDHIS2FormField, {\n    disabled: true,\n    mandatory: true,\n    valueType: DHIS2ValueTypes.TEXT.name,\n    label: i18n.t(\"Name\"),\n    name: `${path}.name`\n  }), /*#__PURE__*/React.createElement(RHFDHIS2FormField, {\n    mandatory: true,\n    valueType: DHIS2ValueTypes.TEXT.name,\n    label: i18n.t(\"Label\"),\n    name: `${path}.label`,\n    validations: {\n      required: i18n.t(\"Label is required\")\n    }\n  }), /*#__PURE__*/React.createElement(RHFDHIS2FormField, {\n    valueType: DHIS2ValueTypes.NUMBER.name,\n    label: i18n.t(\"Weight\"),\n    name: `${path}.weight`\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row space-between\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column pr-16 effective-gap-settings\"\n  }, /*#__PURE__*/React.createElement(RHFDHIS2FormField, {\n    valueType: DHIS2ValueTypes.NUMBER.name,\n    label: i18n.t(\"Effective Gap\"),\n    name: `${path}.effectiveGap`\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column pl-16 indicator-options-settings-area\"\n  }, /*#__PURE__*/React.createElement(RHFDHIS2FormField, {\n    renderAsCheckbox: true,\n    valueType: \"BOOLEAN\",\n    label: i18n.t(\"Display Arrows\"),\n    name: `${path}.displayArrows`\n  }), /*#__PURE__*/React.createElement(RHFDHIS2FormField, {\n    renderAsCheckbox: true,\n    valueType: \"BOOLEAN\",\n    label: i18n.t(\"High is Good\"),\n    name: `${path}.highIsGood`\n  }), /*#__PURE__*/React.createElement(RHFDHIS2FormField, {\n    renderAsCheckbox: true,\n    valueType: \"BOOLEAN\",\n    label: i18n.t(\"Show Colors\"),\n    name: `${path}.showColors`\n  }))), /*#__PURE__*/React.createElement(Divider, null), /*#__PURE__*/React.createElement(TargetsArea, {\n    path: path\n  })));\n}\nDataSourceConfigurationForm.propTypes = {\n  path: PropTypes.string.isRequired\n};","import { CircularLoader } from \"@dhis2/ui\";\nimport { ScorecardConfigEditState } from \"@scorecard/shared\";\nimport React, { Suspense } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport { useRecoilValue } from \"recoil\";\nimport DataSourceConfigurationForm from \"../../../../../../../DataSourceConfigurationForm\";\nexport default function SelectedDataSourceConfigurationForm() {\n  var _ref, _selectedDataHolder$d;\n  const {\n    watch\n  } = useFormContext();\n  const scorecardEditState = useRecoilValue(ScorecardConfigEditState);\n  const selectedGroupIndex = scorecardEditState === null || scorecardEditState === void 0 ? void 0 : scorecardEditState.selectedGroupIndex;\n  const selectedDataHolderIndex = scorecardEditState === null || scorecardEditState === void 0 ? void 0 : scorecardEditState.selectedDataHolderIndex;\n  const path = (_ref = [\"dataSelection\", \"dataGroups\", selectedGroupIndex, \"dataHolders\", selectedDataHolderIndex]) === null || _ref === void 0 ? void 0 : _ref.join(\".\");\n  const selectedDataHolder = watch(path);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"data-configuration-row\"\n  }, (selectedDataHolder === null || selectedDataHolder === void 0 ? void 0 : (_selectedDataHolder$d = selectedDataHolder.dataSources) === null || _selectedDataHolder$d === void 0 ? void 0 : _selectedDataHolder$d.map((dataSource, index) => {\n    const dataSourcePath = `${path}.dataSources.${index}`;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: dataSource.id,\n      style: {\n        maxWidth: 720,\n        minWidth: 480\n      },\n      className: \"w-100 h-100\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-bordered h-100\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-16\"\n    }, /*#__PURE__*/React.createElement(Suspense, {\n      fallback: /*#__PURE__*/React.createElement(\"div\", {\n        className: \"w-100 h-100 center align-items-center\"\n      }, /*#__PURE__*/React.createElement(CircularLoader, {\n        small: true\n      }))\n    }, /*#__PURE__*/React.createElement(DataSourceConfigurationForm, {\n      path: dataSourcePath\n    }))))));\n  })) || null);\n}","import { ContainerLoader } from \"@scorecard/shared\";\nimport { ScorecardConfigEditState } from \"@scorecard/shared\";\nimport React, { Suspense } from \"react\";\nimport { useRecoilValue } from \"recoil\";\nimport { DataSourceInstructions } from \"../../../Instructions\";\nimport SelectedDataSourceConfigurationForm from \"./Components/Form\";\nexport default function DataSourceConfiguration() {\n  const {\n    selectedDataHolderIndex\n  } = useRecoilValue(ScorecardConfigEditState);\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(ContainerLoader, null)\n  }, !isNaN(selectedDataHolderIndex) ? /*#__PURE__*/React.createElement(SelectedDataSourceConfigurationForm, null) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row center align-items-center\"\n  }, /*#__PURE__*/React.createElement(DataSourceInstructions, null))));\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { Button } from \"@dhis2/ui\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nexport default function EmptyDataGroups({\n  onGroupAdd\n}) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      margin: \"auto\"\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: onGroupAdd,\n    icon: /*#__PURE__*/React.createElement(AddIcon, null),\n    className: \"scorecard-add-group-button\",\n    dataTest: \"scorecard-add-group-button\"\n  }, i18n.t(\"Add Group\")));\n}\nEmptyDataGroups.propTypes = {\n  onGroupAdd: PropTypes.func.isRequired\n};","import { LinkedCellSvg } from \"@scorecard/shared\";\nimport { generateRandomValues, getLegend } from \"@scorecard/shared\";\nimport PropTypes from \"prop-types\";\nimport React, { useMemo } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nexport default function CustomLinkedCell({\n  top,\n  bottom,\n  orgUnit,\n  period\n}) {\n  var _getLegend, _getLegend2;\n  const {\n    legends: topLegends,\n    showColors: showTopColors,\n    displayArrows: topDisplayArrows,\n    weight: topWeight,\n    specificTargets: topSpecificTargets\n  } = top !== null && top !== void 0 ? top : {};\n  const {\n    legends: bottomLegends,\n    showColors: showBottomColors,\n    displayArrows: bottomDisplayArrows,\n    weight: bottomWeight,\n    specificTargets: bottomSpecificTargets\n  } = bottom !== null && bottom !== void 0 ? bottom : {};\n  const {\n    watch\n  } = useFormContext();\n  const legendDefinitions = watch(\"legendDefinitions\");\n  const topValue = useMemo(generateRandomValues, []);\n  const bottomValue = useMemo(generateRandomValues, []);\n  const {\n    color: topColor\n  } = (_getLegend = getLegend(topValue, topLegends, {\n    max: topWeight,\n    specificTargets: topSpecificTargets,\n    orgUnit,\n    period,\n    legendDefinitions\n  })) !== null && _getLegend !== void 0 ? _getLegend : {};\n  const {\n    color: bottomColor\n  } = (_getLegend2 = getLegend(bottomValue, bottomLegends, {\n    max: bottomWeight,\n    specificTargets: bottomSpecificTargets,\n    orgUnit,\n    period,\n    legendDefinitions\n  })) !== null && _getLegend2 !== void 0 ? _getLegend2 : {};\n  return /*#__PURE__*/React.createElement(\"td\", {\n    className: \"data-cell\"\n  }, /*#__PURE__*/React.createElement(LinkedCellSvg, {\n    topStatus: topDisplayArrows && \"increasing\",\n    bottomStatus: bottomDisplayArrows && \"decreasing\",\n    topColor: showTopColors ? topColor : undefined,\n    bottomColor: showBottomColors ? bottomColor : undefined,\n    bottomValue: bottomValue,\n    topValue: topValue\n  }));\n}\nCustomLinkedCell.propTypes = {\n  bottom: PropTypes.object.isRequired,\n  top: PropTypes.object.isRequired,\n  orgUnit: PropTypes.string,\n  period: PropTypes.string\n};","import { SingleCellSvg } from \"@scorecard/shared\";\nimport { OrgUnitLevels, UserState } from \"@scorecard/shared\";\nimport { generateRandomValues, getLegend } from \"@scorecard/shared\";\nimport { head } from \"lodash\";\nimport PropTypes from \"prop-types\";\nimport React, { useMemo } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport { useRecoilValue } from \"recoil\";\nimport CustomLinkedCell from \"./CustomLinkedCell\";\nexport default function PreviewCustomCell({\n  config\n}) {\n  var _config$dataSources, _config$dataSources2, _head;\n  const {\n    watch\n  } = useFormContext();\n  const orgUnitLevels = useRecoilValue(OrgUnitLevels);\n  const {\n    organisationUnits\n  } = useRecoilValue(UserState);\n  const legendDefinitions = watch(\"legendDefinitions\");\n  const hasLinked = (config === null || config === void 0 ? void 0 : (_config$dataSources = config.dataSources) === null || _config$dataSources === void 0 ? void 0 : _config$dataSources.length) > 1;\n  const [top, bottom] = (_config$dataSources2 = config === null || config === void 0 ? void 0 : config.dataSources) !== null && _config$dataSources2 !== void 0 ? _config$dataSources2 : [];\n  const {\n    legends,\n    showColors,\n    id,\n    displayArrows,\n    weight,\n    specificTargets\n  } = top !== null && top !== void 0 ? top : {};\n  const value = useMemo(generateRandomValues, []);\n  const orgUnit = (_head = head(organisationUnits)) === null || _head === void 0 ? void 0 : _head.id;\n  const period = new Date().getFullYear();\n  const legend = getLegend(value, legends, {\n    max: weight,\n    orgUnitLevels,\n    dataOrgUnitLevel: 1,\n    legendDefinitions,\n    specificTargets,\n    orgUnit,\n    period\n  });\n  return hasLinked ? /*#__PURE__*/React.createElement(CustomLinkedCell, {\n    orgUnit: orgUnit,\n    period: period,\n    bottom: bottom,\n    top: top,\n    specificTargets: specificTargets\n  }) : /*#__PURE__*/React.createElement(\"td\", {\n    width: \"100px\",\n    className: \"data-cell\",\n    align: \"center\",\n    key: `${id}-data`,\n    id: id\n  }, /*#__PURE__*/React.createElement(SingleCellSvg, {\n    status: displayArrows && \"decreasing\",\n    color: showColors ? legend === null || legend === void 0 ? void 0 : legend.color : undefined,\n    value: value\n  }));\n}\nPreviewCustomCell.propTypes = {\n  config: PropTypes.object.isRequired\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { DataTable, DataTableBody, DataTableCell, DataTableHead, DataTableRow } from \"@dhis2/ui\";\nimport { UserState } from \"@scorecard/shared\";\nimport { head } from \"lodash\";\nimport React, { useMemo } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport { useRecoilValue } from \"recoil\";\nimport PreviewCustomCell from \"./Components/PreviewCustomCell\";\nexport default function PreviewScorecardTable() {\n  var _watch, _head;\n  const {\n    watch\n  } = useFormContext();\n  const {\n    organisationUnits\n  } = useRecoilValue(UserState);\n  const {\n    dataGroups\n  } = (_watch = watch(\"dataSelection\")) !== null && _watch !== void 0 ? _watch : {};\n  const columns = useMemo(() => [...dataGroups], [dataGroups]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\",\n    style: {\n      width: \"100%\",\n      overflowX: \"auto\"\n    }\n  }, /*#__PURE__*/React.createElement(DataTable, {\n    bordered: true,\n    width: \"100%\"\n  }, /*#__PURE__*/React.createElement(DataTableHead, null, /*#__PURE__*/React.createElement(DataTableRow, null, /*#__PURE__*/React.createElement(DataTableCell, {\n    fixed: true,\n    align: \"center\",\n    className: \"table-header scorecard-table-header\",\n    bordered: true,\n    rowSpan: \"2\"\n  }, i18n.t(\"Organisation Unit\")), columns === null || columns === void 0 ? void 0 : columns.map(column => {\n    var _column$dataHolders;\n    return /*#__PURE__*/React.createElement(DataTableCell, {\n      fixed: true,\n      align: \"center\",\n      className: \"table-header scorecard-table-header\",\n      bordered: true,\n      colSpan: column === null || column === void 0 ? void 0 : (_column$dataHolders = column.dataHolders) === null || _column$dataHolders === void 0 ? void 0 : _column$dataHolders.length,\n      key: column === null || column === void 0 ? void 0 : column.id\n    }, column === null || column === void 0 ? void 0 : column.title);\n  })), /*#__PURE__*/React.createElement(DataTableRow, null, dataGroups === null || dataGroups === void 0 ? void 0 : dataGroups.map(group => {\n    var _group$dataHolders, _group$dataHolders2, _group$dataHolders3;\n    return /*#__PURE__*/React.createElement(\"th\", {\n      width: `${((_group$dataHolders = group.dataHolders) === null || _group$dataHolders === void 0 ? void 0 : _group$dataHolders.length) * 100}px`,\n      key: group.id,\n      colSpan: ((_group$dataHolders2 = group.dataHolders) === null || _group$dataHolders2 === void 0 ? void 0 : _group$dataHolders2.length) || 1\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      style: {\n        borderSpacing: 0,\n        height: \"100%\"\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", null, group === null || group === void 0 ? void 0 : (_group$dataHolders3 = group.dataHolders) === null || _group$dataHolders3 === void 0 ? void 0 : _group$dataHolders3.map(({\n      dataSources\n    }) => {\n      var _dataSources$, _dataSources$2, _dataSources$3, _dataSources$4;\n      return /*#__PURE__*/React.createElement(DataTableCell, {\n        width: \"100px\",\n        fixed: true,\n        bordered: true,\n        key: (_dataSources$ = dataSources[0]) === null || _dataSources$ === void 0 ? void 0 : _dataSources$.id,\n        id: (_dataSources$2 = dataSources[0]) === null || _dataSources$2 === void 0 ? void 0 : _dataSources$2.id\n      }, (_dataSources$3 = dataSources[0]) === null || _dataSources$3 === void 0 ? void 0 : _dataSources$3.label, \" \", dataSources.length > 1 && `/${dataSources === null || dataSources === void 0 ? void 0 : (_dataSources$4 = dataSources[1]) === null || _dataSources$4 === void 0 ? void 0 : _dataSources$4.label}`);\n    }))));\n  }))), /*#__PURE__*/React.createElement(DataTableBody, null, /*#__PURE__*/React.createElement(DataTableRow, {\n    bordered: true\n  }, /*#__PURE__*/React.createElement(DataTableCell, {\n    width: \"100%\",\n    className: \"min-width-200\",\n    fixed: true,\n    tag: \"th\",\n    bordered: true\n  }, (_head = head(organisationUnits)) === null || _head === void 0 ? void 0 : _head.displayName), dataGroups === null || dataGroups === void 0 ? void 0 : dataGroups.map(group => {\n    var _group$dataHolders4, _group$dataHolders5, _group$dataHolders6;\n    return /*#__PURE__*/React.createElement(\"td\", {\n      className: \"no-wrap\",\n      width: `${((_group$dataHolders4 = group.dataHolders) === null || _group$dataHolders4 === void 0 ? void 0 : _group$dataHolders4.length) * 100}px`,\n      style: {\n        height: 47\n      },\n      key: group.id,\n      colSpan: ((_group$dataHolders5 = group.dataHolders) === null || _group$dataHolders5 === void 0 ? void 0 : _group$dataHolders5.length) || 1\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      style: {\n        borders: \"none\",\n        borderSpacing: 0\n      }\n    }, /*#__PURE__*/React.createElement(DataTableRow, null, group === null || group === void 0 ? void 0 : (_group$dataHolders6 = group.dataHolders) === null || _group$dataHolders6 === void 0 ? void 0 : _group$dataHolders6.map(config => /*#__PURE__*/React.createElement(PreviewCustomCell, {\n      key: config.id,\n      config: config\n    })))));\n  })))));\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { Button, ButtonStrip, Modal, ModalActions, ModalContent, ModalTitle } from \"@dhis2/ui\";\nimport { DataSourceSelector } from \"@hisptz/dhis2-ui\";\nimport PropTypes from \"prop-types\";\nimport React, { useState } from \"react\";\n\n//TODO: Refactor to shared\n\nexport default function DataSourceSelectorModal({\n  onClose,\n  open,\n  onSelect,\n  disabled\n}) {\n  const [selectedItems, setSelectedItems] = useState([]);\n  return /*#__PURE__*/React.createElement(Modal, {\n    onClose: onClose,\n    position: \"middle\",\n    large: true,\n    hide: !open\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t(\"Add Data source\")), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-100\"\n  }, /*#__PURE__*/React.createElement(DataSourceSelector, {\n    dataSources: [\"indicator\", \"dataElement\", \"dataSet\", \"programIndicator\", \"customFunction\"],\n    selected: selectedItems,\n    disabled: disabled,\n    onSelect: setSelectedItems\n  }))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, {\n    end: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: onClose\n  }, i18n.t(\"Cancel\")), /*#__PURE__*/React.createElement(Button, {\n    dataTest: \"scorecard-data-source-add\",\n    primary: true,\n    onClick: () => {\n      onSelect(selectedItems);\n      onClose();\n    }\n  }, i18n.t(\"Add\")))));\n}\nDataSourceSelectorModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  onSelect: PropTypes.func.isRequired,\n  disabled: PropTypes.array,\n  open: PropTypes.bool\n};","import { withStyles } from \"@material-ui/core\";\nimport MuiAccordion from \"@material-ui/core/Accordion\";\nimport MuiAccordionDetails from \"@material-ui/core/AccordionDetails\";\nimport MuiAccordionSummary from \"@material-ui/core/AccordionSummary\";\nconst Accordion = withStyles({\n  root: {\n    border: \"1px solid rgba(0, 0, 0, .125)\",\n    boxShadow: \"none\",\n    \"&:not(:last-child)\": {\n      borderBottom: 0\n    },\n    \"&:before\": {\n      display: \"none\"\n    },\n    \"&$expanded\": {\n      margin: \"auto\"\n    }\n  },\n  expanded: {}\n})(MuiAccordion);\nconst AccordionSummary = withStyles({\n  root: {\n    background: \"#F8F9FA\",\n    borderBottom: \"1px solid rgba(0, 0, 0, .125)\",\n    marginBottom: -1,\n    minHeight: 56,\n    \"&$expanded\": {\n      minHeight: 56\n    }\n  },\n  content: {\n    \"&$expanded\": {\n      margin: \"12px 0\"\n    }\n  },\n  expanded: {}\n})(MuiAccordionSummary);\nconst AccordionDetails = withStyles(theme => ({\n  root: {\n    padding: theme.spacing(2)\n  }\n}))(MuiAccordionDetails);\nexport { AccordionSummary, AccordionDetails, Accordion };","import i18n from \"@dhis2/d2-i18n\";\nimport { Button, ButtonStrip, Input } from \"@dhis2/ui\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nexport default function EditTitle({\n  titleEditValue,\n  setTitleEditValue,\n  title,\n  onClose,\n  onTitleEditSubmit\n}) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row space-between w-100\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: event => event.stopPropagation(),\n    className: \"column\"\n  }, /*#__PURE__*/React.createElement(Input, {\n    initialFocus: true,\n    value: titleEditValue,\n    onChange: ({\n      value\n    }) => setTitleEditValue(value)\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column \"\n  }, /*#__PURE__*/React.createElement(ButtonStrip, {\n    end: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: onTitleEditSubmit\n  }, i18n.t(\"Save\")), /*#__PURE__*/React.createElement(Button, {\n    onClick: (_, event) => {\n      event.stopPropagation();\n      onClose(false);\n      setTitleEditValue(title);\n    }\n  }, i18n.t(\"Cancel\")))));\n}\nEditTitle.propTypes = {\n  title: PropTypes.string.isRequired,\n  titleEditValue: PropTypes.string.isRequired,\n  setTitleEditValue: PropTypes.func.isRequired,\n  onTitleEditSubmit: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { Button } from \"@dhis2/ui\";\nimport { ErrorIcon } from \"@scorecard/shared\";\nimport { IconButton } from \"@material-ui/core\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nexport default function GroupTitle({\n  setTitleEditOpen,\n  title,\n  error,\n  onDelete,\n  id\n}) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row space-between align-items-center\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row  align-items-center accordion-title-container\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column w-auto\"\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    onDoubleClick: event => {\n      event.stopPropagation();\n      setTitleEditOpen(true);\n    },\n    onClick: event => event.stopPropagation(),\n    className: \"accordion-title group-name-area\"\n  }, title), error && /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      fontSize: 12,\n      margin: 4,\n      color: \"#f44336\"\n    }\n  }, error === null || error === void 0 ? void 0 : error.message)), /*#__PURE__*/React.createElement(IconButton, {\n    onClick: event => {\n      event.stopPropagation();\n      setTitleEditOpen(true);\n    },\n    size: \"small\",\n    className: \"accordion-title-edit\"\n  }, /*#__PURE__*/React.createElement(EditIcon, null))), /*#__PURE__*/React.createElement(\"div\", {\n    className: true\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row align-items-center\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"delete-group-icon\",\n    onClick: (_, event) => {\n      event.stopPropagation();\n      if (onDelete) {\n        onDelete(id);\n      }\n    },\n    icon: /*#__PURE__*/React.createElement(DeleteIcon, null)\n  }, i18n.t(\"Delete\")), error && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      paddingLeft: 16\n    }\n  }, /*#__PURE__*/React.createElement(ErrorIcon, {\n    color: \"#f44336\",\n    size: 24\n  })))));\n}\nGroupTitle.propTypes = {\n  id: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n  setTitleEditOpen: PropTypes.func.isRequired,\n  onDelete: PropTypes.func.isRequired,\n  error: PropTypes.any\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { Button } from \"@dhis2/ui\";\nimport { ScorecardIndicator } from \"@scorecard/shared\";\nimport { getDataSourceShortName } from \"@scorecard/shared\";\nimport { Avatar } from \"@material-ui/core\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nexport default function DataSource({\n  dataSource,\n  index,\n  onDelete\n}) {\n  const {\n    label,\n    type\n  } = dataSource !== null && dataSource !== void 0 ? dataSource : new ScorecardIndicator();\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-bordered data-source p-8 w-100\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row space-between align-items-center\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row align-items-center \"\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: \"data-source avatar\"\n  }, getDataSourceShortName(type)), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"data-source name\"\n  }, label, \" \")), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Button, {\n    className: \"data-source close-icon\",\n    small: true,\n    onClick: (_, event) => {\n      event.stopPropagation();\n      onDelete(index);\n    },\n    icon: /*#__PURE__*/React.createElement(DeleteIcon, null)\n  }, i18n.t(\"Delete\"))))));\n}\nDataSource.propTypes = {\n  dataSource: PropTypes.instanceOf(ScorecardIndicator).isRequired,\n  index: PropTypes.number.isRequired,\n  onDelete: PropTypes.func.isRequired\n};","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport { colors } from \"@dhis2/ui\";\nimport { ScorecardIndicatorHolder } from \"@scorecard/shared\";\nimport { ScorecardConfigDirtySelector, ScorecardConfigEditState } from \"@scorecard/shared\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { Draggable } from \"react-beautiful-dnd\";\nimport { useFormContext } from \"react-hook-form\";\nimport { useRecoilState, useSetRecoilState } from \"recoil\";\nimport DataSource from \"../DataSource\";\nexport default function DataSourceHolder({\n  dataHolder,\n  id,\n  index,\n  onDelete\n}) {\n  const {\n    dataSources\n  } = dataHolder !== null && dataHolder !== void 0 ? dataHolder : new ScorecardIndicatorHolder();\n  const {\n    trigger\n  } = useFormContext();\n  const [scorecardEditState, setScorecardEditState] = useRecoilState(ScorecardConfigEditState);\n  const path = [\"dataGroups\", scorecardEditState.selectedGroupIndex, \"dataHolders\", index];\n  const updateDataHolder = useSetRecoilState(ScorecardConfigDirtySelector({\n    key: \"dataSelection\",\n    path\n  }));\n  const selected = scorecardEditState.selectedDataHolderIndex === index;\n  const hasLinked = (dataSources === null || dataSources === void 0 ? void 0 : dataSources.length) > 1;\n  const onDataSourceDelete = indicatorIndex => {\n    if (hasLinked) {\n      const updatedDataSources = [...dataSources];\n      updatedDataSources.splice(indicatorIndex, 1);\n      updateDataHolder(prevState => ScorecardIndicatorHolder.set(prevState, \"dataSources\", updatedDataSources));\n      return;\n    }\n    onDelete(index);\n  };\n  return /*#__PURE__*/React.createElement(Draggable, {\n    draggableId: `${id}`,\n    index: index\n  }, provided => /*#__PURE__*/React.createElement(\"div\", _extends({}, provided.draggableProps, provided.dragHandleProps, {\n    ref: provided.innerRef\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row align-items-center\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: async () => {\n      if (id) {\n        if (await trigger()) {\n          setScorecardEditState(prevState => ({\n            ...prevState,\n            selectedDataHolderIndex: index\n          }));\n        }\n      }\n    },\n    className: \"column center\",\n    style: {\n      border: hasLinked && `1px solid ${colors.grey400}`,\n      background: selected && `${colors.teal200}`,\n      padding: hasLinked && 8,\n      marginBottom: 8\n    }\n  }, dataSources === null || dataSources === void 0 ? void 0 : dataSources.map((dataGroup, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"data-holder\",\n      key: dataGroup.id,\n      style: {\n        margin: \"4px 0\"\n      }\n    }, /*#__PURE__*/React.createElement(DataSource, {\n      hasLinked: hasLinked,\n      dataSource: dataGroup,\n      key: dataGroup.id,\n      onDelete: onDataSourceDelete,\n      index: index\n    }));\n  })))));\n}\nDataSourceHolder.propTypes = {\n  dataHolder: PropTypes.array.isRequired,\n  id: PropTypes.string.isRequired,\n  index: PropTypes.number.isRequired,\n  onDelete: PropTypes.func.isRequired\n};","import i18n from \"@dhis2/d2-i18n\";\nimport { Tooltip } from \"@dhis2/ui\";\nimport { ScorecardIndicatorHolder } from \"@scorecard/shared\";\nimport { IconButton } from \"@material-ui/core\";\nimport LinkIcon from \"@material-ui/icons/Link\";\nimport UnlinkIcon from \"@material-ui/icons/LinkOff\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport useLinkManage from \"../../../../../hooks/useLinkManage\";\nimport DataSourceHolder from \"../../DataSourceHolder\";\nexport default function LinkingContainer({\n  chunk,\n  onDataSourceDelete,\n  onLink,\n  onUnlink,\n  dataHolders\n}) {\n  const {\n    linkable,\n    hasLink,\n    onIconClick,\n    getIndex,\n    onUnlinkClick\n  } = useLinkManage({\n    onLink,\n    onUnlink,\n    dataHolders,\n    chunk\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"linking-container\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row align-items-center\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\"\n  }, chunk === null || chunk === void 0 ? void 0 : chunk.map(source => /*#__PURE__*/React.createElement(Tooltip, {\n    content: i18n.t(\"Click to configure, drag to rearrange\"),\n    key: source.id\n  }, /*#__PURE__*/React.createElement(DataSourceHolder, {\n    onUnlink: onUnlinkClick,\n    dataHolder: source,\n    onDelete: onDataSourceDelete,\n    key: source.id,\n    id: source.id,\n    index: getIndex(source.id)\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"link-button-container\"\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    content: i18n.t(\"Click to {{linkAction}}\", {\n      linkAction: hasLink ? i18n.t(\"unlink\") : i18n.t(\"link\")\n    })\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    onClick: onIconClick,\n    disabled: !linkable && !hasLink\n  }, (linkable || hasLink) && (hasLink ? /*#__PURE__*/React.createElement(UnlinkIcon, {\n    className: \"link-button\"\n  }) : /*#__PURE__*/React.createElement(LinkIcon, {\n    className: \"link-button\"\n  })))))));\n}\nLinkingContainer.propTypes = {\n  chunk: PropTypes.array.isRequired,\n  dataHolders: PropTypes.arrayOf(PropTypes.instanceOf(ScorecardIndicatorHolder)).isRequired,\n  onDataSourceDelete: PropTypes.func.isRequired,\n  onLink: PropTypes.func.isRequired,\n  onUnlink: PropTypes.func.isRequired\n};","import { findIndex, head, last } from \"lodash\";\nimport { useCallback } from \"react\";\nexport default function useLinkManage({\n  onLink,\n  onUnlink,\n  dataHolders,\n  chunk\n}) {\n  var _head, _head$dataSources;\n  const linkable = chunk.length > 1;\n  const hasLink = ((_head = head(chunk)) === null || _head === void 0 ? void 0 : (_head$dataSources = _head.dataSources) === null || _head$dataSources === void 0 ? void 0 : _head$dataSources.length) > 1;\n  const getIndex = useCallback(id => {\n    return findIndex(dataHolders, [\"id\", id]);\n  }, [dataHolders]);\n  const onLinkClick = () => {\n    var _head2, _last;\n    const indexOfMergedHolder = getIndex((_head2 = head(chunk)) === null || _head2 === void 0 ? void 0 : _head2.id);\n    const indexOfDeletedHolder = getIndex((_last = last(chunk)) === null || _last === void 0 ? void 0 : _last.id);\n    onLink(indexOfMergedHolder, indexOfDeletedHolder);\n  };\n  const onUnlinkClick = () => {\n    onUnlink(head(chunk).id);\n  };\n  const onIconClick = () => {\n    hasLink ? onUnlinkClick() : onLinkClick();\n  };\n  return {\n    linkable,\n    hasLink,\n    onIconClick,\n    onLinkClick,\n    onUnlinkClick,\n    getIndex\n  };\n}","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport i18n from \"@dhis2/d2-i18n\";\nimport { Button, colors, Tooltip } from \"@dhis2/ui\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport { ScorecardIndicatorGroup } from \"@scorecard/shared\";\nimport { isEmpty } from \"lodash\";\nimport PropTypes from \"prop-types\";\nimport React, { forwardRef, useRef, useState } from \"react\";\nimport { DragDropContext, Draggable, Droppable } from \"react-beautiful-dnd\";\nimport useDataGroupLayout from \"../../../../hooks/useDataGroupLayout\";\nimport useDataGroupManage from \"../../../../hooks/useDataGroupManage\";\nimport useDataHolders from \"../../../../hooks/useDataHolders\";\nimport DataSourceSelectorModal from \"../DataSourceSelectorModal\";\nimport { Accordion, AccordionDetails, AccordionSummary } from \"./Components/Accordions\";\nimport EditTitle from \"./Components/EditTitle\";\nimport GroupTitle from \"./Components/GroupTitle\";\nimport LinkingContainer from \"./Components/LinkingContainer\";\nfunction DataGroup({\n  handleAccordionChange,\n  expanded,\n  index,\n  onDelete,\n  error\n}, ref) {\n  const {\n    onDataSourceDelete,\n    onDataSourceAdd,\n    onTitleEditSubmit,\n    titleEditValue,\n    titleEditOpen,\n    setTitleEditOpen,\n    setTitleEditValue,\n    group\n  } = useDataGroupManage({\n    index,\n    expanded\n  });\n  const {\n    onLink,\n    onUnlink,\n    onDragEnd,\n    onExpand\n  } = useDataGroupLayout({\n    handleAccordionChange,\n    index\n  });\n  const {\n    dataHolderChunks,\n    selectedDataSourcesIds\n  } = useDataHolders({\n    index\n  });\n  const {\n    title,\n    id,\n    dataHolders\n  } = group !== null && group !== void 0 ? group : new ScorecardIndicatorGroup();\n  const [openAdd, setOpenAdd] = useState(false);\n  const summaryRef = useRef();\n  return /*#__PURE__*/React.createElement(Draggable, {\n    ref: ref,\n    index: index,\n    draggableId: id\n  }, provided => /*#__PURE__*/React.createElement(Accordion, {\n    innerRef: provided.innerRef,\n    onDoubleClick: event => event.stopPropagation(),\n    expandIcon: /*#__PURE__*/React.createElement(ExpandMoreIcon, null),\n    square: true,\n    expanded: expanded === id,\n    onChange: onExpand\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    content: i18n.t(\"Click to {{action}}, drag to rearrange\", {\n      action: expanded === id ? i18n.t(\"collapse\") : i18n.t(\"expand\")\n    })\n  }, /*#__PURE__*/React.createElement(AccordionSummary, _extends({\n    innerRef: summaryRef,\n    onClick: event => event.stopPropagation()\n  }, provided.draggableProps, provided.dragHandleProps, {\n    expandIcon: /*#__PURE__*/React.createElement(ExpandMoreIcon, {\n      className: \"expand-group-icon\",\n      dataTest: \"scorecard-group-expand\"\n    }),\n    \"aria-controls\": `${id}d-content`,\n    id: `${id}d--header`,\n    dataTest: \"scorecard-group-item\"\n  }), titleEditOpen ? /*#__PURE__*/React.createElement(EditTitle, {\n    onTitleEditSubmit: onTitleEditSubmit,\n    titleEditValue: titleEditValue,\n    onClose: setTitleEditOpen,\n    title: title,\n    setTitleEditValue: setTitleEditValue\n  }) : /*#__PURE__*/React.createElement(GroupTitle, {\n    title: title,\n    onDelete: onDelete,\n    setTitleEditOpen: setTitleEditOpen,\n    id: id,\n    error: error\n  }))), /*#__PURE__*/React.createElement(AccordionDetails, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column data-holders-area\"\n  }, isEmpty(dataHolders) ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column w-100 text-center center\",\n    style: {\n      height: 100\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: colors.grey600\n    }\n  }, i18n.t(\"Add a data source\"))) : /*#__PURE__*/React.createElement(DragDropContext, {\n    onDragEnd: onDragEnd\n  }, /*#__PURE__*/React.createElement(Droppable, {\n    droppableId: `${id}`\n  }, provided => /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: \"w-100 \"\n  }, provided.droppableProps, {\n    ref: provided.innerRef\n  }), dataHolderChunks === null || dataHolderChunks === void 0 ? void 0 : dataHolderChunks.map((chunk, i) => /*#__PURE__*/React.createElement(LinkingContainer, {\n    dataHolders: dataHolders,\n    onUnlink: onUnlink,\n    onLink: onLink,\n    chunk: chunk,\n    chunkIndex: i,\n    onDataSourceDelete: onDataSourceDelete,\n    key: `${i}-linking-container-${group === null || group === void 0 ? void 0 : group.id}`\n  })), provided.placeholder))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Button, {\n    className: \"scorecard-indicator-add\",\n    dataTest: \"scorecard-indicator-add\",\n    onClick: () => setOpenAdd(true),\n    icon: /*#__PURE__*/React.createElement(AddIcon, null)\n  }, i18n.t(\"Add Item\")))), openAdd && /*#__PURE__*/React.createElement(DataSourceSelectorModal, {\n    disabled: selectedDataSourcesIds,\n    onSelect: onDataSourceAdd,\n    onClose: () => setOpenAdd(false),\n    open: openAdd\n  }))));\n}\nexport default /*#__PURE__*/forwardRef(DataGroup);\nDataGroup.propTypes = {\n  index: PropTypes.number.isRequired,\n  error: PropTypes.object,\n  expanded: PropTypes.string,\n  handleAccordionChange: PropTypes.func,\n  onDelete: PropTypes.func\n};","import { ScorecardIndicator, ScorecardIndicatorGroup, ScorecardIndicatorHolder } from \"@scorecard/shared\";\nimport { OrgUnitLevels, ScorecardConfigDirtyState, ScorecardConfigEditState } from \"@scorecard/shared\";\nimport { generateLegendDefaults, uid } from \"@scorecard/shared\";\nimport { cloneDeep, filter, fromPairs, isEmpty } from \"lodash\";\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport { useRecoilState, useRecoilValue } from \"recoil\";\nexport default function useDataGroupManage({\n  index,\n  expanded\n}) {\n  const {\n    watch,\n    setValue\n  } = useFormContext();\n  const orgUnitLevels = useRecoilValue(OrgUnitLevels);\n  const targetOnLevels = useRecoilValue(ScorecardConfigDirtyState(\"targetOnLevels\"));\n  const [scorecardEditorState, setScorecardEditorState] = useRecoilState(ScorecardConfigEditState);\n  const path = useMemo(() => [\"dataSelection\", \"dataGroups\", index].join(\".\"), [index]);\n  const group = watch(path);\n  const setGroup = useCallback(updatedGroup => {\n    try {\n      setValue(path, updatedGroup);\n    } catch (e) {\n      console.error(e);\n    }\n  }, [path, setValue]);\n  const legendDefinitions = watch(\"legendDefinitions\");\n  const filteredLegendDefinitions = useMemo(() => filter(legendDefinitions, ({\n    isDefault\n  }) => !isDefault), [legendDefinitions]);\n  const {\n    title,\n    id,\n    dataHolders\n  } = group !== null && group !== void 0 ? group : new ScorecardIndicatorGroup();\n  const [titleEditOpen, setTitleEditOpen] = useState(false);\n  const [titleEditValue, setTitleEditValue] = useState(title);\n  const onDataSourceAdd = addedDataSources => {\n    //Assigns each of the selected indicator to its own holder\n    const newDataSources = addedDataSources === null || addedDataSources === void 0 ? void 0 : addedDataSources.map(dataSource => {\n      var _orgUnitLevels$map;\n      return new ScorecardIndicatorHolder({\n        id: uid(),\n        dataSources: [new ScorecardIndicator({\n          ...dataSource,\n          label: dataSource.displayName,\n          name: dataSource.displayName,\n          legends: targetOnLevels ? fromPairs([...((_orgUnitLevels$map = orgUnitLevels === null || orgUnitLevels === void 0 ? void 0 : orgUnitLevels.map(({\n            id\n          }) => [id, generateLegendDefaults(filteredLegendDefinitions, 100, true)])) !== null && _orgUnitLevels$map !== void 0 ? _orgUnitLevels$map : [])]) : generateLegendDefaults(filteredLegendDefinitions, 100, true)\n        })]\n      });\n    });\n    const updatedDataSources = [...dataHolders, ...newDataSources];\n    setGroup(ScorecardIndicatorGroup.set(group, \"dataHolders\", updatedDataSources));\n  };\n  const onDataSourceDelete = deletedDataSourceIndex => {\n    try {\n      if (scorecardEditorState.selectedDataHolderIndex === deletedDataSourceIndex) {\n        setScorecardEditorState(prevState => ({\n          ...prevState,\n          selectedDataHolderIndex: undefined\n        }));\n      }\n      const updatedDataSources = cloneDeep(dataHolders) || [];\n      if (!isEmpty(updatedDataSources)) {\n        updatedDataSources.splice(deletedDataSourceIndex, 1);\n        setGroup(ScorecardIndicatorGroup.set(group, \"dataHolders\", updatedDataSources));\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  };\n  useEffect(() => {\n    if (expanded === id) {\n      setScorecardEditorState(prevState => {\n        return {\n          ...prevState,\n          selectedDataHolderIndex: undefined,\n          selectedGroupIndex: index\n        };\n      });\n    }\n  }, [expanded]);\n  //Only want to run this effect when the expanded state changes, DO NOT ADD TO EFFECT DEPENDENCIES!\n\n  const onTitleEditSubmit = (_, event) => {\n    event.stopPropagation();\n    if (isEmpty(titleEditValue.trim())) {\n      setTitleEditValue(title);\n      setTitleEditOpen(false);\n    } else {\n      setGroup(ScorecardIndicatorGroup.set(group, \"title\", titleEditValue));\n      setTitleEditOpen(false);\n    }\n  };\n  return {\n    onDataSourceDelete,\n    onDataSourceAdd,\n    onTitleEditSubmit,\n    titleEditOpen,\n    titleEditValue,\n    setTitleEditValue,\n    setTitleEditOpen,\n    group\n  };\n}","import { ScorecardIndicatorGroup, ScorecardIndicatorHolder } from \"@scorecard/shared\";\nimport { ScorecardConfigEditState } from \"@scorecard/shared\";\nimport { updateListFromDragAndDrop } from \"@scorecard/shared\";\nimport { cloneDeep, find, findIndex, head, last, set } from \"lodash\";\nimport { useCallback, useMemo } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport { useRecoilCallback } from \"recoil\";\nexport default function useDataGroupLayout({\n  handleAccordionChange,\n  index\n}) {\n  const {\n    watch,\n    setValue\n  } = useFormContext();\n  const path = useMemo(() => [\"dataSelection\", \"dataGroups\", index].join(\".\"), [index]);\n  const group = watch(path);\n  const {\n    id,\n    dataHolders\n  } = group !== null && group !== void 0 ? group : new ScorecardIndicatorGroup();\n  const setGroup = useCallback(updatedGroup => {\n    setValue(path, updatedGroup);\n  }, [path, setValue]);\n  const onLink = useRecoilCallback(({\n    snapshot,\n    set\n  }) => (indexOfMergedHolder, indexOfTheDeletedHolder) => {\n    var _dataHolders$indexOfT, _snapshot$getLoadable;\n    const dataSourceToLink = head((_dataHolders$indexOfT = dataHolders[indexOfTheDeletedHolder]) === null || _dataHolders$indexOfT === void 0 ? void 0 : _dataHolders$indexOfT.dataSources);\n    const mergedHolder = ScorecardIndicatorHolder.linkDataSource(dataHolders[indexOfMergedHolder], dataSourceToLink);\n    const updatedHolderList = [...dataHolders];\n    updatedHolderList.splice(indexOfMergedHolder, 1, mergedHolder);\n    updatedHolderList.splice(indexOfTheDeletedHolder, 1);\n    const selectedDataHolderIndex = (_snapshot$getLoadable = snapshot.getLoadable(ScorecardConfigEditState).contents) === null || _snapshot$getLoadable === void 0 ? void 0 : _snapshot$getLoadable.selectedDataHolderIndex;\n    if (selectedDataHolderIndex === indexOfMergedHolder || selectedDataHolderIndex === indexOfTheDeletedHolder) {\n      set(ScorecardConfigEditState, prevState => {\n        return {\n          ...prevState,\n          selectedDataHolderIndex: indexOfMergedHolder\n        };\n      });\n    }\n    setGroup(ScorecardIndicatorGroup.set(group, \"dataHolders\", updatedHolderList));\n  }, [dataHolders, group, setGroup]);\n  const onUnlink = useRecoilCallback(({\n    set: setState\n  }) => id => {\n    var _dataHolderToModify$d;\n    //get the linked holder by id\n    const dataHolder = find(dataHolders, [\"id\", id]);\n    const dataHolderIndex = findIndex(dataHolders, [\"id\", id]);\n    //create a new holder for the last dataSource\n    const newDataHolder = new ScorecardIndicatorHolder({\n      dataSources: [last(dataHolder === null || dataHolder === void 0 ? void 0 : dataHolder.dataSources)]\n    });\n    const dataHolderToModify = cloneDeep(dataHolder);\n    const modifiedDataHolder = ScorecardIndicatorHolder.set(dataHolderToModify, \"dataSources\", dataHolderToModify === null || dataHolderToModify === void 0 ? void 0 : (_dataHolderToModify$d = dataHolderToModify.dataSources) === null || _dataHolderToModify$d === void 0 ? void 0 : _dataHolderToModify$d.splice(0, 1));\n    const updatedHolderList = [...dataHolders];\n    set(updatedHolderList, [dataHolderIndex], modifiedDataHolder);\n    updatedHolderList.splice(dataHolderIndex, 0, newDataHolder);\n    setGroup(ScorecardIndicatorGroup.set(group, \"dataHolders\", updatedHolderList));\n    setState(ScorecardConfigEditState, prevState => {\n      return {\n        ...prevState,\n        selectedDataHolderIndex: undefined\n      };\n    });\n  });\n  const onDragEnd = useRecoilCallback(({\n    set\n  }) => result => {\n    const {\n      destination,\n      source\n    } = result || {};\n    setGroup(ScorecardIndicatorGroup.set(group, \"dataHolders\", updateListFromDragAndDrop(group === null || group === void 0 ? void 0 : group.dataHolders, source === null || source === void 0 ? void 0 : source.index, destination === null || destination === void 0 ? void 0 : destination.index)));\n    set(ScorecardConfigEditState, prevState => {\n      if (prevState.selectedDataHolderIndex === (source === null || source === void 0 ? void 0 : source.index)) {\n        return {\n          ...prevState,\n          selectedDataHolderIndex: destination === null || destination === void 0 ? void 0 : destination.index\n        };\n      }\n      return prevState;\n    });\n  });\n  const onExpand = (event, newExpanded) => {\n    handleAccordionChange(id)(event, newExpanded);\n  };\n  return {\n    onLink,\n    onUnlink,\n    onDragEnd,\n    onExpand\n  };\n}","import { ScorecardIndicatorGroup } from \"@scorecard/shared\";\nimport { flattenDeep } from \"lodash\";\nimport { useMemo } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport { customChunk } from \"../Components/DataGroups/Components/DataGroup/utils\";\nexport default function useDataHolders({\n  index\n}) {\n  var _flattenDeep;\n  const {\n    watch\n  } = useFormContext();\n  const path = useMemo(() => [\"dataSelection\", \"dataGroups\", index].join(\".\"), [index]);\n  const group = watch(path);\n  const {\n    dataHolders\n  } = group !== null && group !== void 0 ? group : new ScorecardIndicatorGroup();\n  const dataHolderChunks = customChunk(dataHolders);\n  const selectedDataSourcesIds = (_flattenDeep = flattenDeep(dataHolders === null || dataHolders === void 0 ? void 0 : dataHolders.map(({\n    dataSources\n  }) => dataSources))) === null || _flattenDeep === void 0 ? void 0 : _flattenDeep.map(({\n    id\n  }) => id);\n  return {\n    dataHolderChunks,\n    selectedDataSourcesIds\n  };\n}","export function getChunkChildIndex(chunkSize = 2, chunkIndex, childIndex) {\n  return chunkSize * chunkIndex + childIndex;\n}\nexport function customChunk(list = []) {\n  const chunks = [];\n  const listToModify = [...list];\n  const i = 0;\n  while (listToModify.length > 0) {\n    var _listToModify$i, _listToModify$i2, _listToModify$i2$data, _listToModify, _listToModify$dataSou;\n    if (((_listToModify$i = listToModify[i]) === null || _listToModify$i === void 0 ? void 0 : _listToModify$i.dataSources) > 1) {\n      chunks.push(listToModify.splice(i, 1));\n      continue;\n    }\n    if (((_listToModify$i2 = listToModify[i]) === null || _listToModify$i2 === void 0 ? void 0 : (_listToModify$i2$data = _listToModify$i2.dataSources) === null || _listToModify$i2$data === void 0 ? void 0 : _listToModify$i2$data.length) < 2 && ((_listToModify = listToModify[i + 1]) === null || _listToModify === void 0 ? void 0 : (_listToModify$dataSou = _listToModify.dataSources) === null || _listToModify$dataSou === void 0 ? void 0 : _listToModify$dataSou.length) < 2) {\n      chunks.push(listToModify.splice(i, 2));\n      continue;\n    }\n    chunks.push(listToModify.splice(i, 1));\n  }\n  return chunks;\n}","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport i18n from \"@dhis2/d2-i18n\";\nimport { DataSelection } from \"@scorecard/shared\";\nimport { ScorecardConfigEditState } from \"@scorecard/shared\";\nimport { filter, findIndex, isEmpty, last, remove, set } from \"lodash\";\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { Droppable } from \"react-beautiful-dnd\";\nimport { Controller, useFormContext } from \"react-hook-form\";\nimport { useRecoilValue, useResetRecoilState } from \"recoil\";\nimport { SearchedGroupsState } from \"../../DataGroupArea\";\nimport DataGroup from \"./Components/DataGroup\";\nexport default function DataGroups() {\n  var _last;\n  const {\n    setValue,\n    watch\n  } = useFormContext();\n  const dataSelection = watch(\"dataSelection\");\n  const searchedGroups = useRecoilValue(SearchedGroupsState);\n  const updateDataSelection = useCallback(updatedDataSelection => {\n    setValue(\"dataSelection\", updatedDataSelection);\n  }, [setValue]);\n  const resetEditState = useResetRecoilState(ScorecardConfigEditState);\n  const {\n    dataGroups: groups\n  } = dataSelection || new DataSelection();\n  const [expanded, setExpanded] = useState((_last = last(groups)) === null || _last === void 0 ? void 0 : _last.id);\n  const handleAccordionChange = panel => (event, newExpanded) => {\n    setExpanded(newExpanded ? panel : false);\n  };\n  const onDeleteGroup = id => {\n    const updatedGroupList = [...groups];\n    remove(updatedGroupList, [\"id\", id]);\n    updateDataSelection(DataSelection.set(dataSelection, \"dataGroups\", updatedGroupList));\n    resetEditState();\n  };\n  const onGroupUpdate = (index, newGroupData) => {\n    const updatedGroupList = [...groups];\n    set(updatedGroupList, [index], newGroupData);\n    updateDataSelection(DataSelection.set(dataSelection, \"dataGroups\", updatedGroupList));\n  };\n  const filteredGroups = useMemo(() => {\n    if (isEmpty(searchedGroups)) {\n      return groups;\n    } else {\n      return filter(groups, ({\n        id\n      }) => searchedGroups.includes(id));\n    }\n  }, [searchedGroups, groups]);\n  useEffect(() => {\n    var _last2;\n    setExpanded((_last2 = last(filteredGroups)) === null || _last2 === void 0 ? void 0 : _last2.id);\n  }, [filteredGroups, filteredGroups.length]);\n  return /*#__PURE__*/React.createElement(Droppable, {\n    droppableId: \"group-area\"\n  }, provided => /*#__PURE__*/React.createElement(\"div\", _extends({}, provided.droppableProps, {\n    ref: provided.innerRef\n  }), /*#__PURE__*/React.createElement(\"div\", null, filteredGroups === null || filteredGroups === void 0 ? void 0 : filteredGroups.map(group => {\n    const groupIndex = findIndex(groups, [\"id\", group.id]);\n    return /*#__PURE__*/React.createElement(Controller, {\n      key: group.id,\n      id: group.id,\n      rules: {\n        validate: {\n          isNotEmpty: value => !isEmpty(value === null || value === void 0 ? void 0 : value.dataHolders) || i18n.t(\"Please select at least one data source for this group\")\n        }\n      },\n      name: `dataSelection.dataGroups.${groupIndex}`,\n      render: ({\n        field,\n        fieldState\n      }) => /*#__PURE__*/React.createElement(DataGroup, _extends({}, field, {\n        error: fieldState.error,\n        onGroupUpdate: onGroupUpdate,\n        onDelete: onDeleteGroup,\n        index: groupIndex,\n        group: group,\n        expanded: expanded,\n        handleAccordionChange: handleAccordionChange\n      }))\n    });\n  }), provided.placeholder)));\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { Button, Input } from \"@dhis2/ui\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport { DataSelection, ScorecardConfigEditState, updateListFromDragAndDrop } from \"@scorecard/shared\";\nimport { debounce, find } from \"lodash\";\nimport PropTypes from \"prop-types\";\nimport React, { useRef, useState } from \"react\";\nimport { DragDropContext } from \"react-beautiful-dnd\";\nimport { useFormContext } from \"react-hook-form\";\nimport { atom, useRecoilCallback, useSetRecoilState } from \"recoil\";\nimport DataGroups from \"./Components/DataGroups\";\nexport const SearchedGroupsState = atom({\n  key: \"dataSelectionFilterAtom\",\n  default: []\n});\nexport default function DataGroupArea({\n  onGroupAdd\n}) {\n  const {\n    setValue,\n    watch\n  } = useFormContext();\n  const dataSelection = watch(\"dataSelection\");\n  const [keyword, setKeyword] = useState(\"\");\n  const setSearchedGroups = useSetRecoilState(SearchedGroupsState);\n  const onSearch = useRef(debounce(keyword => {\n    setSearchedGroups(() => {\n      if (keyword) {\n        var _dataSelection$dataGr;\n        return dataSelection === null || dataSelection === void 0 ? void 0 : (_dataSelection$dataGr = dataSelection.dataGroups.filter(dataHolderGroup => {\n          return find(dataHolderGroup === null || dataHolderGroup === void 0 ? void 0 : dataHolderGroup.dataHolders, dataHolderIndicator => {\n            return find(dataHolderIndicator === null || dataHolderIndicator === void 0 ? void 0 : dataHolderIndicator.dataSources, dataHolderIndicatorSelections => {\n              const searchIndex = `${dataHolderIndicatorSelections.name} ${dataHolderIndicatorSelections.label}`.toLowerCase();\n              return searchIndex.match(new RegExp(keyword.toLowerCase()));\n            });\n          });\n        })) === null || _dataSelection$dataGr === void 0 ? void 0 : _dataSelection$dataGr.map(({\n          id\n        }) => id);\n      } else {\n        return [];\n      }\n    });\n  }, 500));\n  const onDragEnd = useRecoilCallback(({\n    set\n  }) => result => {\n    const {\n      destination,\n      source\n    } = result !== null && result !== void 0 ? result : {};\n    setValue(\"dataSelection\", DataSelection.set(dataSelection, \"dataGroups\", [...updateListFromDragAndDrop(dataSelection === null || dataSelection === void 0 ? void 0 : dataSelection.dataGroups, source === null || source === void 0 ? void 0 : source.index, destination === null || destination === void 0 ? void 0 : destination.index)]));\n    set(ScorecardConfigEditState, prevState => {\n      if (prevState.selectedGroupIndex === (source === null || source === void 0 ? void 0 : source.index)) {\n        return {\n          ...prevState,\n          selectedGroupIndex: destination === null || destination === void 0 ? void 0 : destination.index\n        };\n      }\n      return prevState;\n    });\n  }, [dataSelection, setValue]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column h-100\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-16\"\n  }, /*#__PURE__*/React.createElement(Input, {\n    value: keyword,\n    name: \"\",\n    onChange: ({\n      value\n    }) => {\n      setKeyword(value);\n      if (value !== \"\" && value !== undefined) {\n        onSearch.current(value);\n      } else {\n        setSearchedGroups([]);\n      }\n    },\n    placeholder: i18n.t(\"Search for Indicator\")\n  })), /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"pl-16\"\n  }, i18n.t(\"Groups\")), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      maxHeight: '60vh',\n      overflowY: 'auto',\n      flex: 1\n    }\n  }, /*#__PURE__*/React.createElement(DragDropContext, {\n    onDragEnd: onDragEnd\n  }, /*#__PURE__*/React.createElement(DataGroups, null))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-8 column\",\n    style: {\n      alignItems: \"start\"\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: onGroupAdd,\n    icon: /*#__PURE__*/React.createElement(AddIcon, null),\n    dataTest: \"scocecard-add-group-button\",\n    className: \"scorecard-add-group-button\"\n  }, i18n.t(\"Add Group\"))));\n}\nDataGroupArea.propTypes = {\n  onGroupAdd: PropTypes.func.isRequired\n};","import { ScorecardIndicatorGroup } from \"@scorecard/shared\";\nimport { generateLegendDefaults } from \"@scorecard/shared\";\nimport { fromPairs, set } from \"lodash\";\nexport function generateNewGroupData(groups) {\n  return new ScorecardIndicatorGroup({\n    title: `Group ${(groups === null || groups === void 0 ? void 0 : groups.length) + 1 || 1}`\n  });\n}\nexport function updateLegendsOnDataGroups(dataGroups, {\n  targetOnLevels,\n  filteredLegendDefinitions,\n  orgUnitLevels\n}) {\n  const newValue = targetOnLevels ? fromPairs([...(orgUnitLevels === null || orgUnitLevels === void 0 ? void 0 : orgUnitLevels.map(({\n    id\n  }) => [id, generateLegendDefaults(filteredLegendDefinitions, 100, true)]))]) : generateLegendDefaults(filteredLegendDefinitions, 100, true);\n  let updatedGroups = [...dataGroups];\n  for (const groupIndex in updatedGroups) {\n    for (const holderIndex in (_updatedGroups$groupI = updatedGroups[groupIndex]) === null || _updatedGroups$groupI === void 0 ? void 0 : _updatedGroups$groupI.dataHolders) {\n      var _updatedGroups$groupI;\n      for (const sourceIndex in (_updatedGroups$groupI2 = updatedGroups[groupIndex]) === null || _updatedGroups$groupI2 === void 0 ? void 0 : (_updatedGroups$groupI3 = _updatedGroups$groupI2.dataHolders) === null || _updatedGroups$groupI3 === void 0 ? void 0 : (_updatedGroups$groupI4 = _updatedGroups$groupI3[holderIndex]) === null || _updatedGroups$groupI4 === void 0 ? void 0 : _updatedGroups$groupI4.dataSources) {\n        var _updatedGroups$groupI2, _updatedGroups$groupI3, _updatedGroups$groupI4;\n        updatedGroups = set(updatedGroups, [groupIndex, \"dataHolders\", holderIndex, \"dataSources\", sourceIndex, \"legends\"], newValue);\n      }\n    }\n  }\n  return updatedGroups;\n}","// extracted by mini-css-extract-plugin\nexport default {\"step\":\"ScorecardManagement_step__A9+fv\",\"edit-container\":\"ScorecardManagement_edit-container__sZk39\"};","import { useCallback } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport { resetLegends } from \"../../../utils/utils\";\nexport function useResetLegends() {\n  const {\n    watch,\n    setValue\n  } = useFormContext();\n  const dataGroups = watch(\"dataSelection.dataGroups\");\n  const shouldVerify = dataGroups.length > 0;\n  const onResetLegends = useCallback(updatedDefinitions => {\n    const newGroups = resetLegends(dataGroups, updatedDefinitions);\n    setValue(\"dataSelection.dataGroups\", newGroups);\n  }, [dataGroups, setValue]);\n  return {\n    onResetLegends,\n    shouldVerify\n  };\n}","import i18n from '@dhis2/d2-i18n';\nimport { RHFDHIS2FormField } from \"@hisptz/dhis2-ui\";\nimport React from \"react\";\nimport { useResetLegends } from \"./hooks/useResetLegends\";\nexport default function LegendDefinitionFormField() {\n  const {\n    shouldVerify,\n    onResetLegends\n  } = useResetLegends();\n  return /*#__PURE__*/React.createElement(RHFDHIS2FormField, {\n    label: i18n.t(\"Legend Definitions\"),\n    onResetLegends: onResetLegends,\n    shouldVerify: shouldVerify,\n    valueType: \"LEGEND_DEFINITIONS\",\n    name: \"legendDefinitions\",\n    mandatory: true\n  });\n}","import i18n from '@dhis2/d2-i18n';\nimport { CustomSelectField } from \"@hisptz/dhis2-ui\";\nimport { PeriodTypeCategory, PeriodUtility } from \"@hisptz/dhis2-utils\";\nimport { find, head } from \"lodash\";\nimport React, { useMemo, useState } from \"react\";\nimport { Controller, useFormContext, useWatch } from \"react-hook-form\";\nexport default function PeriodSelector() {\n  const {\n    getValues\n  } = useFormContext();\n  const defaultYear = useMemo(() => {\n    const period = head(getValues('periodSelection.periods'));\n    if (period) {\n      return PeriodUtility.getPeriodById(period === null || period === void 0 ? void 0 : period.id).start.year;\n    }\n    return new Date().getFullYear();\n  }, [getValues]);\n  const [year, setYear] = useState(defaultYear !== null && defaultYear !== void 0 ? defaultYear : new Date().getFullYear());\n  const periodType = useWatch({\n    name: \"periodType\"\n  });\n  const options = useMemo(() => {\n    var _type$periods;\n    if (!periodType) {\n      return [];\n    }\n    const utility = PeriodUtility.fromObject({\n      year,\n      category: PeriodTypeCategory.FIXED\n    });\n    const type = utility.getPeriodType(periodType.toUpperCase());\n    return type === null || type === void 0 ? void 0 : (_type$periods = type.periods) === null || _type$periods === void 0 ? void 0 : _type$periods.map(({\n      id,\n      name\n    }) => ({\n      name: name,\n      code: id\n    }));\n  }, [periodType, year]);\n  const years = useMemo(() => new Array(10).fill(\"\").map((_, index) => ({\n    code: (new Date().getFullYear() - index).toString(),\n    name: new Date().getFullYear() - index\n  })).reverse(), []);\n  return /*#__PURE__*/React.createElement(Controller, {\n    render: ({\n      field\n    }) => {\n      var _head, _field$value;\n      const onChange = code => {\n        const period = PeriodUtility.getPeriodById(code);\n        field.onChange({\n          periods: [{\n            name: period.name,\n            id: period === null || period === void 0 ? void 0 : period.id\n          }]\n        });\n      };\n      const valueId = (_head = head(field === null || field === void 0 ? void 0 : (_field$value = field.value) === null || _field$value === void 0 ? void 0 : _field$value.periods)) === null || _head === void 0 ? void 0 : _head.id;\n      const value = find(options, ['code', valueId]) ? valueId : undefined;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          display: \"flex\",\n          gap: 16,\n          width: \"100%\"\n        }\n      }, /*#__PURE__*/React.createElement(CustomSelectField, {\n        fullWidth: true,\n        label: i18n.t(\"Year\"),\n        value: year.toString(),\n        optionSet: {\n          options: years\n        },\n        name: \"year\",\n        onChange: setYear\n      }), /*#__PURE__*/React.createElement(CustomSelectField, {\n        fullWidth: true,\n        label: i18n.t(\"Period\"),\n        value: value,\n        optionSet: {\n          options\n        },\n        name: \"periodSelection\",\n        onChange: onChange\n      }));\n    },\n    name: \"periodSelection\"\n  });\n}","// extracted by mini-css-extract-plugin\nexport default {\"select-header\":\"PeriodTypeSelector_select-header__c8O-e\"};","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { SingleSelectField, SingleSelectOption } from '@dhis2/ui';\nimport { PeriodTypeCategory, PeriodUtility } from \"@hisptz/dhis2-utils\";\nimport PropTypes from 'prop-types';\nimport React, { useMemo } from \"react\";\nimport { Controller } from \"react-hook-form\";\nimport classes from \"../styles/PeriodTypeSelector.module.css\";\nexport default function PeriodTypeSelector({\n  label,\n  name\n}) {\n  const fixedPeriodTypes = useMemo(() => new PeriodUtility().setCategory(PeriodTypeCategory.FIXED).periodTypes, []);\n  const relativePeriodTypes = useMemo(() => new PeriodUtility().setCategory(PeriodTypeCategory.RELATIVE).periodTypes, []);\n  return /*#__PURE__*/React.createElement(Controller, {\n    name: name,\n    rules: {\n      required: i18n.t(\"Period type is required\")\n    },\n    render: ({\n      field,\n      fieldState\n    }) => {\n      var _fieldState$error;\n      return /*#__PURE__*/React.createElement(SingleSelectField, _extends({}, field, {\n        label: label,\n        required: true,\n        filterable: true,\n        selected: field.value,\n        onChange: ({\n          selected\n        }) => field.onChange(selected),\n        validationText: (_fieldState$error = fieldState.error) === null || _fieldState$error === void 0 ? void 0 : _fieldState$error.message,\n        error: !!fieldState.error\n      }), /*#__PURE__*/React.createElement(SingleSelectOption, {\n        value: \"disabled\",\n        disabled: true,\n        className: classes['select-header'],\n        label: i18n.t(\"Fixed Periods\")\n      }), fixedPeriodTypes === null || fixedPeriodTypes === void 0 ? void 0 : fixedPeriodTypes.map(periodType => {\n        return /*#__PURE__*/React.createElement(SingleSelectOption, {\n          key: periodType.id,\n          value: periodType.id,\n          label: periodType.config.name\n        });\n      }), /*#__PURE__*/React.createElement(SingleSelectOption, {\n        value: \"disabled\",\n        disabled: true,\n        className: classes['select-header'],\n        label: i18n.t(\"Relative Periods\")\n      }), relativePeriodTypes === null || relativePeriodTypes === void 0 ? void 0 : relativePeriodTypes.map(periodType => {\n        return /*#__PURE__*/React.createElement(SingleSelectOption, {\n          key: periodType.id,\n          value: periodType.id,\n          label: periodType.config.name\n        });\n      }));\n    }\n  });\n}\nPeriodTypeSelector.propTypes = {\n  label: PropTypes.string,\n  name: PropTypes.string\n};","import { useDataEngine } from \"@dhis2/app-runtime\";\nimport i18n from \"@dhis2/d2-i18n\";\nimport { RHFDHIS2FormField as RHFCustomInput } from \"@hisptz/dhis2-ui\";\nimport { DHIS2ValueTypes } from \"@scorecard/shared\";\nimport React from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport \"../../../ScorecardManagement.module.css\";\nimport { titleDoesNotExist } from \"../utils/utils\";\nimport LegendDefinitionFormField from \"./LegendDefinitionFormField\";\nimport PeriodSelector from \"./PeriodSelector\";\nimport PeriodTypeSelector from \"./PeriodTypeSelector\";\nexport default function GeneralForm() {\n  const {\n    id\n  } = useParams();\n  const engine = useDataEngine();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      gap: 16,\n      display: \"flex\",\n      flexDirection: \"column\"\n    },\n    className: \"col-12\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      gap: 16\n    },\n    className: \"col-12 general-settings\"\n  }, /*#__PURE__*/React.createElement(RHFCustomInput, {\n    valueType: DHIS2ValueTypes.TEXT.name,\n    name: \"title\",\n    label: i18n.t(\"Title\"),\n    required: true,\n    validations: {\n      required: i18n.t(\"Title is required\"),\n      validate: async value => {\n        return (await titleDoesNotExist(engine, id, value)) || i18n.t(`A scorecard with the title '{{value}}' already exists. Please select another title`, {\n          value\n        });\n      }\n    }\n  }), /*#__PURE__*/React.createElement(RHFCustomInput, {\n    valueType: DHIS2ValueTypes.TEXT.name,\n    name: \"subtitle\",\n    label: i18n.t(\"Subtitle\"),\n    max: \"120\"\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"description-settings\"\n  }, /*#__PURE__*/React.createElement(RHFCustomInput, {\n    name: \"description\",\n    valueType: DHIS2ValueTypes.LONG_TEXT.name,\n    label: i18n.t(\"Description\")\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row align-items-center\",\n    style: {\n      gap: 24\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4 period-type-settings\"\n  }, /*#__PURE__*/React.createElement(PeriodTypeSelector, {\n    label: i18n.t(\"Period Type\"),\n    name: \"periodType\"\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-1 period-settings w-100\"\n  }, /*#__PURE__*/React.createElement(PeriodSelector, null))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"custom-header-settings\"\n  }, /*#__PURE__*/React.createElement(RHFCustomInput, {\n    name: \"customHeader\",\n    label: i18n.t(\"Custom Header\"),\n    valueType: DHIS2ValueTypes.RICH_TEXT.name\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-6 col-xl-4 legend-definitions-settings gap-8\"\n  }, /*#__PURE__*/React.createElement(LegendDefinitionFormField, null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-6 col-xl-4 additional-labels-settings\"\n  }, /*#__PURE__*/React.createElement(RHFCustomInput, {\n    addable: true,\n    deletable: true,\n    name: \"additionalLabels\",\n    valueType: DHIS2ValueTypes.MULTIPLE_FIELDS.name,\n    label: i18n.t(\"Additional Labels (Tags)\"),\n    multipleField: {\n      name: \"label\",\n      valueType: DHIS2ValueTypes.TEXT.name\n    }\n  })));\n}\nGeneralForm.propTypes = {};","import { Help } from \"@scorecard/shared\";\nimport { INDICATOR_CONFIGURATION_STEPS } from \"@scorecard/shared\";\nimport { ScorecardConfigEditState } from \"@scorecard/shared\";\nimport React from \"react\";\nimport { useRecoilValue } from \"recoil\";\nimport DataSourceConfigurationForm from \"../../DataSourceConfigurationForm\";\nexport default function HighlightedDataSourceConfigurationForm() {\n  var _useRecoilValue;\n  const {\n    selectedHighlightedIndicatorIndex\n  } = (_useRecoilValue = useRecoilValue(ScorecardConfigEditState)) !== null && _useRecoilValue !== void 0 ? _useRecoilValue : {};\n  const path = `highlightedIndicators.${selectedHighlightedIndicatorIndex}`;\n  return !isNaN(selectedHighlightedIndicatorIndex) ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-bordered\"\n  }, /*#__PURE__*/React.createElement(Help, {\n    helpSteps: INDICATOR_CONFIGURATION_STEPS\n  }), /*#__PURE__*/React.createElement(DataSourceConfigurationForm, {\n    path: path\n  })) : null;\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { Button, DataTable, DataTableCell, DataTableColumnHeader, DataTableHead, DataTableRow, TableBody } from \"@dhis2/ui\";\nimport { Help } from \"@scorecard/shared\";\nimport { HIGHLIGHTED_TABLE_HELP_STEPS } from \"@scorecard/shared\";\nimport { ScorecardConfigEditState } from \"@scorecard/shared\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport { cloneDeep, findIndex, get, isEmpty, remove } from \"lodash\";\nimport React, { Fragment, useCallback } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport { useRecoilState } from \"recoil\";\nconst columns = [{\n  label: \"Name\",\n  path: \"displayName\"\n}, {\n  label: \"Label\",\n  path: \"label\"\n}];\nexport default function HighlightedIndicatorsTable() {\n  const {\n    watch,\n    setValue,\n    trigger\n  } = useFormContext();\n  const highlightedIndicators = watch(\"highlightedIndicators\");\n  const setHighlightedIndicators = useCallback(highlightedIndicators => {\n    setValue(\"highlightedIndicators\", highlightedIndicators);\n  }, [setValue]);\n  const [scorecardEditState, setScorecardEditorState] = useRecoilState(ScorecardConfigEditState);\n  const onRowClick = async index => {\n    if (await trigger()) {\n      setScorecardEditorState(prevState => ({\n        ...prevState,\n        selectedHighlightedIndicatorIndex: index\n      }));\n    }\n  };\n  const onRemove = useCallback(id => {\n    if (findIndex(highlightedIndicators, [\"id\", id]) === scorecardEditState.selectedHighlightedIndicatorIndex) {\n      setScorecardEditorState(prevState => ({\n        ...prevState,\n        selectedHighlightedIndicatorIndex: undefined\n      }));\n    }\n    const updatedList = cloneDeep(highlightedIndicators);\n    remove(updatedList, [\"id\", id]);\n    setHighlightedIndicators(updatedList);\n  }, [highlightedIndicators, scorecardEditState.selectedHighlightedIndicatorIndex, setHighlightedIndicators, setScorecardEditorState]);\n  return !isEmpty(highlightedIndicators) ? /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(Help, {\n    helpSteps: HIGHLIGHTED_TABLE_HELP_STEPS\n  }), /*#__PURE__*/React.createElement(DataTable, {\n    fixed: true,\n    scrollHeight: \"75vh\"\n  }, /*#__PURE__*/React.createElement(DataTableHead, null, /*#__PURE__*/React.createElement(DataTableRow, null, columns === null || columns === void 0 ? void 0 : columns.map(({\n    label,\n    path\n  }) => /*#__PURE__*/React.createElement(DataTableColumnHeader, {\n    fixed: true,\n    top: \"0\",\n    key: `${path}-column`\n  }, label)), /*#__PURE__*/React.createElement(DataTableColumnHeader, {\n    fixed: true,\n    top: \"0\"\n  }))), /*#__PURE__*/React.createElement(TableBody, null, highlightedIndicators === null || highlightedIndicators === void 0 ? void 0 : highlightedIndicators.map((data, index) => /*#__PURE__*/React.createElement(DataTableRow, {\n    selected: (scorecardEditState === null || scorecardEditState === void 0 ? void 0 : scorecardEditState.selectedHighlightedIndicatorIndex) === index,\n    key: `${data === null || data === void 0 ? void 0 : data.id}`\n  }, columns === null || columns === void 0 ? void 0 : columns.map(({\n    path\n  }) => /*#__PURE__*/React.createElement(DataTableCell, {\n    onClick: () => onRowClick(index),\n    key: `${data === null || data === void 0 ? void 0 : data.id}-${path}`\n  }, get(data, path))), /*#__PURE__*/React.createElement(DataTableCell, {\n    align: \"center\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: (value, e) => {\n      e.stopPropagation();\n      onRemove(data === null || data === void 0 ? void 0 : data.id);\n    },\n    icon: /*#__PURE__*/React.createElement(DeleteIcon, null)\n  }, i18n.t(\"Delete\")))))))) : null;\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { DATA_CONFIGURATION_HELP_STEPS, GENERAL_HELP_STEPS, scorecardManagementTooltips } from \"@scorecard/shared\";\nimport { findIndex } from \"lodash\";\nimport { atom, selector } from \"recoil\";\nimport AccessScorecardForm from \"../Components/Access\";\nimport DataConfigurationScorecardForm from \"../Components/DataConfiguration\";\nimport GeneralScorecardForm from \"../Components/General\";\nimport HighlightedIndicatorsScorecardForm from \"../Components/HighlightedIndicators\";\nimport OptionsScorecardForm from \"../Components/Options\";\nexport const steps = [{\n  label: i18n.t(\"General\"),\n  component: GeneralScorecardForm,\n  helpSteps: GENERAL_HELP_STEPS,\n  tooltip: scorecardManagementTooltips[0]['content'],\n  id: \"general\"\n}, {\n  label: i18n.t(\"Data Configuration\"),\n  component: DataConfigurationScorecardForm,\n  helpSteps: DATA_CONFIGURATION_HELP_STEPS,\n  tooltip: scorecardManagementTooltips[1]['content'],\n  id: \"dataConfiguration\"\n}, {\n  label: i18n.t(\"Highlighted Indicators\"),\n  component: HighlightedIndicatorsScorecardForm,\n  helpSteps: [],\n  tooltip: scorecardManagementTooltips[2]['content'],\n  id: \"highlightedIndicators\"\n}, {\n  label: i18n.t(\"Access\"),\n  component: AccessScorecardForm,\n  helpSteps: [],\n  tooltip: scorecardManagementTooltips[3]['content'],\n  id: \"access\"\n}, {\n  label: i18n.t(\"Options\"),\n  component: OptionsScorecardForm,\n  helpSteps: [],\n  tooltip: scorecardManagementTooltips[4]['content'],\n  id: \"options\"\n}];\nexport const ActiveStepState = atom({\n  key: \"activeStepState\",\n  default: steps[0]\n});\nexport const ActiveStepIndexState = selector({\n  key: \"activeStepIndexState\",\n  get: ({\n    get\n  }) => {\n    const activeStep = get(ActiveStepState);\n    return findIndex(steps, step => step.id === activeStep.id);\n  }\n});","import { Help } from \"@scorecard/shared\";\nimport { GENERAL_HELP_STEPS } from \"@scorecard/shared\";\nimport React from \"react\";\nimport GeneralForm from \"./Components/GeneralForm\";\nexport default function GeneralScorecardForm() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\"\n  }, /*#__PURE__*/React.createElement(Help, {\n    helpSteps: GENERAL_HELP_STEPS\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column space-between\"\n  }, /*#__PURE__*/React.createElement(GeneralForm, null)));\n}","import { ContainerLoader, Help } from \"@scorecard/shared\";\nimport { DataSelection } from \"@scorecard/shared\";\nimport { isEmpty } from \"lodash\";\nimport React, { Suspense, useCallback } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport DataSourceConfiguration from \"./Components/DataGroups/Components/DataSourceConfiguration\";\nimport EmptyDataGroups from \"./Components/EmptyDataGroups\";\nimport Instructions from \"./Components/Instructions\";\nimport PreviewScorecardTable from \"./Components/PreviewScorecardTable\";\nimport DataGroupArea from \"./DataGroupArea\";\nimport useHelp from \"./hooks/useHelp\";\nimport { generateNewGroupData } from \"./utils\";\nexport default function DataConfigurationScorecardForm() {\n  const {\n    setValue,\n    watch,\n    register\n  } = useFormContext();\n  register(\"dataSelection\");\n  const dataSelection = watch(\"dataSelection\");\n  const updateDataSelection = useCallback(updatedDataSelection => {\n    setValue(\"dataSelection\", updatedDataSelection);\n  }, [setValue]);\n  const {\n    dataGroups: groups\n  } = dataSelection !== null && dataSelection !== void 0 ? dataSelection : new DataSelection();\n  const helpSteps = useHelp(groups);\n  const onGroupAdd = useCallback(() => {\n    var _dataSelection$dataGr;\n    updateDataSelection(DataSelection.set(dataSelection, \"dataGroups\", [...((_dataSelection$dataGr = dataSelection === null || dataSelection === void 0 ? void 0 : dataSelection.dataGroups) !== null && _dataSelection$dataGr !== void 0 ? _dataSelection$dataGr : []), generateNewGroupData(groups)]));\n  }, [dataSelection, groups, updateDataSelection]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    style: {\n      height: \"100%\"\n    }\n  }, /*#__PURE__*/React.createElement(Help, {\n    helpSteps: helpSteps\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4 col-sm-6 p-16 groups-configuration-area\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \" container-bordered column\",\n    style: {\n      minHeight: \"100%\",\n      height: '100%'\n    }\n  }, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(ContainerLoader, null)\n  }, isEmpty(groups) ? /*#__PURE__*/React.createElement(EmptyDataGroups, {\n    onGroupAdd: onGroupAdd\n  }) : /*#__PURE__*/React.createElement(DataGroupArea, {\n    onGroupAdd: onGroupAdd\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-8 p-16 h-100\"\n  }, !isEmpty(groups) && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row pb-16\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column preview-table-area\"\n  }, /*#__PURE__*/React.createElement(PreviewScorecardTable, null))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column h-100\"\n  }, isEmpty(groups) ? /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      margin: \"auto\"\n    }\n  }, /*#__PURE__*/React.createElement(Instructions, null)) : /*#__PURE__*/React.createElement(DataSourceConfiguration, null))));\n}","import { GROUPS_CONFIG_HELP_STEPS, INDICATOR_CONFIGURATION_STEPS, INDICATOR_SETUP_HELP_STEPS, INTRODUCTION_HELP_STEPS, NO_GROUPS_HELP_STEPS, NO_INDICATORS_HELP_STEPS, PREVIEW_TABLE_HELP_STEPS } from \"@scorecard/shared\";\nimport { ScorecardConfigEditState } from \"@scorecard/shared\";\nimport { getHoldersFromGroups } from \"@scorecard/shared\";\nimport { isEmpty, uniqBy } from \"lodash\";\nimport { useEffect, useState } from \"react\";\nimport { useRecoilValue } from \"recoil\";\nexport default function useHelp(groups) {\n  const [helpSteps, setHelpSteps] = useState(INTRODUCTION_HELP_STEPS);\n  const {\n    selectedDataHolderIndex\n  } = useRecoilValue(ScorecardConfigEditState);\n  useEffect(() => {\n    setHelpSteps(prevSteps => {\n      let steps = [...prevSteps];\n      if (!isEmpty(groups)) {\n        steps = [...INTRODUCTION_HELP_STEPS, ...GROUPS_CONFIG_HELP_STEPS, ...PREVIEW_TABLE_HELP_STEPS];\n      }\n      if (isEmpty(groups)) {\n        steps = [...INTRODUCTION_HELP_STEPS, ...NO_GROUPS_HELP_STEPS];\n      }\n      if (!isEmpty(groups) && isEmpty(getHoldersFromGroups(groups))) {\n        steps = [...steps, ...NO_INDICATORS_HELP_STEPS];\n      }\n      if (!isEmpty(getHoldersFromGroups(groups))) {\n        steps = [...steps, ...INDICATOR_SETUP_HELP_STEPS];\n      }\n      if (!isNaN(selectedDataHolderIndex)) {\n        steps = [...steps, ...INDICATOR_CONFIGURATION_STEPS];\n      }\n      return uniqBy(steps, \"element\");\n    });\n  }, [groups, selectedDataHolderIndex]);\n  return helpSteps;\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { Button } from \"@dhis2/ui\";\nimport { Help } from \"@scorecard/shared\";\nimport { HIGHLIGHTED_INDICATOR_HELP_STEPS } from \"@scorecard/shared\";\nimport { ScorecardIndicator } from \"@scorecard/shared\";\nimport { ScorecardConfigEditState } from \"@scorecard/shared\";\nimport { generateLegendDefaults } from \"@scorecard/shared\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport { isEmpty } from \"lodash\";\nimport React, { Fragment, useCallback, useState } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport { useSetRecoilState } from \"recoil\";\nimport DataSourceSelectorModal from \"../DataConfiguration/Components/DataGroups/Components/DataSourceSelectorModal\";\nimport { getNonDefaultLegendDefinitions } from \"../General/utils/utils\";\nimport HighlightedDataSourceConfigurationForm from \"./HighlightedDataSourceConfigurationForm\";\nimport HighlightedIndicatorsTable from \"./Table\";\nexport default function HighlightedIndicatorsScorecardForm() {\n  const {\n    watch,\n    setValue,\n    register\n  } = useFormContext();\n  register(\"highlightedIndicators\");\n  const highlightedIndicators = watch(\"highlightedIndicators\");\n  const setHighlightedIndicators = useCallback(highlightedIndicators => {\n    setValue(\"highlightedIndicators\", highlightedIndicators);\n  }, [setValue]);\n  const legendDefinitions = getNonDefaultLegendDefinitions(watch(\"legendDefinitions\"));\n  const setScorecardEditorState = useSetRecoilState(ScorecardConfigEditState);\n  const [addOpen, setAddOpen] = useState(false);\n  const onAddClick = () => {\n    setAddOpen(true);\n  };\n  const onAdd = useCallback(dataSources => {\n    const legendDefaults = generateLegendDefaults(legendDefinitions, 100, true);\n    const newDataSources = dataSources === null || dataSources === void 0 ? void 0 : dataSources.map(source => new ScorecardIndicator({\n      ...source,\n      label: source === null || source === void 0 ? void 0 : source.displayName,\n      legends: legendDefaults\n    }));\n    setHighlightedIndicators([...(highlightedIndicators !== null && highlightedIndicators !== void 0 ? highlightedIndicators : []), ...(newDataSources !== null && newDataSources !== void 0 ? newDataSources : [])]);\n    if (!isEmpty(dataSources)) {\n      setScorecardEditorState(prevState => ({\n        ...prevState,\n        selectedHighlightedIndicatorIndex: 0\n      }));\n    }\n  }, [highlightedIndicators, legendDefinitions, setHighlightedIndicators, setScorecardEditorState]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\",\n    style: {\n      height: \"100%\"\n    }\n  }, /*#__PURE__*/React.createElement(Help, {\n    helpSteps: HIGHLIGHTED_INDICATOR_HELP_STEPS\n  }), /*#__PURE__*/React.createElement(\"h3\", null, i18n.t(\"Highlighted Indicators\")), !isEmpty(highlightedIndicators) ? /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rowlabel \"\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"add-highlighted-indicator-button\",\n    onClick: onAddClick,\n    icon: /*#__PURE__*/React.createElement(AddIcon, null)\n  }, i18n.t(\"Add\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-8 pt-32 \"\n  }, /*#__PURE__*/React.createElement(HighlightedIndicatorsTable, null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pl-16 pt-32\"\n  }, /*#__PURE__*/React.createElement(HighlightedDataSourceConfigurationForm, null))))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row align-items-center center flex-1\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"add-highlighted-indicator-button\",\n    onClick: onAddClick,\n    icon: /*#__PURE__*/React.createElement(AddIcon, null)\n  }, i18n.t(\"Add Highlighted Indicator\"))), addOpen && /*#__PURE__*/React.createElement(DataSourceSelectorModal, {\n    open: addOpen,\n    onSelect: onAdd,\n    disabled: highlightedIndicators === null || highlightedIndicators === void 0 ? void 0 : highlightedIndicators.map(({\n      id\n    }) => id),\n    onClose: () => setAddOpen(false)\n  }));\n}","import { Help } from \"@scorecard/shared\";\nimport { ACCESS_HELP_STEPS } from \"@scorecard/shared\";\nimport React from \"react\";\nimport OrgUnit from \"./Components/OrgUnitFilter\";\nimport Sharing from \"./Components/Sharing\";\nexport default function AccessScorecardForm() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      minHeight: '70vh',\n      height: '100%'\n    },\n    className: \"container p-16\"\n  }, /*#__PURE__*/React.createElement(Help, {\n    helpSteps: ACCESS_HELP_STEPS\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\"\n  }, /*#__PURE__*/React.createElement(OrgUnit, null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\"\n  }, /*#__PURE__*/React.createElement(Sharing, null))));\n}","import { ScorecardOptionsForm } from \"@scorecard/shared\";\nimport React from \"react\";\nimport useOptionsManage from \"./hooks/useOptionsManage\";\nexport default function OptionsScorecardForm() {\n  const {\n    scorecardOptions,\n    onChange,\n    onAverageChange\n  } = useOptionsManage();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: '100%'\n    }\n  }, /*#__PURE__*/React.createElement(ScorecardOptionsForm, {\n    options: scorecardOptions,\n    onChange: onChange,\n    onAverageChange: onAverageChange\n  }));\n}","import { ScorecardOptions } from \"@scorecard/shared\";\nimport { useCallback } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nexport default function useOptionsManage() {\n  const {\n    watch,\n    setValue\n  } = useFormContext();\n  const scorecardOptions = watch(\"options\");\n  const setScorecardOptions = useCallback(updatedOptions => {\n    setValue(\"options\", updatedOptions);\n  }, [setValue]);\n  const onChange = key => newValue => {\n    var _newValue$checked;\n    setScorecardOptions(ScorecardOptions.set(scorecardOptions, key, (_newValue$checked = newValue === null || newValue === void 0 ? void 0 : newValue.checked) !== null && _newValue$checked !== void 0 ? _newValue$checked : newValue));\n  };\n  const onAverageChange = value => {\n    setScorecardOptions(ScorecardOptions.set(scorecardOptions, \"averageDisplayType\", value));\n  };\n  return {\n    onAverageChange,\n    onChange,\n    scorecardOptions\n  };\n}","import { useAlert } from \"@dhis2/app-runtime\";\nimport i18n from \"@dhis2/d2-i18n\";\nimport { useAddScorecard, useUpdateScorecard } from \"@scorecard/shared\";\nimport { Scorecard } from \"@scorecard/shared\";\nimport { IsNewScorecardState, RouterState, ScorecardConfigEditState, ScorecardConfigErrorState, ScorecardConfState, ScorecardIdState, ShouldValidate, UserState } from \"@scorecard/shared\";\nimport { uid } from \"@scorecard/shared\";\nimport produce from \"immer\";\nimport { cloneDeep, findIndex, set } from \"lodash\";\nimport { useEffect, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { useRecoilCallback, useRecoilState, useRecoilValue, useSetRecoilState } from \"recoil\";\nimport { ActiveStepIndexState, ActiveStepState, steps } from \"../state/pages\";\nexport default function useScorecardManage() {\n  const history = useHistory();\n  const {\n    id: scorecardId\n  } = useParams();\n  const setIsNew = useSetRecoilState(IsNewScorecardState);\n  const activeStepIndex = useRecoilValue(ActiveStepIndexState);\n  const user = useRecoilValue(UserState);\n  const [route, setRoute] = useRecoilState(RouterState);\n  const {\n    update\n  } = useUpdateScorecard(scorecardId);\n  const scorecardConf = useRecoilValue(ScorecardConfState(scorecardId));\n  const [saving, setSaving] = useState(false);\n  const [savingAndContinue, setSavingAndContinue] = useState(false);\n  const scorecard = cloneDeep(scorecardConf);\n  const form = useForm({\n    shouldFocusError: true,\n    defaultValues: {\n      ...scorecard\n    },\n    reValidateMode: \"onChange\"\n  });\n  const setActiveStep = useSetRecoilState(ActiveStepState);\n  const {\n    add\n  } = useAddScorecard();\n  const {\n    show\n  } = useAlert(({\n    message\n  }) => message, ({\n    type\n  }) => ({\n    ...type,\n    duration: 3000\n  }));\n  const resetEditStates = useRecoilCallback(({\n    reset\n  }) => () => {\n    reset(ScorecardConfigEditState);\n    reset(ScorecardConfigErrorState);\n    reset(ShouldValidate);\n    reset(IsNewScorecardState);\n    reset(ActiveStepState);\n  });\n  const resetScorecardStates = useRecoilCallback(({\n    reset\n  }) => () => {\n    reset(ScorecardConfState(scorecardId));\n    reset(ScorecardIdState);\n  });\n  useEffect(() => {\n    return () => {\n      resetEditStates();\n      resetScorecardStates();\n    };\n  }, []);\n  const onNavigate = () => {\n    setRoute(prevRoute => ({\n      ...prevRoute,\n      previous: `/edit/${scorecardId}`\n    }));\n    history.replace(route === null || route === void 0 ? void 0 : route.previous);\n  };\n  const createNewScorecard = async updatedScorecard => {\n    await Scorecard.save(updatedScorecard, add, user);\n  };\n  const updateData = async updatedScorecard => {\n    await Scorecard.update(updatedScorecard, update);\n  };\n  const onSave = useRecoilCallback(() => async updatedScorecard => {\n    setSaving(true);\n    try {\n      if (scorecardId) {\n        await updateData(updatedScorecard);\n        show({\n          message: i18n.t(\"Scorecard updated successfully\"),\n          type: {\n            success: true\n          }\n        });\n      } else {\n        const id = uid();\n        const updatedData = produce(cloneDeep(updatedScorecard), draft => {\n          set(draft, \"id\", id);\n        });\n        await createNewScorecard(cloneDeep(updatedData));\n        show({\n          message: i18n.t(\"Scorecard added successfully\"),\n          type: {\n            success: true\n          }\n        });\n      }\n      onNavigate();\n    } catch (e) {\n      console.error(e);\n      show({\n        message: i18n.t(\"Scorecard could not be saved\" + \": \" + (e === null || e === void 0 ? void 0 : e.message)),\n        type: {\n          info: true\n        }\n      });\n    }\n    setSaving(false);\n  });\n  const onSaveAndContinue = useRecoilCallback(() => async updatedScorecard => {\n    setSavingAndContinue(true);\n    try {\n      if (scorecardId) {\n        await updateData(updatedScorecard);\n        setActiveStep(prevStep => {\n          const prevStepIndex = findIndex(steps, {\n            id: prevStep.id\n          });\n          if (prevStepIndex !== steps.length - 1) {\n            return steps[prevStepIndex + 1];\n          }\n        });\n      } else {\n        const id = uid();\n        const updatedData = produce(updatedScorecard, draft => {\n          set(draft, \"id\", id);\n        });\n        await createNewScorecard(updatedData);\n        setIsNew({\n          nextStepIndex: activeStepIndex + 1\n        });\n        history.replace(`edit/${id}?new=true`);\n      }\n    } catch (e) {\n      console.error(e);\n      show({\n        message: i18n.t(\"Scorecard could not be saved\" + \": \" + (e === null || e === void 0 ? void 0 : e.message)),\n        type: {\n          info: true\n        }\n      });\n    }\n    setSavingAndContinue(false);\n  });\n  return {\n    form,\n    resetEditStates,\n    resetScorecardStates,\n    saving,\n    onSave,\n    onNavigate,\n    onSaveAndContinue,\n    savingAndContinue\n  };\n}","import { useAlert } from \"@dhis2/app-runtime\";\nimport i18n from \"@dhis2/d2-i18n\";\nimport { HelpIndex, IsNewScorecardState } from \"@scorecard/shared\";\nimport { getValidationPageFields } from \"@scorecard/shared\";\nimport { findIndex } from \"lodash\";\nimport { useCallback, useEffect, useMemo } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport { useRecoilState, useResetRecoilState } from \"recoil\";\nimport { ActiveStepState, steps } from \"../state/pages\";\nexport default function useScorecardManagerNavigate({\n  form,\n  onSave,\n  onNavigate\n}) {\n  const [helpStepIndex, setHelpStepIndex] = useRecoilState(HelpIndex);\n  const [activeStep, setActiveStep] = useRecoilState(ActiveStepState);\n  const {\n    search\n  } = useLocation();\n  const resetNewState = useResetRecoilState(IsNewScorecardState);\n  const Component = activeStep.component;\n  const {\n    show\n  } = useAlert(({\n    message\n  }) => message, ({\n    type\n  }) => ({\n    ...type,\n    duration: 3000\n  }));\n  useEffect(() => {\n    const searchParams = new URLSearchParams(search);\n    const isNew = searchParams.get('new');\n    if (isNew) {\n      setActiveStep(prevStep => {\n        const currentIndex = findIndex(steps, ['id', prevStep.id]);\n        if (currentIndex === 0) {\n          return steps[1];\n        } else {\n          return prevStep;\n        }\n      });\n    }\n  }, [resetNewState, search, setActiveStep]);\n  const hasNextStep = useMemo(() => findIndex(steps, [\"id\", activeStep.id]) !== steps.length - 1, [activeStep]);\n  const hasPreviousStep = useMemo(() => findIndex(steps, [\"id\", activeStep.id]) > 0, [activeStep]);\n  const currentIndex = useMemo(() => findIndex(steps, [\"id\", activeStep.id]), [activeStep]);\n  const onNextStep = async () => {\n    if (!hasNextStep) {\n      await form.handleSubmit(onSave)();\n      return;\n    }\n    if (!(await form.trigger())) {\n      show({\n        message: i18n.t(\"Please fill in all required fields\"),\n        type: {\n          info: true\n        }\n      });\n      return;\n    }\n    const index = findIndex(steps, [\"id\", activeStep.id]);\n    if (index !== steps.length - 1) {\n      setActiveStep(steps[index + 1]);\n      setHelpStepIndex(0);\n    }\n  };\n  const onStepChange = useCallback(async step => {\n    if (!(await form.trigger(getValidationPageFields(form, activeStep)))) {\n      return;\n    }\n    setActiveStep(step);\n  }, [activeStep, form]);\n  const onPreviousStep = () => {\n    const index = findIndex(steps, [\"id\", activeStep.id]);\n    if (index !== 0) {\n      setActiveStep(steps[index - 1]);\n      setHelpStepIndex(0);\n    }\n  };\n  const onCancel = () => {\n    onNavigate();\n  };\n  return {\n    Component,\n    activeStep,\n    onNextStep,\n    onPreviousStep,\n    onCancel,\n    helpStepIndex,\n    setHelpStepIndex,\n    hasNextStep,\n    hasPreviousStep,\n    currentIndex,\n    steps,\n    onStepChange\n  };\n}","import i18n from \"@dhis2/d2-i18n\";\nimport { Button, ButtonStrip, Tooltip } from \"@dhis2/ui\";\nimport { Step, StepLabel, Stepper } from \"@material-ui/core\";\nimport HelpIcon from \"@material-ui/icons/Help\";\nimport { AccessDeniedPage, FullPageLoader, HelpState, HelpSteps, STEP_OPTIONS, useMediaQuery, UserAuthorityOnScorecard } from \"@scorecard/shared\";\nimport { Steps } from \"intro.js-react\";\nimport React, { Suspense } from \"react\";\nimport { FormProvider } from \"react-hook-form\";\nimport { useParams } from \"react-router-dom\";\nimport { useRecoilState, useRecoilValue } from \"recoil\";\nimport useScorecardManage from \"./hooks/useScorecardManage\";\nimport useScorecardManagerNavigate from \"./hooks/useScorecardManagerNavigate\";\nimport classes from \"./ScorecardManagement.module.css\";\nexport default function ScoreCardManagement() {\n  var _steps$label, _steps, _steps2;\n  const [helpEnabled, setHelpEnabled] = useRecoilState(HelpState);\n  const helpSteps = useRecoilValue(HelpSteps);\n  const {\n    id: scorecardId\n  } = useParams();\n  const {\n    write: writeAccess\n  } = useRecoilValue(UserAuthorityOnScorecard(scorecardId));\n  const {\n    height\n  } = useMediaQuery();\n  const {\n    form,\n    onSave,\n    saving,\n    onNavigate,\n    onSaveAndContinue,\n    savingAndContinue\n  } = useScorecardManage();\n  const {\n    Component,\n    activeStep,\n    helpStepIndex,\n    onCancel,\n    onNextStep,\n    onPreviousStep,\n    setHelpStepIndex,\n    steps,\n    currentIndex,\n    hasPreviousStep,\n    hasNextStep,\n    onStepChange\n  } = useScorecardManagerNavigate({\n    form,\n    onSave,\n    onNavigate\n  });\n  if (!writeAccess && scorecardId) {\n    return /*#__PURE__*/React.createElement(AccessDeniedPage, {\n      accessType: \"edit\"\n    });\n  }\n  //scorecardManagementTooltips\n  return /*#__PURE__*/React.createElement(FormProvider, form, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(FullPageLoader, null)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes[\"edit-container\"]\n  }, /*#__PURE__*/React.createElement(Steps, {\n    enabled: helpEnabled,\n    options: STEP_OPTIONS,\n    steps: helpSteps,\n    initialStep: helpStepIndex,\n    onBeforeChange: newStepIndex => {\n      setHelpStepIndex(newStepIndex);\n    },\n    onExit: () => {\n      setHelpEnabled(false);\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\"\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Stepper, null, steps === null || steps === void 0 ? void 0 : steps.map(step => /*#__PURE__*/React.createElement(Step, {\n    style: step === activeStep ? {\n      background: \"#00695c\"\n    } : undefined,\n    active: step === activeStep,\n    onClick: () => onStepChange(step),\n    key: `${step.id}-step`\n  }, /*#__PURE__*/React.createElement(StepLabel, null, /*#__PURE__*/React.createElement(Tooltip, {\n    content: step.tooltip,\n    key: `${step.id}-step`\n  }, step.label)))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column center\",\n    style: {\n      flex: 1\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container container-bordered background-white center\",\n    style: {\n      width: \"100%\",\n      height: \"100%\",\n      minHeight: height * 0.8\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    style: {\n      height: \"100%\"\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column p-16\",\n    style: {\n      height: \"100%\",\n      justifyContent: \"space-between\"\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row end align-items-center\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    icon: /*#__PURE__*/React.createElement(HelpIcon, null),\n    onClick: () => {\n      setHelpStepIndex(0);\n      setHelpEnabled(true);\n    }\n  }, i18n.t(\"Help\"))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: \"100%\",\n      padding: 16\n    }\n  }, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(FullPageLoader, {\n      small: true\n    })\n  }, /*#__PURE__*/React.createElement(Component, {\n    onNextStep: onNextStep,\n    onPreviousStep: onPreviousStep\n  }))), /*#__PURE__*/React.createElement(ButtonStrip, {\n    start: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    disabled: !hasPreviousStep,\n    onClick: onPreviousStep\n  }, i18n.t(`Previous: ${(_steps$label = (_steps = steps[currentIndex - 1]) === null || _steps === void 0 ? void 0 : _steps.label) !== null && _steps$label !== void 0 ? _steps$label : \"\"}`)), /*#__PURE__*/React.createElement(Button, {\n    loading: saving,\n    primary: true,\n    disabled: saving,\n    onClick: onNextStep,\n    className: \"settings-next-button\",\n    dataTest: \"scorecard-admin-next-button\"\n  }, !hasNextStep ? saving ? `${i18n.t(\"Saving\")}...` : i18n.t(\"Save\") : i18n.t(`Next: ${(_steps2 = steps[currentIndex + 1]) === null || _steps2 === void 0 ? void 0 : _steps2.label}`)))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row center p-16\"\n  }, /*#__PURE__*/React.createElement(ButtonStrip, {\n    center: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    loading: saving,\n    dataTest: \"scorecard-save-button\",\n    disabled: saving,\n    onClick: form.handleSubmit(onSave)\n  }, saving ? `${i18n.t(\"Saving\")}...` : i18n.t(\"Save and exit\")), hasNextStep && /*#__PURE__*/React.createElement(Button, {\n    loading: savingAndContinue,\n    dataTest: \"scorecard-save-and-continue-button\",\n    disabled: savingAndContinue,\n    onClick: form.handleSubmit(onSaveAndContinue)\n  }, savingAndContinue ? `${i18n.t(\"Saving\")}...` : i18n.t(\"Save and continue\")), /*#__PURE__*/React.createElement(Button, {\n    onClick: onCancel\n  }, i18n.t(\"Exit without saving\"))))))));\n}"],"names":["OrgUnit","setValue","watch","register","formState","useFormContext","validate","atLeastOneOrgUnit","value","groups","levels","orgUnits","userOrgUnit","userSubUnit","userSubX2Unit","length","anyOrgUnitSelected","i18n","t","organisationUnit","setOrganisationUnit","useCallback","updatedOrgUnitSelection","error","get","errors","React","className","style","display","gap","alignItems","padding","color","colors","red500","IconError24","message","minHeight","Suspense","fallback","ContainerLoader","height","OrgUnitSelector","showGroups","showLevels","showUserOptions","onUpdate","values","OrgUnitSelection","setObject","useAccessManage","publicAccess","setPublicAccess","updatedValue","userGroupAccesses","setUserGroupAccesses","userAccesses","setUserAccesses","userAndUserGroupAccesses","useMemo","onPublicAccessChange","onDelete","access","type","updatedList","cloneDeep","remove","id","updatedAccess","AccessTypes","USER","index","findIndex","produce","draft","set","onAdd","selectedAccess","selectedUserGroup","ScorecardAccess","displayName","getAccessName","ScorecardAccessType","NO_ACCESS","READ_ONLY","READ_WRITE","getAccessIcon","PublicIcon","UserIcon","UserGroupIcon","SharingMenu","reference","onClose","onAccessChange","Layer","onClick","Popper","placement","FlyoutMenu","ACCESS_TYPES","map","accessType","Fragment","key","MenuItem","active","label","icon","CheckIcon","SingleSharingComponent","ref","setRef","useState","margin","fontSize","grey700","ButtonStrip","Button","_","e","currentTarget","EditIcon","Boolean","DeleteIcon","undefined","newAccess","SharingList","Menu","dense","MenuDivider","query","users","resource","params","keyword","filter","fields","order","userGroups","UserAndUserGroupsMenu","data","onSelect","maxHeight","element","UserAndUserGroupSelector","selected","onChange","selectedList","loading","setKeyword","initialKeyword","refetch","useDataQuery","variables","lazy","useEffect","_data$users","_data$users$users","_data$userGroups","_data$userGroups$user","user","userGroup","useSearchUserAndUserGroup","useRef","inputReference","setInputReference","onSearch","debounce","trim","InputField","validationText","onKeywordChange","event","target","isEmpty","selectedValue","includes","AddSharingAccess","setSelectedUserGroup","setSelectedAccess","width","SingleSelectField","required","SingleSelectOption","onAddClick","AddIcon","Sharing","Instructions","DataSourceInstructions","grey600","fontWeight","getNonDefaultLegendDefinitions","legendDefinitions","_legendDefinitions$fi","legendDefinition","isDefault","LegendsField","highIsGood","DHIS2FormField","valueType","name","_extends","Object","assign","bind","n","arguments","r","hasOwnProperty","call","apply","LevelTargetsField","initialValue","multipleFields","weight","props","_head","orgUnitLevels","useRecoilValue","OrgUnitLevels","expanded","setExpanded","head","_orgUnitLevels$map","Array","isArray","fromPairs","generateLegendDefaults","onFieldChange","newValue","level","Field","_get","panel","Accordion","isExpanded","AccordionSummary","background","grey200","AccordionDetails","OrgUnitLevelSpecificTargets","path","defaultLegends","legend","FormFieldModel","mandatory","DHIS2ValueTypes","LEGEND_MIN_MAX","legends","setTarget","_orgUnits$map","periodSelectorOpen","setPeriodSelectorOpen","items","SelectedOrgUnits","fullWidth","disabled","ou","join","OrgUnitSelectorModal","hide","prevState","orgUnit","OrgUnitSpecificTargetsModal","open","specificTarget","onChangeDefaultLegends","onUpdateClick","Modal","position","ModalTitle","ModalContent","CircularLoader","small","ModalActions","primary","PeriodSpecificTargetsModal","_target$items","_target$items$map","_target$items$map2","_target$items2","calendar","SystemSettingsState","item","_Period$setPreference","Period","setPreferences","allowFuturePeriods","setCalendar","getById","PeriodSelectorModal","enablePeriodSelector","excludeRelativePeriods","singleSelection","selectedPeriods","compact","periods","_periods$","LegendsView","_find","legendDefinitionId","startValue","endValue","find","getTypeLabel","OrgUnitSpecificTargetView","border","grey500","borderRadius","Tag","PeriodSpecificTargetView","TargetsField","useWatch","nonDefaultLegendDefinitions","RHFDHIS2FormField","TargetsArea","allLegendDefinitions","areSpecificTargetsSet","specificTargets","openConfigDialog","setOpenConfigDialog","selectedType","setSelectedType","specificTargetsSet","getSelectedType","_specificTargets$","TRUE_ONLY","uid","DataSourceConfigurationForm","TEXT","validations","NUMBER","renderAsCheckbox","Divider","SelectedDataSourceConfigurationForm","_ref","_selectedDataHolder$d","scorecardEditState","ScorecardConfigEditState","selectedGroupIndex","selectedDataHolderIndex","selectedDataHolder","dataSources","dataSource","dataSourcePath","maxWidth","minWidth","DataSourceConfiguration","isNaN","EmptyDataGroups","onGroupAdd","dataTest","CustomLinkedCell","top","bottom","period","_getLegend","_getLegend2","topLegends","showColors","showTopColors","displayArrows","topDisplayArrows","topWeight","topSpecificTargets","bottomLegends","showBottomColors","bottomDisplayArrows","bottomWeight","bottomSpecificTargets","topValue","generateRandomValues","bottomValue","topColor","getLegend","max","bottomColor","LinkedCellSvg","topStatus","bottomStatus","PreviewCustomCell","config","_config$dataSources","_config$dataSources2","organisationUnits","UserState","hasLinked","Date","getFullYear","dataOrgUnitLevel","align","SingleCellSvg","status","PreviewScorecardTable","_watch","dataGroups","columns","overflowX","DataTable","bordered","DataTableHead","DataTableRow","DataTableCell","fixed","rowSpan","column","_column$dataHolders","colSpan","dataHolders","title","group","_group$dataHolders","_group$dataHolders2","_group$dataHolders3","borderSpacing","_dataSources$","_dataSources$2","_dataSources$3","_dataSources$4","DataTableBody","tag","_group$dataHolders4","_group$dataHolders5","_group$dataHolders6","borders","DataSourceSelectorModal","selectedItems","setSelectedItems","large","DataSourceSelector","end","withStyles","root","boxShadow","borderBottom","MuiAccordion","marginBottom","content","MuiAccordionSummary","theme","spacing","MuiAccordionDetails","EditTitle","titleEditValue","setTitleEditValue","onTitleEditSubmit","stopPropagation","Input","initialFocus","GroupTitle","setTitleEditOpen","onDoubleClick","IconButton","size","paddingLeft","ErrorIcon","DataSource","ScorecardIndicator","Avatar","getDataSourceShortName","DataSourceHolder","dataHolder","ScorecardIndicatorHolder","trigger","setScorecardEditState","useRecoilState","updateDataHolder","useSetRecoilState","ScorecardConfigDirtySelector","onDataSourceDelete","indicatorIndex","updatedDataSources","splice","Draggable","draggableId","provided","draggableProps","dragHandleProps","innerRef","async","grey400","teal200","dataGroup","LinkingContainer","chunk","onLink","onUnlink","linkable","hasLink","onIconClick","getIndex","onUnlinkClick","_head$dataSources","onLinkClick","_head2","_last","indexOfMergedHolder","indexOfDeletedHolder","last","useLinkManage","source","Tooltip","linkAction","UnlinkIcon","LinkIcon","DataGroup","handleAccordionChange","onDataSourceAdd","titleEditOpen","targetOnLevels","ScorecardConfigDirtyState","scorecardEditorState","setScorecardEditorState","setGroup","updatedGroup","console","filteredLegendDefinitions","ScorecardIndicatorGroup","deletedDataSourceIndex","addedDataSources","newDataSources","useDataGroupManage","onDragEnd","onExpand","useRecoilCallback","snapshot","indexOfTheDeletedHolder","_dataHolders$indexOfT","_snapshot$getLoadable","dataSourceToLink","mergedHolder","linkDataSource","updatedHolderList","getLoadable","contents","setState","_dataHolderToModify$d","dataHolderIndex","newDataHolder","dataHolderToModify","modifiedDataHolder","result","destination","updateListFromDragAndDrop","newExpanded","useDataGroupLayout","dataHolderChunks","selectedDataSourcesIds","_flattenDeep","list","chunks","listToModify","_listToModify$i","_listToModify$i2","_listToModify$i2$data","_listToModify","_listToModify$dataSou","push","i","customChunk","flattenDeep","useDataHolders","openAdd","setOpenAdd","summaryRef","expandIcon","ExpandMoreIcon","square","action","DragDropContext","Droppable","droppableId","droppableProps","chunkIndex","placeholder","forwardRef","DataGroups","dataSelection","searchedGroups","SearchedGroupsState","updateDataSelection","updatedDataSelection","resetEditState","useResetRecoilState","DataSelection","onDeleteGroup","updatedGroupList","onGroupUpdate","newGroupData","filteredGroups","_last2","groupIndex","Controller","rules","isNotEmpty","render","field","fieldState","atom","default","DataGroupArea","setSearchedGroups","_dataSelection$dataGr","dataHolderGroup","dataHolderIndicator","dataHolderIndicatorSelections","toLowerCase","match","RegExp","current","overflowY","flex","generateNewGroupData","useResetLegends","shouldVerify","onResetLegends","updatedDefinitions","newGroups","forEach","_dataHolder$dataSourc","resetLegends","LegendDefinitionFormField","PeriodSelector","getValues","defaultYear","PeriodUtility","getPeriodById","start","year","setYear","periodType","options","_type$periods","fromObject","category","PeriodTypeCategory","FIXED","getPeriodType","toUpperCase","code","years","fill","toString","reverse","_field$value","valueId","CustomSelectField","optionSet","PeriodTypeSelector","fixedPeriodTypes","setCategory","periodTypes","relativePeriodTypes","RELATIVE","_fieldState$error","filterable","classes","GeneralForm","useParams","engine","useDataEngine","flexDirection","RHFCustomInput","summary","getScorecardSummary","scorecard","titleDoesNotExist","LONG_TEXT","RICH_TEXT","addable","deletable","MULTIPLE_FIELDS","multipleField","HighlightedDataSourceConfigurationForm","_useRecoilValue","selectedHighlightedIndicatorIndex","Help","helpSteps","INDICATOR_CONFIGURATION_STEPS","HighlightedIndicatorsTable","highlightedIndicators","setHighlightedIndicators","onRemove","HIGHLIGHTED_TABLE_HELP_STEPS","scrollHeight","DataTableColumnHeader","TableBody","onRowClick","steps","component","GENERAL_HELP_STEPS","tooltip","scorecardManagementTooltips","setHelpSteps","INTRODUCTION_HELP_STEPS","prevSteps","GROUPS_CONFIG_HELP_STEPS","PREVIEW_TABLE_HELP_STEPS","NO_GROUPS_HELP_STEPS","getHoldersFromGroups","NO_INDICATORS_HELP_STEPS","INDICATOR_SETUP_HELP_STEPS","uniqBy","useHelp","DATA_CONFIGURATION_HELP_STEPS","addOpen","setAddOpen","legendDefaults","HIGHLIGHTED_INDICATOR_HELP_STEPS","ACCESS_HELP_STEPS","scorecardOptions","onAverageChange","setScorecardOptions","updatedOptions","ScorecardOptions","_newValue$checked","checked","useOptionsManage","ScorecardOptionsForm","ActiveStepState","ActiveStepIndexState","selector","activeStep","step","useScorecardManage","history","useHistory","scorecardId","setIsNew","IsNewScorecardState","activeStepIndex","route","setRoute","RouterState","update","useUpdateScorecard","scorecardConf","ScorecardConfState","saving","setSaving","savingAndContinue","setSavingAndContinue","form","useForm","shouldFocusError","defaultValues","reValidateMode","setActiveStep","add","useAddScorecard","show","useAlert","duration","resetEditStates","reset","ScorecardConfigErrorState","ShouldValidate","resetScorecardStates","ScorecardIdState","onNavigate","prevRoute","previous","replace","createNewScorecard","Scorecard","save","updatedScorecard","updateData","onSave","success","updatedData","info","onSaveAndContinue","prevStep","prevStepIndex","nextStepIndex","useScorecardManagerNavigate","helpStepIndex","setHelpStepIndex","HelpIndex","search","useLocation","resetNewState","Component","URLSearchParams","hasNextStep","hasPreviousStep","currentIndex","onStepChange","getValidationPageFields","onNextStep","handleSubmit","onPreviousStep","onCancel","ScoreCardManagement","_steps$label","_steps","_steps2","helpEnabled","setHelpEnabled","HelpState","HelpSteps","write","writeAccess","UserAuthorityOnScorecard","useMediaQuery","AccessDeniedPage","FormProvider","FullPageLoader","Steps","enabled","STEP_OPTIONS","initialStep","onBeforeChange","newStepIndex","onExit","Stepper","Step","StepLabel","justifyContent","HelpIcon","center"],"sourceRoot":""}