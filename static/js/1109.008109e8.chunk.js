"use strict";(self.webpackChunk_dhis2_app_shell=self.webpackChunk_dhis2_app_shell||[]).push([[1109],{81109:function(e,t,l){l.r(t),l.d(t,{default:function(){return Gl}});var n=l(69987),a=l.n(n),r=l(81195),i=l(25435),o=l(98981),d=l(69321),u=l(5663),s=l(477),c=l.n(s);function m(e){let{dataSources:t,onTabChange:l,selectedTab:n}=e;return r.createElement(d.n,null,null===t||void 0===t?void 0:t.map((e=>{var t;return r.createElement(u.O,{selected:(null===n||void 0===n?void 0:n.id)===(null===e||void 0===e?void 0:e.id),onClick:()=>l(e),key:`${null===e||void 0===e?void 0:e.id}-tab`},null!==(t=null===e||void 0===e?void 0:e.label)&&void 0!==t?t:null===e||void 0===e?void 0:e.displayName)})))}m.propTypes={dataSources:c().arrayOf(c().object).isRequired,selectedTab:c().object.isRequired,onTabChange:c().func.isRequired};var v=l(7105);const E=(0,i.atom)({key:"dataElementsStoreDictionary",default:[]}),p=(0,i.atom)({key:"programIndicatorStateDictionary",default:[]}),f=(0,i.atom)({key:"dataSetReportingRatesStateDictionary",default:[]}),g=((0,i.atom)({key:"dataSourceStateDictionary",default:{id:void 0,type:void 0}}),(0,i.atom)({key:"dataSetDataElementsCountState",default:0})),y=(0,i.atom)({key:"programDataElementCountState",default:0}),b=(0,i.atom)({key:"indicatorGroupDataSetCount",default:[]}),h=(0,i.atom)({key:"indicatorGroupProgramCount",default:[]}),T=(0,i.atom)({key:"programDataElements",default:[]}),N=(0,i.atom)({key:"indicatorGroupAggregateDataElements",default:[]}),R=(0,i.atom)({key:"indicatorGroupNumeratorDataElements",default:{}}),Z=(0,i.atom)({key:"indicatorGroupDenominatorDataElements",default:{}}),S={DATA_ELEMENT:"dataElement",PROGRAM_INDICATOR:"programIndicator",PROGRAM_DATA_ELEMENT:"programDataElement",DATASET_REPORTING_RATES:"dataSet",ATTRIBUTES:"attribute",CONSTANTS:"constant",VARIABLE:"variable",ORG_UNIT_COUNT:"orgUnitCount",UNDEFINED:"undefined"},I={INDICATOR:"indicator",DATA_ELEMENT:"dataElement",PROGRAM_INDICATOR:"programIndicator",DATA_ELEMENT_GROUP:"dataElementGroup",INDICATOR_GROUP:"indicatorGroup",FUNCTION:"customFunction",DATASET:"dataSet",PROGRAM_DATA_ELEMENT:"dataElement"},D={TRACKER:"TRACKER",AGGREGATE:"AGGREGATE",UNDEFINED:"undefined"},A={EVENT:"EVENT",ENROLLMENT:"ENROLLMENT"},O={DATA_ELEMENT:"#{",PROGRAM_DATA_ELEMENT:"D{",PROGRAM_INDICATOR:"I{",DATASET_REPORTING_RATES:"R{",ATTRIBUTES:"A{",CONSTANTS:"C{",VARIABLE:"V{",ORG_UNIT_COUNT:"OUG{"};var w=l(26874),_=l(10815),P=l(88694),k=l(10466),G=l(77986),U=l(81843),C=l(40891);function W(e){return(null===e||void 0===e?void 0:e.search("w"))>=0?"read and write":(null===e||void 0===e?void 0:e.search("r"))>=0?"read only":"none"}function q(e){return new Date(e).toLocaleString("en-GB")}var x=l(44464),M=l(13488),j=l(55112);function L(e){var t,l;let{error:n}=e;return r.createElement("div",{className:"column center ",style:{height:"100%",textAlign:"center"}},r.createElement(x.M,null,r.createElement("div",null,r.createElement(j.Z,{style:{color:M.O.grey500,fontSize:48},fontSize:"large"}),r.createElement("p",{style:{color:M.O.grey900}},"string"===typeof n?n:null!==(t=null!==(l=null===n||void 0===n?void 0:n.message)&&void 0!==l?l:null===n||void 0===n?void 0:n.details)&&void 0!==t?t:null===n||void 0===n?void 0:n.toString()))))}L.propTypes={error:c().any};var F=l(84415);function B(e){let{text:t}=e;return r.createElement("div",{className:"column center",style:{height:"100%"}},r.createElement(x.M,null,r.createElement("div",null,r.createElement(F.V,null),r.createElement("p",{style:{color:M.O.default}},t))))}B.propTypes={text:c().string};const V={sources:{resource:"",id:e=>{let{id:t}=e;return t},params:{fields:["created","user[displayName]","lastUpdated","lastUpdatedBy[displayName]","userGroupAccesses[id,displayName,access]","userAccesses[id,displayName,access]"]}}};function z(e){return"dataElements"===e?" Data Element ":"indicators"===e?" Indicator ":"dataStore/functions"===e?" Function ":void 0}function $(e){var t,l,n,a;const i=e.id,o=e.resourceType;(0,r.useEffect)((()=>{!function(e){V.sources.resource=e}(o),c({id:i})}),[i]);const{loading:d,error:u,data:s,refetch:c}=(0,v.u_)(V,{variables:{id:i}}),m=null===s||void 0===s?void 0:s.sources;return d?r.createElement(B,{text:""}):u?r.createElement(L,{error:u}):r.createElement("div",null,r.createElement("h3",null,w.Z.t("Accessibility & Sharing Settings")," "),r.createElement("p",null," ",w.Z.t("This"),z(o)," ",w.Z.t("was first created on")," ",r.createElement("i",null," ",q(null===m||void 0===m?void 0:m.created))," ",w.Z.t("by")," ",r.createElement("b",null,null===m||void 0===m||null===(t=m.user)||void 0===t?void 0:t.displayName," ")," ",w.Z.t("and last updated on")," ",r.createElement("i",null,q(null===m||void 0===m?void 0:m.lastUpdated))," ",w.Z.t("by")," ",r.createElement("b",null,null===m||void 0===m||null===(l=m.lastUpdatedBy)||void 0===l?void 0:l.displayName)," ."),r.createElement("p",null,z(o)," ",w.Z.t("will be visible for users with the following access:")),r.createElement(_.w,null,r.createElement(P.s,null,r.createElement(k.U,null,r.createElement(G.p,null),r.createElement(G.p,null,w.Z.t("Details")))),r.createElement(U.R,null,r.createElement(k.U,null,r.createElement(C.W,{bordered:!0,tag:"th"},w.Z.t("User Access")),r.createElement(C.W,{bordered:!0},w.Z.t(0===(null===m||void 0===m||null===(n=m.userAccesses)||void 0===n?void 0:n.length)?"No access granted":""),r.createElement("ul",null,null===m||void 0===m?void 0:m.userAccesses.map((e=>r.createElement("li",{key:e.id},null===e||void 0===e?void 0:e.displayName," ",w.Z.t("can")," ",r.createElement("i",null,W(e.access)," ")," ")))))),r.createElement(k.U,null,r.createElement(C.W,{bordered:!0,tag:"th"},w.Z.t("User Group Access")),r.createElement(C.W,{bordered:!0},w.Z.t(0===(null===m||void 0===m||null===(a=m.userGroupAccesses)||void 0===a?void 0:a.length)?"No access granted":""),r.createElement("ul",null,null===m||void 0===m?void 0:m.userGroupAccesses.map((e=>r.createElement("li",{key:e.id},null===e||void 0===e?void 0:e.displayName," ",w.Z.t("can")," ",r.createElement("i",null,W(e.access))," ")))))))))}$.propTypes={id:c().string.isRequired,resourceType:c().string.isRequired};const J={identifiableObjects:{resource:"identifiableObjects",id:e=>{let{id:t}=e;return t},params:{fields:["id","displayName","href"]}}},Q={identifiableObjects:{resource:"identifiableObjects",id:e=>{let{id:t}=e;return t},params:{fields:["id","displayName","href"]}},identifiableObjects2:{resource:"identifiableObjects",id:e=>{let{id2:t}=e;return t},params:{fields:["id","displayName","href"]}}},H={dataElementSource:{resource:"dataElements",id:e=>{let{id:t}=e;return t},params:{fields:["id","displayName","dataSetElements[dataSet[id,displayName]]"]}}},K={dataElementSource:{resource:"dataElements",id:e=>{let{id:t}=e;return t},params:{fields:["id","displayName","dataSetElements[dataSet[id,displayName]]"]}},identifiableObjects:{resource:"identifiableObjects",id:e=>{let{idCombo:t}=e;return t},params:{fields:["id","displayName"]}}},Y={programIndicators:{resource:"programIndicators",id:e=>{let{id:t}=e;return t},params:{fields:["id","displayName","program[id,displayName]"]}}},X={identifiableObjectsProgram:{resource:"identifiableObjects",id:e=>{let{idProgram:t}=e;return t},params:{fields:["id","displayName"]}},identifiableObjectsDtEle:{resource:"identifiableObjects",id:e=>{let{idDataElement:t}=e;return t},params:{fields:["id","displayName"]}}};function ee(e,t){let l=function(e,t){let l=0,n=0;const a=[],r=null===t||void 0===t?void 0:t.length;for(;(null===(i=e)||void 0===i?void 0:i.search(t))>=0;){var i;l=e.indexOf(t)+r-2;const o=e.substr(l);n=null===o||void 0===o?void 0:o.indexOf("}"),n+=l;const d=e.substring(l+2,n);a.push(d),e=te(e,l,""),e=te(e,l-1,""),e=te(e,n-2,"")}return a}(e,t);if(t===O.DATASET_REPORTING_RATES){const e=[];l.filter((t=>{e.push(t.split(".")[0])})),l=e}return l}function te(e,t,l){return t>e.length-1?e:e.substring(0,t)+l+e.substring(t+1)}async function le(e,t){var l;const n=await e.query(J,{variables:{id:t}});return[null===n||void 0===n||null===(l=n.identifiableObjects)||void 0===l?void 0:l.displayName]}function ne(e,t){for(let o=0;o<(null===t||void 0===t?void 0:t.length);o++){var l,n,a,r,i;if((null===(l=e)||void 0===l?void 0:l.search(null===(n=t[o])||void 0===n?void 0:n.id))>=0)e=null===(a=e)||void 0===a?void 0:a.replace(null===(r=t[o])||void 0===r?void 0:r.id,null===(i=t[o])||void 0===i?void 0:i.val)}return e}function ae(e,t,l,n,a,r,i,o){var d,u,s,c,m,v,E,p,f,g;let y=ne(e,t);var b,h,T,N,R;(y=ne(y,l),y=ne(y,n),y=ne(y,a),y=ne(y,r),y=ne(y,o),y=ne(y,i),y=null===(d=y)||void 0===d?void 0:d.replace(/#{/g,"{"),y=null===(u=y)||void 0===u?void 0:u.replace(/I{/g,"{"),y=null===(s=y)||void 0===s?void 0:s.replace(/D{/g,"{"),y=null===(c=y)||void 0===c?void 0:c.replace(/V{/g,"{"),y=null===(m=y)||void 0===m?void 0:m.replace(/C{/g,"{"),y=null===(v=y)||void 0===v?void 0:v.replace(/A{/g,"{"),y=null===(E=y)||void 0===E?void 0:E.replace(/R{/g,"{"),y=null===(p=y)||void 0===p?void 0:p.replace(/OUG{/g,"{"),0!==(null===n||void 0===n?void 0:n.length))&&(y=null===(b=y)||void 0===b?void 0:b.replace(/ACTUAL_REPORTS/g,"Actual_Reports"),y=null===(h=y)||void 0===h?void 0:h.replace(/REPORTING_RATE_ON_TIME/g,"Reporting_on_Time"),y=null===(T=y)||void 0===T?void 0:T.replace(/EXPECTED_REPORTS/g,"Expected_Reports"),y=null===(N=y)||void 0===N?void 0:N.replace(/REPORTING_RATE/g,"Reporting_Rate"),y=null===(R=y)||void 0===R?void 0:R.replace(/ACTUAL_REPORTS_ON_TIME/g,"Actual_Reports_on_Time"));return y=null===(f=y)||void 0===f?void 0:f.replace(/_/g," "),y=null===(g=y)||void 0===g?void 0:g.replace(/\./g," "),function(e){if(typeof e!==S.UNDEFINED){let t=e.split("{");return t=t.join(""),t=t.split("}"),t=t.join(" "),t}return e}(y)}function re(e){return null===e||void 0===e?void 0:e.replace(/\S*/g,(function(e){return(null===e||void 0===e?void 0:e.charAt(0))+(null===e||void 0===e?void 0:e.slice(1).toLowerCase())}))}function ie(e,t){return ue(t)?new Promise(((l,n)=>{l(le(e,t))})):new Promise(((l,n)=>{const a=t.split(".");l(async function(e,t,l){var n;const a=await e.query(Q,{variables:{id:t,id2:l}});return[null===a||void 0===a||null===(n=a.identifiableObjects)||void 0===n?void 0:n.displayName,null===a||void 0===a?void 0:a.identifiableObjects2.displayName]}(e,a[0],a[1]))}))}function oe(e,t,l){return l===S.DATA_ELEMENT?ue(t)?new Promise(((l,n)=>{l(async function(e,t){const l=await e.query(H,{variables:{id:t}});return[null===l||void 0===l?void 0:l.dataElementSource]}(e,t))})):new Promise(((l,n)=>{const a=t.split(".");l(async function(e,t,l){const n=await e.query(K,{variables:{id:t,idCombo:l}});return[null===n||void 0===n?void 0:n.dataElementSource,null===n||void 0===n?void 0:n.identifiableObjects.displayName]}(e,a[0],a[1]))})):l===S.PROGRAM_DATA_ELEMENT||l===S.ATTRIBUTES?new Promise((l=>{const n=t.split(".");l(async function(e,t,l){var n,a;const r=await e.query(X,{variables:{idProgram:t,idDataElement:l}});return[null===r||void 0===r||null===(n=r.identifiableObjectsProgram)||void 0===n?void 0:n.displayName,null===r||void 0===r||null===(a=r.identifiableObjectsDtEle)||void 0===a?void 0:a.displayName]}(e,n[0],n[1]))})):l===S.PROGRAM_INDICATOR?new Promise((l=>{l(async function(e,t){const l=await e.query(Y,{variables:{id:t}});return[null===l||void 0===l?void 0:l.programIndicators]}(e,t))})):new Promise((l=>{l(le(e,t))}))}async function de(e,t,l){if(t.length>0){const n=null===t||void 0===t?void 0:t.map((t=>ie(e,null===t||void 0===t?void 0:t.replace(/ /g,""))));return await Promise.all(n).then((e=>e.map(((e,n)=>2===e.length?{id:t[n],val:e[0]+" "+e[1],location:l}:1===e.length?{id:t[n],val:e[0],location:l}:void 0))))}}function ue(e){return-1===(null===e||void 0===e?void 0:e.indexOf("."))}function se(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";const l=t<0?0:t,n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,n)).toFixed(l))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}const ce={detail:{resource:"dataElements",id:e=>{let{id:t}=e;return t},params:{fields:["id","displayName","domainType","aggregationType","zeroIsSignificant","categoryCombo[id,displayName,categories[id,displayName,categoryOptions[id,displayName]]]"]}}};function me(e){var t,l,n,a,i,o,d,u;let{id:s}=e;const{loading:c,error:m,data:E,refetch:p}=(0,v.u_)(ce,{variables:{id:s}});(0,r.useEffect)((()=>{p({id:s})}),[s]);const f=null===E||void 0===E?void 0:E.detail;return c?r.createElement(B,{text:""}):m?r.createElement(L,{error:m}):r.createElement("div",null,r.createElement("h3",null,w.Z.t("Analytics Details")," "),r.createElement("ul",null,r.createElement("li",null,w.Z.t("Uses")," ",r.createElement("b",null,w.Z.t("NONE"===(null===f||void 0===f?void 0:f.aggregationType)?"NO":null===(t=re(null===f||void 0===f?void 0:f.aggregationType))||void 0===t?void 0:t.replace(/_/g," "))," ")," ",w.Z.t("aggregation type through period and hierarchy")," "),r.createElement("li",null," ",null===f||void 0===f?void 0:f.domainType," ",w.Z.t("data sources")),r.createElement("li",null,w.Z.t(null!==f&&void 0!==f&&f.zeroIsSignificant?"It stores zero values":"It does not store zero values")),r.createElement("li",null,w.Z.t("Category Combo is")," ",null===f||void 0===f||null===(l=f.categoryCombo)||void 0===l?void 0:l.displayName," ",w.Z.t("which has cross-tabulation between ")," ",null===f||void 0===f||null===(n=f.categoryCombo)||void 0===n||null===(a=n.categories)||void 0===a?void 0:a.length," ",w.Z.t(1===(null===f||void 0===f||null===(i=f.categoryCombo)||void 0===i||null===(o=i.categories)||void 0===o?void 0:o.length)?"category":"categories")," ",w.Z.t("with following details"),r.createElement("ul",null,null===f||void 0===f||null===(d=f.categoryCombo)||void 0===d||null===(u=d.categories)||void 0===u?void 0:u.map((e=>{var t,l;return r.createElement("li",{key:null===e||void 0===e?void 0:e.id}," ",null===e||void 0===e?void 0:e.displayName,w.Z.t((null===e||void 0===e||null===(t=e.categoryOptions)||void 0===t?void 0:t.length)>=0?"which also has the following options":""),r.createElement("ul",null,null===e||void 0===e||null===(l=e.categoryOptions)||void 0===l?void 0:l.map((t=>r.createElement("li",{key:t.id}," ",e.displayName)))))}))))))}me.propTypes={id:c().string.isRequired};const ve={sources:{resource:"dataElements",id:e=>{let{id:t}=e;return t},params:{fields:["id","displayName","dataSetElements[dataSet[id,displayName,periodType,timelyDays]]"]}}};function Ee(e){var t,l;let{id:n}=e;const{loading:a,error:i,data:o,refetch:d}=(0,v.u_)(ve,{variables:{id:n}});return(0,r.useEffect)((()=>{d({id:n})}),[n]),a?r.createElement(B,{text:""}):i?r.createElement(L,{error:i}):r.createElement("div",null,r.createElement("h3",null,w.Z.t("Data sources")," "),r.createElement("p",null,w.Z.t("Data element is captured from following sources")),r.createElement("h5",null,w.Z.t("Datasets")," "),r.createElement("ul",null,null===o||void 0===o||null===(t=o.sources)||void 0===t||null===(l=t.dataSetElements)||void 0===l?void 0:l.map((e=>{var t,l,n,a;return r.createElement("li",{key:null===e||void 0===e||null===(t=e.dataSet)||void 0===t?void 0:t.id},r.createElement("b",null," ",null===e||void 0===e||null===(l=e.dataSet)||void 0===l?void 0:l.displayName)," ",w.Z.t("submitting {{variables1}} after every {{variables2}} days ",{variables1:null===e||void 0===e||null===(n=e.dataSet)||void 0===n?void 0:n.periodType,variables2:null===e||void 0===e||null===(a=e.dataSet)||void 0===a?void 0:a.timelyDays})," ")}))))}Ee.propTypes={id:c().string.isRequired};const pe={orgUnitLevels:{resource:"organisationUnitLevels",params:e=>{var t;let{levels:l}=e;return{fields:["id","displayName"],filter:null!==(t=null===l||void 0===l?void 0:l.map((e=>`level:eq:${e}`)))&&void 0!==t?t:[],rootJunction:"OR"}}}};function fe(e){var t,l,n,a,i,o,d,u,s,c,m,E;const{baseUrl:p}=(0,v.zw)(),f=null===e||void 0===e?void 0:e.other,g=null===f||void 0===f?void 0:f.aggregationLevels,{loading:y,error:b,data:h,refetch:T}=(0,v.u_)(pe,{variables:{levels:g}});return r.createElement(_.w,null,r.createElement(P.s,null,r.createElement(k.U,null,r.createElement(G.p,null),r.createElement(G.p,null,w.Z.t("Color")),r.createElement(G.p,null,w.Z.t(" Icon")),r.createElement(G.p,null,w.Z.t("Option set")),r.createElement(G.p,null,w.Z.t("Option set for Comments")),r.createElement(G.p,null,w.Z.t("Legends")),r.createElement(G.p,null,w.Z.t("Aggregation Levels")))),r.createElement(U.R,null,r.createElement(k.U,null,r.createElement(C.W,{bordered:!0,tag:"th"},w.Z.t("Details")),r.createElement("td",{bordered:!0,style:{background:null===f||void 0===f||null===(t=f.style)||void 0===t?void 0:t.color,width:"inherit",height:50}},typeof(null===f||void 0===f||null===(l=f.style)||void 0===l?void 0:l.color)===S.UNDEFINED?w.Z.t("no color"):""),r.createElement(C.W,{bordered:!0},typeof(null===f||void 0===f||null===(n=f.style)||void 0===n?void 0:n.icon)===S.UNDEFINED?w.Z.t("no icon"):r.createElement("img",{src:`${p}/api/icons/${null===f||void 0===f||null===(a=f.style)||void 0===a?void 0:a.icon}/icon.svg`,alt:"icon"})),r.createElement(C.W,{bordered:!0},JSON.stringify(null===f||void 0===f?void 0:f.optionSetValue)),r.createElement(C.W,{bordered:!0},null!==(i=null===f||void 0===f||null===(o=f.commentOptionSet)||void 0===o?void 0:o.displayName)&&void 0!==i?i:"no comments"),r.createElement(C.W,{bordered:!0},0===(null===f||void 0===f||null===(d=f.legendSets)||void 0===d?void 0:d.length)?w.Z.t("No legends assigned"):r.createElement("ol",null,null===f||void 0===f||null===(u=f.legendSets)||void 0===u?void 0:u.map((e=>r.createElement("li",{key:e.id},null===e||void 0===e?void 0:e.displayName))))),r.createElement(C.W,{bordered:!0},y?r.createElement(B,{text:""}):b?r.createElement(L,{error:b}):0===(null===h||void 0===h||null===(s=h.orgUnitLevels)||void 0===s||null===(c=s.organisationUnitLevels)||void 0===c?void 0:c.length)?w.Z.t("No organization unit level assigned"):r.createElement("ol",null,null===h||void 0===h||null===(m=h.orgUnitLevels)||void 0===m||null===(E=m.organisationUnitLevels)||void 0===E?void 0:E.map((e=>r.createElement("li",{key:null===e||void 0===e?void 0:e.id},null===e||void 0===e?void 0:e.displayName))))))))}const ge={programs:{resource:"programStages",params:e=>{let{dataElementId:t}=e;return{fields:["program[id,displayName]"],filter:[`programStageDataElements.dataElement.id:eq:${t}`]}}}};function ye(e){var t,l;let{id:n}=e;const a=n,{loading:i,error:o,data:d,refetch:u}=(0,v.u_)(ge,{variables:{dataElementId:a}});return(0,r.useEffect)((()=>{u({id:n})}),[n]),i?r.createElement(B,{text:""}):o?r.createElement(L,{error:o}):r.createElement("div",null,r.createElement("h3",null,w.Z.t("Data sources")," "),r.createElement("p",null," ",w.Z.t("Data element is captured from following sources")),r.createElement("h5",null,w.Z.t("Programs")," "),r.createElement("ul",null,null===d||void 0===d||null===(t=d.programs)||void 0===t||null===(l=t.programStages)||void 0===l?void 0:l.map((e=>{var t,l;return r.createElement("li",{key:null===e||void 0===e||null===(t=e.program)||void 0===t?void 0:t.id},r.createElement("b",null,null===e||void 0===e||null===(l=e.program)||void 0===l?void 0:l.displayName)," ",w.Z.t("submitting records on every event(case or individual)")," ")}))))}ye.PropTypes={id:c().string.isRequired};const be={sources:{resource:"dataElements",id:e=>{let{id:t}=e;return t},params:{fields:["domainType","style","optionSetValue","commentOptionSet[displayName]","legendSets[id,displayName]","aggregationLevels"]}}};function he(e){var t;let{id:l}=e;const{loading:n,error:a,data:i,refetch:o}=(0,v.u_)(be,{variables:{id:l}});return(0,r.useEffect)((()=>{o({id:l})}),[l]),n?r.createElement(B,{text:""}):a?r.createElement(L,{error:a}):r.createElement(r.Fragment,null,(null===i||void 0===i||null===(t=i.sources)||void 0===t?void 0:t.domainType)===D.AGGREGATE&&i!==D.UNDEFINED?r.createElement(Ee,{id:l}):r.createElement(ye,{id:l}),r.createElement("div",null,r.createElement(fe,{other:null===i||void 0===i?void 0:i.sources})))}he.PropTypes={id:c().string.isRequired};const Te={sources:{resource:"dataElements",id:e=>{let{id:t}=e;return t},params:{fields:["valueType"]}},expressionMatch:{resource:"validationRules",params:e=>{let{id:t}=e;return{fields:["id"],filter:[`leftSide.expression:like:${t}`,`rightSide.expression:like:${t}`],rootJunction:"OR"}}},numeratorMatch:{resource:"indicators",params:e=>{let{id:t}=e;return{fields:["id"],filter:[`numerator:like:${t}`]}}},denominatorMatch:{resource:"indicators",params:e=>{let{id:t}=e;return{fields:["id"],filter:[`denominator:like:${t}`]}}}};function Ne(e){var t,l,n,a,i,o,d,u;let{id:s}=e;const{loading:c,error:m,data:E,refetch:p}=(0,v.u_)(Te,{variables:{id:s}});return(0,r.useEffect)((()=>{p({id:s})}),[s]),c?r.createElement(B,{text:""}):m?r.createElement(L,{error:m}):r.createElement("div",null,r.createElement("h3",null," ",w.Z.t("Data element Facts")," "),r.createElement("ul",null,r.createElement("li",null,w.Z.t("Accepts only")," ",null===(t=re(null===E||void 0===E||null===(l=E.sources)||void 0===l?void 0:l.valueType))||void 0===t?void 0:t.replace(/_/g," ")," ",w.Z.t("to enforce validation")," "),r.createElement("li",null,w.Z.t("Has")," ",null===E||void 0===E||null===(n=E.expressionMatch)||void 0===n||null===(a=n.validationRules)||void 0===a?void 0:a.length," ",w.Z.t("related validation rules")),r.createElement("li",null,w.Z.t("Part of numerators of")," ",null===E||void 0===E||null===(i=E.numeratorMatch)||void 0===i||null===(o=i.indicators)||void 0===o?void 0:o.length," ",w.Z.t("indicators")),r.createElement("li",null,w.Z.t("Part of denominators of")," ",null===E||void 0===E||null===(d=E.denominatorMatch)||void 0===d||null===(u=d.indicators)||void 0===u?void 0:u.length," ",w.Z.t("indicators"))))}Ne.propTypes={id:c().string.isRequired};const Re={dataElements:{resource:"dataElements",id:e=>{let{id:t}=e;return t},params:{fields:["id","displayName","description","shortName","code","displayFormName","href"]}}};function Ze(e){let{id:t}=e;const{loading:l,error:n,data:a,refetch:i}=(0,v.u_)(Re,{variables:{id:t}});if((0,r.useEffect)((()=>{i({id:t})}),[t]),l)return r.createElement(B,null);if(n)return r.createElement(L,{error:n});const o=null===a||void 0===a?void 0:a.dataElements;return r.createElement("div",null,r.createElement("h2",null,null===o||void 0===o?void 0:o.displayName),r.createElement("h3",null," ",w.Z.t("Introduction")," "),r.createElement("p",null,r.createElement("b",null,null===o||void 0===o?void 0:o.displayName)," ",w.Z.t("can be described as {{variables}}.",{variables:null===o||void 0===o?void 0:o.description}),r.createElement("br",null),w.Z.t("It\u2019s labelled in short as {{variables1}} and has a code of {{variables2}}. In data entry form, it\u2019s named \u201c{{variables3}}\u201d",{variables1:null===o||void 0===o?void 0:o.shortName,variables2:null===o||void 0===o?void 0:o.code,variables3:null===o||void 0===o?void 0:o.displayFormName}),r.createElement("br",null),w.Z.t("Identified by:")," ",r.createElement("i",null," ",r.createElement("a",{style:{textDecoration:"none"},href:(null===o||void 0===o?void 0:o.href)+".json",target:"_blank",rel:"noreferrer"},null===o||void 0===o?void 0:o.id)," ")))}Ze.prototype={id:c().string.isRequired};const Se={dataSets:{resource:"dataSets",params:e=>{let{id:t}=e;return{fields:["id","displayName","periodType","timelyDays"],filter:[`dataSetElements.dataElement.id:eq:${t}`]}}}},Ie={numeratorMatch:{resource:"indicators",params:e=>{let{id:t}=e;return{fields:["id"],filter:[`numerator:like:${t}`]}}},denominatorMatch:{resource:"indicators",params:e=>{let{id:t}=e;return{fields:["id"],filter:[`denominator:like:${t}`]}}}};async function De(e,t){const l=null===t||void 0===t?void 0:t.map((t=>new Promise(((l,n)=>{l(async function(e,t){const l=await e.query(Ie,{variables:{id:t}});return l}(e,t))}))));return await Promise.all(l).then((e=>e.map(((e,t)=>e))))}async function Ae(e,t){if((null===t||void 0===t?void 0:t.length)>0){const l=null===t||void 0===t?void 0:t.map((t=>new Promise(((l,n)=>{l(async function(e,t){const l=await e.query(Se,{variables:{id:t}});return null===l||void 0===l?void 0:l.dataSets}(e,t))}))));return await Promise.all(l).then((e=>e.map(((e,t)=>null===e||void 0===e?void 0:e.dataSets))))}}function Oe(e,t){const[l,n]=(0,r.useState)(!0),[a,i]=(0,r.useState)(!1),[o,d]=(0,r.useState)();return(0,r.useEffect)((()=>{let l;(async function(){l=await Ae(t,e)})().then((()=>{d({dataSets:l}),n(!1)})).catch((e=>{n(!1),i(e)}))}),[]),{loading:l,error:a,data:o}}function we(e){const t=e.formula,l=e.location,n=e.storeResult,a=(0,i.useSetRecoilState)(E),o=(0,v.bQ)(),{loading:d,error:u,data:s}=function(e,t,l){const[n,a]=(0,r.useState)(!0),[i,o]=(0,r.useState)(!1),[d,u]=(0,r.useState)();return(0,r.useEffect)((()=>{let n=ee(e,O.DATA_ELEMENT),r=ee(e,O.PROGRAM_INDICATOR),i=ee(e,O.DATASET_REPORTING_RATES),d=ee(e,O.ATTRIBUTES),s=ee(e,O.CONSTANTS);(async function(){n=await de(t,n,l),r=await de(t,r,l),i=await de(t,i,l),d=await de(t,d,l),s=await de(t,s,l)})().then((()=>{u({dataElements:n,programIndicators:r,dataSetReportingRates:i,attributes:d,constants:s}),a(!1)})).catch((e=>{a(!1),o(e)}))}),[]),{loading:n,error:i,data:d}}(t,o,l);return(0,r.useEffect)((()=>{n&&typeof(null===s||void 0===s?void 0:s.dataElements)!=S.UNDEFINED&&a((e=>null===e||void 0===e?void 0:e.concat(null===s||void 0===s?void 0:s.dataElements)))}),[s]),d?r.createElement(B,{text:""}):u?r.createElement(L,{error:u}):r.createElement("div",null,ae(t,null===s||void 0===s?void 0:s.dataElements,null===s||void 0===s?void 0:s.programIndicators,null===s||void 0===s?void 0:s.dataSetReportingRates,null===s||void 0===s?void 0:s.attributes,null===s||void 0===s?void 0:s.constants))}we.PropTypes={formula:c().string.isRequired,location:c().string,storeResult:c().bool};const _e={relatedInd:{resource:"indicators",params:e=>{let{id:t}=e;return{fields:["id","displayName","indicatorType[id,displayName]","displayDescription","numerator","denominator"],filter:[`numerator:like:${t}`,`denominator:like:${t}`],rootJunction:"OR"}}}};function Pe(e){var t;const l=e.id,n=e.resourceType,{loading:a,error:i,data:o,refetch:d}=(0,v.u_)(_e,{variables:{id:l}}),u=null===o||void 0===o||null===(t=o.relatedInd)||void 0===t?void 0:t.indicators;return(0,r.useEffect)((()=>{d({id:l})}),[l]),0===(null===u||void 0===u?void 0:u.length)?r.createElement("div",null,r.createElement("p",null,w.Z.t("This {{variables1}} is not related to any indicator",{variables1:n})," ")):a?r.createElement(B,{text:""}):i?r.createElement(L,{error:i}):r.createElement("div",null,r.createElement("p",null," ",w.Z.t("Below are set of indicators using this {{variables}} as numerator or denominator in their calculations.",{variables:n})),r.createElement(_.w,null,r.createElement(P.s,null,r.createElement(k.U,null,r.createElement(G.p,null,w.Z.t("Name")),r.createElement(G.p,null,w.Z.t("Numerator")),r.createElement(G.p,null,w.Z.t("Denominator")),r.createElement(G.p,null,w.Z.t("Type")),r.createElement(G.p,null,w.Z.t("Description")))),r.createElement(U.R,null,null===u||void 0===u?void 0:u.map(((e,t)=>{var l,n;return r.createElement(k.U,{key:null===e||void 0===e?void 0:e.id},r.createElement(C.W,{bordered:!0},null===e||void 0===e?void 0:e.displayName),r.createElement(C.W,{bordered:!0},r.createElement("div",{style:{margin:5}},r.createElement(we,{formula:null===e||void 0===e?void 0:e.numerator,location:"numerator",storeResult:!0}))),r.createElement(C.W,{bordered:!0,b:!0},r.createElement("div",{style:{margin:5}},r.createElement(we,{formula:null===e||void 0===e?void 0:e.denominator,location:"denominator",storeResult:!0}))),r.createElement(C.W,{bordered:!0},null===e||void 0===e||null===(l=e.indicatorType)||void 0===l?void 0:l.displayName),r.createElement(C.W,{bordered:!0},r.createElement("div",{style:{margin:5}},null!==(n=null===e||void 0===e?void 0:e.displayDescription)&&void 0!==n?n:w.Z.t("No description given"))))})))))}function ke(e){let{id:t}=e;return r.createElement("div",null,r.createElement("h3",null,w.Z.t("Related Indicators")," "),r.createElement(Pe,{id:t}))}function Ge(e){const t=e.id;return r.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.createElement(Ze,{id:t}),r.createElement(he,{id:t}),r.createElement(Ne,{id:t}),r.createElement(me,{id:t}),r.createElement(ke,{id:t,resourceType:"Data Element"}),r.createElement($,{id:t,resourceType:"dataElements"}))}async function Ue(e,t,l,n){const a=null===t||void 0===t?void 0:t.map((t=>oe(e,t,l)));return await Promise.all(a).then((e=>e.map(((e,a)=>{if(l===S.DATA_ELEMENT){if(2===e.length)return{id:t[a],val:e[0].displayName+" "+e[1],location:n,sources:e[0].dataSetElements};if(1===e.length)return{id:t[a],val:e[0].displayName,location:n,sources:e[0].dataSetElements}}return l===S.ATTRIBUTES||l===S.PROGRAM_DATA_ELEMENT?{id:t[a],val:e[1],location:n,sources:e[0]}:l===S.PROGRAM_INDICATOR?{id:t[a],val:e[0].displayName,location:n,sources:e[0].program}:{id:t[a],val:e[0],location:n}}))))}const Ce={calculation:{resource:"indicators",id:e=>{let{id:t}=e;return t},params:{fields:["numerator","denominator"]}}};function We(e){let{id:t}=e;const{loading:l,error:n,data:a,refetch:i}=(0,v.u_)(Ce,{variables:{id:t}});if((0,r.useEffect)((()=>{i({id:t})}),[t]),l)return r.createElement(B,null);if(n)return r.createElement(L,{error:n});const o=a.calculation;return r.createElement("div",null,r.createElement("h3",null," ",w.Z.t("Calculation details")),r.createElement("p",null," ",w.Z.t("Below are expression computing numerator and denominator, and related sources")," "),r.createElement(_.w,null,r.createElement(P.s,null,r.createElement(k.U,null,r.createElement(G.p,{bordered:!0},w.Z.t("Expression")),r.createElement(G.p,{bordered:!0},w.Z.t("Formula")),r.createElement(G.p,{bordered:!0},w.Z.t("Sources")))),r.createElement(U.R,null,r.createElement(k.U,null,r.createElement(C.W,{bordered:!0},w.Z.t("Numerator")),r.createElement(Fe,{dataTest:"test-numerator-metadata",formula:o.numerator,location:"numerator"})),r.createElement(k.U,null,r.createElement(C.W,{bordered:!0},w.Z.t("Denominator")),r.createElement(Fe,{formula:o.denominator,location:"denominator"})))))}We.propTypes={id:c().string.isRequired};var qe={sources:"DataSourceCellStyle_sources__51+4P"};function xe(e){e.title;const t=e.data;return r.createElement(r.Fragment,null,r.createElement("ul",null,t.map((e=>r.createElement("li",{key:e.id},e.val,r.createElement("ol",null,e.sources.map((e=>r.createElement("li",{key:e.dataSet.id},e.dataSet.displayName)))))))))}function Me(e){let{data:t}=e;return r.createElement(r.Fragment,null,r.createElement("ul",null,null===t||void 0===t?void 0:t.map((e=>r.createElement("li",{key:e.id}," ",null===e||void 0===e?void 0:e.val," ")))))}function je(e){let{title:t,data:l}=e;return r.createElement(r.Fragment,null,r.createElement("ul",null,l.map((e=>r.createElement("li",{key:e.id},r.createElement("b",null,null===e||void 0===e?void 0:e.val," ")," ",w.Z.t("source:")," ",null===e||void 0===e?void 0:e.sources)))))}function Le(e){e.title;const t=e.data;return r.createElement(r.Fragment,null,r.createElement("ul",null,t.map((e=>{var t;return r.createElement("li",{key:e.id},r.createElement("b",null,null===e||void 0===e?void 0:e.val," ")," ",w.Z.t("source:")," ",null===e||void 0===e||null===(t=e.sources)||void 0===t?void 0:t.displayName)}))))}function Fe(e){var t,l,n,a,o;let{formula:d,location:u,...s}=e;const c=(0,v.bQ)(),m=(0,i.useSetRecoilState)(E),g=(0,i.useSetRecoilState)(p),y=(0,i.useSetRecoilState)(f),{loading:b,error:h,data:T}=function(e,t,l){const[n,a]=(0,r.useState)(!0),[i,o]=(0,r.useState)(!1),[d,u]=(0,r.useState)();return(0,r.useEffect)((()=>{let n=ee(e,O.DATA_ELEMENT),r=ee(e,O.PROGRAM_INDICATOR),i=ee(e,O.DATASET_REPORTING_RATES),d=ee(e,O.ATTRIBUTES),s=ee(e,O.CONSTANTS),c=ee(e,O.ORG_UNIT_COUNT),m=ee(e,O.PROGRAM_DATA_ELEMENT);(async function(){n=await Ue(t,n,S.DATA_ELEMENT,l),r=await Ue(t,r,S.PROGRAM_INDICATOR,l),i=await Ue(t,i,S.DATASET_REPORTING_RATES,l),d=await Ue(t,d,S.ATTRIBUTES,l),s=await Ue(t,s,S.CONSTANTS,l),c=await Ue(t,c,S.ORG_UNIT_COUNT,l),m=await Ue(t,m,S.PROGRAM_DATA_ELEMENT,l)})().then((()=>{u({dataElements:n,programIndicators:r,dataSetReportingRates:i,attributes:d,constants:s,orgUnitCount:c,programDtElement:m}),a(!1)})).catch((e=>{a(!1),o(e)}))}),[]),{loading:n,error:i,data:d}}(d,c,u);return b?r.createElement(B,{text:""}):h?r.createElement(L,{error:h}):(m(null===T||void 0===T?void 0:T.dataElements),g(null===T||void 0===T?void 0:T.programIndicators),y(null===T||void 0===T?void 0:T.dataSetReportingRates),r.createElement(r.Fragment,null,r.createElement(C.W,{bordered:!0,width:"50%"},ae(d,null===T||void 0===T?void 0:T.dataElements,null===T||void 0===T?void 0:T.programIndicators,null===T||void 0===T?void 0:T.dataSetReportingRates,null===T||void 0===T?void 0:T.attributes,null===T||void 0===T?void 0:T.constants,null===T||void 0===T?void 0:T.programDtElement,null===T||void 0===T?void 0:T.orgUnitCount)),r.createElement(C.W,{bordered:!0},r.createElement("div",{className:qe.sources},(null===T||void 0===T||null===(t=T.dataElements)||void 0===t?void 0:t.length)>0?r.createElement(xe,{title:"Data Elements",data:null===T||void 0===T?void 0:T.dataElements}):"",(null===T||void 0===T||null===(l=T.dataSetReportingRates)||void 0===l?void 0:l.length)>0?r.createElement(Me,{title:"Data Sets",data:null===T||void 0===T?void 0:T.dataSetReportingRates}):"",(null===T||void 0===T||null===(n=T.programIndicators)||void 0===n?void 0:n.length)>0?r.createElement(Le,{title:"Program Indicators",data:null===T||void 0===T?void 0:T.programIndicators}):"",(null===T||void 0===T||null===(a=T.programDtElement)||void 0===a?void 0:a.length)>0?r.createElement(je,{title:"Tracker Data Element",data:null===T||void 0===T?void 0:T.programDtElement}):"",(null===T||void 0===T||null===(o=T.attributes)||void 0===o?void 0:o.length)>0?r.createElement(je,{title:"Tracker Data Element",data:null===T||void 0===T?void 0:T.attributes}):""))))}xe.PropTypes={title:c().string.isRequired,data:c().arrayOf(c().object).isRequired},Me.PropTypes={data:c().arrayOf(c().object).isRequired},je.PropTypes={title:c().string.isRequired,data:c().arrayOf(c().object).isRequired},Le.PropTypes={title:c().string.isRequired,data:c().arrayOf(c().object).isRequired},Fe.propTypes={formula:c().string.isRequired,location:c().string.isRequired};const Be={dataElementInIndicator:{resource:"dataElements",id:e=>{let{id:t}=e;return t},params:{fields:["id","aggregationType","valueType","zeroIsSignificant","dataSetElements[dataSet[id,displayName]]","dataElementGroups[id,displayName]","categoryCombo[categories[id,displayName]]"]}}};function Ve(e){const t=e.datEl;function l(e){const{loading:t,error:l,data:n}=(0,v.u_)(Be,{variables:{id:e}});return t?r.createElement(F.V,null):l?r.createElement("p",null," ",l," "):n}return r.createElement(k.U,null,r.createElement(C.W,{bordered:!0},t.val),r.createElement(C.W,{bordered:!0},t.location),function(e){let t;if(-1==(null===(n=e.id)||void 0===n?void 0:n.indexOf(".")))t=l(e.id).dataElementInIndicator;else{t=l(e.id.split(".")[0]).dataElementInIndicator}var n;return r.createElement(r.Fragment,null,r.createElement(C.W,{bordered:!0},"undefined"!==typeof t?t.valueType:"some value"),r.createElement(C.W,{bordered:!0},"undefined"!==typeof t?JSON.stringify(t.zeroIsSignificant):null),r.createElement(C.W,{bordered:!0},r.createElement("ol",null,"undefined"!==typeof t?t.categoryCombo.categories.map((e=>r.createElement("li",{key:e.id},e.displayName))):null)),r.createElement(C.W,{bordered:!0},r.createElement("ol",null,"undefined"!==typeof t?t.dataSetElements.map((e=>r.createElement("li",{key:e.dataSet.id},e.dataSet.displayName))):null)),r.createElement(C.W,{bordered:!0},r.createElement("ol",null,"undefined"!==typeof t?t.dataElementGroups.map((e=>r.createElement("li",{key:e.id},e.displayName))):null)))}(t))}function ze(e){let{resourceType:t}=e;const l=(0,i.useRecoilValue)(E);return 0===(null===l||void 0===l?void 0:l.length)?r.createElement("div",null,r.createElement("h3",null," ",w.Z.t("Data elements in {{variables}}",{variables:t})," "),r.createElement("p",null,w.Z.t("There were no Data Elements in the {{variables}} Calculations",{resourceType:t})," ")):r.createElement("div",null,r.createElement("h3",null," ",w.Z.t("Data elements in {{variables}}",{variables:t})," "),r.createElement("p",null," ",w.Z.t("The following is the summary of the data elements used in calculations:")," "),r.createElement(_.w,null,r.createElement(P.s,null,r.createElement(k.U,null,r.createElement(G.p,{bordered:!0},w.Z.t("Data Element")),r.createElement(G.p,{bordered:!0},w.Z.t("Expression part (Numerator/ Denominator)")),r.createElement(G.p,null,w.Z.t("Value Type")),r.createElement(G.p,null,w.Z.t("Zero Significance")),r.createElement(G.p,null,w.Z.t("Categories")),r.createElement(G.p,null,w.Z.t("Datasets/ Programs")),r.createElement(G.p,null,w.Z.t("Groups")))),r.createElement(U.R,null,null===l||void 0===l?void 0:l.map(((e,t)=>r.createElement(Ve,{key:t,datEl:e,location:null===e||void 0===e?void 0:e.location}))))))}function $e(e){let{aggregate:t}=e;const l=(0,i.useSetRecoilState)(g),n=(0,v.bQ)(),a=null===t||void 0===t?void 0:t.map((e=>null===e||void 0===e?void 0:e.id)),{loading:o,error:d,data:u}=Oe(a,n),s=null===u||void 0===u?void 0:u.dataSets;return(0,r.useEffect)((()=>{let e=0;return null===s||void 0===s||s.map((t=>{e+=null===t||void 0===t?void 0:t.length})),l(e),()=>{}}),[u]),o?r.createElement(B,{text:""}):d?r.createElement(L,{error:d}):r.createElement("div",null,r.createElement("ul",null,null===t||void 0===t?void 0:t.map(((e,t)=>{var l,n;return r.createElement("li",{key:(null===e||void 0===e?void 0:e.id)+t},null===e||void 0===e?void 0:e.displayName,r.createElement("ul",null," ",(null===(l=s[t])||void 0===l?void 0:l.length)>1?w.Z.t("sources"):"",null===(n=s[t])||void 0===n?void 0:n.map((e=>r.createElement("li",{key:null===e||void 0===e?void 0:e.id},null===e||void 0===e?void 0:e.displayName," ",w.Z.t(" submitting ")," ",null===e||void 0===e?void 0:e.periodType," ",w.Z.t(" after every ")," ",null===e||void 0===e?void 0:e.timelyDays," ",w.Z.t("days")," ")))))}))))}ze.PropTypes={resourceType:c().string.isRequired},$e.propTypes={aggregate:c().array.isRequired};const Je={programs:{resource:"programStages",params:e=>{let{dataElementId:t}=e;return{fields:["program[id,displayName]"],filter:[`programStageDataElements.dataElement.id:eq:${t}`]}}}};function Qe(e){var t,l;let{id:n,name:a}=e;const o=n,d=(0,i.useSetRecoilState)(y),{loading:u,error:s,data:c,refetch:m}=(0,v.u_)(Je,{variables:{dataElementId:o}});return(0,r.useEffect)((()=>{m({id:n})}),[n]),(0,r.useEffect)((()=>{d((e=>{var t,l;return e+(null===c||void 0===c||null===(t=c.programs)||void 0===t||null===(l=t.programStages)||void 0===l?void 0:l.length)}))}),[c]),u?r.createElement(B,{text:""}):s?r.createElement(L,{error:s}):r.createElement("div",null,a,r.createElement("ul",null,null===c||void 0===c||null===(t=c.programs)||void 0===t||null===(l=t.programStages)||void 0===l?void 0:l.map((e=>{var t,l;return r.createElement("li",{key:null===e||void 0===e||null===(t=e.program)||void 0===t?void 0:t.id},r.createElement("b",null,null===e||void 0===e||null===(l=e.program)||void 0===l?void 0:l.displayName)," ",w.Z.t("submitting records on every event(case or individual)"))}))))}Qe.propTypes={id:c().string.isRequired,name:c().string.isRequired};const He={sources:{resource:"dataElementGroups",id:e=>{let{id:t}=e;return t},params:{fields:["dataElements[id,displayName,domainType]"]}}};function Ke(e){var t,l;let{id:a}=e;const{loading:i,error:o,data:d,refetch:u}=(0,v.u_)(He,{variables:{id:a}});(0,r.useEffect)((()=>{u({id:a})}),[a]);const s=(0,r.useMemo)((()=>{var e;return(0,n.filter)(null===d||void 0===d||null===(e=d.sources)||void 0===e?void 0:e.dataElements,(e=>(null===e||void 0===e?void 0:e.domainType)===D.TRACKER))}),[d]),c=(0,r.useMemo)((()=>{var e;return(0,n.filter)(null===d||void 0===d||null===(e=d.sources)||void 0===e?void 0:e.dataElements,(e=>(null===e||void 0===e?void 0:e.domainType)===D.AGGREGATE))}),[d]);return i?r.createElement(B,{text:""}):o?r.createElement(L,{error:o}):r.createElement("div",null,r.createElement("h3",null,w.Z.t("Data sources (Datasets/Programs)")," "),r.createElement("p",null," ",w.Z.t("Data elements in this group are captured from the following sources")," "),0===(null===d||void 0===d||null===(t=d.sources)||void 0===t||null===(l=t.dataElements)||void 0===l?void 0:l.length)?w.Z.t("There are no Data Elements in this Data Element group"):"",(null===c||void 0===c?void 0:c.length)>0?r.createElement("h4",null,w.Z.t("For Aggregate Data Elements:")," "):"",(null===c||void 0===c?void 0:c.length)>0?r.createElement($e,{aggregate:c}):"",(null===s||void 0===s?void 0:s.length)>0?r.createElement("h4",null,w.Z.t("For Tracker Data Elements:")," "):"",(null===s||void 0===s?void 0:s.length)>0?s.map((e=>r.createElement(Qe,{id:null===e||void 0===e?void 0:e.id,name:null===e||void 0===e?void 0:e.displayName}))):"")}function Ye(e){var t;let{dataElementsArray:l}=e;const a=(0,v.bQ)(),i=null===l||void 0===l?void 0:l.map((e=>null===e||void 0===e?void 0:e.id)),{loading:o,error:d,data:u}=function(e,t){const[l,n]=(0,r.useState)(!0),[a,i]=(0,r.useState)(!1),[o,d]=(0,r.useState)();return(0,r.useEffect)((()=>{let l;(async function(){l=await De(t,e)})().then((()=>{d({matches:l}),n(!1)})).catch((e=>{n(!1),i(e)}))}),[null===e||void 0===e?void 0:e.length]),{loading:l,error:a,data:o}}(i,a),s=(0,n.reduce)(null!==(t=null===u||void 0===u?void 0:u.matches)&&void 0!==t?t:[],(function(e,t){var l,n,a,r,i,o;return null!==(l=null!==(n=e+(null===t||void 0===t||null===(a=t.numeratorMatch)||void 0===a||null===(r=a.indicators)||void 0===r?void 0:r.length))&&void 0!==n?n:0+(null===t||void 0===t||null===(i=t.denominatorMatch)||void 0===i||null===(o=i.indicators)||void 0===o?void 0:o.length))&&void 0!==l?l:0}),0);return o?r.createElement(B,{text:""}):d?r.createElement(L,{error:d}):r.createElement(r.Fragment,null,w.Z.t("It\u2019s data elements belongs to {{variables}} indicators using it as numerator/denominator",{variables:s}))}Ke.prototype={id:c().string.isRequired},Ye.propTypes={dataElementsArray:c().array.isRequired};const Xe={sources:{resource:"dataElementGroups",id:e=>{let{id:t}=e;return t},params:{fields:["dataElements"]}}};function et(e){var t,l,n;let{id:a}=e;const{loading:o,error:d,data:u,refetch:s}=(0,v.u_)(Xe,{variables:{id:a}}),c=(0,i.useRecoilValue)(g),m=(0,i.useRecoilValue)(y);return(0,r.useEffect)((()=>{s({id:a})}),[a]),o?r.createElement(B,{text:""}):d?r.createElement(L,{error:d}):r.createElement("div",null,r.createElement("h3",null,w.Z.t(" Data element group Facts")),r.createElement("ul",null,r.createElement("li",null," ",w.Z.t("It has {{variables}} data Elements",{variables:null===u||void 0===u||null===(t=u.sources)||void 0===t||null===(l=t.dataElements)||void 0===l?void 0:l.length})),r.createElement("li",null," ",w.Z.t("It\u2019s data elements belongs to {{variables}} dataset and {{variables2}} program sources of data",{variables:c,variables2:m})),r.createElement("li",null,r.createElement(Ye,{dataElementsArray:null===u||void 0===u||null===(n=u.sources)||void 0===n?void 0:n.dataElements})," ")))}function tt(e){let{href:t,id:l}=e;return r.createElement("div",null,"Identified by:"," ",r.createElement("i",null," ",r.createElement("a",{style:{textDecoration:"none"},href:t+".json",target:"_blank",rel:"noreferrer"},l)," "))}tt.PropTypes={id:c().string.isRequired,href:c().string.isRequired};const lt={dataElementGroups:{resource:"dataElementGroups",id:e=>{let{id:t}=e;return t},params:{fields:["id","displayName","displayDescription","displayShortName","code","href"]}}};function nt(e){let{id:t}=e;const{loading:l,error:n,data:a,refetch:i}=(0,v.u_)(lt,{variables:{id:t}});if((0,r.useEffect)((()=>{i({id:t})}),[t]),l)return r.createElement(B,{text:""});if(n)return r.createElement(L,{error:n});const o=null===a||void 0===a?void 0:a.dataElementGroups;return r.createElement("div",null,r.createElement("h2",null,null===o||void 0===o?void 0:o.displayName),r.createElement("h3",null,w.Z.t("Introduction")," "),r.createElement("p",null," ",w.Z.t("{{variables1}}  can be described as {{variables2}}.\n            It\u2019s labelled in short as {{variables3}} and has a code of {{variables4}}.",{variables1:null===o||void 0===o?void 0:o.displayName,variables2:null===o||void 0===o?void 0:o.displayDescription,variables3:null===o||void 0===o?void 0:o.displayShortName,variables4:null===o||void 0===o?void 0:o.code})),r.createElement(tt,{href:null===o||void 0===o?void 0:o.href,id:null===o||void 0===o?void 0:o.id}))}const at={sources:{resource:"dataElementGroups",id:e=>{let{id:t}=e;return t},params:{fields:["dataElements[id,displayName]"]}}};function rt(e){var t,l;let{id:n}=e;const{loading:a,error:i,data:o,refetch:d}=(0,v.u_)(at,{variables:{id:n}});return(0,r.useEffect)((()=>{d({id:n})}),[n]),a?r.createElement(B,{text:""}):i?r.createElement(L,{error:i}):r.createElement("div",null,r.createElement("h3",null,w.Z.t("Related Indicators")," "),r.createElement("p",null,w.Z.t("The following is the summary of indicators using the data elements in this group")),r.createElement("ul",null,null===o||void 0===o||null===(t=o.sources)||void 0===t||null===(l=t.dataElements)||void 0===l?void 0:l.map((e=>r.createElement("li",{key:null===e||void 0===e?void 0:e.id},r.createElement("div",null,r.createElement("b",null," ",null===e||void 0===e?void 0:e.displayName," "),r.createElement(Pe,{id:null===e||void 0===e?void 0:e.id})))))))}function it(e){const t=e.id;return r.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.createElement(nt,{id:t}),r.createElement(Ke,{id:t}),r.createElement(et,{id:t}),r.createElement(rt,{id:t}),r.createElement(ze,{resourceType:"Data Element Group"}),r.createElement($,{id:t,resourceType:"dataElementGroups"}))}function ot(e){return(null===e||void 0===e?void 0:e.search("dataElements"))>=0?I.DATA_ELEMENT:(null===e||void 0===e?void 0:e.search("indicators"))>=0?I.INDICATOR:(null===e||void 0===e?void 0:e.search("programIndicators"))>=0?I.PROGRAM_INDICATOR:(null===e||void 0===e?void 0:e.search("dataElementGroups"))>=0?I.DATA_ELEMENT_GROUP:(null===e||void 0===e?void 0:e.search("indicatorGroups"))>=0?I.INDICATOR_GROUP:(null===e||void 0===e?void 0:e.search("dataStore/function"))>=0?I.FUNCTION:(null===e||void 0===e?void 0:e.search("dataSets"))>=0?I.DATASET:void 0}const dt={identifiableObjects:{resource:"identifiableObjects",id:e=>{let{id:t}=e;return t},params:{fields:["id","displayName","href","description","code","lastUpdated"]}}},ut={functionDetails:{resource:"dataStore/functions",id:e=>{let{id:t}=e;return t}}};async function st(e,t){const l=null===t||void 0===t?void 0:t.map((t=>new Promise(((l,n)=>{l(async function(e,t){const l=await e.query(ut,{variables:{id:t}});return null===l||void 0===l?void 0:l.functionDetails}(e,t))}))));return await Promise.all(l).then((e=>e.map(((e,t)=>e))))}async function ct(e,t){const l=null===t||void 0===t?void 0:t.map((t=>new Promise(((l,n)=>{l(async function(e,t){const l=await e.query(dt,{variables:{id:t}});return null===l||void 0===l?void 0:l.identifiableObjects}(e,t))}))));return await Promise.all(l).then((e=>e.map(((e,t)=>e))))}function mt(e){return null===e||void 0===e?void 0:e.search(/[a-zA-Z]/g)}function vt(e){return e.search("^[A-Za-z0-9]+$")>=0}(0,i.atom)({key:"functionDictionarySourceSelector",default:0}),(0,i.atom)({key:"allFunctionsInStore",default:[]}),(0,i.atom)({key:"showFunctionsSearchResult",default:!0}),(0,i.atom)({key:"searchedResultRules",default:[]}),(0,i.atom)({key:"oneFunctionSelected",default:!1}),(0,i.atom)({key:"showAllFunctions",default:!0});function Et(e){var t,l,n,a;let{result:i}=e;return r.createElement("div",null,r.createElement("p",null,w.Z.t("Function will be visible for users with the following access:")),r.createElement(_.w,null,r.createElement(P.s,null,r.createElement(k.U,null,r.createElement(G.p,null),r.createElement(G.p,null,w.Z.t("Details")))),r.createElement(U.R,null,r.createElement(k.U,null,r.createElement(C.W,{bordered:!0,tag:"th"},w.Z.t("User Access")),r.createElement(C.W,{bordered:!0},w.Z.t(0===(null===i||void 0===i||null===(t=i.userAccesses)||void 0===t?void 0:t.length)?"No access granted":("","")),r.createElement("ul",null,null===i||void 0===i||null===(l=i.userAccesses)||void 0===l?void 0:l.map((e=>r.createElement("li",{key:e.id},null===e||void 0===e?void 0:e.displayName," ",w.Z.t("can")," ",r.createElement("i",null,W(e.access)," ")," ")))))),r.createElement(k.U,null,r.createElement(C.W,{bordered:!0,tag:"th"},w.Z.t("User Group Access")),r.createElement(C.W,{bordered:!0},w.Z.t(0===(null===i||void 0===i||null===(n=i.userGroupAccesses)||void 0===n?void 0:n.length)?"No access granted":("","")),r.createElement("ul",null,null===i||void 0===i||null===(a=i.userGroupAccesses)||void 0===a?void 0:a.map((e=>r.createElement("li",{key:e.id},null===e||void 0===e?void 0:e.displayName," ",w.Z.t("can")," ",r.createElement("i",null,W(e.access))," ")))))))))}const pt={sources:{resource:"dataStore/functions",id:e=>{let{id:t}=e;return t+"/metaData"}}};function ft(e){var t,l,n,a,i,o;let{id:d}=e;(0,r.useEffect)((()=>{m({id:d})}),[d]);const{loading:u,error:s,data:c,refetch:m}=(0,v.u_)(pt,{variables:{id:d}}),E=null===c||void 0===c?void 0:c.sources;return u?r.createElement(B,{text:""}):s?r.createElement(L,{error:s}):r.createElement("div",null,r.createElement("h3",null,w.Z.t("Accesibility & Sharing Settings")," "),r.createElement("p",null," ",w.Z.t("This Function was first created on")," ",r.createElement("i",null," ",new Date(null===E||void 0===E?void 0:E.created).toLocaleString("en-GB"))," ",w.Z.t(null!==E&&void 0!==E&&null!==(t=E.user)&&void 0!==t&&t.displayName?"by":"")," ",r.createElement("b",null,null===E||void 0===E||null===(l=E.user)||void 0===l?void 0:l.displayName," ")," ",w.Z.t("and last updated on")," ",r.createElement("i",null,new Date(null===E||void 0===E?void 0:E.lastUpdated).toLocaleString("en-GB"))," ",w.Z.t(null!==E&&void 0!==E&&null!==(n=E.lastUpdatedBy)&&void 0!==n&&n.displayName?"by":"")," ",r.createElement("b",null,null===E||void 0===E||null===(a=E.lastUpdatedBy)||void 0===a?void 0:a.displayName)," ."),(null===E||void 0===E||null===(i=E.userAccesses)||void 0===i?void 0:i.length)>0&&(null===E||void 0===E||null===(o=E.userGroupAccesses)||void 0===o?void 0:o.length)>0?r.createElement(Et,{result:E}):"")}function gt(e){var t,l,n;let{json:a}=e;const i=function(e){var t;const l=[];let n=e,a=mt(null===(t=n)||void 0===t?void 0:t.toString());for(;a>=0;){n=n.substring(a);const e=n.substring(0,11);if(vt(e))l.push(e),n=n.substring(11);else{const e=n.search(/[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/);n=n.substring(e)}a=mt(n)}return l}(null===(t=JSON.stringify(a))||void 0===t?void 0:t.replace(/\s/g,"")),o=(0,v.bQ)(),{loading:d,error:u,data:s}=function(e,t){const[l,n]=(0,r.useState)(!0),[a,i]=(0,r.useState)(!1),[o,d]=(0,r.useState)();return(0,r.useEffect)((()=>{let l;(async function(){l=await ct(t,e)})().then((()=>{d({idDetails:l}),n(!1)})).catch((e=>{n(!1),i(e)}))}),[JSON.stringify(e)]),{loading:l,error:a,data:o}}(i,o);return d?r.createElement(B,{text:""}):u?r.createElement(L,{error:u}):0===(null===s||void 0===s||null===(l=s.idDetails)||void 0===l?void 0:l.length)?r.createElement(r.Fragment,null):r.createElement("div",null,r.createElement("h3",null,w.Z.t("Data Sources")," "),r.createElement("p",null,w.Z.t("Function have rules calculating from multiple data sources. Here are few data sources observed")),r.createElement(_.w,null,r.createElement(P.s,null,r.createElement(k.U,null,r.createElement(G.p,{bordered:!0},w.Z.t("Id")),r.createElement(G.p,{bordered:!0},w.Z.t("Name")),r.createElement(G.p,null,w.Z.t("Description")),r.createElement(G.p,null,w.Z.t("Code")),r.createElement(G.p,null,w.Z.t("Type")),r.createElement(G.p,null,w.Z.t("More details")),r.createElement(G.p,null,w.Z.t("Last updated")))),r.createElement(U.R,null,null===s||void 0===s||null===(n=s.idDetails)||void 0===n?void 0:n.map((e=>{var t,l;return r.createElement(k.U,{key:e.id},r.createElement(C.W,{bordered:!0},null===e||void 0===e?void 0:e.id),r.createElement(C.W,{bordered:!0},null===e||void 0===e?void 0:e.displayName),r.createElement(C.W,{bordered:!0},null!==(t=null===e||void 0===e?void 0:e.description)&&void 0!==t?t:"No description"),r.createElement(C.W,{bordered:!0},null!==(l=null===e||void 0===e?void 0:e.code)&&void 0!==l?l:"no code"),r.createElement(C.W,{bordered:!0},function(e){switch(ot(e)){case I.DATA_ELEMENT:return"Data Element";case I.INDICATOR:return"Indicator";case I.PROGRAM_INDICATOR:return"Program Indicator";case I.DATA_ELEMENT_GROUP:return"Data Element Group";case I.INDICATOR_GROUP:return"Indicator Group";case I.FUNCTION:return"Function";case I.DATASET:return"Dataset";default:return"Other"}}(null===e||void 0===e?void 0:e.href)),r.createElement(C.W,{bordered:!0},r.createElement("i",null," ",r.createElement("a",{style:{textDecoration:"none"},href:(null===e||void 0===e?void 0:e.href)+".json",target:"_blank",rel:"noreferrer"},(null===e||void 0===e?void 0:e.href)+".json")," ")),r.createElement(C.W,{bordered:!0},q(null===e||void 0===e?void 0:e.lastUpdated)))})))))}ft.propTypes={id:c().string.isRequired};const{Buffer:yt}=l(57917);function bt(e){var t,l,n,a,i;let{functionObj:o}=e;const d=o;return r.createElement("div",null,r.createElement("h3",null,w.Z.t("")," Function Facts"),r.createElement("ul",null,r.createElement("li",null,w.Z.t("It is approximately {{variables}}  in size",{variables:se(yt.byteLength(null===d||void 0===d?void 0:d.function,"utf-8"),2)})),r.createElement("li",null,w.Z.t("")," It has ",null===d||void 0===d||null===(t=d.rules)||void 0===t?void 0:t.length," associated rules"),(null===d||void 0===d||null===(l=d.function)||void 0===l?void 0:l.search("Fn"))>=0?r.createElement("li",null,w.Z.t("It\u2019s using function analytics library")):"",(null===d||void 0===d||null===(n=d.function)||void 0===n?void 0:n.search("$."))>=0?r.createElement("li",null,w.Z.t("It\u2019s using jquery api library ")):"",(null===d||void 0===d||null===(a=d.function)||void 0===a?void 0:a.search("$.ajax"))>=0?r.createElement("li",null,w.Z.t("Performs ajax promises")):"",(null===d||void 0===d||null===(i=d.function)||void 0===i?void 0:i.search("../../../api/"))>=0?r.createElement("li",null,w.Z.t("Fetches from DHIS2 API without function analytics")):""))}function ht(e){let{ruleObj:t,functionObj:l}=e;return r.createElement("div",null,r.createElement("h3",null,w.Z.t("Introduction")," "),r.createElement("p",null," ",r.createElement("b",null," ",null===t||void 0===t?void 0:t.name," ")," ",w.Z.t(null!==t&&void 0!==t&&t.description?"can be best described as: {{variables}}":"",{variables:null===t||void 0===t?void 0:t.description})),r.createElement(tt,{id:null===t||void 0===t?void 0:t.id,href:null===l||void 0===l?void 0:l.href}))}function Tt(e){var t;let{ruleObj:l,functionObj:n}=e;const i=a().filter(null!==(t=null===n||void 0===n?void 0:n.rules)&&void 0!==t?t:[],(e=>(null===e||void 0===e?void 0:e.id)!==(null===l||void 0===l?void 0:l.id)));return r.createElement("div",null,r.createElement("h3",null,w.Z.t("Function Rules")," "),r.createElement("p",null," ",w.Z.t("The following are available rules used for data analytics")," "),r.createElement(_.w,null,r.createElement(P.s,null,r.createElement(k.U,null,r.createElement(G.p,{bordered:!0},w.Z.t("Id")),r.createElement(G.p,{bordered:!0},w.Z.t("Name")),r.createElement(G.p,null,w.Z.t("Description")),r.createElement(G.p,null,w.Z.t("Default Rule")),r.createElement(G.p,null,w.Z.t("JSON")))),r.createElement(U.R,null,null===i||void 0===i?void 0:i.map((e=>r.createElement(k.U,{key:null===e||void 0===e?void 0:e.id},r.createElement(C.W,{bordered:!0},null===e||void 0===e?void 0:e.id),r.createElement(C.W,{bordered:!0},null===e||void 0===e?void 0:e.name),r.createElement(C.W,{bordered:!0},null===e||void 0===e?void 0:e.description),r.createElement(C.W,{bordered:!0},(null===e||void 0===e?void 0:e.isDefault)?"Yes":"No"),r.createElement(C.W,{bordered:!0},JSON.stringify(null===e||void 0===e?void 0:e.json))))))))}function Nt(e){let{ruleObj:t,functionObj:l}=e;return r.createElement("div",null,r.createElement(ht,{ruleObj:t,functionObj:l}),r.createElement(gt,{json:null===t||void 0===t?void 0:t.json}),r.createElement(Tt,{ruleObj:t,functionObj:l}),r.createElement(bt,{functionObj:l}),r.createElement(ft,{id:null===l||void 0===l?void 0:l.id}))}function Rt(e){var t,l;let{id:n}=e;const i=(0,v.bQ)(),o=n.split(".")[0],d=n.split(".")[1],{loading:u,error:s,data:c}=function(e,t){const[l,n]=(0,r.useState)(!0),[a,i]=(0,r.useState)(!1),[o,d]=(0,r.useState)();return(0,r.useEffect)((()=>{(async function(){return await st(e,t)})().then((e=>{d(e),n(!1)})).catch((e=>{n(!1),i(e)}))}),[]),{loading:l,error:a,data:o}}([o],i),m=a().filter(null!==(t=null===(l=c[0])||void 0===l?void 0:l.rules)&&void 0!==t?t:[],(e=>(null===e||void 0===e?void 0:e.id)===d));return u?r.createElement(B,{text:""}):s?r.createElement(L,{error:s}):r.createElement(Nt,{ruleObj:m[0],functionObj:c[0]})}ht.PropTypes={ruleObj:s.PropTypes.object.isRequired,functionObj:s.PropTypes.object.isRequired},Rt.propTypes={id:c().string.isRequired};const Zt={dataElementInIndicator:{resource:"dataElements",id:e=>{let{id:t}=e;return t},params:{fields:["id","aggregationType","valueType","zeroIsSignificant","dataSetElements[dataSet[id,displayName]]","dataElementGroups[id,displayName]","categoryCombo[categories[id,displayName]]"]}}};function St(e){const t=e.datEl;function l(e){const{loading:t,error:l,data:n}=(0,v.u_)(Zt,{variables:{id:e}});return t?r.createElement(F.V,null):l?r.createElement("p",null," ",l," "):n}return r.createElement(k.U,null,r.createElement(C.W,{bordered:!0},t.val),r.createElement(C.W,{bordered:!0},t.location),function(e){let t;if(-1==(null===(n=e.id)||void 0===n?void 0:n.indexOf(".")))t=l(e.id).dataElementInIndicator;else{t=l(e.id.split(".")[0]).dataElementInIndicator}var n;return r.createElement(r.Fragment,null,r.createElement(C.W,{bordered:!0},"undefined"!==typeof t?t.valueType:"some value"),r.createElement(C.W,{bordered:!0},"undefined"!==typeof t?JSON.stringify(t.zeroIsSignificant):null),r.createElement(C.W,{bordered:!0},r.createElement("ol",null,"undefined"!==typeof t?t.categoryCombo.categories.map((e=>r.createElement("li",{key:e.id},e.displayName))):null)),r.createElement(C.W,{bordered:!0},r.createElement("ol",null,"undefined"!==typeof t?t.dataSetElements.map((e=>r.createElement("li",{key:e.dataSet.id},e.dataSet.displayName))):null)),r.createElement(C.W,{bordered:!0},r.createElement("ol",null,"undefined"!==typeof t?t.dataElementGroups.map((e=>r.createElement("li",{key:e.id},e.displayName))):null)))}(t))}function It(){const e=(0,i.useRecoilValue)(E);if(0===(null===e||void 0===e?void 0:e.length))return r.createElement("div",null,r.createElement("h3",null," ",w.Z.t("Data elements in indicator")," "),r.createElement("p",null,w.Z.t("There were no Data Elements in the Indicator Calculations")," "));let t=0;return r.createElement("div",null,r.createElement("h3",null,w.Z.t("Data elements in indicator")," "),r.createElement("p",null," ",w.Z.t("The following is the summary of the data elements used in calculations:")," "),r.createElement(_.w,null,r.createElement(P.s,null,r.createElement(k.U,null,r.createElement(G.p,{bordered:!0},w.Z.t("Data Element")),r.createElement(G.p,{bordered:!0},w.Z.t("Expression part (Numerator/ Denominator)")),r.createElement(G.p,null,w.Z.t("Value Type")),r.createElement(G.p,null,w.Z.t("Zero Significance")),r.createElement(G.p,null,w.Z.t("Categories")),r.createElement(G.p,null,w.Z.t("Datasets/ Programs")),r.createElement(G.p,null,w.Z.t("Groups")))),r.createElement(U.R,null,null===e||void 0===e?void 0:e.map((e=>(t++,r.createElement(St,{key:t,datEl:e})))))))}const Dt={dataSets:{resource:"dataSets",id:e=>{let{id:t}=e;return t},params:{fields:["id","displayName","displayDescription","timelyDays","expiryDays","periodType","organisationUnits[id,displayName]","dataSetElements[dataElement[id,displayName]]","legendSets[id,displayName]"]}}};function At(e){const t=e.dataSet,l=t.id,{loading:n,error:a,data:i}=(0,v.u_)(Dt,{variables:{id:l}});return r.createElement(r.Fragment,null,r.createElement(k.U,null,r.createElement(C.W,{bordered:!0},null===t||void 0===t?void 0:t.val),r.createElement(C.W,{bordered:!0},null===t||void 0===t?void 0:t.location),function(e){return r.createElement(r.Fragment,null,r.createElement(C.W,{bordered:!0},null===e||void 0===e?void 0:e.timelyDays),r.createElement(C.W,{bordered:!0},null===e||void 0===e?void 0:e.expiryDays),r.createElement(C.W,{bordered:!0},null===e||void 0===e?void 0:e.periodType),r.createElement(C.W,{bordered:!0},r.createElement("div",{className:qe.sources},r.createElement("ol",null,null===e||void 0===e?void 0:e.organisationUnits.map((e=>r.createElement("li",{key:null===e||void 0===e?void 0:e.id},null===e||void 0===e?void 0:e.displayName)))))),r.createElement(C.W,{bordered:!0},r.createElement("div",{className:qe.sources},r.createElement("ol",null,null===e||void 0===e?void 0:e.dataSetElements.map((e=>{var t,l;return r.createElement("li",{key:null===e||void 0===e||null===(t=e.dataElement)||void 0===t?void 0:t.id},null===e||void 0===e||null===(l=e.dataElement)||void 0===l?void 0:l.displayName)}))))),r.createElement(C.W,{bordered:!0},r.createElement("div",{className:qe.sources},r.createElement("ol",null,null===e||void 0===e?void 0:e.legendSets.map((e=>r.createElement("li",{key:e.id},e.displayName)))))))}(null===i||void 0===i?void 0:i.dataSets)))}function Ot(){const e=(0,i.useRecoilValue)(f);if(0===e.length)return r.createElement("div",null,r.createElement("h3",null," ",w.Z.t("Datasets (Reporting rates) in indicator")," "),r.createElement("p",null,w.Z.t("There were no Datasets (Reporting rates) in the Indicator Calculations")," "));let t=0;return r.createElement("div",null,r.createElement("h3",null,w.Z.t("Datasets (Reporting rates) in indicator")," "),r.createElement("p",null,w.Z.t("The following is the summary of the datasets (reporting rates) used in calculations:")," "),r.createElement(_.w,null,r.createElement(P.s,null,r.createElement(k.U,null,r.createElement(G.p,{bordered:!0},w.Z.t("Dataset")),r.createElement(G.p,{bordered:!0},w.Z.t("Description")),r.createElement(G.p,null,w.Z.t("Timely Submission")),r.createElement(G.p,null,w.Z.t("Expiry days")),r.createElement(G.p,null,w.Z.t("Period type")),r.createElement(G.p,null,w.Z.t("Assigned orgunits")),r.createElement(G.p,null,w.Z.t("Data elements")),r.createElement(G.p,null,w.Z.t("Legends")))),r.createElement(U.R,null,e.map((e=>(++t,r.createElement(At,{key:t,dataSet:e})))))))}const wt={sources:{resource:"indicators",id:e=>{let{id:t}=e;return t},params:{fields:["id","displayName","dataSets[id,displayName,timelyDays,periodType]"]}}};function _t(e){var t,l;let{id:n}=e;const{loading:a,error:i,data:o,refetch:d}=(0,v.u_)(wt,{variables:{id:n}});return(0,r.useEffect)((()=>{d({id:n})}),[n]),a?r.createElement(B,null):i?r.createElement(L,{error:i}):0===(null===o||void 0===o||null===(t=o.sources)||void 0===t?void 0:t.dataSets.length)?r.createElement("div",null):r.createElement("div",null,r.createElement("h3",null,w.Z.t("Data sources (Datasets/Programs)")),r.createElement("p",null,w.Z.t("Indicator is captured from the following sources,")),r.createElement("h5",null,"Datasets"),r.createElement("ul",null,null===o||void 0===o||null===(l=o.sources)||void 0===l?void 0:l.dataSets.map((e=>r.createElement("li",{key:null===e||void 0===e?void 0:e.id},r.createElement("b",null,null===e||void 0===e?void 0:e.displayName)," ",w.Z.t("submitting {{variables1}} after every {{variables2}} days",{variables1:null===e||void 0===e?void 0:e.periodType,variables2:null===e||void 0===e?void 0:e.timelyDays}))))))}_t.propTypes={id:c().string.isRequired};var Pt=l(86837),kt=l(29989),Gt={"indicator-row-link":"indicatorGroupRow_indicator-row-link__aN7cG"};function Ut(e){var t;function l(e){let t;var l;n?t=null===(l=e)||void 0===l?void 0:l.map((e=>r.createElement("li",{key:e.id,className:Gt.indicatorRowLink,onClick:()=>o(null===e||void 0===e?void 0:e.id)},null===e||void 0===e?void 0:e.displayName))):t=(e=e.slice(0,3)).map((e=>r.createElement("li",{key:null===e||void 0===e?void 0:e.id,className:Gt.indicatorRowLink,onClick:()=>o(null===e||void 0===e?void 0:e.id)},null===e||void 0===e?void 0:e.displayName)));return t}const[n,a]=(0,r.useState)(!1),i=(0,kt.k6)();function o(e){i.replace("/indicator/"+e)}return r.createElement(k.U,null,r.createElement(C.W,{bordered:!0},e.no),r.createElement(C.W,{bordered:!0},e.name),r.createElement(C.W,{bordered:!0},e.code),r.createElement(C.W,{bordered:!0},r.createElement("ol",null,l(null===e||void 0===e?void 0:e.indicators)),(null===e||void 0===e||null===(t=e.indicators)||void 0===t?void 0:t.length)>3?r.createElement(Pt.z,{name:"Basic button",onClick:function(){a(!n),l(e.indicators)},value:"default"},w.Z.t(n?"Show less":"Show more")):null))}Ut.PropTypes={no:c().number.isRequired,name:c().string.isRequired,code:c().string.isRequired,indicators:c().arrayOf(Object)};const Ct={indicatorGroups:{resource:"indicators",id:e=>{let{id:t}=e;return t},params:{fields:["indicatorGroups[id,displayName,indicators[id,displayName]]"]}}};function Wt(e){var t,l,n;let{id:a}=e;const{loading:i,error:o,data:d,refetch:u}=(0,v.u_)(Ct,{variables:{id:a}});if((0,r.useEffect)((()=>{u({id:a})}),[a]),i)return r.createElement(B,null);if(o)return r.createElement(L,{error:o});if(null!==d&&void 0!==d&&null!==(t=d.indicatorGroups)&&void 0!==t&&t.indicatorGroups)return r.createElement("p",null,w.Z.t(" There are no indicator facts associated with this indicator"));let s=0;return r.createElement("div",null,r.createElement("h3",null,w.Z.t("Indicator facts")),r.createElement("p",null,w.Z.t("Belongs to the following groups of indicators")),r.createElement("div",null,r.createElement(_.w,null,r.createElement(P.s,null,r.createElement(k.U,null,r.createElement(G.p,null,"#"),r.createElement(G.p,null,w.Z.t("Name")),r.createElement(G.p,null,w.Z.t("Code")),r.createElement(G.p,null,w.Z.t("Indicators")))),r.createElement(U.R,null,null===d||void 0===d||null===(l=d.indicatorGroups)||void 0===l||null===(n=l.indicatorGroups)||void 0===n?void 0:n.map((e=>(s++,r.createElement(Ut,{key:null===e||void 0===e?void 0:e.id,no:s,name:null===e||void 0===e?void 0:e.displayName,code:null===e||void 0===e?void 0:e.id,indicators:null===e||void 0===e?void 0:e.indicators}))))))))}Wt.PropTypes={id:c().string.isRequired};var qt={"identify-link":"introduction_identify-link__--rdA"};const xt={indicatorsDetails:{resource:"indicators",id:e=>{let{id:t}=e;return t},params:{fields:["id","name","displayDescription","href","numeratorDescription","denominatorDescription","indicatorType[displayName,id]"]}}};function Mt(e){var t;let{id:l}=e;const{loading:n,error:a,data:i,refetch:o}=(0,v.u_)(xt,{variables:{id:l}});if((0,r.useEffect)((()=>{o({id:l})}),[l]),n)return r.createElement(B,null);if(a)return r.createElement(L,{error:a});const d=null===i||void 0===i?void 0:i.indicatorsDetails;return r.createElement("div",null,r.createElement("h2",{id:"test-indicator-details"},null===d||void 0===d?void 0:d.name," "),r.createElement("h3",null,w.Z.t("Introduction")),r.createElement("p",null,r.createElement("b",{id:"test-indicator-details"},null===d||void 0===d?void 0:d.name," "),w.Z.t("is a"),r.createElement("b",null," ",null===d||void 0===d||null===(t=d.indicatorType)||void 0===t?void 0:t.displayName," "),w.Z.t("indicator, measured by"),r.createElement("b",{id:"test-indicator-details"}," ",null===d||void 0===d?void 0:d.numeratorDescription," "),w.Z.t("to"),r.createElement("b",{id:"test-indicator-details"}," ",null===d||void 0===d?void 0:d.denominatorDescription," ")),r.createElement("p",{id:"test-indicator-details"},w.Z.t("Its described as {{variable}}",{variable:null===d||void 0===d?void 0:d.displayDescription})),r.createElement("p",null,r.createElement("span",null,r.createElement("i",{onClick:()=>onClickIdentified(null===d||void 0===d?void 0:d.id)},w.Z.t("Identified by:")," ",r.createElement("span",{id:"test-indicator-details",className:qt.identifylink}," ",null===d||void 0===d?void 0:d.id," ")," "))))}Mt.propTypes={id:c().string.isRequired};function jt(e){var t;const l=null===e||void 0===e?void 0:e.legendSet;return r.createElement("li",{key:null===l||void 0===l?void 0:l.id},r.createElement("p",null,null===l||void 0===l?void 0:l.displayName," spread accross ",null===l||void 0===l||null===(t=l.legends)||void 0===t?void 0:t.length," ","classes of for analysis"),r.createElement("div",null,r.createElement(_.w,null,r.createElement(P.s,null,r.createElement(k.U,null,r.createElement(G.p,null,w.Z.t("Class")),r.createElement(G.p,null,w.Z.t("Upper")),r.createElement(G.p,null,w.Z.t("Lower")),r.createElement(G.p,null,w.Z.t("Color")))),r.createElement(U.R,null,null===l||void 0===l?void 0:l.legends.map((e=>r.createElement(k.U,{key:e.id},r.createElement(C.W,{bordered:!0},null===e||void 0===e?void 0:e.displayName),r.createElement(C.W,{bordered:!0},null===e||void 0===e?void 0:e.endValue),r.createElement(C.W,{bordered:!0},null===e||void 0===e?void 0:e.startValue),r.createElement("td",{bordered:!0,style:{background:null===e||void 0===e?void 0:e.color}}))))))))}const Lt={legendAnalysis:{resource:"indicators",id:e=>{let{id:t}=e;return t},params:{fields:["id","displayName","legendSets[id,displayName,legends[id,displayName,startValue,endValue,color]]"]}}};function Ft(e){var t,l,n;let{id:a}=e;const{loading:i,error:o,data:d,refetch:u}=(0,v.u_)(Lt,{variables:{id:a}});if((0,r.useEffect)((()=>{u({id:a})}),[a]),i)return r.createElement(B,null);if(o)return r.createElement(L,{error:o});if(0===(null===d||void 0===d||null===(t=d.legendAnalysis)||void 0===t||null===(l=t.legendSets)||void 0===l?void 0:l.length))return r.createElement(r.Fragment,null,r.createElement("p",null,"There are no legends associated with these indicator"));const s=null===d||void 0===d||null===(n=d.legendAnalysis)||void 0===n?void 0:n.legendSets;return r.createElement("div",null,r.createElement("h3",null,w.Z.t("Legends for analysis")),r.createElement("p",null,w.Z.t("Uses {{variables}} legends for for analysis, spread accross multiple cut-off points of interest, existing legends are:",{variables:null===s||void 0===s?void 0:s.length})," "),r.createElement("ul",null,null===s||void 0===s?void 0:s.map((e=>r.createElement(jt,{key:null===e||void 0===e?void 0:e.id,legendSet:e})))))}Ft.PropTypes={id:c().string.isRequired};const Bt={programIndicator:{resource:"programIndicators",id:e=>{let{id:t}=e;return t},params:{fields:["id","displayName","aggregationType","analyticsType","analyticsPeriodBoundaries[id,analyticsPeriodBoundaryType,boundaryTarget]","filter","programIndicatorGroups[id,displayName]","legendSets[id,displayName]"]}}};function Vt(e){var t;const l=e.programInd,n=l.id,{loading:a,error:i,data:o}=(0,v.u_)(Bt,{variables:{id:n}}),d=(0,v.bQ)(),[u,s]=(0,r.useState)([]),[c,m]=(0,r.useState)([]),[E,p]=(0,r.useState)([]);(0,r.useEffect)((()=>{var e;if(null!==o&&void 0!==o&&null!==(e=o.programIndicator)&&void 0!==e&&e.filter){var t;const e=ee(null===o||void 0===o||null===(t=o.programIndicator)||void 0===t?void 0:t.filter,"#{");e.length&&h(e,0)}}),[o]),(0,r.useEffect)((()=>{var e;const t=ee(null===o||void 0===o||null===(e=o.programIndicator)||void 0===e?void 0:e.filter,"A{");t.length&&h(t,3)}),[o]),(0,r.useEffect)((()=>{var e;const t=ee(null===o||void 0===o||null===(e=o.programIndicator)||void 0===e?void 0:e.filter,"C{");t.length&&h(t,4)}),[o]);const f=[],g=[],y=[],b=ae(null===o||void 0===o||null===(t=o.programIndicator)||void 0===t?void 0:t.filter,u,[],[],c,E);async function h(e,t){const l=[];let n=0;for(n=0;n<e.length;n++){const t=ie(d,e[n]);l.push(t)}n=0,await Promise.all(l).then((l=>{t===S.DATA_ELEMENT&&l.map((t=>{t.length>1?f.push({id:e[n],val:t[0]+" "+t[1]}):f.push({id:e[n],val:t[0]}),++n})),t===S.ATTRIBUTES&&l.map((t=>{g.push({id:e[n],val:t[0]}),++n})),t===S.CONSTANTS&&l.map((t=>{y.push({id:e[n],val:t[0]}),++n})),f.length===e.length&&s(f),g.length===e.length&&m(g),y.length===e.length&&p(y)}))}return r.createElement(k.U,null,r.createElement(C.W,{bordered:!0},null===l||void 0===l?void 0:l.val),r.createElement(C.W,{bordered:!0},null===l||void 0===l?void 0:l.location),(T=null===o||void 0===o?void 0:o.programIndicator,r.createElement(r.Fragment,null,r.createElement(C.W,{bordered:!0},b),r.createElement(C.W,{bordered:!0},null===T||void 0===T?void 0:T.aggregationType),r.createElement(C.W,{bordered:!0},null===T||void 0===T?void 0:T.analyticsType),r.createElement(C.W,{bordered:!0},r.createElement("ol",null,null===T||void 0===T?void 0:T.analyticsPeriodBoundaries.map((e=>{var t;return r.createElement("li",{key:e.id},re(null===e||void 0===e||null===(t=e.analyticsPeriodBoundaryType)||void 0===t?void 0:t.replace(/_/g," ")))})))),r.createElement(C.W,{bordered:!0},r.createElement("ol",null,null===T||void 0===T?void 0:T.legendSets.map((e=>r.createElement("li",{key:e.id},null===e||void 0===e?void 0:e.displayName))))),r.createElement(C.W,{bordered:!0},r.createElement("ol",null,null===T||void 0===T?void 0:T.programIndicatorGroups.map((e=>r.createElement("li",{key:e.id},null===e||void 0===e?void 0:e.displayName))))))));var T}function zt(){const e=(0,i.useRecoilValue)(p);if(0===e.length)return r.createElement("div",null,r.createElement("h3",null,w.Z.t("Program Indicators in indicator")," "),r.createElement("p",null,w.Z.t("There were no Program Indicators in the Indicator Calculations")," "));let t=0;return r.createElement("div",null,r.createElement("h3",null,w.Z.t("Program Indicators in indicator")," "),r.createElement("p",null,w.Z.t("The following is the summary of the program indicators used in calculations:")," "),r.createElement(_.w,null,r.createElement(P.s,null,r.createElement(k.U,null,r.createElement(G.p,{bordered:!0},w.Z.t("Program Indicator")),r.createElement(G.p,{bordered:!0},w.Z.t("Expression part")),r.createElement(G.p,null,w.Z.t("Filter")),r.createElement(G.p,null,w.Z.t("Aggregation type")),r.createElement(G.p,null,w.Z.t("Analytics type")),r.createElement(G.p,null,w.Z.t("Period boundaries")),r.createElement(G.p,null,w.Z.t("Legends")),r.createElement(G.p,null,w.Z.t("Groups")))),r.createElement(U.R,null,e.map((e=>(++t,r.createElement(Vt,{key:t,programInd:e})))))))}function $t(e){let{id:t}=e;const l=(0,i.useRecoilCallback)((e=>{let{reset:t}=e;return()=>{t(E),t(f),t(p)}}));return(0,r.useEffect)((()=>()=>{l()}),[t]),r.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.createElement(Mt,{id:t}),r.createElement(_t,{id:t}),r.createElement(Wt,{id:t}),r.createElement(Ft,{id:t}),r.createElement(We,{id:t}),r.createElement(It,null),r.createElement(zt,null),r.createElement(Ot,null),r.createElement($,{id:t,resourceType:"indicators"}))}function Jt(e){var t;let{aggregate:l}=e;const n=(0,i.useSetRecoilState)(b),o=(0,i.useSetRecoilState)(N),d=null===l||void 0===l?void 0:l.map((e=>e.split(".")[0]));o((e=>a().concat(e,d)));const u=(0,v.bQ)(),s=null===l||void 0===l?void 0:l.map((e=>null===e||void 0===e?void 0:e.split(".")[0])),{loading:c,error:m,data:E}=Oe(s,u);let p=[];return(0,r.useEffect)((()=>{var e;null===E||void 0===E||null===(e=E.dataSets)||void 0===e||e.map((e=>{e.map((e=>{p.push(e)}))})),p=a().uniqWith(p,a().isEqual),n((e=>a().concat(e,p)))}),[E]),c?r.createElement(B,{text:""}):m?r.createElement(L,{error:m}):r.createElement("div",null,w.Z.t("Datasets"),r.createElement("ul",null,null===(t=p)||void 0===t?void 0:t.map((e=>r.createElement("li",{key:null===e||void 0===e?void 0:e.id},null===e||void 0===e?void 0:e.displayName," ",w.Z.t(" submitting ")," ",null===e||void 0===e?void 0:e.periodType," ",w.Z.t(" after every ")," ",null===e||void 0===e?void 0:e.timelyDays," ",w.Z.t(" days")," ")))))}$t.propTypes={id:c().string.isRequired},Jt.propTypes={aggregate:c().array.isRequired};const Qt={identifiableObjects:{resource:"identifiableObjects",id:e=>{let{id:t}=e;return t},params:{fields:["id","displayName"]}}},Ht={program:{resource:"programIndicators",id:e=>{let{id:t}=e;return t},params:{fields:["program[id,displayName]"]}}};async function Kt(e,t){if((null===t||void 0===t?void 0:t.length)>0){const l=null===t||void 0===t?void 0:t.map((t=>new Promise(((l,n)=>{l(async function(e,t){const l=await e.query(Qt,{variables:{id:t}});return null===l||void 0===l?void 0:l.identifiableObjects}(e,t))}))));return await Promise.all(l).then((e=>e.map(((e,t)=>e))))}}async function Yt(e,t){if((null===t||void 0===t?void 0:t.length)>0){const l=null===t||void 0===t?void 0:t.map((t=>new Promise(((l,n)=>{l(async function(e,t){var l;const n=await e.query(Ht,{variables:{id:t}});return null===n||void 0===n||null===(l=n.program)||void 0===l?void 0:l.program}(e,t))}))));return await Promise.all(l).then((e=>e.map(((e,t)=>e))))}}function Xt(e){var t;let{sources:l}=e;const n=(0,v.bQ)(),o=(0,i.useSetRecoilState)(h),d=(0,i.useSetRecoilState)(T),{loading:u,error:s,data:c}=function(e,t){const[l,n]=(0,r.useState)(!0),[a,i]=(0,r.useState)(!1),[o,d]=(0,r.useState)();return(0,r.useEffect)((()=>{let l=null===e||void 0===e?void 0:e.attr,a=null===e||void 0===e?void 0:e.prgDtEl,r=null===e||void 0===e?void 0:e.prgInd;(async function(){l=await Kt(t,l),a=await Kt(t,a),r=await Yt(t,r)})().then((()=>{d({attr:l,prgInd:r,prgDtEl:a}),n(!1)})).catch((e=>{n(!1),i(e)}))}),[]),{loading:l,error:a,data:o}}(l,n);let m=[],E=[];return(0,r.useEffect)((()=>{var e,t,n;d((e=>a().concat(e,null===l||void 0===l?void 0:l.prgDtEl))),m=a().concat([],null!==(e=null===c||void 0===c?void 0:c.attr)&&void 0!==e?e:[],null!==(t=null===c||void 0===c?void 0:c.prgInd)&&void 0!==t?t:[],null!==(n=null===c||void 0===c?void 0:c.prgDtEl)&&void 0!==n?n:[]),E=a().uniqWith(m,a().isEqual),o((e=>a().concat(e,E)))}),[c]),u?r.createElement(B,{text:""}):s?r.createElement(L,{error:s}):(null===(t=m)||void 0===t?void 0:t.length)>0?r.createElement("div",null,"Programs",r.createElement("ul",null,null===(p=E)||void 0===p?void 0:p.map(((e,t)=>r.createElement("li",{key:t},r.createElement("b",null,null===e||void 0===e?void 0:e.displayName)," ",w.Z.t("submitting records on every event(case or individual)")," "))))):r.createElement(r.Fragment,null);var p}const el={sources:{resource:"indicatorGroups",id:e=>{let{id:t}=e;return t},params:{fields:["indicators[id,displayName,numerator,denominator]"]}}};function tl(e){var t,l;let{id:n}=e;const{loading:o,error:d,data:u,refetch:s}=(0,v.u_)(el,{variables:{id:n}});(0,r.useEffect)((()=>{s({id:n})}),[n]);const[c,m]=(0,r.useState)({}),E=(0,i.useSetRecoilState)(R),p=(0,i.useSetRecoilState)(Z);return(0,r.useEffect)((()=>{var e,t,l,n;let r,i,o,d;const s=null===u||void 0===u||null===(e=u.sources)||void 0===e||null===(t=e.indicators)||void 0===t?void 0:t.map((e=>(r=ee(null===e||void 0===e?void 0:e.numerator,O.DATA_ELEMENT),i=ee(null===e||void 0===e?void 0:e.denominator,O.DATA_ELEMENT),[...r,...i]))),c=null===u||void 0===u||null===(l=u.sources)||void 0===l||null===(n=l.indicators)||void 0===n?void 0:n.map((e=>{o=ee(null===e||void 0===e?void 0:e.numerator,O.PROGRAM_DATA_ELEMENT),d=ee(null===e||void 0===e?void 0:e.denominator,O.PROGRAM_DATA_ELEMENT);return{prgInd:a().concat([],ee(null===e||void 0===e?void 0:e.numerator,O.PROGRAM_INDICATOR),ee(null===e||void 0===e?void 0:e.denominator,O.PROGRAM_INDICATOR)),attr:a().concat([],ee(null===e||void 0===e?void 0:e.numerator,O.ATTRIBUTES),ee(null===e||void 0===e?void 0:e.denominator,O.ATTRIBUTES)),prgDtEl:[...o,...d]}}));m({sourcesDataElement:s,sourceProgram:c}),E({aggregate:r,tracker:o}),p({aggregate:i,tracker:d})}),[u]),o?r.createElement(B,{text:""}):d?r.createElement(L,{error:d}):r.createElement("div",null,r.createElement("h3",null,w.Z.t("Data sources (Datasets/Programs)")," "),r.createElement("p",null," ",w.Z.t("Indicators in this group are captured from the following sources")," "),r.createElement("ul",null,c.sourcesDataElement?null===u||void 0===u||null===(t=u.sources)||void 0===t||null===(l=t.indicators)||void 0===l?void 0:l.map(((e,t)=>{var l;return r.createElement("li",null,r.createElement("b",null," ",null===e||void 0===e?void 0:e.displayName," "),r.createElement(Jt,{aggregate:null!==(l=null===c||void 0===c?void 0:c.sourcesDataElement[t])&&void 0!==l?l:[]}),r.createElement(Xt,{sources:null===c||void 0===c?void 0:c.sourceProgram[t]}))})):""))}tl.propTypes={id:c().string.isRequired};const ll={sources:{resource:"indicatorGroups",id:e=>{let{id:t}=e;return t},params:{fields:["indicators"]}}};function nl(e){var t,l,n,o;let{id:d}=e;const{loading:u,error:s,data:c,refetch:m}=(0,v.u_)(ll,{variables:{id:d}});(0,r.useEffect)((()=>{m({id:d})}),[d]);let E=(0,i.useRecoilValue)(b),p=(0,i.useRecoilValue)(h),f=(0,i.useRecoilValue)(T),g=(0,i.useRecoilValue)(N);if(u)return r.createElement(B,{text:""});if(s)return r.createElement(L,{error:s});E=a().uniqWith(E,a().isEqual),p=a().uniqWith(p,a().isEqual),g=a().uniqWith(g,a().isEqual),f=f.map((e=>{var t;return{id:null!==(t=e.split(".")[1])&&void 0!==t?t:""}})),g=g.map((e=>({id:e})));const y=[...f,...g];return r.createElement("div",null,r.createElement("h3",null,w.Z.t("Indicator group Facts")),r.createElement("ul",null,r.createElement("li",null," ",w.Z.t(" It has {{variables}} indicators",{variables:null===c||void 0===c||null===(t=c.sources)||void 0===t||null===(l=t.indicators)||void 0===l?void 0:l.length})," "),r.createElement("li",null,w.Z.t(" It\u2019s data elements belongs to {{variables}} datasets and {{variables2}} program sources of data",{variables:null===(n=E)||void 0===n?void 0:n.length,variables2:null===(o=p)||void 0===o?void 0:o.length})),r.createElement("li",null,r.createElement(Ye,{dataElementsArray:y}))))}const al={dataElementGroups:{resource:"indicatorGroups",id:e=>{let{id:t}=e;return t},params:{fields:["id","displayName","href"]}}};function rl(e){let{id:t}=e;const{loading:l,error:n,data:a,refetch:i}=(0,v.u_)(al,{variables:{id:t}});(0,r.useEffect)((()=>{i({id:t})}),[t]);const o=null===a||void 0===a?void 0:a.dataElementGroups;return l?r.createElement(B,{text:""}):n?r.createElement(L,{error:n}):r.createElement("div",null,r.createElement("h2",null,null===o||void 0===o?void 0:o.displayName),r.createElement("h3",null,w.Z.t("Introduction")," "),r.createElement("p",null," ",w.Z.t("Indicator Group name is  {{variables1}}.",{variables1:null===o||void 0===o?void 0:o.displayName})),r.createElement(tt,{href:null===o||void 0===o?void 0:o.href,id:null===o||void 0===o?void 0:o.id}))}const il={program:{resource:"identifiableObjects",id:e=>{let{id1:t}=e;return t},params:{fields:["displayName"]}},dataElementInIndicator:{resource:"dataElements",id:e=>{let{id2:t}=e;return t},params:{fields:["id","displayName","valueType","zeroIsSignificant","dataElementGroups[id,displayName]","categoryCombo[categories[id,displayName]]"]}}};function ol(e){var t,l,n,a,i,o,d,u;let{id:s,location:c}=e;const m=null===s||void 0===s?void 0:s.split(".")[0],E=null===s||void 0===s?void 0:s.split(".")[1],{loading:p,error:f,data:g}=(0,v.u_)(il,{variables:{id1:m,id2:E}});return p?r.createElement(B,null):f?r.createElement(L,{error:""}):r.createElement(k.U,null,r.createElement(C.W,{bordered:!0},null===g||void 0===g||null===(t=g.dataElementInIndicator)||void 0===t?void 0:t.displayName),r.createElement(C.W,{bordered:!0},c),r.createElement(C.W,{bordered:!0},null===g||void 0===g||null===(l=g.dataElementInIndicator)||void 0===l?void 0:l.valueType),r.createElement(C.W,{bordered:!0},JSON.stringify(null===g||void 0===g||null===(n=g.dataElementInIndicator)||void 0===n?void 0:n.zeroIsSignificant)),r.createElement(C.W,{bordered:!0},r.createElement("ol",null,null===g||void 0===g||null===(a=g.dataElementInIndicator)||void 0===a||null===(i=a.categoryCombo)||void 0===i?void 0:i.categories.map((e=>r.createElement("li",{key:null===e||void 0===e?void 0:e.id},null===e||void 0===e?void 0:e.displayName))))),r.createElement(C.W,{bordered:!0},null===g||void 0===g||null===(o=g.program)||void 0===o?void 0:o.displayName),r.createElement(C.W,{bordered:!0},r.createElement("ol",null,null===g||void 0===g||null===(d=g.dataElementInIndicator)||void 0===d||null===(u=d.dataElementGroups)||void 0===u?void 0:u.map((e=>r.createElement("li",{key:null===e||void 0===e?void 0:e.id},null===e||void 0===e?void 0:e.displayName))))))}ol.propTypes={id:c().string.isRequired,location:c().string.isRequired};const dl={dataElementInIndicator:{resource:"dataElements",id:e=>{let{id:t}=e;return t},params:{fields:["id","displayName","valueType","zeroIsSignificant","dataSetElements[dataSet[id,displayName]]","dataElementGroups[id,displayName]","categoryCombo[categories[id,displayName]]"]}}};function ul(e){var t,l,n,a,i,o,d,u,s;let c,{id:m,location:E}=e;if(ue(m))c=p(m).dataElementInIndicator;else{c=p(m.split(".")[0]).dataElementInIndicator}function p(e){const{loading:t,error:l,data:n}=(0,v.u_)(dl,{variables:{id:e}});return t?r.createElement(B,null):l?r.createElement(L,{error:""}):n}return r.createElement(k.U,null,r.createElement(C.W,{bordered:!0},null===(t=c)||void 0===t?void 0:t.displayName),r.createElement(C.W,{bordered:!0},E),r.createElement(C.W,{bordered:!0},null===(l=c)||void 0===l?void 0:l.valueType),r.createElement(C.W,{bordered:!0},JSON.stringify(null===(n=c)||void 0===n?void 0:n.zeroIsSignificant)),r.createElement(C.W,{bordered:!0},r.createElement("ol",null,null===(a=c)||void 0===a||null===(i=a.categoryCombo)||void 0===i?void 0:i.categories.map((e=>r.createElement("li",{key:null===e||void 0===e?void 0:e.id},null===e||void 0===e?void 0:e.displayName))))),r.createElement(C.W,{bordered:!0},r.createElement("ol",null,null===(o=c)||void 0===o||null===(d=o.dataSetElements)||void 0===d?void 0:d.map((e=>{var t,l;return r.createElement("li",{key:null===e||void 0===e||null===(t=e.dataSet)||void 0===t?void 0:t.id},null===e||void 0===e||null===(l=e.dataSet)||void 0===l?void 0:l.displayName)})))),r.createElement(C.W,{bordered:!0},r.createElement("ol",null,null===(u=c)||void 0===u||null===(s=u.dataElementGroups)||void 0===s?void 0:s.map((e=>r.createElement("li",{key:null===e||void 0===e?void 0:e.id},null===e||void 0===e?void 0:e.displayName))))))}ul.propTypes={id:c().string.isRequired,location:c().string.isRequired};function sl(){var e,t,l,n;const a=(0,i.useRecoilValue)(R),o=(0,i.useRecoilValue)(Z);return r.createElement("div",null,r.createElement("h3",null,w.Z.t("Related Data elements")," "),r.createElement("p",null,w.Z.t("The following is the summary of the data elements used in the group")),r.createElement(_.w,null,r.createElement(P.s,null,r.createElement(k.U,null,r.createElement(G.p,{bordered:!0},w.Z.t("Data Element")),r.createElement(G.p,{bordered:!0},w.Z.t("Expression part (Numerator/ Denominator)")),r.createElement(G.p,null,w.Z.t("Value Type")),r.createElement(G.p,null,w.Z.t("Zero Significance")),r.createElement(G.p,null,w.Z.t("Categories")),r.createElement(G.p,null,w.Z.t("Datasets/ Programs")),r.createElement(G.p,null,w.Z.t("Groups")))),r.createElement(U.R,null,null===a||void 0===a||null===(e=a.aggregate)||void 0===e?void 0:e.map((e=>r.createElement(ul,{key:e,id:e,location:"numerator"}))),null===a||void 0===a||null===(t=a.tracker)||void 0===t?void 0:t.map((e=>r.createElement(ol,{key:e,id:e,location:"numerator"}))),null===o||void 0===o||null===(l=o.aggregate)||void 0===l?void 0:l.map((e=>r.createElement(ul,{key:e,id:e,location:"denominator"}))),null===o||void 0===o||null===(n=o.tracker)||void 0===n?void 0:n.map((e=>r.createElement(ol,{key:e,id:e,location:"denominator"}))))))}function cl(e){const t=e.id;return r.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.createElement(rl,{id:t}),r.createElement(tl,{id:t}),r.createElement(nl,{id:t}),r.createElement(sl,null),r.createElement($,{id:t,resourceType:"indicatorGroups"}))}function ml(e){var t,l;const n=e.target,a=e.analyticsPeriodBoundaryType,i=e.offsetPeriod,o=e.periodType;return r.createElement(k.U,null,r.createElement(C.W,{bordered:!0},null===(t=re(n))||void 0===t?void 0:t.replace(/_/g," ")),r.createElement(C.W,{bordered:!0},null===(l=re(a))||void 0===l?void 0:l.replace(/_/g," ")),r.createElement(C.W,{bordered:!0,b:!0},i),r.createElement(C.W,{bordered:!0},o))}function vl(e){const t=e.rows;return r.createElement(_.w,null,r.createElement(P.s,null,r.createElement(k.U,null,r.createElement(G.p,null,"Boundary target"),r.createElement(G.p,null,"Analytics period boundary type"),r.createElement(G.p,null,"Offset period by amount"),r.createElement(G.p,null,"Period type"))),r.createElement(U.R,null,null===t||void 0===t?void 0:t.map((e=>r.createElement(ml,{key:null===e||void 0===e?void 0:e.id,tableDetail:null===e||void 0===e?void 0:e.analyticsPeriodBoundaries,target:null===e||void 0===e?void 0:e.boundaryTarget,analyticsPeriodBoundaryType:null===e||void 0===e?void 0:e.analyticsPeriodBoundaryType,offsetPeriod:null===e||void 0===e?void 0:e.offsetPeriods,periodType:null===e||void 0===e?void 0:e.offsetPeriodType})))))}function El(e){let{expression:t,filter:l}=e;return r.createElement(_.w,null,r.createElement(P.s,null,r.createElement(k.U,null,r.createElement(G.p,null),r.createElement(G.p,null,w.Z.t("Expression")),r.createElement(G.p,null,w.Z.t("Filter")))),r.createElement(U.R,null,r.createElement(k.U,null,r.createElement(C.W,{bordered:!0,tag:"th"},w.Z.t("Details")),r.createElement(C.W,{bordered:!0},r.createElement(we,{formula:t})),r.createElement(C.W,{bordered:!0},r.createElement(we,{formula:l})))))}cl.PropTypes={id:c().string.isRequired},El.propTypes={expression:c().string.isRequired,filter:c().string.isRequired};const pl={calculation:{resource:"programIndicators",id:e=>{let{id:t}=e;return t},params:{fields:["analyticsType","aggregationType","expression","filter","analyticsPeriodBoundaries[id,boundaryTarget,analyticsPeriodBoundaryType,offsetPeriods,offsetPeriodType]"]}}};function fl(e){let{id:t}=e;const{loading:l,error:n,data:a,refetch:i}=(0,v.u_)(pl,{variables:{id:t}});if((0,r.useEffect)((()=>{i({id:t})}),[t]),l)return r.createElement(B,{text:""});if(n)return r.createElement(L,{error:n});const o=null===a||void 0===a?void 0:a.calculation;return r.createElement("div",null,r.createElement("h3",null,w.Z.t(" Calculation details")),r.createElement("p",null,w.Z.t("Calculation of the values will be {{variables}} of {{variables2}} across orgunit and period.",{variables:null===o||void 0===o?void 0:o.aggregationType,variables2:null===o||void 0===o?void 0:o.analyticsType})),r.createElement("p",null,w.Z.t("Program indicator calculation will be based on Analytics Type, for distinction purposes:")),r.createElement("ul",null,(null===o||void 0===o?void 0:o.analyticsType)===A.EVENT?r.createElement("li",null,w.Z.t(" Events implies, each event from data source is considered as independent row to be counted, and properties and details of the event are used to filter events.")):(null===o||void 0===o?void 0:o.analyticsType)===A.ENROLLMENT?r.createElement("li",null,w.Z.t("Enrollment implies, each enrollment from data source is considered as independent row to be counted, and events from any stage and other properties and details of enrollment are used to filter enrollments.")):""),r.createElement("div",null,r.createElement("p",null,w.Z.t("Below are expression details on computing program indicator and it\u2019s related data source"))),r.createElement("div",null,r.createElement(El,{expression:null===o||void 0===o?void 0:o.expression,filter:null===o||void 0===o?void 0:o.filter})),r.createElement("div",null,r.createElement("p",null,w.Z.t("Below are period boundaries that determines which {{variables}} will be included in calculations of the program indicators, where for",{variables:re(null===o||void 0===o?void 0:o.analyticsType)}),(null===o||void 0===o?void 0:o.analyticsType)===A.EVENT?w.Z.t(" event date will be used."):(null===o||void 0===o?void 0:o.analyticsType)===A.ENROLLMENT?w.Z.t("enrollment analytics will be used."):"")),r.createElement("div",null,r.createElement(vl,{rows:null===o||void 0===o?void 0:o.analyticsPeriodBoundaries})))}const gl={sources:{resource:"programIndicators",id:e=>{let{id:t}=e;return t},params:{fields:["program[id,displayName]"]}}};function yl(e){var t,l;let{id:n}=e;const{loading:a,error:i,data:o,refetch:d}=(0,v.u_)(gl,{variables:{id:n}});return(0,r.useEffect)((()=>{d({id:n})}),[n]),a?r.createElement(B,{text:""}):i?r.createElement(L,{error:i}):r.createElement("div",null," ",w.Z.t("Program Indicator is captured from with following program"),r.createElement("ul",null,r.createElement("li",null,w.Z.t("{{variables}} submitting records on every event",{variables:null===o||void 0===o||null===(t=o.sources)||void 0===t||null===(l=t.program)||void 0===l?void 0:l.displayName}))))}var bl={"indicator-row-link":"indicatorGroupRow_indicator-row-link__B57i1"};function hl(e){let{list:t}=e;const[l,n]=(0,r.useState)(!1),[a,i]=(0,r.useState)(t.slice(0,3)),o=(0,kt.k6)();function d(){i((e=>{const l=e;return e.length>3?[...l.slice(0,3)]:t})),n(!l)}function u(e){o.replace("/programIndicator/"+e)}return l?r.createElement(r.Fragment,null,r.createElement("ul",null,null===a||void 0===a?void 0:a.map((e=>r.createElement("li",{key:e.id,className:bl["indicator-row-link"],onClick:()=>u(null===e||void 0===e?void 0:e.id)},null===e||void 0===e?void 0:e.displayName)))),t.length>3?r.createElement(Pt.z,{name:"Basic button",onClick:d,value:"default"},l?w.Z.t("show less"):w.Z.t("show more")):null):r.createElement(r.Fragment,null,r.createElement("ul",null,a.map((e=>r.createElement("li",{key:null===e||void 0===e?void 0:e.id,className:bl["indicator-row-link"],onClick:()=>u(null===e||void 0===e?void 0:e.id)},null===e||void 0===e?void 0:e.displayName)))),t.length>3?r.createElement(Pt.z,{name:"Basic button",onClick:d,value:"default"},l?w.Z.t("show less"):w.Z.t("show more")):null)}function Tl(e){let{no:t,name:l,code:n,indicators:a}=e;return r.createElement(k.U,null,r.createElement(C.W,{bordered:!0},t),r.createElement(C.W,{bordered:!0},l),r.createElement(C.W,{bordered:!0},n),r.createElement(C.W,{bordered:!0},r.createElement(hl,{list:a})))}hl.propTypes={list:c().array.isRequired},Tl.propTypes={no:c().string.isRequired,name:c().string.isRequired,code:c().string.isRequired,indicators:c().array.isRequired};const Nl={indicatorGroups:{resource:"programIndicators",id:e=>{let{id:t}=e;return t},params:{fields:["programIndicatorGroups[id,code,displayName,programIndicators[id,displayName]]"]}}};function Rl(e){var t,l,n,a;let{id:i}=e;const{loading:o,error:d,data:u,refetch:s}=(0,v.u_)(Nl,{variables:{id:i}});return(0,r.useEffect)((()=>{s({id:i})}),[i]),o?r.createElement(B,{text:""}):d?r.createElement(L,{error:d}):0===(null===u||void 0===u||null===(t=u.indicatorGroups)||void 0===t||null===(l=t.programIndicatorGroups)||void 0===l?void 0:l.length)?r.createElement("p",null,w.Z.t("There are no indicator facts associated with this Program Indicator")," "):r.createElement("div",null,r.createElement("h3",null,w.Z.t("Program Indicator facts")," "),r.createElement("p",null,w.Z.t("Belongs to the following program groups of indicators")," "),r.createElement("div",null,r.createElement(_.w,null,r.createElement(P.s,null,r.createElement(k.U,null,r.createElement(G.p,null,w.Z.t("#")),r.createElement(G.p,null,w.Z.t("Name")),r.createElement(G.p,null,w.Z.t("Code")),r.createElement(G.p,null,w.Z.t("Indicators")))),r.createElement(U.R,null,null===u||void 0===u||null===(n=u.indicatorGroups)||void 0===n||null===(a=n.programIndicatorGroups)||void 0===a?void 0:a.map(((e,t)=>r.createElement(Tl,{key:null===e||void 0===e?void 0:e.id,no:t,name:null===e||void 0===e?void 0:e.displayName,code:null===e||void 0===e?void 0:e.code,indicators:null===e||void 0===e?void 0:e.programIndicators})))))))}Rl.prototype={id:c().string.isRequired};const Zl={programIndicators:{resource:"programIndicators",id:e=>{let{id:t}=e;return t},params:{fields:["id","displayName","displayDescription","aggregationType","displayShortName","code","decimals","displayInForm","href"]}}};function Sl(e){let{id:t}=e;const{loading:l,error:n,data:a,refetch:i}=(0,v.u_)(Zl,{variables:{id:t}});if((0,r.useEffect)((()=>{i({id:t})}),[t]),l)return r.createElement(B,{text:""});if(n)return r.createElement(L,{error:n});const o=null===a||void 0===a?void 0:a.programIndicators;return r.createElement("div",null,r.createElement("h2",null,null===o||void 0===o?void 0:o.displayName),r.createElement("h3",null,w.Z.t("Introduction")," "),r.createElement("p",null,w.Z.t("{{variables1}} is a {{variables2}} indicator, described as {{variables3}}. It\u2019s labelled in short as {{variables4}} and has a code of {{variables5}}. In analytics it displays up to {{variables6}} decimals.",{variables1:null===o||void 0===o?void 0:o.displayName,variables2:null===o||void 0===o?void 0:o.aggregationType,variables3:null===o||void 0===o?void 0:o.displayDescription,variables4:null===o||void 0===o?void 0:o.displayShortName,variables5:null===o||void 0===o?void 0:o.code,variables6:null===o||void 0===o?void 0:o.decimals}),null!==o&&void 0!==o&&o.displayInForm?w.Z.t("It is also set to display in form"):""),r.createElement(tt,{href:null===o||void 0===o?void 0:o.href,id:null===o||void 0===o?void 0:o.id}))}function Il(e){var t;const l=null===e||void 0===e?void 0:e.legendSet;return r.createElement("li",{key:null===l||void 0===l?void 0:l.id},r.createElement("p",null,null===l||void 0===l?void 0:l.displayName," spread accross ",null===l||void 0===l||null===(t=l.legends)||void 0===t?void 0:t.length," ","classes of for analysis"),r.createElement("div",null,r.createElement(_.w,null,r.createElement(P.s,null,r.createElement(k.U,null,r.createElement(G.p,null,w.Z.t("Class")),r.createElement(G.p,null,w.Z.t("Upper")),r.createElement(G.p,null,w.Z.t("Lower")),r.createElement(G.p,null,w.Z.t("Color")))),r.createElement(U.R,null,null===l||void 0===l?void 0:l.legends.map((e=>r.createElement(k.U,{key:e.id},r.createElement(C.W,{bordered:!0},null===e||void 0===e?void 0:e.displayName),r.createElement(C.W,{bordered:!0},null===e||void 0===e?void 0:e.endValue),r.createElement(C.W,{bordered:!0},null===e||void 0===e?void 0:e.startValue),r.createElement("td",{bordered:!0,style:{background:null===e||void 0===e?void 0:e.color}}))))))))}Sl.PropTypes={id:c().string.isRequired};const Dl={legendAnalysis:{resource:"programIndicators",id:e=>{let{id:t}=e;return t},params:{fields:["id","displayName","legendSets[id,displayName,legends[id,displayName,startValue,endValue,color]]"]}}};function Al(e){var t,l,n;let{id:a}=e;const{loading:i,error:o,data:d,refetch:u}=(0,v.u_)(Dl,{variables:{id:a}});if((0,r.useEffect)((()=>{u({id:a})}),[a]),i)return r.createElement(B,{text:""});if(o)return r.createElement(L,{error:o});if(0===(null===d||void 0===d||null===(t=d.legendAnalysis)||void 0===t||null===(l=t.legendSets)||void 0===l?void 0:l.length))return r.createElement(r.Fragment,null,r.createElement("p",null,w.Z.t("There are no legends associated with these Program Indicator")," "));const s=null===d||void 0===d||null===(n=d.legendAnalysis)||void 0===n?void 0:n.legendSets;return r.createElement("div",null,r.createElement("h3",null,w.Z.t("Legends for analysis")," "),r.createElement("p",null,w.Z.t("Uses {{variables}} legends for for analysis, spread across multiple cut-off points of interest, existing legends are:",{variables:null===s||void 0===s?void 0:s.length})),r.createElement("ul",null,null===s||void 0===s?void 0:s.map((e=>r.createElement(Il,{key:null===e||void 0===e?void 0:e.id,legendSet:e})))))}function Ol(e){let{id:t}=e;return r.createElement("div",null,r.createElement("h3",null,w.Z.t("Related Indicators")," "),r.createElement(Pe,{id:t}))}function wl(e){let{id:t}=e;return r.createElement("div",null,r.createElement(Sl,{id:t}),r.createElement(yl,{id:t}),r.createElement(Rl,{id:t}),r.createElement(Al,{id:t}),r.createElement(Ol,{id:t,resourceType:"Program Indicator"}),r.createElement(fl,{id:t}),r.createElement(ze,{resourceType:"Program Indicator"}),r.createElement($,{id:t,resourceType:"programIndicators"}))}var _l=l(74073),Pl=l(62685);function kl(e){let{type:t,id:l}=e;const n=(0,v.bQ)(),a=(0,i.useRecoilCallback)((e=>{let{reset:t}=e;return()=>{t(E),t(f),t(p),t(g),t(y),t(b),t(h),t(T),t(N),t(R),t(Z)}})),[o,d]=(0,r.useState)(t),[u,s]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{!async function(){s(!0);try{var e;d(null===(e=await(0,Pl.Gy)(n,l))||void 0===e?void 0:e.type)}catch(t){console.error(t)}finally{s(!1)}}()}),[n,l]),(0,r.useEffect)((()=>()=>{a()}),[l]),u?r.createElement(_l.C7,null):o===I.INDICATOR?r.createElement($t,{id:l}):o===I.DATA_ELEMENT||o===I.PROGRAM_DATA_ELEMENT?r.createElement(Ge,{id:l}):o===I.PROGRAM_INDICATOR?r.createElement(wl,{id:l}):o===I.DATA_ELEMENT_GROUP?r.createElement(it,{id:l}):o===I.INDICATOR_GROUP?r.createElement(cl,{id:l}):o===I.FUNCTION?r.createElement(Rt,{id:l}):null}function Gl(){var e;const t=null!==(e=(0,i.useRecoilValue)(o.w))&&void 0!==e?e:[],[l,a]=(0,r.useState)((0,n.head)(t));return r.createElement("div",{style:{overflow:"hidden"},className:"column"},r.createElement(m,{selectedTab:l,dataSources:t,onTabChange:a}),r.createElement("div",{style:{overflow:"auto",maxHeight:"100%",flex:1,padding:" 0 16px"}},r.createElement(kl,{type:null===l||void 0===l?void 0:l.type,id:null===l||void 0===l?void 0:l.id})))}kl.propTypes={id:c().string.isRequired,type:c().oneOf(Object.values(I)).isRequired}}}]);
//# sourceMappingURL=1109.008109e8.chunk.js.map